[{"categories":["rust"],"content":"python urllib3 å†…å­˜æ³„æ¼é—®é¢˜å¶å°”ä¼šè¹¦å‡ºæ¥çƒ¦æˆ‘ä¸€ä¸‹ï¼Œäºæ˜¯èŒç”Ÿäº†èƒ½ä¸èƒ½ç”¨ Rust å†™ä¸€ä¸ªè¯·æ±‚åº“ ","date":"2023-09-23","objectID":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/:0:0","tags":["rust","python"],"title":"ç”¨ Rust å¼€å‘ä¸€ä¸ª python æ¨¡å—","uri":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/"},{"categories":["rust"],"content":"åˆ›å»ºé¡¹ç›® é¦–å…ˆä½¿ç”¨ cargo åˆ›å»ºä¸€ä¸ª lib é¡¹ç›®ï¼Œé¡¹ç›®åç§°å°±å« reqrs æ˜¯ request å’Œ rust çš„ç¼©å†™ cargo new reqrs --lib ç„¶åéœ€è¦åœ¨ Cargo.toml ä¸­æŒ‡å®š crate çš„ç±»å‹ä¸ºåŠ¨æ€é“¾æ¥åº“ [lib] name = \"reqrs\" crate-type = [\"cdylib\"] æŒ‡å®šä¸ºåŠ¨æ€é“¾æ¥åº“ä¹‹åé€šè¿‡ cargo build å°±ä¼šåœ¨ target/debug ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª .so æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ windows å°±æ˜¯ dll æ–‡ä»¶ å½“ç„¶ï¼Œå› ä¸ºå½“å‰é¡¹ç›®è¿˜æ²¡æœ‰å¼€å§‹ç¼–å†™ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸€äº›å…¶ä»–çš„ä¸œè¥¿ï¼Œæ¯”å¦‚åœ¨ python ä¸­å¦‚ä½•è°ƒç”¨ã€python å¦‚ä½•ç»™è¿™ä¸ªæ¨¡å—ä¼ é€’å‚æ•° ","date":"2023-09-23","objectID":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/:1:0","tags":["rust","python"],"title":"ç”¨ Rust å¼€å‘ä¸€ä¸ª python æ¨¡å—","uri":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/"},{"categories":["rust"],"content":"ä¾èµ– rust ä»£ç ç¼–è¯‘ä¸ºä¸€ä¸ªåŠ¨æ€åº“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ python ä¸­çš„ ctypes æˆ– cffi å¯¼å…¥æ¨¡å—ã€‚å½“ç„¶æˆ‘ä»¬æœ€å¸Œæœ›èƒ½ç›´æ¥å®‰è£…ï¼Œç„¶åç›´æ¥åœ¨ python ä»£ç ä¸­ importï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ maturin è¿›è¡Œæ‰“åŒ…äº†ã€‚ maturin èƒ½å¤Ÿè®©ä½¿ç”¨ pyo3ã€cffi å’Œ uniffi ç»‘å®šæ„å»ºå’Œå‘å¸ƒçš„ crateï¼Œå°†å®ƒä»¬æ‰“åŒ…æˆ python èƒ½å¤Ÿä½¿ç”¨çš„äºŒè¿›åˆ¶åŒ…ï¼Œpyo3 å’Œ maturin éƒ½æ˜¯ PyO3 è¿™ä¸ªç»„ç»‡ä¸­çš„é¡¹ç›® pyo3 èƒ½å¤Ÿå°† rust ç±»å‹å’Œ python ç±»å‹è¿›è¡Œç»‘å®šï¼Œç”¨äºåˆ›å»ºåŸç”Ÿçš„ python æ‰©å±•æ¨¡å— é‚£ä¹ˆåˆ°æ­¤å°±èƒ½å¤Ÿç¡®å®šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ maturin å°† reqrs æ‰“åŒ…ä¸ºä¸€ä¸ª python å¯ä»¥å®‰è£…çš„ä½¿ç”¨çš„æ¨¡å—ï¼Œé€šè¿‡ pyo3 æˆ‘ä»¬èƒ½å°† rust ä¸­çš„æ•°æ®ç±»å‹å’Œ python ä¸­çš„æ•°æ®ç±»å‹è¿›è¡Œäº¤äº’ç»‘å®š maturin æ˜¯å·¥å…·ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ pip è¿›è¡Œå®‰è£…ï¼Œä¸ºäº†ä¿è¯ç¯å¢ƒçš„å¹²å‡€å…ˆåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ python3 -m venv .venv ç„¶åæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ source ./.venv/bin/activate ç„¶åå®‰è£… maturin pip install maturin ç„¶åæ˜¯ reqrs é¡¹ç›®ä¾èµ–ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªè¯·æ±‚åº“ï¼Œå¯ä»¥æ˜¯ reqwest ä¹Ÿå¯ä»¥æ˜¯æ›´åº•å±‚çš„ hyper ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ reqwestï¼Œå¹¶ä¸”ä¸è€ƒè™‘å¼‚æ­¥ ç„¶åæˆ‘ä»¬è¿˜éœ€è¦ serde ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½éœ€è¦å°†è¯·æ±‚çš„å“åº”ç»“æœä¸­çš„ json æ•°æ®ååºåˆ—åŒ–ä¸ºç»“æ„ä½“ è‡³æ­¤ Cargo.toml ä¸­çš„å†…å®¹å¦‚ä¸‹ [package] name = \"reqrs\" version = \"0.1.0\" edition = \"2021\" [lib] name = \"reqrs\" crate-type = [\"cdylib\"] [dependencies] pyo3 = { version = \"0.20.0\", features = [\"extension-module\", \"serde\", \"auto-initialize\"] } reqwest = { version = \"0.11.23\", features = [\"json\", \"blocking\", \"cookies\", \"multipart\"] } serde_urlencoded = \"0.7.1\" serde = { version = \"1.0.193\", features = [\"derive\"] } serde_json = {version = \"1.0.109\", features = [\"arbitrary_precision\", \"preserve_order\"]} å¯èƒ½è¿˜éœ€è¦ä¸€äº›å…¶ä»–ä¾èµ–ï¼Œæˆ‘ä»¬åç»­å¼€å‘è¿‡ç¨‹ä¸­å†è€ƒè™‘ ","date":"2023-09-23","objectID":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/:2:0","tags":["rust","python"],"title":"ç”¨ Rust å¼€å‘ä¸€ä¸ª python æ¨¡å—","uri":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/"},{"categories":["rust"],"content":"åˆè¯• åœ¨æ­£å¼ç¼–å†™æ¨¡å—ä¹‹å‰ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ª sum å‡½æ•°è¯•è¯• // lib.rs use pyo3::prelude::*; #[pyfunction] fn sum(a: i64, b: i64) -\u003e PyResult\u003ci64\u003e { Ok(a + b) } #[pymodule] fn reqrs(py: Python, m: \u0026PyModule) -\u003e PyResult\u003c()\u003e { m.add_function(wrap_pyfunction!(sum, m)?)?; Ok(()) } ä¸Šé¢çš„ä»£ç ä¸­ä½¿ç”¨äº†ä¸¤ä¸ªè¿‡ç¨‹å® pyfunction å’Œ pymoduleï¼Œè¿‡ç¨‹å®ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™å±•å¼€ï¼Œpyfunction ä¼šå°†å‡½æ•°è¿›è¡Œä¸€äº›å¤„ç†ï¼ŒåŒ…æ‹¬ python å‡½æ•°å®šä¹‰ä»¥åŠpython ç±»å‹çš„å‚æ•°å’Œ rust ç±»å‹äº’ç›¸è½¬æ¢ã€‚pymodule ä¹Ÿæ˜¯ç±»ä¼¼çš„ä½œç”¨ï¼Œåªæ˜¯é’ˆå¯¹çš„æ˜¯æ¨¡å—ï¼Œpymodule çš„å‚æ•°æ¯”è¾ƒå›ºå®š ä¸€ä¸ªè¢« pyfunction å®æ³¨è§£çš„å‡½æ•°æƒ³è¦å¯¼å‡ºéœ€è¦åœ¨ pymodule æ³¨è§£çš„å‡½æ•°ä¸­é€šè¿‡ \u0026PyModule.add_function(wrap_pyfunction!(xxx)) æ‰èƒ½è¢«æ·»åŠ åˆ°æ¨¡å—ä¸­ çŸ­çŸ­å‡ è¡Œä»£ç ä½¿ç”¨äº†ä¸¤ä¸ªè¿‡ç¨‹å®å’Œä¸€ä¸ªå£°æ˜å®å¸®æˆ‘ä»¬å®Œæˆäº†å¾ˆå¤šå·¥ä½œï¼Œè™½ç„¶è¿™ä¼šå¯¼è‡´å®Œå…¨ç†è§£å®ƒä»¬å˜å¾—ååˆ†å›°éš¾ï¼Œä½†è¿™ä¹Ÿè¶³ä»¥è§å¾— rust å®çš„å¼ºå¤§ ","date":"2023-09-23","objectID":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/:3:0","tags":["rust","python"],"title":"ç”¨ Rust å¼€å‘ä¸€ä¸ª python æ¨¡å—","uri":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/"},{"categories":["rust"],"content":"ä½¿ç”¨ maturin ç¼–è¯‘å¹¶å®‰è£… maturin develop å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¹‹ååœ¨åº•éƒ¨å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºåˆ™è¯´æ˜æ¨¡å—å·²ç»ç¼–è¯‘å®‰è£…å®Œæˆï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦é¢å¤–çš„å·¥ä½œå°±èƒ½ç›´æ¥åœ¨ python ä¸­ä½¿ç”¨å®ƒäº† Finished dev [unoptimized + debuginfo] target(s) in 0.07s ğŸ“¦ Built wheel for CPython 3.11 to /var/folders/pj/fv48jvhj2j76t23xdtf2lrd80000gn/T/.tmpVKKo83/reqrs-0.1.0-cp311-cp311-macosx_11_0_arm64.whl âœï¸ Setting installed package as editable ğŸ›  Installed reqrs-0.1.0 æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤æ¥æŸ¥çœ‹åº“æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¹¶åœ¨ python shell ä¸­ä½¿ç”¨å®ƒ é€šè¿‡ä¸Šå›¾è¶³ä»¥è§å¾—è¿™æ˜¯å¥½ç”¨çš„ ","date":"2023-09-23","objectID":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/:3:1","tags":["rust","python"],"title":"ç”¨ Rust å¼€å‘ä¸€ä¸ª python æ¨¡å—","uri":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/"},{"categories":["rust"],"content":"å‡½æ•°è®¾è®¡ reqrs ä¸­ä¸»è¦åŒ…å«ä¸‰ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼šrequestã€getã€postï¼Œget å’Œ post è°ƒç”¨æœ€ç»ˆè°ƒç”¨çš„å‡½æ•°è¿˜æ˜¯ requestï¼Œrequest é€šè¿‡ä¼ å…¥çš„è¯·æ±‚æ–¹æ³•å†å»æ‰§è¡Œå…·ä½“é€»è¾‘ å‡½æ•°å‚æ•°ä¸Šå’Œ python ä¸­çš„ requests ä¿æŒä¸€è‡´ ","date":"2023-09-23","objectID":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/:4:0","tags":["rust","python"],"title":"ç”¨ Rust å¼€å‘ä¸€ä¸ª python æ¨¡å—","uri":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/"},{"categories":["rust"],"content":"HTTPMethod //method.rs #[pyclass(module = \"reqrs.request\", frozen)] #[derive(Debug, Clone, Copy, Default)] pub enum HTTPMethod { #[default] GET, POST, } impl ToPyObject for HTTPMethod { fn to_object(\u0026self, py: Python) -\u003e PyObject { match self { Self::GET =\u003e PyString::new(py, \"GET\").to_object(py), Self::POST =\u003e PyString::new(py, \"POST\").to_object(py), } } } impl From\u003cString\u003e for HTTPMethod { fn from(value: String) -\u003e Self { if let Ok(http_method) = HTTPMethod::from_str(value.as_str()) { return http_method; } HTTPMethod::default() } } impl FromStr for HTTPMethod { type Err = \u0026'static str; fn from_str(s: \u0026str) -\u003e Result\u003cSelf, Self::Err\u003e { match s.to_uppercase().as_str() { \"GET\" =\u003e Ok(Self::GET), \"POST\" =\u003e Ok(Self::POST), _ =\u003e Err(\"Invalid HTTPMethod\"), } } } rust ä¸­çš„ç±»å‹æƒ³è¦åœ¨ python ä¸­ä½¿ç”¨éœ€è¦ä½¿ç”¨ pyclass å®ï¼Œå¹¶ä¸”è¦ä¸ºè¿™ä¸ªç±»å‹å®ç° ToPyObject è¿™ä¸ª traitï¼Œæˆ‘ä»¬éœ€è¦å®ç° to_object æ–¹æ³•å°† rust ä¸­çš„ç±»å‹è½¬ä¸º python ä¸­çš„ç±»å‹ ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨æˆ‘ä»¬è¿˜ä¸º HTTPMethod å®ç°äº† From å’Œ FromStr è¿™ä¸¤ä¸ª trait ","date":"2023-09-23","objectID":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/:5:0","tags":["rust","python"],"title":"ç”¨ Rust å¼€å‘ä¸€ä¸ª python æ¨¡å—","uri":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/"},{"categories":["rust"],"content":"get å’Œ post get å’Œ post å‡½æ•°ç­¾åå‡ ä¹ç›¸åŒï¼Œå…¶å®å¯¹äºè¿™ä¸¤ä¸ªå‡½æ•°åŒ…æ‹¬å°†æ¥å¯èƒ½ä¼šå®ç°çš„ deleteã€headã€putã€option ç­‰å‡½æ•°æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿‡ç¨‹å®å¸®æˆ‘ä»¬å®ç°ï¼Œæ¯”å¦‚å®šä¹‰ä¸€ä¸ª requests! å® macro_rules! requests { ($name:ident) =\u003e { fn $name(...) -\u003e PyResult\u003cString\u003e { let method: HTTPMethod; match $name { get =\u003e { method = HTTPMethod::GET; }, post =\u003e { method = HTTPMethod::POST; } } request(..., method) } } } requests!(get); requests!(post); ä¸Šé¢çš„è¿‡ç¨‹å®åªæ˜¯ç¬”è€…åœ¨å†™åˆ°è¿™é‡Œçš„æ—¶å€™çªç„¶æƒ³åˆ°çš„ï¼Œå†…å®¹å¯èƒ½ä¼šæœ‰é”™è¯¯ // request.rs #[pyfunction] pub fn get( py: Python, url: String, headers: Option\u003c\u0026PyDict\u003e, params: Option\u003c\u0026PyDict\u003e, proxies: Option\u003c\u0026PyDict\u003e, timeout: Option\u003cu64\u003e, cookies: Option\u003c\u0026PyDict\u003e, allow_redirects: Option\u003cbool\u003e, ) -\u003e PyResult\u003cString\u003e { request( py, HTTPMethod::GET, url, headers, params, proxies, timeout, cookies, allow_redirects, None, None, ) } #[pyfunction] pub fn post( py: Python, url: String, headers: Option\u003c\u0026PyDict\u003e, params: Option\u003c\u0026PyDict\u003e, proxies: Option\u003c\u0026PyDict\u003e, timeout: Option\u003cu64\u003e, cookies: Option\u003c\u0026PyDict\u003e, allow_redirects: Option\u003cbool\u003e, data: Option\u003c\u0026PyAny\u003e, json: Option\u003c\u0026PyDict\u003e, ) -\u003e PyResult\u003cString\u003e { request( py, HTTPMethod::POST, url, headers, params, proxies, timeout, cookies, allow_redirects, data, json, ) } ","date":"2023-09-23","objectID":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/:6:0","tags":["rust","python"],"title":"ç”¨ Rust å¼€å‘ä¸€ä¸ª python æ¨¡å—","uri":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/"},{"categories":["rust"],"content":"serde å‰é¢å†™çš„å‡½æ•°æ¥å£ä¸ºäº†å…¼å®¹ requests.request çš„å‡½æ•°ç­¾åï¼Œå¯¼è‡´ data è¿™ä¸ªå‚æ•°åªèƒ½æ˜¯ Option\u003c\u0026PyAny\u003e ç±»å‹ï¼Œå› ä¸º data å¯èƒ½æ˜¯ dict æˆ– strï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª enum æ¥è¡¨ç¤ºï¼Œä½†æ˜¯æœ‰ç‚¹å¤šæ­¤ä¸€ä¸¾äº†ï¼Œè¿˜æœ‰ä¸€ä¸ª json å‚æ•°ï¼Œå½“ç„¶è¿™ä¸¤ä¸ªå‚æ•°åªä¼šä½¿ç”¨ä¸€ä¸ªï¼Œå› ä¸ºå®ƒä»¬åœ¨ requests.request ä¸­éƒ½è¡¨ç¤ºè¯·æ±‚çš„ bodyï¼ˆåœ¨è¿™é‡Œæˆ‘ä»¬åªè€ƒè™‘çº¯æ–‡æœ¬çš„bodyï¼‰ åœ¨ request ä¸­æˆ‘ä»¬ä¸å¾—ä¸ä¸ºäº† data è¿™ä¸ªå‚æ•°åšæ›´å¤šçš„å·¥ä½œï¼Œå› ä¸ºå®ƒå¯èƒ½æ˜¯ form bodyï¼Œä¹Ÿå¯èƒ½æ˜¯ json bodyã€‚æˆ‘ä»¬æƒ³è¦ç»™ reqwest ä¼ é€’ body å‚æ•°ï¼Œå¯ä»¥æ˜¯ form æˆ– json ä½†æ˜¯ä»–ä»¬éƒ½éœ€è¦æ˜¯ Serialize + ?Sized å› æ­¤æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå‡½æ•°èƒ½å¤Ÿå°† PyObject è½¬ä¸º Serialize + ?Sized ç±»å‹ï¼Œå½“ç„¶å¦‚æœ body çš„ç±»å‹å°±æ˜¯ textï¼Œé‚£ä¹ˆæˆ‘ä»¬å½“ç„¶ä¸åœ¨ä¹ï¼Œä½†æ˜¯ç”±äº body ä¸­çš„ç±»å‹ä¸ç¡®å®šï¼Œå¦‚æœæ˜¯ form æˆ– json æˆ‘ä»¬è¿˜ä¸å¤ªå¥½ç¡®å®šé‡Œé¢çš„å­—æ®µï¼Œæ‰€ä»¥ä¼˜å…ˆè€ƒè™‘å°† PyObject ç±»å‹è½¬ä¸º serde::Valueï¼Œå› ä¸ºè¿™æ˜¯æœ€å®¹æ˜“çš„ ç¬”è€…åœ¨ GitHub ä¸Šæ‰¾åˆ°ä¸€ä¸ªå®ç°äº†å°† PyObject è½¬ä¸º serde::Value çš„ä»£ç æ–‡ä»¶ï¼Œä½†æ˜¯ç”±äºéå¸¸é•¿æ—¶é—´æ²¡æœ‰æ›´æ–°äº†ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œäºæ˜¯å¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ éœ€è¦å®‰è£… canonical_json è¿™ä¸ªä¾èµ– # Cargo.toml canonical_json = \"0.5.0\" /// serdejson.rs use canonical_json::ser::CanonicalJSONError; use pyo3::exceptions::PyTypeError; use pyo3::prelude::*; use pyo3::types::{PyDict, PyFloat, PyList, PyTuple}; #[derive(Debug)] pub enum PyCanonicalJSONError { InvalidConversion { error: String }, PyErr { error: String }, DictKeyNotSerializable { typename: String }, InvalidFloat { value: PyObject }, InvalidCast { typename: String }, } impl From\u003cCanonicalJSONError\u003e for PyCanonicalJSONError { fn from(error: CanonicalJSONError) -\u003e PyCanonicalJSONError { PyCanonicalJSONError::InvalidConversion { error: format!(\"{:?}\", error), } } } impl From\u003cpyo3::PyErr\u003e for PyCanonicalJSONError { fn from(error: pyo3::PyErr) -\u003e PyCanonicalJSONError { PyCanonicalJSONError::PyErr { error: format!(\"{:?}\", error), } } } impl From\u003cPyCanonicalJSONError\u003e for pyo3::PyErr { fn from(e: PyCanonicalJSONError) -\u003e pyo3::PyErr { match e { PyCanonicalJSONError::InvalidConversion { error } =\u003e { PyErr::new::\u003cPyTypeError, _\u003e(format!(\"Conversion error: {:?}\", error)) } PyCanonicalJSONError::PyErr { error } =\u003e { PyErr::new::\u003cPyTypeError, _\u003e(format!(\"Python Runtime exception: {}\", error)) } PyCanonicalJSONError::DictKeyNotSerializable { typename } =\u003e { PyErr::new::\u003cPyTypeError, _\u003e(format!( \"Dictionary key is not serializable: {}\", typename )) } PyCanonicalJSONError::InvalidFloat { value } =\u003e { PyErr::new::\u003cPyTypeError, _\u003e(format!(\"Invalid float: {:?}\", value)) } PyCanonicalJSONError::InvalidCast { typename } =\u003e { PyErr::new::\u003cPyTypeError, _\u003e(format!(\"Invalid type: {}\", typename)) } } } } pub fn to_json(py: Python, obj: \u0026PyObject) -\u003e Result\u003cserde_json::Value, PyCanonicalJSONError\u003e { macro_rules! return_cast { ($t:ty, $f:expr) =\u003e { if let Ok(val) = obj.downcast::\u003c$t\u003e(py) { return $f(\u0026val); } }; } macro_rules! return_to_value { ($t:ty) =\u003e { if let Ok(val) = obj.extract::\u003c$t\u003e(py) { return serde_json::value::to_value(val).map_err(|error| { PyCanonicalJSONError::InvalidConversion { error: format!(\"{}\", error), } }); } }; } if obj.is_none(py) { return Ok(serde_json::Value::Null); } return_to_value!(String); return_to_value!(bool); return_to_value!(u64); return_to_value!(i64); return_cast!(PyDict, |x: \u0026PyDict| { let mut map = serde_json::Map::new(); for (key_obj, value) in x.iter() { let key = if key_obj.is_none() { Ok(\"null\".to_string()) } else if let Ok(val) = key_obj.extract::\u003cbool\u003e() { Ok(if val { \"true\".to_string() } else { \"false\".to_string() }) } else if let Ok(val) = key_obj.str() { Ok(val.to_string()) } else { Err(PyCanonicalJSONError::DictKeyNotSerializable { typename: key_obj .to_object(py) .as_ref(py) .get_type() .name()? .to_string(), }) }; map.insert(key?, to_json(py, \u0026value.to_object(py))?); } Ok(serde_json::Value::Object(map)) }); return_cast!(PyList, |x: \u0026PyList| Ok(serde_json::Value::Array( x.iter() .map(|item| to_json(py, \u0026item.to_object(py)).unwrap()) .collect::\u003cVec\u003cserde_json::Value\u003e\u003e() ))); return_cast!(PyTuple, |x: \u0026PyTuple| Ok(serde_json::Value::Array( x.iter() .map(|item| to_json(py, \u0026item.to_object(py)).unwrap()) .collect::\u003cVec\u003cserde_json::Value\u003e\u003e() ))); return_cast!(PyFloat, |x: \u0026PyFloat| { match serde_json::Number::from_f64(x.value()) { Some(n) =\u003e Ok(serde_json::Value::Number(n)), None =\u003e Err(PyCanonicalJSONError::InvalidFloat { value: x.to_object(py), }), } }); // At this point we can't cast it, set up the error object Err(PyCano","date":"2023-09-23","objectID":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/:7:0","tags":["rust","python"],"title":"ç”¨ Rust å¼€å‘ä¸€ä¸ª python æ¨¡å—","uri":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/"},{"categories":["rust"],"content":"request // request.rs #[pyfunction] pub fn request( py: Python, method: HTTPMethod, url: String, headers: Option\u003c\u0026PyDict\u003e, params: Option\u003c\u0026PyDict\u003e, proxies: Option\u003c\u0026PyDict\u003e, timeout: Option\u003cu64\u003e, cookies: Option\u003c\u0026PyDict\u003e, allow_redirects: Option\u003cbool\u003e, data: Option\u003c\u0026PyAny\u003e, json: Option\u003c\u0026PyDict\u003e, ) -\u003e PyResult\u003cString\u003e { let mut base_url = Url::parse(\u0026url).expect(\"invalid url\"); let mut builder = reqwest::blocking::Client::builder(); if let Some(param_args) = params { let mut args = HashMap::new(); for item in param_args.iter() { let (key, value) = item; let key_str = key.extract::\u003cString\u003e()?; let value_str = value.extract::\u003cString\u003e()?; args.insert(key_str, value_str); } let query_string = serde_urlencoded::to_string(\u0026args).expect(\"parse params args error\"); base_url.set_query(Some(\u0026query_string)); } if let Some(redirect_value) = allow_redirects { if !redirect_value { builder = builder.redirect(reqwest::redirect::Policy::none()); } } if let Some(cookie_pair) = cookies { let jar = reqwest::cookie::Jar::default(); for item in cookie_pair.iter() { let (key, value) = item; let key_str = key.extract::\u003cString\u003e()?; let value_str = value.extract::\u003cString\u003e()?; jar.add_cookie_str(\u0026format!(\"{}={}\", key_str, value_str), \u0026base_url); } builder = builder.cookie_provider(Arc::new(jar)); } if let Some(proxy) = proxies { if let Some(http_proxy_url_obj) = proxy.get_item(\"http\")? { let http_proxy_url = http_proxy_url_obj.extract::\u003cString\u003e()?; let proxy_url = Url::parse(\u0026http_proxy_url).unwrap(); let proxy = Proxy::http(format!( \"{}://{}:{}/{}\", proxy_url.scheme(), proxy_url.host_str().unwrap_or_default(), proxy_url.port().unwrap_or_default(), proxy_url.path() )) .unwrap() .basic_auth( proxy_url.username(), proxy_url.password().unwrap_or_default(), ); builder = builder.proxy(proxy); } if let Some(http_proxy_url_obj) = proxy.get_item(\"https\")? { let http_proxy_url = http_proxy_url_obj.extract::\u003cString\u003e()?; let proxy_url = Url::parse(\u0026http_proxy_url).unwrap(); let proxy = Proxy::https(format!( \"{}://{}:{}/{}\", proxy_url.scheme(), proxy_url.host_str().unwrap_or_default(), proxy_url.port().unwrap_or_default(), proxy_url.path() )) .unwrap() .basic_auth( proxy_url.username(), proxy_url.password().unwrap_or_default(), ); builder = builder.proxy(proxy); } } if let Some(timeout_value) = timeout { builder = builder.timeout(time::Duration::new(timeout_value, 0)) } let mut request_builder: reqwest::blocking::RequestBuilder; match method { HTTPMethod::GET =\u003e { request_builder = builder.build().unwrap().get(base_url); } HTTPMethod::POST =\u003e { request_builder = builder.build().unwrap().post(base_url); if let Some(data_value) = data { // åˆ¤æ–­æ˜¯dictè¿˜æ˜¯str if let Ok(dict) = data_value.downcast::\u003cPyDict\u003e() { //åˆ¤æ–­headerä¸­Content-Type if let Some(hv) = headers { if let Some(content_type) = hv.get_item(\"Content-Type\").unwrap() { let content_type_str = content_type.extract::\u003cString\u003e()?; if content_type_str.contains(\"json\") { let json_value = to_json(py, \u0026dict.to_object(py))?; request_builder = request_builder.json(\u0026json_value); } else { request_builder = request_builder.form(\u0026to_json(py, \u0026dict.to_object(py))?); } } else { request_builder = request_builder.form(\u0026to_json(py, \u0026dict.to_object(py))?); } } else { let json_value = to_json(py, \u0026dict.to_object(py))?; let s = serde_json::to_string(\u0026json_value).unwrap(); println!(\"{}\", s); request_builder = request_builder.form(\u0026json_value); } } else if let Ok(py_str) = data_value.downcast::\u003cPyString\u003e() { let body = py_str.extract::\u003cString\u003e()?; request_builder = request_builder.body(body); } } else if let Some(json_data) = json { request_builder = request_builder.json(\u0026to_json(py, \u0026json_data.to_object(py))?); } } } if let Some(header_args) = headers { let mut header_map = header::HeaderMap::new(); for item in header_args.iter() { let (key, value) = item; let key_str = key.extract::\u003cString\u003e()?; let value_str = value.extract::\u003cString\u003e()?; header_map.insert( header::HeaderName::from_str(\u0026key_str).unwrap(), header::HeaderValue::from_str(\u0026val","date":"2023-09-23","objectID":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/:8:0","tags":["rust","python"],"title":"ç”¨ Rust å¼€å‘ä¸€ä¸ª python æ¨¡å—","uri":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/"},{"categories":["rust"],"content":"å®‰è£…æµ‹è¯• æœ€ååªéœ€è¦å°†å‡½æ•°å’Œç±»å¯¼å‡ºå°±å¯ä»¥äº† // lib.rs #[pymodule] fn reqrs(py: Python, m: \u0026PyModule) -\u003e PyResult\u003c()\u003e { m.add_function(wrap_pyfunction!(request::request, m)?)?; m.add_function(wrap_pyfunction!(request::post, m)?)?; m.add_function(wrap_pyfunction!(request::get, m)?)?; m.add_class::\u003crequest::HTTPMethod\u003e()?; Ok(()) } æœ€åç¬”è€…å·²ç»æµ‹è¯•æˆåŠŸ ","date":"2023-09-23","objectID":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/:9:0","tags":["rust","python"],"title":"ç”¨ Rust å¼€å‘ä¸€ä¸ª python æ¨¡å—","uri":"/posts/rust_%E5%BC%80%E5%8F%91python%E6%A8%A1%E5%9D%97/"},{"categories":["rust"],"content":" Send å’Œ Sync è¿™ä¸¤ä¸ª Trait åœ¨è·¨çº¿ç¨‹çš„æ—¶å€™éœ€è¦å…³æ³¨ Send: A type is Send if it is safe to send it to another thread. Sync: A type is Sync if it is safe to share between threads (T is Sync if and only if \u0026T is Send) Send å’Œ Sync æ˜¯ Rust å¹¶å‘æœºåˆ¶çš„åŸºç¡€ã€‚å› æ­¤ï¼ŒRust èµ‹äºˆå®ƒä»¬è®¸å¤šçš„ç‰¹æ€§ï¼Œä»¥ä¿è¯å®ƒä»¬èƒ½æ­£ç¡®å·¥ä½œã€‚é¦–å½“å…¶å†²çš„ï¼Œå®ƒä»¬éƒ½æ˜¯éå®‰å…¨ traitã€‚è¿™è¡¨æ˜å®ƒä»¬çš„å®ç°ä¹Ÿæ˜¯éå®‰å…¨çš„ï¼Œè€Œå…¶ä»–çš„éå®‰å…¨ä»£ç åˆ™å¯ä»¥å‡è®¾è¿™äº›å®ç°æ˜¯æ­£ç¡®çš„ã€‚ç”±äºå®ƒä»¬æ˜¯æ ‡å¿— traitï¼ˆå®ƒä»¬æ²¡æœ‰ä»»ä½•å…³è”çš„æ–¹æ³•ï¼‰ï¼Œâ€œæ­£ç¡®åœ°å®ç°â€ ä»…ä»…æ„å‘³ç€å®ç°æ»¡è¶³å®ƒæ‰€éœ€è¦çš„å†…éƒ¨ç‰¹å¾ã€‚ä¸æ­£ç¡®åœ°å®ç° Send å’Œ Sync ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚ Send å’Œ Sync è¿˜æ˜¯è‡ªåŠ¨æ¨å¯¼çš„ traitã€‚å’Œå…¶ä»–çš„ trait ä¸åŒï¼Œå¦‚æœä¸€ä¸ªç±»å‹å®Œå…¨ç”± Send æˆ– Sync ç»„æˆï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å‹æœ¬èº«ä¹Ÿæ˜¯ Send æˆ– Syncã€‚å‡ ä¹æ‰€æœ‰çš„åŸºæœ¬ç±»å‹éƒ½æ˜¯ Send å’Œ Syncï¼Œå› æ­¤ä½ èƒ½è§åˆ°çš„å¾ˆå¤šç±»å‹ä¹Ÿå°±éƒ½æ˜¯ Send å’Œ Syncã€‚ å¦‚æœæ˜¯åœ¨å•çº¿ç¨‹çš„å¼‚æ­¥æ‰§è¡Œå¼•æ“ä¸­ï¼Œç±»å‹æ˜¯å¦ Sync å…¶å®æ˜¯æ— æ‰€è°“çš„ï¼Œå› ä¸ºæ— æ³•è¾¾æˆç«Ÿæ€æ¡ä»¶ï¼Œä½†æ˜¯åœ¨ Tokio ä¸­ï¼Œå¼‚æ­¥æ‰§è¡Œå¼•æ“æ˜¯å¯ä»¥å¤šçº¿ç¨‹æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å¿…é¡»å¦‚æœå¯å˜çš„æ•°æ®åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ä¸€å®šæ˜¯éœ€è¦æ˜¯ Sync Rc\u003cT\u003e ä¸€å®šæ˜¯ !Send \u0026\u0026 !Sync å› ä¸ºåœ¨ Rc ä¸­æ˜¯å°†å¯¹è±¡å¼•ç”¨ Copy äº†å¤šä»½ï¼Œå¹¶ä¸” Rc ä¸­çš„è®¡æ•°å™¨æœ¬èº«å°±ä¸æ˜¯ Sendï¼Œä¹Ÿä¸æ˜¯ Sync å¦‚æœä½¿ç”¨ Arc\u003cT\u003e é‚£ä¹ˆè¿™ä¸ª Arc\u003cT\u003e æ˜¯ä¸æ˜¯ Send å’Œ Sync è¦å–å†³äº T ","date":"2023-08-24","objectID":"/posts/rust_send_sync/:0:0","tags":["rust"],"title":"Rust Send å’Œ Sync","uri":"/posts/rust_send_sync/"},{"categories":["rust"],"content":"Rc åªèƒ½åœ¨å•çº¿ç¨‹ä¸­ä½¿ç”¨ use std::thread; use std::rc::Rc; fn main() { let v = Rc::new(5); let t = thread::spawn(move || { println!(\"{}\",v); }); t.join().unwrap(); } ä¸Šé¢çš„ä»£ç å°† v çš„æ‰€æœ‰æƒé€šè¿‡ move è½¬ç§»åˆ°å­çº¿ç¨‹ä¸­æ˜¯ä¸æ­£ç¡®çš„ è¿è¡Œ cargo build ä¹‹åä¼šæŠ¥é”™ error[E0277]: `Rc\u003ci32\u003e` cannot be sent between threads safely --\u003e src/main.rs:5:27 | 5 | let t = thread::spawn(move || { | ------------- ^------ | | | | _____________|_____________within this `{closure@src/main.rs:5:27: 5:34}` | | | | | required by a bound introduced by this call 6 | | println!(\"{}\", v); 7 | | }); | |_____^ `Rc\u003ci32\u003e` cannot be sent between threads safely | = help: within `{closure@src/main.rs:5:27: 5:34}`, the trait `Send` is not implemented for `Rc\u003ci32\u003e` æ„æ€æ˜¯è¯´ Rc\u003ci32\u003e æ²¡æœ‰å®ç° Send è¿™ä¸ª trait ","date":"2023-08-24","objectID":"/posts/rust_send_sync/:1:0","tags":["rust"],"title":"Rust Send å’Œ Sync","uri":"/posts/rust_send_sync/"},{"categories":["rust"],"content":"Rc å’Œ Arc åœ¨ Rust å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå¦‚æœè¦åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«å˜é‡ä¸€èˆ¬ä¼šä½¿ç”¨ Arcï¼ŒArc å°±æ˜¯ Atomic Reference Count ä¹Ÿå°±æ˜¯ Atomic çš„ Rc é€šè¿‡æºç å¯ä»¥çœ‹åˆ° Rc ä¸ Arc çš„åŒºåˆ« #[stable(feature = \"rust1\", since = \"1.0.0\")] impl\u003cT: ?Sized, A: Allocator\u003e !Sync for Rc\u003cT, A\u003e {} #[stable(feature = \"rust1\", since = \"1.0.0\")] impl\u003cT: ?Sized, A: Allocator\u003e !Sync for Rc\u003cT, A\u003e {} #[stable(feature = \"rust1\", since = \"1.0.0\")] unsafe impl\u003cT: ?Sized + Sync + Send, A: Allocator + Send\u003e Send for Arc\u003cT, A\u003e {} #[stable(feature = \"rust1\", since = \"1.0.0\")] unsafe impl\u003cT: ?Sized + Sync + Send, A: Allocator + Sync\u003e Sync for Arc\u003cT, A\u003e {} Rc\u003cT, A\u003e ç§»é™¤äº† Send å’Œ Sync è¿™ä¸¤ä¸ªç‰¹å¾ï¼Œè€Œ Arc åˆ™ç›¸åï¼Œå®ç°äº† Sync + Send ","date":"2023-08-24","objectID":"/posts/rust_send_sync/:2:0","tags":["rust"],"title":"Rust Send å’Œ Sync","uri":"/posts/rust_send_sync/"},{"categories":["rust"],"content":"RwLock å’Œ Mutex Rust ä¸­ Mutex åªå…³æ³¨ç‹¬å è®¿é—®ï¼Œå³ä½¿ç¨‹åºæƒ³è¦æŸ¥çœ‹æ•°æ®ï¼ŒMutexGuard ä¹Ÿä¼šæä¾›å¯¹å—ä¿æŠ¤å¯¹è±¡çš„ç‹¬å å¼•ç”¨ã€‚ RwLock æ˜¯ Mutex çš„å¤æ‚ç‰ˆæœ¬ï¼Œå®ƒèƒ½ç†è§£ç‹¬å è®¿é—®å’Œå…±äº«è®¿é—®çš„åŒºåˆ«ï¼Œå³è¯»å’Œå†™çš„åŒºåˆ«ã€‚å®ƒæœ‰ä¸‰ç§çŠ¶æ€ï¼šæœªé”å®šã€å•ä¸ªå†™é”å®šã€å’Œä»»æ„æ•°é‡çš„è¯»é”å®šï¼Œå®ƒæ›´å¸¸ç”¨äºè¯»å¤šå†™å°‘çš„æ•°æ®ã€‚ RwLock çš„æ¥å£åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œå®ƒæ²¡æœ‰ç‹¬å çš„ lock æ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨äº† read å’Œ write æ–¹æ³•åˆ†åˆ«ä»¥è¯»å†™çš„èº«ä»½è¿›è¡Œé”å®šã€‚å®ƒå¸¦æœ‰ä¸¤ç§ä¿æŠ¤ç±»å‹ï¼Œä¸€ç§æ˜¯ç”¨äºè¯»çš„ RwLockReadGuardï¼ŒRwLockReadGuard å®ç°äº† Deref ç‰¹æ€§ï¼Œä½¿è¡Œä¸ºç±»ä¼¼äºå—ä¿æŠ¤æ•°æ®çš„å…±äº«å¼•ç”¨ï¼›è¿˜æœ‰ä¸€ç§æ˜¯ç”¨äºå†™çš„ RwLockWriteGuardï¼ŒRwLockWriteGuard å®ç°äº† DerefMut åè®®ï¼Œä½¿è¡Œä¸ºç±»ä¼¼äºç‹¬å å¼•ç”¨ #[stable(feature = \"rust1\", since = \"1.0.0\")] unsafe impl\u003cT: ?Sized + Send\u003e Send for RwLock\u003cT\u003e {} #[stable(feature = \"rust1\", since = \"1.0.0\")] unsafe impl\u003cT: ?Sized + Send + Sync\u003e Sync for RwLock\u003cT\u003e {} #[stable(feature = \"rust1\", since = \"1.0.0\")] unsafe impl\u003cT: ?Sized + Send\u003e Send for Mutex\u003cT\u003e {} #[stable(feature = \"rust1\", since = \"1.0.0\")] unsafe impl\u003cT: ?Sized + Send\u003e Sync for Mutex\u003cT\u003e {} RwLock å’Œ Mutex éƒ½å®ç°äº† Send + Sync è¿™ä¹Ÿè¯´æ˜ rust å…è®¸é€šè¿‡å®ƒä»¬å°† T å‘é€åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼ŒåŒæ—¶ä¹Ÿå…è®¸å®ƒä»¬åœ¨å¤šä¸ªçº¿ç¨‹æŒæœ‰å—ä¿æŠ¤çš„å‰§çš„å…±äº«å¼•ç”¨ ","date":"2023-08-24","objectID":"/posts/rust_send_sync/:3:0","tags":["rust"],"title":"Rust Send å’Œ Sync","uri":"/posts/rust_send_sync/"},{"categories":["rust"],"content":"cargo 1.68 ç‰ˆæœ¬å¼€å§‹æ”¯æŒç¨€ç–ç´¢å¼•ï¼šä¸å†éœ€è¦å®Œæ•´å…‹éš† crates.io-index ä»“åº“ï¼Œå¯ä»¥åŠ å¿«è·å–åŒ…çš„é€Ÿåº¦ã€‚å¦‚æœ cargo ç‰ˆæœ¬å¤§äºç­‰äº 1.68ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è€Œä¸éœ€è¦å¼€å¯ nightlyã€‚ ","date":"2023-08-22","objectID":"/posts/cargo_mirrors/:0:0","tags":["rust"],"title":"Cargoé•œåƒä»“åº“è®¾ç½®","uri":"/posts/cargo_mirrors/"},{"categories":["rust"],"content":"cargo è®¾ç½®å›½å†…æº config file path: $HOME/.cargo/config [source.crates-io] replace-with = 'tuna' [source.tuna] registry = \"sparse+https://mirrors.tuna.tsinghua.edu.cn/crates.io-index/\" å¦‚æœæ„Ÿè§‰æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™çš„é•œåƒæ¯”è¾ƒæ…¢çš„è¯å¯ä»¥ä½¿ç”¨å­—èŠ‚çš„é•œåƒ http://rsproxy.cn/ ","date":"2023-08-22","objectID":"/posts/cargo_mirrors/:1:0","tags":["rust"],"title":"Cargoé•œåƒä»“åº“è®¾ç½®","uri":"/posts/cargo_mirrors/"},{"categories":["tool"],"content":"å®‰è£… å®‰è£…éƒ¨åˆ†å‚è€ƒæ¸…åå¤§å­¦å¼€æºé•œåƒç«™ å¦‚æœæœ‰ä»£ç†å¯ä»¥ç›´æ¥ä½¿ç”¨å®˜æ–¹æ–‡æ¡£ä¸­çš„æ–¹å¼ç›´æ¥å®‰è£… ","date":"2023-08-21","objectID":"/posts/homebrew_install/:1:0","tags":["Mac","Linux"],"title":"Homebrew å®‰è£…å’Œæ¢æº","uri":"/posts/homebrew_install/"},{"categories":["tool"],"content":"æ›¿æ¢æº åŒæ ·å‚è€ƒæ¸…åå¤§å­¦å¼€æºé•œåƒç«™çš„æ–‡æ¡£ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œhomebrewç¨‹åºæ˜¯è„šæœ¬ç¨‹åºï¼Œå¯ä»¥é€šè¿‡æ›´æ–°ä»“åº“çš„æ–¹å¼æ›´æ–° æŸ¥çœ‹ brew.git å½“å‰æº cd \"$(brew --repo)\" \u0026\u0026 git remote -v æŸ¥çœ‹ homebrew-core.git å½“å‰æº cd \"$(brew --repo homebrew/core)\" \u0026\u0026 git remote -v å½“å‰ç‰ˆæœ¬çš„æ–‡æ¡£ä¸­æç¤ºäº† brew 4.0 èµ·ï¼Œå¤§éƒ¨åˆ† Homebrew ç”¨æˆ·æ— éœ€è®¾ç½® homebrew/core å’Œ homebrew/cask é•œåƒï¼Œåªéœ€è®¾ç½® HOMEBREW_API_DOMAIN å³å¯ã€‚å¦‚æœéœ€è¦ä½¿ç”¨ Homebrew çš„å¼€å‘å‘½ä»¤ (å¦‚ brew cat \u003cformula\u003e)ï¼Œåˆ™ä»ç„¶éœ€è¦è®¾ç½® homebrew/core å’Œ homebrew/cask é•œåƒã€‚ æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥æ”¾å…¥ $HOME/.bashrc æˆ–è€… $HOME/.zshrc export HOMEBREW_BOTTLE_DOMAIN=\"https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles\" export HOMEBREW_API_DOMAIN=\"https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/api\" export HOMEBREW_BREW_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git\" export HOMEBREW_CORE_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git\" è®¾ç½®å¥½å¹¶åŠ è½½ç¯å¢ƒå˜é‡åï¼Œè¿›è¡Œæ›´æ–° brew update å¦‚æœéœ€è¦è®¾ç½® tap ä»“åº“è¿˜éœ€è¦è¿›è¡Œæ›´æ–° brew tap --custom-remote --force-auto-update homebrew/cask-fonts https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask-fonts.git brew tap --custom-remote --force-auto-update homebrew/cask-versions https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask-versions.git brew tap --custom-remote --force-auto-update homebrew/command-not-found https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-command-not-found.git brew tap --custom-remote --force-auto-update homebrew/services https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-services.git brew update ","date":"2023-08-21","objectID":"/posts/homebrew_install/:2:0","tags":["Mac","Linux"],"title":"Homebrew å®‰è£…å’Œæ¢æº","uri":"/posts/homebrew_install/"},{"categories":["tool"],"content":"å®‰è£… brew cask brew install brew-cask ","date":"2023-08-21","objectID":"/posts/homebrew_install/:3:0","tags":["Mac","Linux"],"title":"Homebrew å®‰è£…å’Œæ¢æº","uri":"/posts/homebrew_install/"},{"categories":["python"],"content":" ä»¥ä¸‹åŠŸèƒ½ä¸­ä¸ç®¡æ˜¯é™æ€æ£€æŸ¥æ’ä»¶ã€æ ¼å¼åŒ–å·¥å…·é…ç½®ã€launch profile ç­‰ï¼ŒåŸºæœ¬éƒ½å¯ä»¥ä½¿ç”¨ pycharm å’Œ vscode åšåˆ°ï¼Œä½†æ˜¯éƒ½åŒæ—¶åšåˆ°æ˜¯ä¸å¯èƒ½çš„ï¼Œåƒ black åœ¨ pycharm ä¸­é…ç½®èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œå¼€å‘ç¯å¢ƒä¾èµ–éƒ½éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹åŒ…ç®¡ç†å·¥å…·ï¼Œå¹¶ä¸”ä¾èµ–å…³ç³»æ··ä¹±ï¼Œlaunch profile æ¯ä¸€ä¸ªç¼–è¾‘å™¨éƒ½è¦é…ç½®ï¼Œè€Œ poetry åŒæ—¶åšåˆ°äº†ï¼Œå¹¶ä¸”è®©æ‰€æœ‰ç«¯çš„ä½“éªŒéƒ½ç›¸åŒ å‰æƒ…æè¦ï¼šé˜…è¯»æœ¬æ–‡ä¹‹å‰ä½ è‡³å°‘éœ€è¦çŸ¥é“ä»€ä¹ˆæ˜¯è™šæ‹Ÿç¯å¢ƒï¼Œç¬”è€…ä½¿ç”¨æ“ä½œç³»ç»Ÿä¸º Debianï¼Œç¼–è¾‘å™¨ä¸º Neovim ","date":"2023-05-20","objectID":"/posts/poetry2/:0:0","tags":["python"],"title":"poetry - python çš„åŒ…ç®¡ç†å·¥å…·","uri":"/posts/poetry2/"},{"categories":["python"],"content":"å®‰è£… pip3 install poetry ","date":"2023-05-20","objectID":"/posts/poetry2/:1:0","tags":["python"],"title":"poetry - python çš„åŒ…ç®¡ç†å·¥å…·","uri":"/posts/poetry2/"},{"categories":["python"],"content":"è®¾ç½®æº æ–¹å¼ä¸€ ä½¿ç”¨ poetry-plugin-pypi-mirror æ’ä»¶å®ç°å…¨å±€æ›¿æ¢ å®‰è£…æ’ä»¶ poetry self add poetry-plugin-pypi-mirror ä½¿ç”¨ poetry å®‰è£…æ’ä»¶é€Ÿåº¦å¯èƒ½ä¼šå¾ˆæ…¢ï¼Œå¯ä»¥ä½¿ç”¨ pip è¿›è¡Œå®‰è£… pip3 install poetry-plugin-pypi-mirror é…ç½® ä¿®æ”¹poetryé…ç½®æ–‡ä»¶ $HOME/.config/pypoetry/config.toml [plugins] [plugins.pypi_mirror] url = \"https://pypi.tuna.tsinghua.edu.cn/simple/\" æ–¹å¼äºŒ é¡¹ç›®åˆ›å»ºååœ¨é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­é…ç½® [[tool.poetry.source]] name = \"tsinghua\" default = true url = \"https://pypi.tuna.tsinghua.edu.cn/simple/\" ","date":"2023-05-20","objectID":"/posts/poetry2/:2:0","tags":["python"],"title":"poetry - python çš„åŒ…ç®¡ç†å·¥å…·","uri":"/posts/poetry2/"},{"categories":["python"],"content":"åˆå§‹åŒ– æ–°å»ºé¡¹ç›® poetry new project-name å·²æœ‰é¡¹ç›®åˆå§‹åŒ– poetry init ","date":"2023-05-20","objectID":"/posts/poetry2/:3:0","tags":["python"],"title":"poetry - python çš„åŒ…ç®¡ç†å·¥å…·","uri":"/posts/poetry2/"},{"categories":["python"],"content":"é…ç½® mypy æ’ä»¶(å¦‚æœéœ€è¦) mypy æ’ä»¶çš„ä½œç”¨æ˜¯å¸®åŠ© python åšé™æ€ç±»å‹æ£€æŸ¥ sqlalchemy-stubs sqlalchemy-stubs -\u003e sqlalchemy å®‰è£… poerty add --group=dev sqlalchemy-stubs [tool.mypy] plugins = [\"sqlmypy\"] pydantic.mypy pydantic.mypy -\u003e pydantic [tool.mypy] plugins = [\"pydantic.mypy\"] ","date":"2023-05-20","objectID":"/posts/poetry2/:4:0","tags":["python"],"title":"poetry - python çš„åŒ…ç®¡ç†å·¥å…·","uri":"/posts/poetry2/"},{"categories":["python"],"content":"é…ç½®æ ¼å¼åŒ–å·¥å…· ç¼–è¾‘ pyproject.toml [tool.black] line-length = 100 target-version = ['py38', 'py39'] [tool.isort] profile = \"black\" include_trailing_comma = true multi_line_output = 3 skip = [\".venv\", \".git\"] å®‰è£…isortå’Œblackä¸ºé¡¹ç›®å¼€å‘ä¾èµ– poetry add --group=dev isort black ","date":"2023-05-20","objectID":"/posts/poetry2/:5:0","tags":["python"],"title":"poetry - python çš„åŒ…ç®¡ç†å·¥å…·","uri":"/posts/poetry2/"},{"categories":["python"],"content":"å®‰è£… taskipy è¾…åŠ©å·¥å…· taskipy èƒ½å¤Ÿå¸®åŠ©ä½¿ç”¨poetryçš„å¼€å‘è€…ç®€åŒ–å‘½ä»¤ poetry add --group=dev taskipy å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨æµ‹è¯•æ¡†æ¶æˆ–è€…è¿è¡Œä»£ç æœ‰å¤æ‚çš„å¯åŠ¨å‚æ•°çš„æ—¶å€™ï¼Œtaskipyå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼Œä»¥ isort å’Œ black ä¸¾ä¾‹ [tool.taskipy.tasks] isort = \"isort .\" black = \"black .\" è¿™é‡Œå‚æ•°å°‘æ˜¯å› ä¸ºåœ¨ä¸Šé¢å·²ç»é…ç½®è¿‡äº†ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦å†™çš„å‚æ•°å¾ˆå°‘ æŸ¥çœ‹å·²æœ‰ task poetry run task --list è¿è¡Œ task poetry run task black ","date":"2023-05-20","objectID":"/posts/poetry2/:6:0","tags":["python"],"title":"poetry - python çš„åŒ…ç®¡ç†å·¥å…·","uri":"/posts/poetry2/"},{"categories":["python"],"content":"å®‰è£…ç¬¬ä¸‰æ–¹åŒ… poetry add package-name poetry ä¸­å¦‚æœä¸åŒç¯å¢ƒæœ‰ä¸åŒçš„ä¾èµ–å¯ä»¥ä½¿ç”¨ group è¿›è¡ŒåŒºåˆ†ï¼Œæ¯”å¦‚å¼€å‘ç¯å¢ƒã€æ–‡ä»¶æ„å»ºç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿæˆç¯å¢ƒç­‰ é€šè¿‡æŒ‡å®š group å‚æ•°å¯¹ä¾èµ–è¿›è¡Œåˆ†ç»„ poetry add --group=dev isort å½“å¯¹ä¸€ä¸ªå·²æœ‰çš„ poetry é¡¹ç›®å®‰è£…ä¾èµ–çš„æ—¶å€™å¯ä»¥æŒ‡å®šåªå®‰è£…çš„åˆ†ç»„ poetry install --only dev å› ä¸ºåœºæ™¯è¿‡äºä¸°å¯Œï¼Œè¶…è¿‡äº†ç¬”è€…ä½¿ç”¨èŒƒç•´ï¼Œæ›´å¤šä½¿ç”¨æ–¹æ³•æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ https://python-poetry.org/docs/managing-dependencies/#optional-groups ","date":"2023-05-20","objectID":"/posts/poetry2/:7:0","tags":["python"],"title":"poetry - python çš„åŒ…ç®¡ç†å·¥å…·","uri":"/posts/poetry2/"},{"categories":["python"],"content":"ä¸€äº›å¯èƒ½æœ‰ç”¨çš„é…ç½® $HOME/.config/pypoetry/config.toml [virtualenvs] in-project = true # å°†è™šæ‹Ÿç¯å¢ƒåˆ›å»ºåœ¨é¡¹ç›®ä¸­ ","date":"2023-05-20","objectID":"/posts/poetry2/:8:0","tags":["python"],"title":"poetry - python çš„åŒ…ç®¡ç†å·¥å…·","uri":"/posts/poetry2/"},{"categories":["python"],"content":"ç»“è¯­ ä½¿ç”¨é›†æˆç¯å¢ƒå›ºç„¶æ–¹ä¾¿ï¼Œä½†æ˜¯å½“é¢ä¸´æ˜‚è´µçš„è®¸å¯è¯çš„æ—¶å€™æˆ‘é€‰æ‹©äº†å¼€æºçš„ Neovim ï¼Œå› ä¸ºvscodeåœ¨ python ä¸Šçš„ä½“éªŒå¹¶ä¸å¥½ï¼Œæˆ–è€…è¯´æ˜¯åœ¨åŠ¨æ€ç±»å‹è¯­è¨€ä¸Šçš„ä½“éªŒéƒ½ä¸å¥½ã€‚è¿˜æœ‰ä¸€ä¸ªåŸå› ï¼Œå½“é¡¹ç›®ä¸Šçº¿çš„æ—¶å€™å¦‚æœä¸çŸ¥é“é¡¹ç›®æ€ä¹ˆåšç¯å¢ƒéš”ç¦»é‚£ä¹ˆè¿™ä¸ªé¡¹ç›®æ˜¯éå¸¸å±é™©çš„ï¼Œé™¤äº†å†™ä»£ç è¿˜åº”è¯¥æŒæ¡æ›´å¤šå‘¨è¾¹çš„æŠ€èƒ½ ","date":"2023-05-20","objectID":"/posts/poetry2/:9:0","tags":["python"],"title":"poetry - python çš„åŒ…ç®¡ç†å·¥å…·","uri":"/posts/poetry2/"},{"categories":["Go"],"content":"Contextæ˜¯goä¸­ä¸“é—¨ç”¨æ¥å¤„ç†å¤šä¸ªgoroutineä¹‹é—´ä¸Šä¸‹æ–‡ç®¡ç†çš„é—®é¢˜ï¼Œåœ¨go1.7çš„æ—¶å€™è¢«åŠ å…¥goçš„æ ‡å‡†åº“ä¸­ goå®˜æ–¹ä¸ºä»€ä¹ˆè¦å°†ContextåŠ å…¥æ ‡å‡†åº“å‘¢ï¼Ÿ åœ¨goroutineä¸­æˆ‘ä»¬æƒ³è®©ä¸€ä¸ªgoroutineé€€å‡ºï¼Œå¯ä»¥æœ‰å¤šç§æ–¹æ³•ï¼Œé™¤äº†ä½¿ç”¨channelè¿˜å¯ä»¥ä½¿ç”¨å…¨å±€å˜é‡çš„æ–¹å¼ wg = sync.WithGroup() var exit bool func worker() { for !exit { fmt.Println(\"worker\") time.Sleep(time.Second) } wg.Done() } func main() { wg.Add(1) go worker() time.Sleep(time.Second * 3) // sleep3ç§’ä»¥å…ç¨‹åºè¿‡å¿«é€€å‡º exit = true // ä¿®æ”¹å…¨å±€å˜é‡å®ç°å­goroutineçš„é€€å‡º wg.Wait() fmt.Println(\"over\") } ç¨‹åºçš„å¼€å¤´å£°æ˜äº†ä¸€ä¸ªå…¨å±€çš„boolç±»å‹çš„exitï¼Œå› ä¸ºå¼€å§‹çš„æ—¶å€™æ²¡æœ‰è¿›è¡Œèµ‹å€¼ï¼Œæ‰€ä»¥exitä¸ºboolé»˜è®¤å€¼false ä½†æ˜¯å…¨å±€å˜é‡çš„æ–¹å¼å¹¶ä¸å®¹æ˜“ç»´æŠ¤ï¼Œä¸ç®¡æ˜¯åœ¨è·¨åŒ…æ—¶ä¸å®¹æ˜“ç»´æŠ¤ï¼Œå½“æˆ‘ä»¬çš„goroutineä¸­å†å¯åŠ¨ä¸€ä¸ªå­goroutineæ—¶å°†ä¼šéš¾ä»¥æ§åˆ¶ æˆ‘ä»¬æƒ³è®©ä¸€ä¸ªgoroutineé€€å‡ºçš„æ–¹å¼å¤šç§å¤šæ ·ï¼Œå¯èƒ½ä¸€ä¸ªç¨‹åºå‘˜å°±æœ‰ä¸€ç§è‡ªå·±åˆ›é€ çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå½“å¤§å®¶åœ¨ååŒå·¥ä½œçš„æ—¶å€™ç¨‹åºå°±ä¼šååˆ†çš„æ··ä¹±ï¼Œä¸ºäº†çº¦æŸè¿™ç§è¡Œä¸ºï¼Œgoå®˜æ–¹å°±æ¨å‡ºäº†Contextæ ‡å‡†åº“ï¼Œé‚£ä¹ˆæ ‡å‡†å°±å¾—åˆ°äº†ç»Ÿä¸€ context.Context æ¥å£å®šä¹‰äº†å››ä¸ªéœ€è¦å®ç°çš„æ–¹æ³•ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š Deadline â€” è¿”å› context.Context è¢«å–æ¶ˆçš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯å®Œæˆå·¥ä½œçš„æˆªæ­¢æ—¥æœŸ Done â€” è¿”å›ä¸€ä¸ª Channelï¼Œè¿™ä¸ª Channel ä¼šåœ¨å½“å‰å·¥ä½œå®Œæˆæˆ–è€…ä¸Šä¸‹æ–‡è¢«å–æ¶ˆåå…³é—­ï¼Œå¤šæ¬¡è°ƒç”¨ Done æ–¹æ³•ä¼šè¿”å›åŒä¸€ä¸ª Channel Err â€” è¿”å› context.Context ç»“æŸçš„åŸå› ï¼Œå®ƒåªä¼šåœ¨ Done æ–¹æ³•å¯¹åº”çš„ Channel å…³é—­æ—¶è¿”å›éç©ºçš„å€¼ å¦‚æœ context.Context è¢«å–æ¶ˆï¼Œä¼šè¿”å› Canceled é”™è¯¯ å¦‚æœ context.Context è¶…æ—¶ï¼Œä¼šè¿”å› DeadlineExceeded é”™è¯¯ Value â€” ä» context.Context ä¸­è·å–é”®å¯¹åº”çš„å€¼ï¼Œå¯¹äºåŒä¸€ä¸ªä¸Šä¸‹æ–‡æ¥è¯´ï¼Œå¤šæ¬¡è°ƒç”¨ Value å¹¶ä¼ å…¥ç›¸åŒçš„ Key ä¼šè¿”å›ç›¸åŒçš„ç»“æœï¼Œè¯¥æ–¹æ³•å¯ä»¥ç”¨æ¥ä¼ é€’è¯·æ±‚ç‰¹å®šçš„æ•°æ® type Context interface { Deadline() (deadline time.Time, ok bool) Done() \u003c-chan struct{} Err() error Value(key interface{}) interface{} } context åŒ…ä¸­æä¾›çš„ context.Backgroundã€context.TODOã€context.WithDeadline å’Œ context.WithValue å‡½æ•°ä¼šè¿”å›å®ç°è¯¥æ¥å£çš„ç§æœ‰ç»“æ„ä½“ ","date":"2023-04-11","objectID":"/posts/go-context/:0:0","tags":["Go"],"title":"go ä¸Šä¸‹æ–‡context","uri":"/posts/go-context/"},{"categories":["Go"],"content":"Context çš„ä½œç”¨ åœ¨ Goroutine æ„æˆçš„æ ‘å½¢ç»“æ„ä¸­å¯¹ä¿¡å·è¿›è¡ŒåŒæ­¥ä»¥å‡å°‘è®¡ç®—èµ„æºçš„æµªè´¹æ˜¯ context.Context çš„æœ€å¤§ä½œç”¨ã€‚Go æœåŠ¡çš„æ¯ä¸€ä¸ªè¯·æ±‚éƒ½æ˜¯é€šè¿‡å•ç‹¬çš„ Goroutine å¤„ç†çš„ï¼ŒHTTP/RPC è¯·æ±‚çš„å¤„ç†å™¨ä¼šå¯åŠ¨æ–°çš„ Goroutine è®¿é—®æ•°æ®åº“å’Œå…¶ä»–æœåŠ¡ã€‚ åœ¨ Go çš„ http æºç ä¸­å¯çœ‹åˆ°ï¼Œæ¯å½“ä¸€ä¸ªæ–°çš„é“¾æ¥è¿›æ¥çš„æ—¶å€™ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„ Goroutine å»å¤„ç† func (srv *Server) Serve(l net.Listener) error { ... baseCtx := context.Background() ... ctx := context.WithValue(baseCtx, ServerContextKey, srv) for { rw, err := l.Accept() connCtx := ctx if cc := srv.ConnContext; cc != nil { connCtx = cc(connCtx, rw) if connCtx == nil { panic(\"ConnContext returned nil\") } } c := srv.newConn(rw) c.setState(c.rwc, StateNew, runHooks) // before Serve can return go c.serve(connCtx) } } å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåˆ›å»ºå¤šä¸ª Goroutine æ¥å¤„ç†ä¸€æ¬¡è¯·æ±‚ï¼Œè€Œ context.Context çš„ä½œç”¨æ˜¯åœ¨ä¸åŒ Goroutine ä¹‹é—´åŒæ­¥è¯·æ±‚ç‰¹å®šæ•°æ®ã€å–æ¶ˆä¿¡å·ä»¥åŠå¤„ç†è¯·æ±‚çš„æˆªæ­¢æ—¥æœŸã€‚ ä¸‹å›¾ä¸­ Goroutine1 å¯èƒ½å› ä¸ºä¸€äº›åŸå› åœæ­¢äº†ï¼ŒGoroutine1 ä¸­åˆ›å»ºçš„ Goroutine1.1 å¯èƒ½å› ä¸º Goroutine1 åœæ­¢è€Œä¸éœ€è¦ç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯å¦‚æœ Goroutine1 æ²¡æœ‰æ”¶åˆ°ä¿¡å·ï¼Œé‚£ä¹ˆå®ƒå°†ç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯å¦‚æœæ­£ç¡®çš„ä½¿ç”¨ context.Context å°±å¯ä»¥åœ¨ä¸‹å±‚åŠæ—¶åœæ‰æ— ç”¨çš„å·¥ä½œä»¥å‡å°‘é¢å¤–èµ„æºçš„æ¶ˆè€—ï¼š æ¯ä¸€ä¸ª context.Context éƒ½ä¼šä»æœ€é¡¶å±‚çš„ Goroutine ä¸€å±‚ä¸€å±‚ä¼ é€’åˆ°æœ€ä¸‹å±‚ã€‚context.Context å¯ä»¥åœ¨ä¸Šå±‚ Goroutine æ‰§è¡Œå‡ºç°é”™è¯¯æ—¶ï¼Œå°†ä¿¡å·åŠæ—¶åŒæ­¥ç»™ä¸‹å±‚ã€‚ ä¸‹é¢çš„ä»£ç ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªè¿‡æœŸæ—¶é—´ä¸º 1s çš„ context.Contextï¼Œå¹¶å‘ä¸Šä¸‹æ–‡ä¼ å…¥ handle å‡½æ•°ï¼Œè¯¥æ–¹æ³•ä¼šä½¿ç”¨ 500ms çš„æ—¶é—´å¤„ç†ä¼ å…¥çš„è¯·æ±‚ï¼š func main() { ctx, cancel := context.WithTimeout(context.Background(), 1*time.Second) defer cancel() go handle(ctx, 500*time.Millisecond) select { case \u003c-ctx.Done(): fmt.Println(\"main\", ctx.Err()) } } func handle(ctx context.Context, duration time.Duration) { select { case \u003c-ctx.Done(): fmt.Println(\"handle\", ctx.Err()) case \u003c-time.After(duration): fmt.Println(\"process request with\", duration) } } å› ä¸º context.WithTimeout ä¼ å…¥çš„è¿‡æœŸæ—¶é—´æ¯”è¾ƒé•¿ï¼Œæ‰€ä»¥åœ¨ handler ä¸­æœ‰è¶³å¤Ÿçš„æ—¶é—´æ‰§è¡Œå¯¹åº”çš„é€»è¾‘ï¼Œè¿è¡Œä¸Šé¢çš„ä»£ç ä¹‹åä¼šè¾“å‡ºä¸‹é¢çš„å†…å®¹ process request with 500ms main context deadline exceeded å¦‚æœå°†è¶…æ—¶æ—¶é—´æ”¹ä¸º 100*time.Millisecond ä¼šè¾“å‡ºä¸‹é¢çš„å†…å®¹ main context deadline exceeded handle context deadline exceeded ","date":"2023-04-11","objectID":"/posts/go-context/:1:0","tags":["Go"],"title":"go ä¸Šä¸‹æ–‡context","uri":"/posts/go-context/"},{"categories":["Go"],"content":"é»˜è®¤ Context context åŒ…ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•è¿˜æ˜¯ context.Backgroundã€context.TODOï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šè¿”å›é¢„å…ˆåˆå§‹åŒ–å¥½çš„ç§æœ‰å˜é‡ background å’Œ todoï¼Œå®ƒä»¬ä¼šåœ¨åŒä¸€ä¸ª Go ç¨‹åºä¸­è¢«å¤ç”¨ var ( background = new(emptyCtx) todo = new(emptyCtx) ) func Background() Context { return background } func TODO() Context { return todo } è¿™ä¸¤ä¸ªç§æœ‰å˜é‡éƒ½æ˜¯é€šè¿‡ new(emptyCtx) è¯­å¥åˆå§‹åŒ–çš„ï¼Œå®ƒä»¬æ˜¯æŒ‡å‘ç§æœ‰ç»“æ„ä½“ context.emptyCtx çš„æŒ‡é’ˆï¼Œè¿™æ˜¯æœ€ç®€å•ã€æœ€å¸¸ç”¨çš„ä¸Šä¸‹æ–‡ç±»å‹ type emptyCtx int func (*emptyCtx) Deadline() (deadline time.Time, ok bool) { return } func (*emptyCtx) Done() \u003c-chan struct{} { return nil } func (*emptyCtx) Err() error { return nil } func (*emptyCtx) Value(key interface{}) interface{} { return nil } ä»ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç° context.emptyCtx é€šè¿‡ç©ºæ–¹æ³•å®ç°äº† context.Context æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œå®ƒæ²¡æœ‰ä»»ä½•åŠŸèƒ½ã€‚ ä»æºä»£ç æ¥çœ‹ï¼Œcontext.Background å’Œ context.TODO ä¹Ÿåªæ˜¯äº’ä¸ºåˆ«åï¼Œæ²¡æœ‰å¤ªå¤§çš„å·®åˆ«ï¼Œåªæ˜¯åœ¨ä½¿ç”¨å’Œè¯­ä¹‰ä¸Šç¨æœ‰ä¸åŒï¼š context.Background æ˜¯ä¸Šä¸‹æ–‡çš„é»˜è®¤å€¼ï¼Œæ‰€æœ‰å…¶ä»–çš„ä¸Šä¸‹æ–‡éƒ½åº”è¯¥ä»å®ƒè¡ç”Ÿå‡ºæ¥ï¼› context.TODO åº”è¯¥ä»…åœ¨ä¸ç¡®å®šåº”è¯¥ä½¿ç”¨å“ªç§ä¸Šä¸‹æ–‡æ—¶ä½¿ç”¨ï¼› åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œå¦‚æœå½“å‰å‡½æ•°æ²¡æœ‰ä¸Šä¸‹æ–‡ä½œä¸ºå…¥å‚ï¼Œæˆ‘ä»¬éƒ½ä¼šä½¿ç”¨ context.Background ä½œä¸ºèµ·å§‹çš„ä¸Šä¸‹æ–‡å‘ä¸‹ä¼ é€’ã€‚ ","date":"2023-04-11","objectID":"/posts/go-context/:2:0","tags":["Go"],"title":"go ä¸Šä¸‹æ–‡context","uri":"/posts/go-context/"},{"categories":["Go"],"content":"context.WithCancel å¦‚æœæˆ‘ä»¬åˆ›å»ºäº†å¤šä¸ª Goroutineï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ cancel å‡½æ•°è®©æ‰€æœ‰ Goroutine é€€å‡º func worker(ctx context.Context, id int) { for { select { case \u003c-ctx.Done(): fmt.Printf(\"worker %d stopped\\n\", id) return default: fmt.Printf(\"worker %d is working\\n\", id) time.Sleep(1 * time.Second) } } } func main() { ctx, cancel := context.WithCancel(context.Background()) for i := 1; i \u003c= 3; i++ { go worker(ctx, i) } time.Sleep(3 * time.Second) cancel() time.Sleep(1 * time.Second) } è¿è¡Œä¸Šé¢çš„ç¨‹åºä¹‹åä¼šè¾“å‡ºå¦‚ä¸‹å†…å®¹ worker 3 is working worker 1 is working worker 2 is working worker 3 is working worker 2 is working worker 1 is working worker 1 is working worker 3 is working worker 2 is working worker 2 stopped worker 1 stopped worker 3 stopped ä» context.WithCancel å‡½æ•°çš„å®ç°æ¥çœ‹å®ƒåˆ°åº•åšäº†ä»€ä¹ˆï¼š func WithCancel(parent Context) (ctx Context, cancel CancelFunc) { c := newCancelCtx(parent) propagateCancel(parent, \u0026c) return \u0026c, func() { c.cancel(true, Canceled) } } context.newCancelCtx å°†ä¼ å…¥çš„ä¸Šä¸‹æ–‡åŒ…è£…æˆç§æœ‰ç»“æ„ä½“ context.cancelCtx context.propagateCancel ä¼šæ„å»ºçˆ¶å­ä¸Šä¸‹æ–‡ä¹‹é—´çš„å…³è”ï¼Œå½“çˆ¶ä¸Šä¸‹æ–‡è¢«å–æ¶ˆæ—¶ï¼Œå­ä¸Šä¸‹æ–‡ä¹Ÿä¼šè¢«å–æ¶ˆï¼š func propagateCancel(parent Context, child canceler) { done := parent.Done() if done == nil { return // çˆ¶ä¸Šä¸‹æ–‡ä¸ä¼šè§¦å‘å–æ¶ˆä¿¡å· } select { case \u003c-done: child.cancel(false, parent.Err()) // çˆ¶ä¸Šä¸‹æ–‡å·²ç»è¢«å–æ¶ˆ return default: } if p, ok := parentCancelCtx(parent); ok { p.mu.Lock() if p.err != nil { child.cancel(false, p.err) } else { p.children[child] = struct{}{} } p.mu.Unlock() } else { go func() { select { case \u003c-parent.Done(): child.cancel(false, parent.Err()) case \u003c-child.Done(): } }() } } ä¸Šè¿°å‡½æ•°æ€»å…±ä¸çˆ¶ä¸Šä¸‹æ–‡ç›¸å…³çš„ä¸‰ç§ä¸åŒçš„æƒ…å†µï¼š å½“ parent.Done() == nilï¼Œä¹Ÿå°±æ˜¯ parent ä¸ä¼šè§¦å‘å–æ¶ˆäº‹ä»¶æ—¶ï¼Œå½“å‰å‡½æ•°ä¼šç›´æ¥è¿”å› å½“ child çš„ç»§æ‰¿é“¾åŒ…å«å¯ä»¥å–æ¶ˆçš„ä¸Šä¸‹æ–‡æ—¶ï¼Œä¼šåˆ¤æ–­ parent æ˜¯å¦å·²ç»è§¦å‘äº†å–æ¶ˆä¿¡å· å¦‚æœå·²ç»è¢«å–æ¶ˆï¼Œchild ä¼šç«‹åˆ»è¢«å–æ¶ˆ å¦‚æœæ²¡æœ‰è¢«å–æ¶ˆï¼Œchild ä¼šè¢«åŠ å…¥ parent çš„ children åˆ—è¡¨ä¸­ï¼Œç­‰å¾… parent é‡Šæ”¾å–æ¶ˆä¿¡å· context.propagateCancel çš„ä½œç”¨æ˜¯åœ¨ parent å’Œ child ä¹‹é—´åŒæ­¥å–æ¶ˆå’Œç»“æŸçš„ä¿¡å·ï¼Œä¿è¯åœ¨ parent è¢«å–æ¶ˆæ—¶ï¼Œchild ä¹Ÿä¼šæ”¶åˆ°å¯¹åº”çš„ä¿¡å·ï¼Œä¸ä¼šå‡ºç°çŠ¶æ€ä¸ä¸€è‡´çš„æƒ…å†µã€‚ context.cancelCtx å®ç°çš„å‡ ä¸ªæ¥å£æ–¹æ³•ä¹Ÿæ²¡æœ‰å¤ªå¤šå€¼å¾—åˆ†æçš„åœ°æ–¹ï¼Œè¯¥ç»“æ„ä½“æœ€é‡è¦çš„æ–¹æ³•æ˜¯ context.cancelCtx.cancelï¼Œè¯¥æ–¹æ³•ä¼šå…³é—­ä¸Šä¸‹æ–‡ä¸­çš„ Channel å¹¶å‘æ‰€æœ‰çš„å­ä¸Šä¸‹æ–‡åŒæ­¥å–æ¶ˆä¿¡å·ï¼š func (c *cancelCtx) cancel(removeFromParent bool, err error) { c.mu.Lock() if c.err != nil { c.mu.Unlock() return } c.err = err if c.done == nil { c.done = closedchan } else { close(c.done) } for child := range c.children { child.cancel(false, err) } c.children = nil c.mu.Unlock() if removeFromParent { removeChild(c.Context, c) } } é™¤äº† context.WithCancel ä¹‹å¤–ï¼Œcontext åŒ…ä¸­çš„å¦å¤–ä¸¤ä¸ªå‡½æ•° context.WithDeadline å’Œ context.WithTimeout ä¹Ÿéƒ½èƒ½åˆ›å»ºå¯ä»¥è¢«å–æ¶ˆçš„è®¡æ—¶å™¨ä¸Šä¸‹æ–‡ context.timerCtxï¼š func WithTimeout(parent Context, timeout time.Duration) (Context, CancelFunc) { return WithDeadline(parent, time.Now().Add(timeout)) } func WithDeadline(parent Context, d time.Time) (Context, CancelFunc) { if cur, ok := parent.Deadline(); ok \u0026\u0026 cur.Before(d) { return WithCancel(parent) } c := \u0026timerCtx{ cancelCtx: newCancelCtx(parent), deadline: d, } propagateCancel(parent, c) dur := time.Until(d) if dur \u003c= 0 { c.cancel(true, DeadlineExceeded) // å·²ç»è¿‡äº†æˆªæ­¢æ—¥æœŸ return c, func() { c.cancel(false, Canceled) } } c.mu.Lock() defer c.mu.Unlock() if c.err == nil { c.timer = time.AfterFunc(dur, func() { c.cancel(true, DeadlineExceeded) }) } return c, func() { c.cancel(true, Canceled) } } context.WithDeadline åœ¨åˆ›å»º context.timerCtx çš„è¿‡ç¨‹ä¸­åˆ¤æ–­äº†çˆ¶ä¸Šä¸‹æ–‡çš„æˆªæ­¢æ—¥æœŸä¸å½“å‰æ—¥æœŸï¼Œå¹¶é€šè¿‡ time.AfterFunc åˆ›å»ºå®šæ—¶å™¨ï¼Œå½“æ—¶é—´è¶…è¿‡äº†æˆªæ­¢æ—¥æœŸåä¼šè°ƒç”¨ context.timerCtx.cancel åŒæ­¥å–æ¶ˆä¿¡å·ã€‚ context.timerCtx å†…éƒ¨ä¸ä»…é€šè¿‡åµŒå…¥ context.cancelCtx ç»“æ„ä½“ç»§æ‰¿äº†ç›¸å…³çš„å˜é‡å’Œæ–¹æ³•ï¼Œè¿˜é€šè¿‡æŒæœ‰çš„å®šæ—¶å™¨ timer å’Œæˆªæ­¢æ—¶é—´ deadline å®ç°äº†å®šæ—¶å–æ¶ˆçš„åŠŸèƒ½ï¼š type timerCtx struct { cancelCtx timer *time.Timer // Under cancelCtx.mu. deadline time.Time } func (c *timerCtx) Deadline() (deadline time.Time, ok bool) { return c.deadline, true } func (c *timerCtx) cancel(removeFromParent bool, err error) { c.cancelCtx.cancel(false, err) if removeFromParent { removeChild(c.cancelCtx.Context, c) } c.mu.Lock() if c.timer != nil { c.timer.Stop() c.timer = nil } c.mu.Unlock() } context.timerCtx.cancel æ–¹æ³•ä¸ä»…è°ƒç”¨äº† context.cancelCtx.cancelï¼Œè¿˜ä¼šåœæ­¢æŒæœ‰çš„å®šæ—¶å™¨å‡å°‘ä¸å¿…è¦çš„èµ„æºæµªè´¹ã€‚ ","date":"2023-04-11","objectID":"/posts/go-context/:3:0","tags":["Go"],"title":"go ä¸Šä¸‹æ–‡context","uri":"/posts/go-context/"},{"categories":["Go"],"content":"context.WithValue åœ¨æœ€åæˆ‘ä»¬éœ€è¦äº†è§£å¦‚ä½•ä½¿ç”¨ä¸Šä¸‹æ–‡ä¼ å€¼ï¼Œcontext åŒ…ä¸­çš„ context.WithValue èƒ½ä»çˆ¶ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºä¸€ä¸ªå­ä¸Šä¸‹æ–‡ï¼Œä¼ å€¼çš„å­ä¸Šä¸‹æ–‡ä½¿ç”¨ context.valueCtx ç±»å‹ï¼š func WithValue(parent Context, key, val interface{}) Context { if key == nil { panic(\"nil key\") } if !reflectlite.TypeOf(key).Comparable() { panic(\"key is not comparable\") } return \u0026valueCtx{parent, key, val} } context.valueCtx ç»“æ„ä½“ä¼šå°†é™¤äº† Value ä¹‹å¤–çš„ Errã€Deadline ç­‰æ–¹æ³•ä»£ç†åˆ°çˆ¶ä¸Šä¸‹æ–‡ä¸­ï¼Œå®ƒåªä¼šå“åº” context.valueCtx.Value æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„å®ç°ä¹Ÿå¾ˆç®€å•ï¼š type valueCtx struct { Context key, val interface{} } func (c *valueCtx) Value(key interface{}) interface{} { if c.key == key { return c.val } return c.Context.Value(key) } å¦‚æœ context.valueCtx ä¸­å­˜å‚¨çš„é”®å€¼å¯¹ä¸ context.valueCtx.Value æ–¹æ³•ä¸­ä¼ å…¥çš„å‚æ•°ä¸åŒ¹é…ï¼Œå°±ä¼šä»çˆ¶ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾è¯¥é”®å¯¹åº”çš„å€¼ç›´åˆ°æŸä¸ªçˆ¶ä¸Šä¸‹æ–‡ä¸­è¿”å› nil æˆ–è€…æŸ¥æ‰¾åˆ°å¯¹åº”çš„å€¼ã€‚ ","date":"2023-04-11","objectID":"/posts/go-context/:4:0","tags":["Go"],"title":"go ä¸Šä¸‹æ–‡context","uri":"/posts/go-context/"},{"categories":["CSharp"],"content":"C# ä»£ç æ˜¯æ€ä¹ˆè¿è¡Œçš„ dotnetçš„ç¼–è¯‘å·¥å…·ä¼šå°†C#æºä»£ç è½¬æ¢æˆILï¼ˆIntermediate Languageï¼‰ä»£ç ï¼Œå¹¶å°†ILä»£ç å­˜å‚¨åœ¨DLLæˆ–EXEæ–‡ä»¶ä¸­ï¼ˆç¨‹åºé›†an Assemblyï¼‰ ILä»£ç å°±åƒæ±‡ç¼–è¯­è¨€æŒ‡ä»¤ä¸€æ ·ï¼Œç”±dotnetçš„è™šæ‹ŸæœºCoreCLRæ‰§è¡Œ åœ¨è¿è¡Œæ—¶CLRå°±ä»Assemblyä¸­åŠ è½½ILï¼Œå†ç”±å³æ—¶ç¼–è¯‘å™¨ï¼ˆJITï¼‰å°†ILç¼–ç¨‹æœºå™¨ç è¿è¡Œ ","date":"2023-01-01","objectID":"/posts/csharp%E9%9A%8F%E7%AC%94/:1:0","tags":["CSharp","DotNetCore"],"title":"C#éšç¬”","uri":"/posts/csharp%E9%9A%8F%E7%AC%94/"},{"categories":["CSharp"],"content":"dotnetå¸¸ç”¨å‘½ä»¤ dotnet -h dotnet --info dotnet --list-sdks dotnet --list-runtimes dotnet --version dotnet help new dotnet new console -n project_name dotnet build dotnet run ","date":"2023-01-01","objectID":"/posts/csharp%E9%9A%8F%E7%AC%94/:1:1","tags":["CSharp","DotNetCore"],"title":"C#éšç¬”","uri":"/posts/csharp%E9%9A%8F%E7%AC%94/"},{"categories":["CSharp"],"content":"ç±»å‹ ","date":"2023-01-01","objectID":"/posts/csharp%E9%9A%8F%E7%AC%94/:2:0","tags":["CSharp","DotNetCore"],"title":"C#éšç¬”","uri":"/posts/csharp%E9%9A%8F%E7%AC%94/"},{"categories":["CSharp"],"content":"ç±»å‹æ¨æ–­ // æŒ‡å®šå…·ä½“ç±»å‹ string str = \"Hello, World\"; Console.WriteLine(str); int num = 10; Console.WriteLine(num); // ä½¿ç”¨varå…³é”®è¯è¿›è¡Œç±»å‹æ¨æ–­ var bar = \"æ¨æ–­ç±»å‹\"; Console.WriteLine(bar); // VeryLongClassName _test1 = new VeryLongClassName(); // ç±»å‹æ¨æ–­ VeryLongClassName _test2 = new(); class VeryLongClassName { public int Id { get; set; } public string Name { get; set; } } ","date":"2023-01-01","objectID":"/posts/csharp%E9%9A%8F%E7%AC%94/:2:1","tags":["CSharp","DotNetCore"],"title":"C#éšç¬”","uri":"/posts/csharp%E9%9A%8F%E7%AC%94/"},{"categories":["CSharp"],"content":"å­—ç¬¦ä¸² æ ¼å¼åŒ–å­—ç¬¦ä¸² string name = \"å¼ ä¸‰\"; int age = 18; string formatStr = string.Format(\"å§“å: {0}, å¹´é¾„: {1}\", name, age); Console.WriteLine(formatStr); æ’å€¼å­—ç¬¦ä¸² string name = \"å¼ ä¸‰\"; int age = 18; string formatStr = $\"å§“å: {name}, å¹´é¾„: {age}\"; Console.WriteLine(formatStr); ","date":"2023-01-01","objectID":"/posts/csharp%E9%9A%8F%E7%AC%94/:2:2","tags":["CSharp","DotNetCore"],"title":"C#éšç¬”","uri":"/posts/csharp%E9%9A%8F%E7%AC%94/"},{"categories":["CSharp"],"content":"å¤šçº¿ç¨‹ ","date":"2023-01-01","objectID":"/posts/csharp%E9%9A%8F%E7%AC%94/:3:0","tags":["CSharp","DotNetCore"],"title":"C#éšç¬”","uri":"/posts/csharp%E9%9A%8F%E7%AC%94/"},{"categories":["CSharp"],"content":"API namespace System.Threading { public sealed class Thread : CriticalFinalizerObject { public Thread(ParameterizedThreadStart start); public Thread(ThreadStart start); public Thread(ParameterizedThreadStart start, int maxStackSize); public Thread(ThreadStart start, int maxStackSize); ~Thread(); public static IPrincipal? CurrentPrincipal { get; set; } public static Thread CurrentThread { get; } public CultureInfo CurrentCulture { get; set; } public CultureInfo CurrentUICulture { get; set; } public bool IsAlive { get; } [Obsolete(\"The ApartmentState property has been deprecated. Use GetApartmentState, SetApartmentState or TrySetApartmentState instead.\")] public ApartmentState ApartmentState { get; set; } public bool IsBackground { get; set; } public bool IsThreadPoolThread { get; } public int ManagedThreadId { get; } public string? Name { get; set; } public ExecutionContext? ExecutionContext { get; } public ThreadPriority Priority { get; set; } public ThreadState ThreadState { get; } public static LocalDataStoreSlot AllocateDataSlot(); public static LocalDataStoreSlot AllocateNamedDataSlot(string name); public static void BeginCriticalRegion(); public static void BeginThreadAffinity(); public static void EndCriticalRegion(); public static void EndThreadAffinity(); public static void FreeNamedDataSlot(string name); public static int GetCurrentProcessorId(); public static object? GetData(LocalDataStoreSlot slot); public static AppDomain GetDomain(); public static int GetDomainID(); public static LocalDataStoreSlot GetNamedDataSlot(string name); public static void MemoryBarrier(); [Obsolete(\"Thread.ResetAbort is not supported and throws PlatformNotSupportedException.\", DiagnosticId = \"SYSLIB0006\", UrlFormat = \"https://aka.ms/dotnet-warnings/{0}\")] public static void ResetAbort(); public static void SetData(LocalDataStoreSlot slot, object? data); public static void Sleep(int millisecondsTimeout); public static void Sleep(TimeSpan timeout); public static void SpinWait(int iterations); [return: NotNullIfNotNull(\"address\")] public static object? VolatileRead([NotNullIfNotNull(\"address\")] ref object? address); public static IntPtr VolatileRead(ref IntPtr address); public static float VolatileRead(ref float address); [CLSCompliant(false)] public static UIntPtr VolatileRead(ref UIntPtr address); [CLSCompliant(false)] public static uint VolatileRead(ref uint address); [CLSCompliant(false)] public static ulong VolatileRead(ref ulong address); public static long VolatileRead(ref long address); [CLSCompliant(false)] public static ushort VolatileRead(ref ushort address); public static int VolatileRead(ref int address); [CLSCompliant(false)] public static sbyte VolatileRead(ref sbyte address); public static double VolatileRead(ref double address); public static byte VolatileRead(ref byte address); public static short VolatileRead(ref short address); [CLSCompliant(false)] public static void VolatileWrite(ref UIntPtr address, UIntPtr value); [CLSCompliant(false)] public static void VolatileWrite(ref ulong address, ulong value); [CLSCompliant(false)] public static void VolatileWrite(ref uint address, uint value); [CLSCompliant(false)] public static void VolatileWrite(ref ushort address, ushort value); [CLSCompliant(false)] public static void VolatileWrite(ref sbyte address, sbyte value); public static void VolatileWrite([NotNullIfNotNull(\"value\")] ref object? address, object? value); public static void VolatileWrite(ref IntPtr address, IntPtr value); public static void VolatileWrite(ref long address, long value); public static void VolatileWrite(ref int address, int value); public static void VolatileWrite(ref float address, float value); public static void VolatileWrite(ref double address, double value); public static void VolatileWrite(ref byte address, byte value); public static void VolatileWrite(ref short address, short value); public static bool Yield(); [Obsolete(\"Thread.Abort is not supported and throws PlatformNotSupportedException.\", Di","date":"2023-01-01","objectID":"/posts/csharp%E9%9A%8F%E7%AC%94/:3:1","tags":["CSharp","DotNetCore"],"title":"C#éšç¬”","uri":"/posts/csharp%E9%9A%8F%E7%AC%94/"},{"categories":["CSharp"],"content":"å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼ˆAsynchronous Programming Modelï¼‰ï¼Œæå‡ºäº.Net Framework 1.xæ—¶ä»£ï¼ŒåŸºäºIAsyncResultæ¥å£å®ç°ç±»ä¼¼BeginXXXå’ŒEndXXXçš„æ–¹æ³•ã€‚ APMæ˜¯å»ºç«‹åœ¨å§”æ‰˜ä¹‹ä¸Šçš„ï¼Œ.Net Coreä¸­å§”æ‰˜ä¸æ”¯æŒå¼‚æ­¥è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯BeginInvokeå’ŒEndInvokeæ–¹æ³•ã€‚ EndInvokeä¼šåšä¸‰ä»¶äº‹: å¦‚æœå¼‚æ­¥å§”æ‰˜è¿˜æ²¡æœ‰ç»“æŸï¼Œå®ƒä¼šç­‰å¾…å¼‚æ­¥å§”æ‰˜æ‰§è¡Œå®Œæˆã€‚ å®ƒä¼šæ¥æ”¶è¿”å›å€¼ï¼Œä¹ŸåŒ…æ‹¬refå’Œoutæ–¹å¼çš„å‚æ•°ã€‚ å®ƒä¼šå‘è°ƒç”¨çº¿ç¨‹æŠ›å‡ºæœªå¤„ç†çš„å¼‚å¸¸ã€‚ ","date":"2023-01-01","objectID":"/posts/csharp%E9%9A%8F%E7%AC%94/:4:0","tags":["CSharp","DotNetCore"],"title":"C#éšç¬”","uri":"/posts/csharp%E9%9A%8F%E7%AC%94/"},{"categories":["CSharp"],"content":"åŸºäºäº‹ä»¶çš„å¼‚æ­¥æ¨¡å¼ åŸºäºäº‹ä»¶çš„å¼‚æ­¥æ¨¡å¼ï¼ˆEvent-Based Asynchronous Patternï¼‰ï¼ŒEAPæ˜¯åœ¨ .Net Framework2.0ä¸­æå‡ºçš„ï¼Œè®©ç±»å¯ä»¥æä¾›å¤šçº¿ç¨‹çš„èƒ½åŠ›ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨è€…æ˜¾ç¤ºå¯åŠ¨å’Œç®¡ç†çº¿ç¨‹ï¼Œè¿™ç§æ¨¡å¼å…·æœ‰ä»¥ä¸‹èƒ½åŠ›ï¼š åä½œå–æ¶ˆæ¨¡å‹ï¼ˆcooperative cancellation modelï¼‰ çº¿ç¨‹äº²å’Œæ€§ï¼ˆthread affinityï¼‰ å°†å¼‚å¸¸è½¬å‘åˆ°å®Œæˆäº‹ä»¶ï¼ˆforwarding exceptionï¼‰ ","date":"2023-01-01","objectID":"/posts/csharp%E9%9A%8F%E7%AC%94/:4:1","tags":["CSharp","DotNetCore"],"title":"C#éšç¬”","uri":"/posts/csharp%E9%9A%8F%E7%AC%94/"},{"categories":["CSharp"],"content":"åŸºäºä»»åŠ¡çš„å¼‚æ­¥æ¨¡å¼ï¼ˆTAPï¼‰ ä» .Net Framework4å¼€å§‹å¼•å…¥ï¼Œç°åœ¨æ™®éä½¿ç”¨çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼æ˜¯TAPæ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯C# æä¾›çš„ async å’Œ await å…³é”®è¯ ","date":"2023-01-01","objectID":"/posts/csharp%E9%9A%8F%E7%AC%94/:4:2","tags":["CSharp","DotNetCore"],"title":"C#éšç¬”","uri":"/posts/csharp%E9%9A%8F%E7%AC%94/"},{"categories":["CSharp"],"content":"å¼‚æ­¥ç¼–ç¨‹ ä½¿ç”¨ async await å…³é”®å­—å¯ä»¥å¾ˆè½»æ¾çš„å®ç°å¼‚æ­¥ç¼–ç¨‹ï¼Œåªéœ€è¦å°†æ–¹æ³•åŠ ä¸Š async å…³é”®å­—ï¼Œæ–¹æ³•å†…çš„å¼‚æ­¥æ“ä½œä½¿ç”¨ await ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆåå†æ‰§è¡Œåç»­æ“ä½œã€‚ class Program { static void Main(string[] args) { Method1(); Method2(); Console.ReadKey(); } public static void Method1() { Task.Run( async () =\u003e { for (int i = 0; i \u003c 50; i++) { Console.WriteLine(\" Method 1\"); // Do something await Task.Delay(100); } }); } public static void Method2() { for (int i = 0; i \u003c 50; i++) { Console.WriteLine(\" Method 2\"); // Do something Task.Delay(100).Wait(); } } } ä¸Šé¢ç¨‹åºè¿è¡Œåä¼šäº¤æ›¿è¾“å‡º Method 1 å’Œ Method 2ï¼ŒMethod1 ä¸­ä½¿ç”¨äº† Task.Run å¯åŠ¨äº†ä¸€ä¸ªå¼‚æ­¥åå°ä»»åŠ¡ï¼Œç„¶åå°±è¿”å›äº†ã€‚åˆ›å»ºçš„è¿™ä¸ªå¼‚æ­¥ä»»åŠ¡ä¼šåœ¨åå°è¿è¡Œï¼Œè‡³äºä¼šä¸ä¼šè¢«æ”¾åˆ°å­çº¿ç¨‹ä¸­ä¸»è¦çœ‹è°ƒåº¦ç¨‹åºå¦‚ä½•æ‰§è¡Œã€‚ è‡³äºä»»åŠ¡å¦‚ä½•åˆ‡æ¢ä»»åŠ¡å’Œ rust ä¸­ç±»ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡ä¸åœçš„è½®è®­åˆ¤æ–­ä»»åŠ¡çŠ¶æ€ã€‚é‡åˆ°å¯ä»¥åˆ‡æ¢çš„ä»»åŠ¡çš„ä½ç½®ä¸€èˆ¬éƒ½æ˜¯åœ¨ I/O ç­‰å¾…ä¸­ï¼Œæˆ–è€…è¯´æ˜¯é˜»å¡ã€‚ C# ä¸­çš„å¼‚æ­¥ä»»åŠ¡åŒæ ·å¯ä»¥åœ¨ä¸åŒçš„çº¿ç¨‹ä¸Šè¿è¡Œï¼Œä¹Ÿå°±æ˜¯ await åçš„ä»£ç å¯èƒ½ä¼šåœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œã€‚ ","date":"2023-01-01","objectID":"/posts/csharp%E9%9A%8F%E7%AC%94/:5:0","tags":["CSharp","DotNetCore"],"title":"C#éšç¬”","uri":"/posts/csharp%E9%9A%8F%E7%AC%94/"},{"categories":["rust"],"content":"Rust ä¸­æœ‰è®¸å¤šåŒ…è£…ç±»å‹ç”¨äºè®¿é—®æ•°æ®ï¼Œæ¯ç§éƒ½æœ‰ç‹¬ç‰¹æ€§ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:0:0","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"åŸºç¡€æŒ‡é’ˆç±»å‹ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:1:0","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"Box Box æ˜¯ä¸€ç§ownedæˆ–boxã€‚è™½ç„¶å®ƒå¯ä»¥æä¾›å¯¹æ•°æ®çš„å€Ÿç”¨å¼•ç”¨ï¼Œä½†å®ƒæ˜¯æ•°æ®çš„å”¯ä¸€æ‰€æœ‰è€…ã€‚ç‰¹åˆ«æ˜¯ï¼Œå½“å‘ç”Ÿå¦‚ä¸‹æƒ…å†µæ—¶ï¼š let x = Box::new(1); let y = x; // x åœ¨è¿™é‡Œä¸å†å¯è®¿é—® åœ¨è¿™é‡Œï¼Œbox è¢«ç§»åŠ¨åˆ° y ä¸­ã€‚ç”±äº x ä¸å†æ‹¥æœ‰å®ƒï¼Œç¼–è¯‘å™¨å°†ä¸å†å…è®¸å¼€å‘è€…åœ¨æ­¤ä¹‹åä½¿ç”¨ xã€‚ä¸€ä¸ª box ä¹Ÿå¯ä»¥é€šè¿‡è¿”å›å€¼ä»å‡½æ•°ä¸­ç§»åŠ¨å‡ºæ¥ï¼Œå½“ä¸€ä¸ªboxï¼ˆä¸€ä¸ªå°šæœªç§»åŠ¨çš„boxï¼‰è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œderef å‡½æ•°ä¼šè¿è¡Œï¼Œé‡Šæ”¾å†…éƒ¨æ•°æ®ã€‚ è¿™ç§æŠ½è±¡æ˜¯ä¸€ç§ä½æˆæœ¬çš„åŠ¨æ€åˆ†é…æŠ½è±¡ã€‚å¦‚æœæƒ³åœ¨å †ä¸Šåˆ†é…ä¸€äº›å†…å­˜å¹¶å®‰å…¨åœ°ä¼ é€’ä¸€ä¸ªæŒ‡å‘è¯¥å†…å­˜çš„æŒ‡é’ˆï¼Œè¿™æ˜¯ç†æƒ³çš„é€‰æ‹©ã€‚ä½†æ˜¯è¦æ³¨æ„ï¼ŒæŒ‰ç…§å¸¸è§„å€Ÿç”¨è§„åˆ™ï¼Œåªå…è®¸åœ¨ç¼–è¯‘æ—¶çš„æ£€æŸ¥çš„æƒ…å†µä¸‹å…±äº«å¯¹æ•°æ®å€Ÿç”¨å¼•ç”¨ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:1:1","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"Copy Move/ownership è¯­ä¹‰å¹¶ä¸æ˜¯ Box ç‹¬æœ‰çš„ï¼›å®ƒæ˜¯æ‰€æœ‰é Copy ç±»å‹çš„ç‰¹æ€§ã€‚ ä¸€ä¸ª Copy ç±»å‹æ˜¯å…¶é€»è¾‘ä¸ŠåŒ…å«çš„æ‰€æœ‰æ•°æ®ï¼ˆé€šå¸¸æ˜¯æ‹¥æœ‰çš„ï¼‰çš„ä¸€ä¸ªå‰¯æœ¬ã€‚è¿™äº›æ•°æ®é€šå¸¸æ˜¯å®ƒçš„æ ˆè¡¨ç¤ºçš„ä¸€éƒ¨åˆ†ã€‚å¤§å¤šæ•°åŒ…å«æŒ‡å‘å…¶ä»–æ•°æ®çš„æŒ‡é’ˆçš„ç±»å‹ä¸æ˜¯ Copy ç±»å‹ï¼Œå› ä¸ºæœ‰é¢å¤–çš„æ•°æ®åœ¨å…¶ä»–åœ°æ–¹ï¼Œåªå¤åˆ¶æ ˆè¡¨ç¤ºå¯èƒ½ä¼šä¸å®‰å…¨åœ°å…±äº«è¿™äº›æ•°æ®çš„æ‰€æœ‰æƒã€‚ åƒ Vec å’Œ String è¿™æ ·ä¹Ÿæœ‰å †ä¸Šæ•°æ®çš„ç±»å‹ä¹Ÿä¸æ˜¯ Copyç±»å‹ã€‚åƒ integer/bool è¿™æ ·çš„ç±»å‹æ˜¯ Copy ç±»å‹ã€‚ \u0026T å’Œè£¸æŒ‡é’ˆæ˜¯ Copyã€‚è™½ç„¶å®ƒä»¬ç¡®å®æŒ‡å‘æ›´å¤šçš„æ•°æ®ï¼Œä½†å®ƒä»¬å¹¶ä¸â€œæ‹¥æœ‰â€é‚£äº›æ•°æ®ã€‚è€Œ Box å¯ä»¥è¢«çœ‹ä½œæ˜¯â€œä¸€äº›æ°å¥½æ˜¯åŠ¨æ€åˆ†é…çš„æ•°æ®â€ï¼Œ\u0026T è¢«è®¤ä¸ºæ˜¯â€œå¯¹æŸäº›æ•°æ®çš„å€Ÿç”¨å¼•ç”¨â€ã€‚è™½ç„¶ä¸¤è€…éƒ½æ˜¯æŒ‡é’ˆï¼Œä½†åªæœ‰ç¬¬ä¸€ä¸ªè¢«è§†ä¸ºâ€œæ•°æ®â€ã€‚å› æ­¤ï¼Œç¬¬ä¸€ä¸ªçš„å¤åˆ¶åº”æ¶‰åŠæ•°æ®çš„å¤åˆ¶ï¼ˆè¿™ä¸æ˜¯å…¶æ ˆè¡¨ç¤ºçš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œä½†ç¬¬äºŒä¸ªçš„å¤åˆ¶åªéœ€è¦å¤åˆ¶å¼•ç”¨ã€‚\u0026mut T ä¸æ˜¯ Copyï¼Œå› ä¸ºå¯å˜å¼•ç”¨ä¸èƒ½å…±äº«ï¼Œå¹¶ä¸” \u0026mut T åœ¨æŸç§ç¨‹åº¦ä¸Šâ€œæ‹¥æœ‰â€å®ƒæŒ‡å‘çš„æ•°æ®ï¼Œå› ä¸ºå®ƒå¯ä»¥ä¿®æ”¹è¿™äº›æ•°æ®ã€‚ å¦‚æœä¸€ä¸ªç±»å‹çš„æ ˆè¡¨ç¤ºçš„å¤åˆ¶ä¸ä¼šå‡ºç°å†…å­˜å®‰å…¨ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥æ˜¯ Copy ç±»å‹ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:1:2","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"\u0026T and \u0026mut T \u0026T å’Œ \u0026mut T åˆ†åˆ«æ˜¯ä¸å¯å˜å¼•ç”¨å’Œå¯å˜å¼•ç”¨ã€‚å®ƒä»¬éµå¾ªçš„â€œè¯»å†™é”â€æ¨¡å¼ï¼Œå³å¯¹äºæŸäº›æ•°æ®ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œæˆ–è€…ä»»æ„æ•°é‡çš„ä¸å¯å˜å¼•ç”¨ï¼Œä½†ä¸èƒ½ä¸¤è€…éƒ½æœ‰ã€‚è¿™ç§ä¿è¯æ˜¯åœ¨ç¼–è¯‘æ—¶å¼ºåˆ¶å®æ–½çš„ï¼Œè¿è¡Œæ—¶æ²¡æœ‰æ˜æ˜¾çš„æˆæœ¬ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„æŒ‡é’ˆè¶³ä»¥åœ¨ä»£ç çš„ä¸åŒéƒ¨åˆ†ä¹‹é—´å…±äº«å»‰ä»·çš„å¼•ç”¨ã€‚ è¿™äº›æŒ‡é’ˆä¸èƒ½ä»¥è¶…å‡ºå…¶å…³è”ç”Ÿå‘½å‘¨æœŸçš„æ–¹å¼è¢«å¤åˆ¶ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:1:3","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"*const T and *mut T *const T å’Œ *mut Tæ˜¯æŒ‡é’ˆï¼ˆç±»ä¼¼äºCè¯­è¨€ä¸­çš„åŸå§‹æŒ‡é’ˆï¼‰ï¼Œå®ƒä»¬æ²¡æœ‰ä¸ä¹‹å…³è”çš„ç”Ÿå‘½å‘¨æœŸæˆ–æ‰€æœ‰æƒã€‚å®ƒä»¬åªæ˜¯æŒ‡å‘å†…å­˜ä¸­çš„æŸä¸ªä½ç½®ï¼Œæ²¡æœ‰å…¶ä»–é™åˆ¶ã€‚è¿™äº›æŒ‡é’ˆæä¾›çš„å”¯ä¸€ä¿è¯æ˜¯ï¼Œé™¤éåœ¨æ ‡è®°ä¸ºä¸å®‰å…¨çš„ä»£ç å—ä¸­ï¼Œå¦åˆ™ä¸èƒ½å¯¹å®ƒä»¬è¿›è¡Œè§£å¼•ç”¨ï¼ˆå³ä¸èƒ½ç›´æ¥è®¿é—®å®ƒä»¬æŒ‡å‘çš„å€¼ï¼‰ã€‚ è¿™äº›æŒ‡é’ˆåœ¨æ„å»ºå®‰å…¨ä¸”æˆæœ¬ä½çš„æŠ½è±¡ï¼ˆå¦‚Vec\u003cT\u003eï¼‰æ—¶éå¸¸æœ‰ç”¨ï¼Œä½†åœ¨ç¼–å†™å®‰å…¨ä»£ç æ—¶åº”é¿å…ç›´æ¥ä½¿ç”¨å®ƒä»¬ã€‚å› ä¸ºç›´æ¥åœ¨å®‰å…¨ä»£ç ä¸­ä½¿ç”¨è¿™äº›åŸå§‹æŒ‡é’ˆå¾ˆå®¹æ˜“å¼•å‘å†…å­˜å®‰å…¨é—®é¢˜ï¼Œå¦‚ç©ºæŒ‡é’ˆè§£å¼•ç”¨ã€æ‚¬æŒ‚æŒ‡é’ˆã€å†…å­˜æ³„æ¼ç­‰ã€‚ åœ¨Rustç­‰è¯­è¨€ä¸­ï¼Œè™½ç„¶æä¾›äº†è¿™ç§åŸå§‹æŒ‡é’ˆçš„èƒ½åŠ›ï¼Œä½†é¼“åŠ±å¼€å‘è€…ä½¿ç”¨æ›´å®‰å…¨çš„æ•°æ®ç»“æ„å’Œæ“ä½œï¼Œå¦‚æ™ºèƒ½æŒ‡é’ˆï¼ˆå¦‚Box\u003cT\u003eã€Rc\u003cT\u003eã€Arc\u003cT\u003eç­‰ï¼‰å’Œæ‰€æœ‰æƒç³»ç»Ÿï¼Œæ¥è‡ªåŠ¨ç®¡ç†å†…å­˜å’Œç”Ÿå‘½å‘¨æœŸï¼Œä»è€Œå‡å°‘å†…å­˜é”™è¯¯çš„é£é™©ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:1:4","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"Rc Rc\u003cT\u003e æ˜¯ Rust ä¸­ä¸€ä¸ªå…·æœ‰è¿è¡Œæ—¶æˆæœ¬çš„æ™ºèƒ½æŒ‡é’ˆåŒ…è£…å™¨ï¼Œå®ƒå®ç°äº†å¼•ç”¨è®¡æ•°æœºåˆ¶ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æœ‰å¤šä¸ªâ€œæ‹¥æœ‰â€æŒ‡å‘åŒä¸€æ•°æ®çš„æŒ‡é’ˆï¼Œå¹¶ä¸”å½“æ‰€æœ‰è¿™äº›æŒ‡é’ˆéƒ½è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œè¯¥æ•°æ®æ‰ä¼šè¢«é‡Šæ”¾ï¼ˆå³derefå‡½æ•°ä¼šè¢«è°ƒç”¨ï¼‰ã€‚ åœ¨å†…éƒ¨ï¼ŒRc\u003cT\u003e åŒ…å«ä¸€ä¸ªå…±äº«çš„â€œå¼•ç”¨è®¡æ•°â€ï¼Œæ¯æ¬¡ Rc è¢«å…‹éš†æ—¶ï¼Œè¿™ä¸ªè®¡æ•°å°±ä¼šå¢åŠ ï¼›æ¯å½“ä¸€ä¸ª Rc è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œè®¡æ•°å°±ä¼šå‡å°‘ã€‚Rc\u003cT\u003e çš„ä¸»è¦èŒè´£æ˜¯ç¡®ä¿å¯¹äºå…±äº«çš„æ•°æ®ï¼Œåœ¨å…¶ä¸å†è¢«ä»»ä½• Rc æŒ‡é’ˆå¼•ç”¨æ—¶è°ƒç”¨å…¶ææ„å‡½æ•°ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒRc\u003cT\u003e å†…éƒ¨çš„æ•°æ®æ˜¯ä¸å¯å˜çš„ã€‚æ­¤å¤–ï¼Œå¦‚æœå½¢æˆäº†ä¸€ä¸ªå¼•ç”¨å¾ªç¯ï¼ˆå³å¤šä¸ª Rc æŒ‡é’ˆç›¸äº’å¼•ç”¨ï¼Œå½¢æˆä¸€ä¸ªé—­ç¯ï¼‰ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®å°†æ— æ³•è¢«è‡ªåŠ¨é‡Šæ”¾ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚å¯¹äºéœ€è¦å¤„ç†å¼•ç”¨å¾ªç¯ä»¥é¿å…å†…å­˜æ³„æ¼çš„æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åƒåœ¾æ”¶é›†å™¨ï¼ˆGarbage Collector, GCï¼‰ã€‚ ç„¶è€ŒRust æ ‡å‡†åº“ä¸­å¹¶æ²¡æœ‰ç›´æ¥æä¾›åƒåœ¾æ”¶é›†å™¨ã€‚ä½†æ˜¯ï¼ŒRust ç¤¾åŒºä¸­æœ‰ä¸€äº›äººåœ¨åŠªåŠ›å¼€å‘è¿™æ ·çš„å·¥å…·ã€‚ä½†æ˜¯ Rust çš„è®¾è®¡å“²å­¦é€šå¸¸å€¾å‘äºé€šè¿‡æ‰€æœ‰æƒå’Œç”Ÿå‘½å‘¨æœŸè§„åˆ™æ¥é¿å…éœ€è¦åƒåœ¾æ”¶é›†å™¨çš„åœºæ™¯ã€‚ å½“å¸Œæœ›åŠ¨æ€åˆ†é…å¹¶åœ¨ç¨‹åºçš„å„ä¸ªéƒ¨åˆ†ä¹‹é—´å…±äº«ä¸€äº›æ•°æ®ï¼ˆåªè¯»ï¼‰æ—¶ï¼Œè€Œåˆä¸ç¡®å®šå“ªä¸ªéƒ¨åˆ†ä¼šæ˜¯æœ€åä½¿ç”¨è¿™äº›æŒ‡é’ˆçš„ï¼Œè¿™æ—¶ Rc\u003cT\u003e å°±éå¸¸æœ‰ç”¨ã€‚å®ƒæ˜¯ \u0026Tï¼ˆå³è£¸æŒ‡é’ˆæˆ–ä¸å¯å˜å¼•ç”¨ï¼‰çš„ä¸€ä¸ªå¯è¡Œæ›¿ä»£æ–¹æ¡ˆï¼Œå°¤å…¶æ˜¯åœ¨ \u0026T çš„æ­£ç¡®æ€§æ— æ³•é™æ€æ£€æŸ¥ï¼Œæˆ–è€…ä¼šå¯¼è‡´ç¼–å†™èµ·æ¥æä¸ºä¸ä¾¿çš„ä»£ç æ—¶ã€‚å¼€å‘è€…å¯èƒ½ä¸æ„¿æ„èŠ±è´¹å¤ªå¤šå¼€å‘æˆæœ¬æ¥å¤„ç†è¿™äº›æƒ…å†µã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRc\u003cT\u003e ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒRust ä¸å…è®¸å®ƒè·¨çº¿ç¨‹å‘é€æˆ–å…±äº«ã€‚è¿™æœ‰åŠ©äºåœ¨ä¸éœ€è¦åŸå­æ“ä½œæ—¶é¿å…åŸå­æ“ä½œçš„å¼€é”€ã€‚ ä¸ Rc\u003cT\u003e ç›¸å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªå§å¦¹ç±»å‹ Weak\u003cT\u003eã€‚Weak\u003cT\u003e æ˜¯ä¸€ä¸ªéæ‹¥æœ‰ï¼ˆnon-owningï¼‰ä¸”éå€Ÿç”¨ï¼ˆnon-borrowedï¼‰çš„æ™ºèƒ½æŒ‡é’ˆã€‚å®ƒä¹Ÿç±»ä¼¼äº \u0026Tï¼Œä½†åœ¨ç”Ÿå‘½å‘¨æœŸä¸Šæ²¡æœ‰é™åˆ¶â€”â€”Weak\u003cT\u003e å¯ä»¥æ°¸è¿œæŒæœ‰ã€‚ç„¶è€Œï¼Œç”±äºå®ƒå¯èƒ½æ¯”æ‹¥æœ‰çš„ Rc\u003cT\u003e å­˜æ´»æ—¶é—´æ›´é•¿ï¼Œå› æ­¤å°è¯•è®¿é—®å†…éƒ¨æ•°æ®æ—¶å¯èƒ½ä¼šå¤±è´¥å¹¶è¿”å› Noneã€‚è¿™åœ¨éœ€è¦å¾ªç¯æ•°æ®ç»“æ„æˆ–å…¶ä»–ç±»ä¼¼æƒ…å†µæ—¶éå¸¸æœ‰ç”¨ã€‚ æ€»çš„æ¥è¯´ï¼ŒRc\u003cT\u003e å’Œ Weak\u003cT\u003e æä¾›äº†ä¸€ç§åœ¨ Rust ä¸­å¤„ç†å…±äº«æ•°æ®æ‰€æœ‰æƒå’Œç”Ÿå‘½å‘¨æœŸçš„çµæ´»æ–¹å¼ï¼Œå°½ç®¡å®ƒä»¬ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”éœ€è¦å°å¿ƒå¤„ç†ä»¥é¿å…å†…å­˜æ³„æ¼æˆ–æ— æ•ˆçš„å†…å­˜è®¿é—®ã€‚ å¼€é”€ åœ¨å†…å­˜ä½¿ç”¨æ–¹é¢ï¼ŒRc\u003cT\u003e çš„å†…å­˜åˆ†é…æ˜¯å•ä¸€çš„ï¼Œä½†å®ƒä¸æ™®é€šçš„ Box\u003cT\u003e ç›¸æ¯”ä¼šé¢å¤–åˆ†é…ä¸¤ä¸ªå­—æ®µçš„ç©ºé—´ï¼Œç”¨äºå­˜å‚¨â€œå¼ºâ€å¼•ç”¨è®¡æ•°ï¼ˆstrong refcountï¼‰å’Œâ€œå¼±â€å¼•ç”¨è®¡æ•°ï¼ˆweak refcountï¼‰ã€‚è¿™ä¸¤ä¸ªå¼•ç”¨è®¡æ•°åˆ†åˆ«ç”¨äºè·Ÿè¸ª Rc\u003cT\u003e å’Œ Weak\u003cT\u003e ç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆçš„æ•°é‡ã€‚ Rc\u003cT\u003e åœ¨è®¡ç®—æˆæœ¬ä¸Šï¼Œæ¯æ¬¡å…‹éš†ï¼ˆcloneï¼‰æ—¶éƒ½ä¼šé€’å¢å†…éƒ¨å¼•ç”¨è®¡æ•°ï¼Œæ¯æ¬¡è¶…å‡ºä½œç”¨åŸŸæ—¶éƒ½ä¼šé€’å‡å¼•ç”¨è®¡æ•°ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…‹éš†æ“ä½œå¹¶ä¸ä¼šå¯¹ T ç±»å‹çš„å€¼è¿›è¡Œæ·±æ‹·è´ï¼ˆdeep copyï¼‰ï¼Œè€Œåªæ˜¯ç®€å•åœ°é€’å¢äº†å¼•ç”¨è®¡æ•°ï¼Œå¹¶è¿”å›äº†ä¸€ä¸ªæ–°çš„ Rc\u003cT\u003e å‰¯æœ¬ï¼Œè¿™ä¸ªå‰¯æœ¬å’ŒåŸå§‹çš„ Rc\u003cT\u003e æŒ‡å‘åŒä¸€ä¸ª T ç±»å‹çš„å€¼ã€‚ è¿™ç§è®¾è®¡ä½¿å¾— Rc\u003cT\u003e åœ¨å¤„ç†éœ€è¦å¤šä¸ªæ‰€æœ‰è€…ï¼ˆownerï¼‰å…±äº«åŒä¸€æ•°æ®çš„åœºæ™¯æ—¶éå¸¸æœ‰æ•ˆï¼Œå› ä¸ºå®ƒé¿å…äº†ä¸å¿…è¦çš„æ·±æ‹·è´ï¼Œä»è€ŒèŠ‚çœäº†å†…å­˜å’Œè®¡ç®—èµ„æºã€‚ç„¶è€Œï¼Œæ­£å¦‚ä¹‹å‰æåˆ°çš„ï¼ŒRc\u003cT\u003e ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”åœ¨å­˜åœ¨å¼•ç”¨å¾ªç¯æ—¶å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„è¿™äº›é—®é¢˜ã€‚ å¦å¤–ï¼ŒWeak\u003cT\u003e æ™ºèƒ½æŒ‡é’ˆæä¾›äº†ä¸€ç§è§£å†³å¼•ç”¨å¾ªç¯é—®é¢˜çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒä¸æ‹¥æœ‰æ•°æ®ï¼Œåªæ˜¯æä¾›äº†ä¸€ç§è®¿é—®æ•°æ®çš„æ–¹å¼ï¼Œå¹¶ä¸”ä¸ä¼šé€’å¢å¼ºå¼•ç”¨è®¡æ•°ã€‚ä½†æ˜¯ï¼Œç”±äº Weak\u003cT\u003e å¯èƒ½åœ¨å¼ºå¼•ç”¨è®¡æ•°å˜ä¸ºé›¶ä¹‹åä»ç„¶å­˜æ´»ï¼Œå› æ­¤å°è¯•é€šè¿‡ Weak\u003cT\u003e è®¿é—®æ•°æ®æ—¶å¯èƒ½ä¼šå¤±è´¥ã€‚è¿™ç§æœºåˆ¶å…è®¸åœ¨ä¿æŒæ•°æ®å¯è¾¾æ€§çš„åŒæ—¶ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:1:5","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"Cell ç±»å‹ â€œCellsâ€ æä¾›äº†å†…éƒ¨å¯å˜æ€§ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬åŒ…å«çš„æ•°æ®å³ä½¿åœ¨å…¶ç±»å‹æ— æ³•ä»¥å¯å˜å½¢å¼è·å–çš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚ï¼Œå½“æ•°æ®ä½äº \u0026-ptr æˆ– Rc åé¢æ—¶ï¼‰ä¹Ÿå¯ä»¥è¢«æ“ä½œã€‚ å…³äºè¿™äº›çš„è¯´æ˜ï¼Œcell æ¨¡å—çš„æ–‡æ¡£ä¸­æœ‰å¾ˆå¥½çš„è§£é‡Šã€‚ è¿™äº›ç±»å‹é€šå¸¸å‡ºç°åœ¨ç»“æ„ä½“å­—æ®µä¸­ï¼Œä½†ä¹Ÿå¯èƒ½åœ¨å…¶ä»–åœ°æ–¹æ‰¾åˆ°ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:2:0","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"Cell Cell\u003cT\u003e æ˜¯ä¸€ç§æä¾›é›¶æˆæœ¬å†…éƒ¨å¯å˜æ€§çš„ç±»å‹ï¼Œä½†å®ƒä»…é€‚ç”¨äº Copy ç±»å‹çš„å€¼ã€‚ç”±äºç¼–è¯‘å™¨çŸ¥é“è¢«åŒ…å«çš„å€¼æ‰€æ‹¥æœ‰çš„æ‰€æœ‰æ•°æ®éƒ½åœ¨æ ˆä¸Šï¼Œå› æ­¤ç®€å•åœ°æ›¿æ¢æ•°æ®ä¸ä¼šå¯¼è‡´ä»»ä½•æ•°æ®é€šè¿‡å¼•ç”¨æ³„éœ²ï¼ˆæˆ–æ›´ç³Ÿçš„æƒ…å†µï¼‰ã€‚ ç„¶è€Œï¼Œä½¿ç”¨æ­¤åŒ…è£…å™¨æ—¶ä»æœ‰å¯èƒ½è¿åæ‚¨è‡ªå·±çš„ä¸å˜æ€§è§„åˆ™ã€‚å¦‚æœä¸€ä¸ªå­—æ®µè¢« Cell åŒ…è£…ï¼Œé‚£ä¹ˆè¡¨æ˜è¯¥æ•°æ®å—æ˜¯å¯å˜çš„ï¼Œå¹¶ä¸”å¯èƒ½åœ¨é¦–æ¬¡è¯»å–å®ƒå’Œæ‰“ç®—ä½¿ç”¨å®ƒä¹‹é—´å‘ç”Ÿå˜åŒ–ã€‚ let x = Cell::new(1); let y = \u0026x; let z = \u0026x; x.set(2); y.set(3); z.set(4); println!(\"{}\", x.get()); åœ¨è¿™é‡Œæˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡å„ç§ä¸å¯å˜å¼•ç”¨æ¥ä¿®æ”¹ç›¸åŒçš„å€¼ã€‚ è¿™ä¸ä»¥ä¸‹çš„è¿è¡Œæ—¶æˆæœ¬ç›¸åŒï¼š let mut x = 1; let y = \u0026mut x; let z = \u0026mut x; x = 2; *y = 3; *z = 4; println!(\"{}\", x; ä½†æ˜¯ï¼Œå®ƒæœ‰ä¸€ä¸ªé¢å¤–çš„å¥½å¤„ï¼Œé‚£å°±æ˜¯å®é™…ä¸Šèƒ½å¤Ÿç¼–è¯‘æˆåŠŸã€‚ å¼€é”€ ä½¿ç”¨ Cell\u003cT\u003e åœ¨è¿è¡Œæ—¶æ˜¯æ²¡æœ‰æˆæœ¬çš„ï¼Œä½†æ˜¯å¦‚æœç”¨å®ƒæ¥åŒ…è£…è¾ƒå¤§çš„ï¼ˆCopyï¼‰ç»“æ„ä½“ï¼Œé‚£ä¹ˆå¯èƒ½å€¼å¾—è€ƒè™‘å°†ç»“æ„ä½“çš„å„ä¸ªå­—æ®µåˆ†åˆ«åŒ…è£…åœ¨ Cell\u003cT\u003e ä¸­ï¼Œå› ä¸ºæ¯æ¬¡å†™å…¥éƒ½ä¼šå¯¹æ•´ä¸ªç»“æ„ä½“è¿›è¡Œå®Œæ•´çš„å¤åˆ¶ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:2:1","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"RefCell RefCell\u003cT\u003e åŒæ ·æä¾›äº†å†…éƒ¨å¯å˜æ€§ï¼Œä½†å®ƒå¹¶ä¸å±€é™äº Copy ç±»å‹çš„å€¼ã€‚ ç›¸åï¼ŒRefCell\u003cT\u003e æœ‰ä¸€ä¸ªè¿è¡Œæ—¶æˆæœ¬ã€‚RefCell\u003cT\u003e åœ¨è¿è¡Œæ—¶å¼ºåˆ¶å®ç°äº†ç±»ä¼¼è¯»å†™é”ï¼ˆRWLockï¼‰çš„æ¨¡å¼ï¼ˆå°½ç®¡å®ƒæ›´åƒæ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„äº’æ–¥é”ï¼‰ï¼Œè¿™ä¸ \u0026T å’Œ \u0026mut T åœ¨ç¼–è¯‘æ—¶è¿›è¡Œçš„å€Ÿç”¨æ£€æŸ¥ä¸åŒã€‚è¿™æ˜¯é€šè¿‡ borrow() å’Œ borrow_mut() å‡½æ•°æ¥å®ç°çš„ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ä¼šä¿®æ”¹å†…éƒ¨çš„ä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œå¹¶è¿”å›æ™ºèƒ½æŒ‡é’ˆï¼Œè¿™äº›æ™ºèƒ½æŒ‡é’ˆå¯ä»¥åˆ†åˆ«è¢«ä¸å¯å˜å’Œå¯å˜åœ°è§£å¼•ç”¨ã€‚å½“è¿™äº›æ™ºèƒ½æŒ‡é’ˆè¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œå¼•ç”¨è®¡æ•°ä¼šè¢«æ¢å¤ã€‚é€šè¿‡è¿™ä¸ªç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€åœ°ç¡®ä¿åœ¨æœ‰ä¸€ä¸ªå¯å˜å€Ÿç”¨å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶ï¼Œä¸ä¼šæœ‰å…¶ä»–ä»»ä½•å€Ÿç”¨ï¼ˆæ— è®ºæ˜¯å¯å˜è¿˜æ˜¯ä¸å¯å˜ï¼‰å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚å¦‚æœç¨‹åºå‘˜è¯•å›¾è¿›è¡Œè¿™æ ·çš„å€Ÿç”¨ï¼Œç¨‹åºå°†ä¼šå‘ç”Ÿ panicã€‚ let x = RefCell::new(vec![1,2,3,4]); { println!(\"{:?}\", *x.borrow()) } { let my_ref = x.borrow_mut(); my_ref.push(1); } ç±»ä¼¼äº Cellï¼ŒRefCell ä¸»è¦ç”¨äºé‚£äº›éš¾ä»¥æ»¡è¶³å€Ÿç”¨æ£€æŸ¥å™¨ï¼ˆborrow checkerï¼‰è¦æ±‚çš„æƒ…å†µã€‚é€šå¸¸ï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ ·çš„çªå˜ä¸ä¼šä»¥åµŒå¥—çš„å½¢å¼å‘ç”Ÿï¼Œä½†è¿›è¡Œæ£€æŸ¥æ€»æ˜¯å¥½çš„ã€‚ å¯¹äºå¤§å‹ã€å¤æ‚çš„ç¨‹åºï¼Œå°†æŸäº›å†…å®¹æ”¾å…¥ RefCell ä»¥ç®€åŒ–äº‹æƒ…å˜å¾—å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼ŒRust ç¼–è¯‘å™¨å†…éƒ¨ ctxt ç»“æ„ä½“ä¸­çš„è®¸å¤šæ˜ å°„éƒ½ä½äºè¿™ä¸ªåŒ…è£…å™¨å†…éƒ¨ã€‚è¿™äº›æ˜ å°„é€šå¸¸åªè¢«ä¿®æ”¹ä¸€æ¬¡ï¼ˆåœ¨åˆ›å»ºæœŸé—´ï¼Œè€Œä¸æ˜¯åœ¨åˆå§‹åŒ–ä¹‹åç«‹å³ï¼‰æˆ–åœ¨å‡ ä¸ªåˆ†ç¦»çš„åœ°æ–¹è¢«ä¿®æ”¹å‡ æ¬¡ã€‚ç„¶è€Œï¼Œç”±äºè¿™ä¸ªç»“æ„ä½“è¢«å¹¿æ³›ä½¿ç”¨ï¼Œå› æ­¤å¤„ç†å¯å˜å’Œä¸å¯å˜æŒ‡é’ˆå°†ä¼šéå¸¸å›°éš¾ï¼ˆç”šè‡³å¯èƒ½ä¸å¯èƒ½ï¼‰ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå½¢æˆä¸€å›¢éš¾ä»¥æ‰©å±•çš„ \u0026 æŒ‡é’ˆçš„æ··ä¹±ã€‚å¦ä¸€æ–¹é¢ï¼ŒRefCell æä¾›äº†ä¸€ç§å»‰ä»·ï¼ˆå°½ç®¡ä¸æ˜¯é›¶æˆæœ¬ï¼‰çš„æ–¹å¼æ¥å®‰å…¨åœ°è®¿é—®è¿™äº›æ˜ å°„ã€‚åœ¨æœªæ¥ï¼Œå¦‚æœæœ‰äººæ·»åŠ äº†å°è¯•åœ¨å·²å€Ÿç”¨æ—¶ä¿®æ”¹å•å…ƒçš„ä»£ç ï¼Œå®ƒå°†å¯¼è‡´ä¸€ä¸ªï¼ˆé€šå¸¸æ˜¯ç¡®å®šçš„ï¼‰panicï¼Œè¿™ä¸ªpanicå¯ä»¥è¿½è¸ªåˆ°å¯¼è‡´é—®é¢˜çš„å€Ÿç”¨ã€‚ ç±»ä¼¼åœ°ï¼Œåœ¨ Servo çš„ DOM ä¸­ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šçªå˜ï¼Œå…¶ä¸­å¤§å¤šæ•°çªå˜æ˜¯å±€éƒ¨çš„ï¼Œå±äºæŸä¸ª DOM ç±»å‹ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›çªå˜ä¼šè·¨è¶Š DOM å¹¶ä¿®æ”¹å„ç§äº‹ç‰©ã€‚ä½¿ç”¨ RefCell å’Œ Cell æ¥ä¿æŠ¤æ‰€æœ‰çªå˜å¯ä»¥è®©æˆ‘ä»¬ä¸å¿…åˆ°å¤„æ‹…å¿ƒå¯å˜æ€§ï¼Œå¹¶ä¸”åŒæ—¶çªå‡ºæ˜¾ç¤ºå®é™…å‘ç”Ÿçªå˜çš„ä½ç½®ã€‚ è¯·æ³¨æ„ï¼Œå¦‚æœå¯ä»¥ä½¿ç”¨ \u0026 æŒ‡é’ˆä»¥æ›´ç®€å•çš„æ–¹å¼è§£å†³é—®é¢˜ï¼Œåˆ™åº”é¿å…ä½¿ç”¨ RefCellã€‚ å¼€é”€ RefCell æœ¬èº«å¹¶ä¸è¿›è¡Œå†…å­˜åˆ†é…ï¼Œä½†å®ƒé™¤äº†å­˜å‚¨æ•°æ®ä¹‹å¤–ï¼Œè¿˜åŒ…å«ä¸€ä¸ªé¢å¤–çš„â€œå€Ÿç”¨çŠ¶æ€â€æŒ‡ç¤ºå™¨ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå­—çš„å¤§å°ï¼‰ã€‚åœ¨è¿è¡Œæ—¶ï¼Œæ¯æ¬¡è¿›è¡Œå€Ÿç”¨æ“ä½œæ—¶ï¼Œéƒ½ä¼šå¯¹è¿™ä¸ªå¼•ç”¨è®¡æ•°è¿›è¡Œä¿®æ”¹æˆ–æ£€æŸ¥ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:2:2","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"åŒæ­¥ç±»å‹ ä¸Šé¢æåˆ°çš„è®¸å¤šç±»å‹éƒ½ä¸èƒ½ä»¥çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ä½¿ç”¨ã€‚ç‰¹åˆ«æ˜¯ Rc\u003cT\u003e å’Œ RefCell\u003cT\u003eï¼Œå®ƒä»¬éƒ½ä½¿ç”¨éåŸå­çš„å¼•ç”¨è®¡æ•°ï¼Œå› æ­¤ä¸èƒ½è¿™æ ·ä½¿ç”¨ã€‚è¿™ä½¿å¾—å®ƒä»¬ä½¿ç”¨èµ·æ¥æ›´ä¾¿å®œï¼Œä½†äººä»¬ä¹Ÿéœ€è¦è¿™äº›ç±»å‹çš„çº¿ç¨‹å®‰å…¨ç‰ˆæœ¬ã€‚è¿™äº›ç‰ˆæœ¬æ˜¯å­˜åœ¨çš„ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ Arc\u003cT\u003e å’Œ Mutex\u003cT\u003e/RWLock\u003cT\u003eã€‚ è¯·æ³¨æ„ï¼Œéçº¿ç¨‹å®‰å…¨çš„ç±»å‹ä¸èƒ½åœ¨çº¿ç¨‹ä¹‹é—´å‘é€ï¼Œè¿™ä¸€ç‚¹åœ¨ç¼–è¯‘æ—¶ä¼šè¢«æ£€æŸ¥ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:3:0","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"Arc Arc\u003cT\u003e æ˜¯ Rc\u003cT\u003e çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå®ƒä½¿ç”¨åŸå­å¼•ç”¨è®¡æ•°ã€‚Arc\u003cT\u003e å¯ä»¥åœ¨çº¿ç¨‹ä¹‹é—´è‡ªç”±å‘é€ã€‚ C++ çš„ shared_ptr ä¸ Arc ç±»ä¼¼ï¼Œä½†åœ¨ C++ çš„æƒ…å†µä¸‹ï¼Œå†…éƒ¨æ•°æ®æ€»æ˜¯å¯å˜çš„ã€‚ä¸ºäº†è·å¾—ä¸ C++ ç±»ä¼¼çš„è¯­ä¹‰ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ Arc\u003cMutex\u003cT\u003e\u003eã€Arc\u003cRwLock\u003cT\u003e\u003e æˆ– Arc\u003cUnsafeCell\u003cT\u003e\u003eï¼ˆUnsafeCell\u003cT\u003e æ˜¯ä¸€ç§å¯ä»¥å­˜å‚¨ä»»ä½•æ•°æ®çš„å•å…ƒç±»å‹ï¼Œæ²¡æœ‰è¿è¡Œæ—¶æˆæœ¬ï¼Œä½†è®¿é—®å®ƒéœ€è¦ unsafe ä»£ç å—ï¼‰ã€‚æœ€åä¸€ä¸ªé€‰é¡¹ï¼ˆArc\u003cUnsafeCell\u003cT\u003e\u003eï¼‰ä»…å½“ç¡®å®šä½¿ç”¨å®ƒä¸ä¼šå¯¼è‡´ä»»ä½•å†…å­˜ä¸å®‰å…¨æ—¶æ‰åº”ä½¿ç”¨ã€‚è¯·è®°ä½ï¼Œå†™å…¥ç»“æ„ä½“ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œè€Œä¸”è®¸å¤šå‡½æ•°ï¼ˆå¦‚ vec.push()ï¼‰å¯èƒ½ä¼šåœ¨å†…éƒ¨é‡æ–°åˆ†é…å¹¶å¯¼è‡´ä¸å®‰å…¨è¡Œä¸ºã€‚ å¼€é”€ è¿™å¢åŠ äº†ä½¿ç”¨åŸå­æ“ä½œæ¥æ”¹å˜å¼•ç”¨è®¡æ•°çš„æˆæœ¬ï¼ˆæ¯å½“å®ƒè¢«å…‹éš†æˆ–è¶…å‡ºä½œç”¨åŸŸæ—¶éƒ½ä¼šå‘ç”Ÿï¼‰ã€‚å½“åœ¨å•ä¸ªçº¿ç¨‹ä¸­å…±äº«æ¥è‡ª Arc çš„æ•°æ®æ—¶ï¼Œå°½å¯èƒ½å…±äº« \u0026 æŒ‡é’ˆæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:3:1","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"Mutex and RwLock Mutex\u003cT\u003e å’Œ RwLock\u003cT\u003e é€šè¿‡ RAIIï¼ˆResource Acquisition Is Initializationï¼‰ä¿æŠ¤æä¾›äº’æ–¥ã€‚ äº’æ–¥é”åœ¨è°ƒç”¨å…¶ lock() æ–¹æ³•ä¹‹å‰æ˜¯ä¸é€æ˜çš„ï¼Œæ­¤æ—¶çº¿ç¨‹å°†é˜»å¡ï¼Œç›´åˆ°å¯ä»¥è·å¾—é”ï¼Œç„¶åè¿”å›ä¸€ä¸ªä¿æŠ¤å¯¹è±¡ã€‚è¿™ä¸ªä¿æŠ¤å¯¹è±¡å¯ä»¥ç”¨æ¥è®¿é—®å†…éƒ¨æ•°æ®ï¼ˆå¯å˜çš„ï¼‰ï¼Œå¹¶ä¸”å½“ä¿æŠ¤å¯¹è±¡è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œé”å°†è¢«é‡Šæ”¾ã€‚ { let guard = mutex.lock(); *guard += 1; } // é‡Šæ”¾é” RwLock çš„é¢å¤–å¥½å¤„åœ¨äºå®ƒå¯¹å¤šä¸ªè¯»å–æ“ä½œæ˜¯é«˜æ•ˆçš„ã€‚åªè¦æ²¡æœ‰å†™å…¥è€…ï¼Œå°±å¯ä»¥å®‰å…¨åœ°å…è®¸å¤šä¸ªè¯»å–è€…è®¿é—®å…±äº«æ•°æ®ï¼›è€Œ RwLock å…è®¸è¯»å–è€…è·å¾—â€œè¯»é”â€ã€‚è¿™æ ·çš„é”å¯ä»¥å¹¶å‘åœ°è·å¾—ï¼Œå¹¶é€šè¿‡å¼•ç”¨è®¡æ•°æ¥è·Ÿè¸ªã€‚å†™å…¥è€…å¿…é¡»è·å¾—â€œå†™é”â€ï¼Œè€Œå†™é”åªæœ‰åœ¨æ‰€æœ‰è¯»å–è€…éƒ½è¶…å‡ºä½œç”¨åŸŸåæ‰èƒ½è·å¾—ã€‚ å¼€é”€ è¿™äº›é”ä½¿ç”¨ç±»ä¼¼äºå†…éƒ¨åŸå­ç±»å‹çš„æœºåˆ¶æ¥ç»´æŠ¤é”ï¼Œè€Œè¿™äº›é”æ˜¯ç›¸å½“æ˜‚è´µçš„ï¼ˆå®ƒä»¬å¯ä»¥é˜»å¡è·¨å¤„ç†å™¨çš„æ‰€æœ‰å†…å­˜è¯»å–ï¼Œç›´åˆ°å®ƒä»¬å®Œæˆï¼‰ã€‚å½“æœ‰å¾ˆå¤šå¹¶å‘è®¿é—®å‘ç”Ÿæ—¶ï¼Œç­‰å¾…è¿™äº›é”ä¹Ÿå¯èƒ½å¾ˆæ…¢ã€‚ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:3:2","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["rust"],"content":"æœ€å é˜…è¯» Rust ä»£ç æ—¶ï¼Œç»å¸¸ä¼šçœ‹åˆ° Rc\u003cRefCell\u003cVec\u003cT\u003e\u003e\u003e è¿™æ ·çš„ç±»å‹ä»¥åŠè¿™äº›ç±»å‹çš„æ›´å¤æ‚ç»„åˆã€‚ é€šå¸¸ï¼Œè¿™æ˜¯åœ¨å°†æ‰€éœ€çš„ guard ç»„åˆåœ¨ä¸€èµ·ï¼ŒåŒæ—¶é¿å…ä¸ºä¸å¿…è¦çš„ä¸œè¥¿ä»˜å‡ºä»£ä»·ã€‚ ä¾‹å¦‚ï¼ŒRc\u003cRefCell\u003cT\u003e\u003e å°±æ˜¯è¿™æ ·ä¸€ä¸ªç»„åˆã€‚Rc æœ¬èº«ä¸èƒ½å¯å˜åœ°è§£å¼•ç”¨ï¼›å› ä¸º Rc æä¾›å…±äº«ï¼Œè€Œå…±äº«çš„å¯å˜æ€§æ˜¯ä¸å¥½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠ RefCell æ”¾åœ¨é‡Œé¢ä»¥è·å¾—åŠ¨æ€éªŒè¯çš„å…±äº«å¯å˜æ€§ã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†å…±äº«çš„å¯å˜æ•°æ®ï¼Œä½†å®ƒæ˜¯ä»¥ä¸€ç§æ–¹å¼å…±äº«çš„ï¼Œå³ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªä¿®æ”¹è€…ï¼ˆä¸”æ²¡æœ‰è¯»è€…ï¼‰æˆ–å¤šä¸ªè¯»è€…ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œä½¿ç”¨ Rc\u003cRefCell\u003cVec\u003cT\u003e\u003e\u003e æˆ– Rc\u003cVec\u003cRefCell\u003cT\u003e\u003e\u003eã€‚è¿™ä¸¤è€…éƒ½æ˜¯å¯å…±äº«ã€å¯å˜çš„å‘é‡ï¼Œä½†å®ƒä»¬å¹¶ä¸ç›¸åŒã€‚ å¯¹äºå‰è€…ï¼ŒRefCell åŒ…è£¹äº†æ•´ä¸ª Vecï¼Œå› æ­¤æ•´ä¸ª Vec éƒ½æ˜¯å¯å˜çš„ã€‚åŒæ—¶ï¼Œåœ¨ç»™å®šæ—¶é—´å†…ï¼Œæ•´ä¸ª Vec åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å€Ÿç”¨ã€‚è¿™æ„å‘³ç€ä½ çš„ä»£ç ä¸èƒ½åŒæ—¶ä»ä¸åŒçš„ Rc å¥æŸ„ä¸Šæ“ä½œå‘é‡çš„ä¸åŒå…ƒç´ ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥éšæ„åœ°å‘ Vec ä¸­æ·»åŠ å’Œåˆ é™¤å…ƒç´ ã€‚è¿™ç±»ä¼¼äºä¸€ä¸ª \u0026mut Vec\u003cT\u003eï¼Œä½†å€Ÿç”¨æ£€æŸ¥æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œçš„ã€‚ å¯¹äºåè€…ï¼Œæ˜¯å¯¹å•ä¸ªå…ƒç´ çš„å€Ÿç”¨ï¼Œä½†æ•´ä¸ªå‘é‡æ˜¯ä¸å¯å˜çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç‹¬ç«‹åœ°å€Ÿç”¨ä¸åŒçš„å…ƒç´ ï¼Œä½†æˆ‘ä»¬ä¸èƒ½å‘å‘é‡ä¸­æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚è¿™ç±»ä¼¼äºä¸€ä¸ª \u0026mut [T]ï¼Œä½†åŒæ ·ï¼Œå€Ÿç”¨æ£€æŸ¥æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œçš„ã€‚ åœ¨å¹¶å‘ç¨‹åºä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç±»ä¼¼çš„æƒ…å†µï¼Œå³ Arc\u003cMutex\u003cT\u003e\u003eï¼Œå®ƒæä¾›äº†å…±äº«çš„å¯å˜æ€§å’Œæ‰€æœ‰æƒã€‚ å½“é˜…è¯»ä½¿ç”¨è¿™äº›ç±»å‹çš„ä»£ç æ—¶ï¼Œè¦é€æ­¥è¿›è¡Œï¼Œå¹¶æŸ¥çœ‹æ‰€æä¾›çš„ä¿è¯/æˆæœ¬ã€‚ åœ¨é€‰æ‹©ç»„åˆç±»å‹æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åè¿‡æ¥åšï¼›ç¡®å®šæˆ‘ä»¬æƒ³è¦çš„ä¿è¯ï¼Œä»¥åŠåœ¨ç»„åˆçš„å“ªä¸ªç‚¹éœ€è¦å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨ Vec\u003cRefCell\u003cT\u003e\u003e å’Œ RefCell\u003cVec\u003cT\u003e\u003e ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼Œæˆ‘ä»¬åº”è¯¥åƒä¸Šé¢é‚£æ ·æƒè¡¡åˆ©å¼Šï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªã€‚ å¦‚æœè¿˜æ˜¯ä¸å¤ªç¡®å®šè‡ªå·±åœ¨å¼€å‘ä¸­åº”è¯¥æ€ä¹ˆé€‰æ‹©å®ƒä»¬å¯ä»¥å‚è€ƒä¸‹é¢è¿™å¹…ç¤¾åŒºä¸­çš„å¤§ä½¬ç»™å‡ºçš„å›¾ +-----------+ | Ownership | +--+--------+ +================+ | +-Static-----\u003e| T |(1) | | +================+ | | | | +================+ | +-----------+ | Local Val| Cell\u003cT\u003e |(1) +-Unique--\u003e| Borrowing +--+-Dynamic----\u003e|----------------| | +-----------+ | Ref| RefCell\u003cT\u003e |(1) | | +================+ | | | | +================+ | | Threaded | AtomicT |(2) | +-Dynamic----\u003e|----------------| | | Mutex\u003cT\u003e |(1) | | RwLock\u003cT\u003e |(1) | +================+ | | | +================+ | +-No---------\u003e| Rc\u003cT\u003e | | | +================+ | Locally +-----------+ | +-Shared--\u003e| Mutable? +--+ +================+ | +-----------+ | Val| Rc\u003cCell\u003cT\u003e\u003e | | +-Yes--------\u003e|----------------| | Ref| Rc\u003cRefCell\u003cT\u003e\u003e | | +================+ | | | +================+ | +-No---------\u003e| Arc\u003cT\u003e | | | +================+ | Shared +-----------+ | +-Between-\u003e| Mutable? +--+ +================+ Threads +-----------+ | | Arc\u003cAtomicT\u003e |(2) +-Yes--------\u003e|----------------| | Arc\u003cMutex\u003cT\u003e\u003e | | Arc\u003cRwLock\u003cT\u003e\u003e | +================+ ","date":"2022-11-12","objectID":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/:4:0","tags":["rust"],"title":"Rust åŒ…è£…ç±»å‹","uri":"/posts/rust%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"},{"categories":["tool"],"content":"æ–‡ç« å·²è¿ç§»åˆ° Notion https://nervous-petunia-ec3.notion.site/3fbc0343cb724c25a6e05d487f697ab2?v=1af10d27f4644002bb8f5fce2d75c47a\u0026pvs=4 ","date":"2022-09-04","objectID":"/posts/%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7/:0:0","tags":["tool"],"title":"å¼€æºå·¥å…·","uri":"/posts/%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7/"},{"categories":["tool"],"content":"yapiæ˜¯ä»€ä¹ˆ YApi æ˜¯é«˜æ•ˆã€æ˜“ç”¨ã€åŠŸèƒ½å¼ºå¤§çš„ api ç®¡ç†å¹³å°ï¼Œæ—¨åœ¨ä¸ºå¼€å‘ã€äº§å“ã€æµ‹è¯•äººå‘˜æä¾›æ›´ä¼˜é›…çš„æ¥å£ç®¡ç†æœåŠ¡ã€‚å¯ä»¥å¸®åŠ©å¼€å‘è€…è½»æ¾åˆ›å»ºã€å‘å¸ƒã€ç»´æŠ¤ APIï¼ŒYApi è¿˜ä¸ºç”¨æˆ·æä¾›äº†ä¼˜ç§€çš„äº¤äº’ä½“éªŒï¼Œå¼€å‘äººå‘˜åªéœ€åˆ©ç”¨å¹³å°æä¾›çš„æ¥å£æ•°æ®å†™å…¥å·¥å…·ä»¥åŠç®€å•çš„ç‚¹å‡»æ“ä½œå°±å¯ä»¥å®ç°æ¥å£çš„ç®¡ç†ã€‚ ","date":"2022-08-13","objectID":"/posts/yapi/:1:0","tags":["tool"],"title":"YApi","uri":"/posts/yapi/"},{"categories":["tool"],"content":"å‰åç«¯åˆ†ç¦»æ¼”å˜è¿‡ç¨‹ ","date":"2022-08-13","objectID":"/posts/yapi/:2:0","tags":["tool"],"title":"YApi","uri":"/posts/yapi/"},{"categories":["tool"],"content":"å‰åç«¯ä¸åˆ†ç¦» åœ¨äº’è”ç½‘å‘å±•çš„æ—©æœŸï¼Œå‰åç«¯å¼€å‘æ—¶ä¸€ä½“çš„ï¼Œå‰ç«¯ä»£ç æ—¶åç«¯ä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œåç«¯æ”¶åˆ°æµè§ˆå™¨çš„è¯·æ±‚åç”Ÿæˆé™æ€é¡µé¢å‘é€åˆ°æµè§ˆå™¨ã€‚é‚£æ—¶å€™çš„ç½‘ç«™å¼€å‘é‡‡ç”¨çš„æ˜¯åç«¯MVCæ¨¡å¼å³ Model: æä¾›/ä¿å­˜æ•°æ® View: å±•ç¤ºæ•°æ®ï¼Œæä¾›ç”¨æˆ·ç•Œé¢ Controller: æ•°æ®å¤„ç†ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘ å‰ç«¯è´Ÿè´£é¡¹ç›®çš„HTMLé™æ€æ–‡ä»¶æˆ–HTMLæ¨¡æ¿æ–‡ä»¶ï¼Œæ¨¡æ¿æ–‡ä»¶æŒ‰ç…§çº¦å®šå†™å¥½ä¹‹åäº¤ç»™åç«¯ï¼Œç”±åç«¯æœåŠ¡è¿›è¡Œæ¸²æŸ“ã€‚è¿™ç§å¼€å‘æ¨¡å¼æ˜¯éå¸¸éº»çƒ¦çš„ï¼Œå¦‚æœHTMLé™æ€æ–‡ä»¶æ›´æ”¹äº†åç«¯éœ€è¦çŸ¥é“å‰ç«¯æ”¹äº†å“ªäº›åœ°æ–¹æ‰èƒ½å»æ›´æ”¹æ¨¡æ¿æ–‡ä»¶ ","date":"2022-08-13","objectID":"/posts/yapi/:2:1","tags":["tool"],"title":"YApi","uri":"/posts/yapi/"},{"categories":["tool"],"content":"å‰åç«¯åˆ†ç¦» åˆ°äº†2000å¹´ä»¥åï¼Œå‰ç«¯è¿æ¥äº†AjaxæŠ€æœ¯ï¼Œä»æ­¤å‰ç«¯ä¸å†æ˜¯åç«¯çš„æ¨¡æ¿ï¼Œå¯ä»¥å¾—åˆ°å„ç§æ•°æ®ï¼ŒAjaxæŠ€æœ¯ä¿ƒè¿›äº†Web2.0çš„è¯ç”Ÿï¼Œä»é‚£æ—¶èµ·å‰ç«¯å˜å¾—å¤æ‚èµ·æ¥ï¼Œå¯¹å‰ç«¯å·¥ç¨‹å¸ˆçš„è¦æ±‚è¶Šæ¥è¶Šé«˜ã€‚ å‰ç«¯çš„HTML/CSS/JS å®Œå…¨ç”±å‰ç«¯äººå‘˜è¿›è¡Œç®¡ç†ï¼Œäº¤äº’å°±é€šè¿‡apiæ¥å£ï¼Œæµè§ˆå™¨ç›´æ¥è®¿é—®å‰ç«¯æœåŠ¡å™¨ï¼Œå‰ç«¯æœåŠ¡å™¨è¿”å›é™æ€èµ„æºåå†ç”±æµè§ˆå™¨è§£æåå‘åç«¯å‘èµ·æ•°æ®èµ„æºè¯·æ±‚ï¼Œæ•°æ®æ˜ å°„åˆ°æµè§ˆå™¨çš„è¿‡ç¨‹ç”±å‰ç«¯è´Ÿè´£ è¿™æ—¶å€™åˆå‡ºç°äº†é—®é¢˜ï¼Œå‰åç«¯è¿›è¡Œäº¤äº’æ—¶å‘é€å’Œè¿”å›çš„æ•°æ®çš„è§£é‡Šï¼Œæ‰€ä»¥éœ€è¦æ–‡æ¡£è¿›è¡ŒæŒ‡æ˜è¯·æ±‚çš„URLè·¯å¾„ä»¥åŠå‘é€å’Œè¿”å›çš„æ•°æ®çš„å«ä¹‰ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ç§æ–‡æ¡£å˜å¾—ååˆ†é‡è¦ ","date":"2022-08-13","objectID":"/posts/yapi/:2:2","tags":["tool"],"title":"YApi","uri":"/posts/yapi/"},{"categories":["tool"],"content":"æ–‡æ¡£ç³»ç»Ÿä¹‹ç—› å‰åç«¯åˆ†ç¦»ä¹‹åï¼Œåç«¯å‡ºç°äº†å„ç§æ–‡æ¡£ç³»ç»Ÿæ¡†æ¶å¦‚swaggerï¼Œæ¡†æ¶é€šè¿‡æ‰«æåˆ†æä»£ç ç”Ÿæˆä¸€ä¸ªåŒ…å«URLè·¯å¾„ä»¥åŠè¯·æ±‚å’Œè¿”å›çš„æ•°æ®çš„æ–‡æ¡£ç³»ç»Ÿï¼Œå¹¶ä¸”åç«¯äººå‘˜å¯ä»¥é€šè¿‡æ–‡æ¡£ç³»ç»Ÿæµ‹è¯•åç«¯æ¥å£ã€‚ swaggerè¿™ç±»æ–‡æ¡£ç³»ç»Ÿåªèƒ½æä¾›HTTPè¯·æ±‚æµ‹è¯•åç«¯è¿”å›æ•°æ®ï¼Œå¹¶ä¸èƒ½æ¥å—æŒ‡å®šHTTPè¯·æ±‚å¹¶è¿”å›æŒ‡å®šæ ¼å¼çš„æ•°æ®ï¼Œå› ä¸ºæ–‡æ¡£ç³»ç»Ÿå’Œåç«¯ç»‘å®šäº†ï¼Œå‰ç«¯æƒ³è¦æ‹¿åˆ°æ•°æ®åªèƒ½é€šè¿‡åƒåç«¯æœåŠ¡å™¨å‘èµ·HTTPè¯·æ±‚ã€‚ å¦‚æœåç«¯æ²¡æœ‰å®ŒæˆæŒ‡å®šæ¥å£å¹¶ä¸Šçº¿ï¼Œé‚£ä¹ˆå‰ç«¯å¼€å‘å°±ä¸èƒ½è¿›è¡Œæµ‹è¯•ï¼Œäºæ˜¯å‰ç«¯å¼€å‘åˆè¡ç”Ÿå‡ºäº†mockç³»ç»Ÿï¼Œå‰ç«¯æ ¹æ®åç«¯æ¥å£æ–‡æ¡£å®šä¹‰å¥½æ•°æ®æ ¼å¼å°±èƒ½ç”Ÿæˆæ•´ä¸ªæµ‹è¯•æ•°æ®ï¼Œä½†æ˜¯å‰ç«¯åªèƒ½æœ¬åœ°mockæˆ–è€…éƒ¨ç½²ä¸€å¥—ç‹¬ç«‹çš„mockç³»ç»Ÿï¼Œmockç³»ç»Ÿå’Œæ¥å£æ–‡æ¡£ç³»ç»Ÿå®Œå…¨æ˜¯åˆ†ç¦»çš„ï¼Œå¦‚æœåç«¯æ›´æ”¹æˆ–å¢åŠ äº†æŸä¸ªæ¥å£ï¼Œæ–‡æ¡£ç³»ç»Ÿå’Œmockç³»ç»Ÿå°±éœ€è¦é‡æ–°éƒ¨ç½²ã€‚ ","date":"2022-08-13","objectID":"/posts/yapi/:3:0","tags":["tool"],"title":"YApi","uri":"/posts/yapi/"},{"categories":["tool"],"content":"YApi YApiåªéœ€è¦å®šä¹‰æ¥å£è§„åˆ™å°±èƒ½mockå‡ºæ•°æ®ç»™å‰ç«¯å¼€å‘äººå‘˜ä½¿ç”¨ï¼Œå¹¶ä¸”ä¸ºåç«¯æä¾›æ¥å£æµ‹è¯•çš„åŠŸèƒ½ï¼ŒYApiè®©å‰åç«¯å¼€å‘å˜å¾—å¾ˆç‹¬ç«‹äº†ï¼Œåªéœ€è¦å°†æ¥å£å®šä¹‰å¥½ï¼Œå°±èƒ½ç”Ÿæˆå‡ºä¸€ä¸ªmockåœ°å€ï¼Œå¹¶æä¾›å‘åç«¯å‘èµ·è¯·æ±‚éªŒè¯è¿”å›çš„æ•°æ®æ ¼å¼çš„åŠŸèƒ½ï¼Œå‰ç«¯å¼€å‘åœ¨æœ¬åœ°å¼€å‘æ—¶åªéœ€è¦é…ç½®è¯·æ±‚ä»£ç†å°±èƒ½æ‹¿åˆ°æ­£ç¡®æ ¼å¼çš„æ•°æ®ï¼Œåç«¯å¼€å‘æ ¹æ®æ–‡æ¡£å®ŒæˆæŒ‡å®šæ¥å£ä¹‹åå°±èƒ½éªŒè¯æ¥å£æ˜¯å¦æ»¡è¶³æ–‡æ¡£éœ€æ±‚ã€‚æ•´ä¸ªå¼€å‘è¿‡ç¨‹å°±ä¸ä¼šå‡ºç°æœ‰ä¸€æ–¹å­˜åœ¨å¼€å‘ä¿¡æ¯æ»åçš„é—®é¢˜ï¼Œå¹¶ä¸”å¦‚æœéœ€è¦æ›´æ”¹æ¥å£å‰åç«¯ç«‹é©¬èƒ½å¤Ÿæ„ŸçŸ¥åˆ°ï¼Œå¹¶ä¸”æŒ‰ç…§æ–‡æ¡£è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ã€‚ ","date":"2022-08-13","objectID":"/posts/yapi/:4:0","tags":["tool"],"title":"YApi","uri":"/posts/yapi/"},{"categories":["tool"],"content":"éƒ¨ç½² YApiéƒ¨ç½²æœ‰å¾ˆå¤šé—®é¢˜ï¼Œæ¨èä½¿ç”¨ç¬¬ä¸‰æ–¹çš„Dockeré•œåƒç›´æ¥éƒ¨ç½² https://github.com/fjc0k/docker-YApi ","date":"2022-08-13","objectID":"/posts/yapi/:4:1","tags":["tool"],"title":"YApi","uri":"/posts/yapi/"},{"categories":["tool"],"content":"YApiçš„æ¼æ´ åœ¨ä½¿ç”¨é«˜çº§Mockçš„æ—¶å€™ä¼šå­˜åœ¨å®‰å…¨æ¼æ´ { \"errcode\": 400, \"errmsg\": \"è§£æå‡ºé”™ï¼Œè¯·æ£€æŸ¥ã€‚Error: EROFS: read-only file system, mkdir '/sys/fs/cgroup/cpu/safeify'\", \"data\": null } åœ¨å®˜æ–¹ä»“åº“çš„issuesä¸­#2536ï¼Œæœ‰æåˆ°è¿™ä¸ªé«˜å±æ¼æ´ å·²ç»æœ‰äººé€šè¿‡å…¥æ›´å®‰å…¨çš„ Safeify æ²™ç®±å¤„ç†è¿™ä¸ªé—®é¢˜ï¼šYAPIå®‰å…¨æ¼æ´é—®é¢˜ï¼Œä¸€æ–‡å…¨è§£å†³ ","date":"2022-08-13","objectID":"/posts/yapi/:5:0","tags":["tool"],"title":"YApi","uri":"/posts/yapi/"},{"categories":["Go"],"content":"Go æ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼Œä¸ä¾èµ–è™šæ‹Ÿæœºï¼Œç¼–è¯‘æˆäºŒè¿›åˆ¶çš„å¯æ‰§è¡Œç¨‹åºå³å¯è¿è¡Œ ","date":"2022-05-22","objectID":"/posts/how-go-works/:0:0","tags":["Go"],"title":"Goè¯­è¨€æ˜¯å¦‚ä½•è¿è¡Œçš„","uri":"/posts/how-go-works/"},{"categories":["Go"],"content":"å¯æ‰§è¡Œæ–‡ä»¶ ","date":"2022-05-22","objectID":"/posts/how-go-works/:1:0","tags":["Go"],"title":"Goè¯­è¨€æ˜¯å¦‚ä½•è¿è¡Œçš„","uri":"/posts/how-go-works/"},{"categories":["Go"],"content":"Go ç¨‹åºçš„ç¼–è¯‘è¿‡ç¨‹ åœ¨ç¼–è¯‘ç›®æ ‡æ–‡ä»¶æ—¶ä½¿ç”¨ -x å‚æ•°èƒ½å¤Ÿçœ‹åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ç”Ÿæˆçš„è¿‡ç¨‹ ç¼–è¯‘é˜¶æ®µå°±æ˜¯å°†æ–‡æœ¬ä»£ç è½¬åŒ–ä¸ºç›®æ ‡æ–‡ä»¶ï¼Œç›®æ ‡æ–‡ä»¶å†ä¸æ ‡å‡†åº“ä¸­å·²ç»ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œé“¾æ¥ï¼Œé“¾æ¥å®Œæˆä¹‹åå°±ä¼šåœ¨ä¸´æ—¶ç›®å½•å°†å®Œæ•´çš„äºŒè¿›åˆ¶æ–‡ä»¶è¾“å‡ºï¼Œç„¶åå°†ç¼–è¯‘å¥½çš„ç¨‹åºå¤åˆ¶åˆ°ç›®æ ‡ç›®å½•ï¼Œæœ€åå†åˆ é™¤ä¸´æ—¶ç›®å½• package main import \"fmt\" func main() { fmt.Println(\"Hello World\") } ","date":"2022-05-22","objectID":"/posts/how-go-works/:1:1","tags":["Go"],"title":"Goè¯­è¨€æ˜¯å¦‚ä½•è¿è¡Œçš„","uri":"/posts/how-go-works/"},{"categories":["Go"],"content":"å¯æ‰§è¡Œæ–‡ä»¶è§„èŒƒ ä¸åŒçš„æ“ä½œç³»ç»Ÿå¯æ‰§è¡Œæ–‡ä»¶çš„è§„èŒƒæ˜¯ä¸åŒçš„ Linux Windows MacOS ELF PE Mach-o Linux çš„å¯æ‰§è¡Œæ–‡ä»¶ ELF(Executable and Linkable Format) ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆ ELF header Section header Sections https://github.com/corkami/pics/blob/master/binary/elf101/elf101.pdf ","date":"2022-05-22","objectID":"/posts/how-go-works/:1:2","tags":["Go"],"title":"Goè¯­è¨€æ˜¯å¦‚ä½•è¿è¡Œçš„","uri":"/posts/how-go-works/"},{"categories":["Go"],"content":"ç³»ç»Ÿæ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶æ­¥éª¤ ","date":"2022-05-22","objectID":"/posts/how-go-works/:1:3","tags":["Go"],"title":"Goè¯­è¨€æ˜¯å¦‚ä½•è¿è¡Œçš„","uri":"/posts/how-go-works/"},{"categories":["Go"],"content":"Go è¿›ç¨‹çš„å¯åŠ¨ä¸åˆå§‹åŒ– CPU æ— æ³•ç†è§£æ–‡æœ¬ï¼Œåªèƒ½æ‰§è¡Œä¸€æ¡ä¸€æ¡çš„äºŒè¿›åˆ¶æœºå™¨ç æŒ‡ä»¤ï¼Œæ¯æ¬¡æ‰§è¡Œå®Œä¸€æ¡æŒ‡ä»¤ï¼Œpc å¯„å­˜å™¨å°±ä¼šæŒ‡å‘ä¸‹ä¸€æ¡ç»§ç»­æ‰§è¡Œ go build -gcflags \"-N -l\" main.go go tool objdump -s \"main.\" main Go è¯­è¨€ç¼–è¯‘å‡ºæ¥çš„äºŒè¿›åˆ¶ç¨‹åºç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€éƒ¨åˆ†æ˜¯ Go è¯­è¨€çš„ runtimeï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯ç”¨æˆ·ä»£ç  runtime æ˜¯ä¸ºäº†å®ç°é¢å¤–çš„åŠŸèƒ½ï¼Œè€Œå†ç¨‹åºè¿è¡Œæ—¶è‡ªåŠ¨åŠ è½½/è¿è¡Œçš„æ¨¡å— Go è¯­è¨€çš„ runtime æ¨¡å— æ¨¡å—åç§° ä½œç”¨ Scheduler è°ƒåº¦å™¨ç®¡ç†æ‰€æœ‰çš„ G, M, P åœ¨åå°æ‰§è¡Œè°ƒåº¦å¾ªç¯ Netpoll å¼ºç½—è½®è¯¢è´Ÿè´£ç®¡ç†ç½‘ç»œ FD ç›¸å…³çš„è¯»å†™ã€å°±ç»ªäº‹ä»¶ Memory å½“ä»£ç éœ€è¦å†…å­˜æ—¶ï¼Œè´Ÿè´£å†…å­˜åˆ†é…å·¥ä½œ Garbage å½“å†…å­˜ä¸å†éœ€è¦æ—¶ï¼Œè´Ÿè´£å›æ”¶å†…å­˜ è¿™äº›æ¨¡å—ä¸­æœ€æ ¸å¿ƒçš„å°±æ˜¯ Scheduler, å®ƒè´Ÿè´£ä¸²è”æ˜¯æ‰€æœ‰çš„ runtime æµç¨‹ é€šè¿‡ entry point æ‰¾åˆ° Goè¿›ç¨‹çš„æ‰§è¡Œå…¥å£ m0 æ˜¯ Go ç¨‹åºå¯åŠ¨ååˆ›å»ºçš„ç¬¬ä¸€ä¸ªçº¿ç¨‹ ","date":"2022-05-22","objectID":"/posts/how-go-works/:2:0","tags":["Go"],"title":"Goè¯­è¨€æ˜¯å¦‚ä½•è¿è¡Œçš„","uri":"/posts/how-go-works/"},{"categories":["Go"],"content":"Go è°ƒåº¦å™¨çš„ç”±æ¥ æ‘˜è‡ªåˆ˜ä¸¹å†°çš„åšå®¢: https://learnku.com/articles/41728#a19960 ","date":"2022-05-22","objectID":"/posts/how-go-works/:3:0","tags":["Go"],"title":"Goè¯­è¨€æ˜¯å¦‚ä½•è¿è¡Œçš„","uri":"/posts/how-go-works/"},{"categories":["Go"],"content":"å•è¿›ç¨‹æ—¶ä»£ å•è¿›ç¨‹æ—¶ä»£æ¯ä¸ªç¨‹åºå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œç›´åˆ°ä¸€ä¸ªç¨‹åºè¿è¡Œå®Œï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€åˆ‡çš„ç¨‹åºåªèƒ½ä¸²è¡Œå‘ç”Ÿ æ—©æœŸçš„å•è¿›ç¨‹æ“ä½œç³»ç»Ÿé¢ä¸´ä¸¤ä¸ªé—®é¢˜ï¼š å•ä¸€çš„æ‰§è¡Œæµç¨‹ï¼Œè®¡ç®—æœºåªèƒ½ä¸€ä¸ªä»»åŠ¡ä¸€ä¸ªä»»åŠ¡å¤„ç† è¿›ç¨‹é˜»å¡æ‰€å¸¦æ¥çš„ CPU è®¡ç®—æ—¶é—´æµªè´¹ ä¸ºäº†è§£å†³å¤šä¸ªè¿›ç¨‹æ¥å®è§‚ä¸€èµ·æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œæ“ä½œç³»ç»Ÿå…·æœ‰äº†æœ€æ—©çš„å¹¶å‘èƒ½åŠ›ï¼šå¤šè¿›ç¨‹å¹¶å‘ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹é˜»å¡çš„æ—¶å€™ï¼Œåˆ‡æ¢åˆ°å¦å¤–ç­‰å¾…æ‰§è¡Œçš„è¿›ç¨‹ï¼Œè¿™æ ·å°±èƒ½å°½é‡æŠŠ CPU åˆ©ç”¨èµ·æ¥ ","date":"2022-05-22","objectID":"/posts/how-go-works/:3:1","tags":["Go"],"title":"Goè¯­è¨€æ˜¯å¦‚ä½•è¿è¡Œçš„","uri":"/posts/how-go-works/"},{"categories":["Go"],"content":"æé«˜ CPU çš„åˆ©ç”¨ç‡ ä½†æ˜¯å¯¹äº Linux æ“ä½œç³»ç»Ÿæ¥è®²ï¼Œcpu å¯¹è¿›ç¨‹çš„æ€åº¦å’Œçº¿ç¨‹çš„æ€åº¦æ˜¯ä¸€æ ·çš„ã€‚ CPU è°ƒåº¦åˆ‡æ¢çš„æ˜¯è¿›ç¨‹å’Œçº¿ç¨‹ã€‚å°½ç®¡çº¿ç¨‹çœ‹èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†å®é™…ä¸Šå¤šçº¿ç¨‹å¼€å‘è®¾è®¡ä¼šå˜å¾—æ›´åŠ å¤æ‚ï¼Œè¦è€ƒè™‘å¾ˆå¤šåŒæ­¥ç«äº‰ç­‰é—®é¢˜ï¼Œå¦‚é”ã€ç«äº‰å†²çªç­‰ ","date":"2022-05-22","objectID":"/posts/how-go-works/:3:2","tags":["Go"],"title":"Goè¯­è¨€æ˜¯å¦‚ä½•è¿è¡Œçš„","uri":"/posts/how-go-works/"},{"categories":["Go"],"content":"åˆ©ç”¨åç¨‹æ¥æé«˜ CPU åˆ©ç”¨ç‡ å¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹å·²ç»æé«˜äº†ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›ï¼Œä½†æ˜¯åœ¨å½“ä»Šäº’è”ç½‘å¹¶å‘åœºæ™¯ä¸‹ï¼Œä¸ºæ¯ä¸ªä»»åŠ¡éƒ½åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºä¼šæ¶ˆè€—å¤§é‡çš„å†…å­˜ï¼Œå› æ­¤åˆå‡ºç°äº†æ–°çš„é—®é¢˜ é«˜å†…å­˜å ç”¨ è°ƒåº¦éœ€è¦æ¶ˆè€—å¤§é‡ CPU èµ„æº ä¸€ä¸ªçº¿ç¨‹åˆ†ä¸ºå†…æ ¸æ€çº¿ç¨‹å’Œç”¨æˆ·æ€çº¿ç¨‹ï¼Œä¸€ä¸ªç”¨æˆ·æ€çº¿ç¨‹å¿…é¡»è¦ç»‘å®šä¸€ä¸ªå†…æ ¸æ€çº¿ç¨‹ï¼Œä½†æ˜¯ CPU å¹¶ä¸çŸ¥é“æœ‰ç”¨æˆ·æ€çº¿ç¨‹çš„å­˜åœ¨ï¼Œå®ƒåªçŸ¥é“è¿è¡Œçš„æ˜¯ä¸€ä¸ªå†…æ ¸æ€çº¿ç¨‹ å†è¿›è¡Œç»†åˆ†ï¼Œå†…æ ¸çº¿ç¨‹ä¾ç„¶å«çº¿ç¨‹(thread)ï¼Œç”¨æˆ·çº¿ç¨‹å«åç¨‹(co-routine) æ—¢ç„¶ä¸€ä¸ªåç¨‹(co-routine)å¯ä»¥ç»‘å®šä¸€ä¸ªçº¿ç¨‹(thread)ï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½å¤šä¸ªåç¨‹ç»‘å®šä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ä¸Šå‘¢ï¼Ÿ N:1 å…³ç³» Nä¸ªåç¨‹ç»‘å®šä¸€ä¸ªçº¿ç¨‹ï¼Œä¼˜ç‚¹å°±æ˜¯åç¨‹å†ç”¨æˆ·æ€çº¿ç¨‹å³å®Œæˆåˆ‡æ¢ï¼Œä¸ä¼šé™·å…¥åˆ°å†…æ ¸æ€ï¼Œè¿™ç§åˆ‡æ¢éå¸¸çš„è½»é‡å¿«é€Ÿã€‚ä½†æ˜¯ä¹Ÿæœ‰å¾ˆå¤§çš„ç¼ºç‚¹ï¼Œ1ä¸ªè¿›ç¨‹çš„æ‰€æœ‰åç¨‹éƒ½ç»‘å®šåœ¨1ä¸ªçº¿ç¨‹ä¸Šã€‚ç¼ºç‚¹ï¼š æŸä¸ªç¨‹åºç”¨æˆ·é‡ç¡¬ä»¶çš„å¤šæ ¸åŠ é€Ÿèƒ½åŠ› ä¸€æ—¦æŸåç¨‹é˜»å¡ï¼Œå°±ä¼šé€ æˆçº¿ç¨‹é˜»å¡ï¼Œæœ¬è¿›ç¨‹çš„å…¶ä»–åç¨‹éƒ½æ— æ³•æ‰§è¡Œäº†ï¼Œå› æ­¤å°±ä¸å…·å¤‡å¹¶å‘çš„èƒ½åŠ›äº† 1:1 å…³ç³» 1ä¸ªåç¨‹ç»‘å®š1ä¸ªçº¿ç¨‹ï¼Œæœ€å®¹æ˜“å®ç°ï¼Œåç¨‹çš„è°ƒåº¦éƒ½ç”± CPU å®Œæˆäº†ï¼Œä¸å­˜åœ¨ N:1 çš„ç¼ºç‚¹ï¼Œä½†æ˜¯åç¨‹çš„åˆ›å»ºã€åˆ é™¤å’Œåˆ‡æ¢çš„ä»£ä»·éƒ½ç”± CPU å®Œæˆï¼Œæœ‰å¸¦ä½ ç•¥æ˜¾æ˜‚è´µäº† M:N å…³ç³» M ä¸ªåç¨‹ç»‘å®š1ä¸ªçº¿ç¨‹ï¼Œæ˜¯ N:1 å’Œ 1:1 ç±»å‹çš„ç»“åˆï¼Œå…‹æœäº†ä»¥ä¸Š2ç§æ¨¡å‹çš„ç¼ºç‚¹ï¼Œä½†æ˜¯å®ç°èµ·æ¥æœ€ä¸ºå¤æ‚ åç¨‹å’Œçº¿ç¨‹æ˜¯æœ‰åŒºåˆ«çš„ï¼Œçº¿ç¨‹ç”± CPU è°ƒåº¦ï¼Œæ˜¯æŠ¢å å¼çš„ï¼Œåç¨‹ç”±ç”¨æˆ·æ€è°ƒåº¦ï¼Œæ˜¯åä½œå¼çš„ï¼Œä¸€ä¸ªåç¨‹è®©å‡º CPU åï¼Œèœæ‰§è¡Œä¸‹ä¸€ä¸ªåç¨‹ Go è¯­è¨€çš„ goroutine Go ä¸ºäº†æä¾›æ›´å®¹æ˜“ä½¿ç”¨çš„å¹¶å‘æ–¹æ³•ï¼Œä½¿ç”¨äº† goroutine å’Œ channelã€‚goroutine æ¥è‡ªåç¨‹çš„æ¦‚å¿µï¼Œè®©ä¸€ç»„å¯å¤ç”¨çš„å‡½æ•°è¿è¡Œåœ¨ä¸€ç»„çº¿ç¨‹ä¹‹ä¸Šï¼Œå³ä½¿æœ‰åç¨‹é˜»å¡ï¼Œæ”¹çº¿ç¨‹çš„å…¶ä»–åç¨‹ä¹Ÿå¯ä»¥è¢« runtime è°ƒåº¦ï¼Œè½¬ç§»åˆ°å…¶ä»–å¯è¿è¡Œçš„çº¿ç¨‹ä¸Šã€‚æœ€å…³é”®çš„æ˜¯ï¼Œç¨‹åºå‘˜çœ‹ä¸åˆ°è¿™äº›åº•å±‚çš„ç»†èŠ‚ï¼Œè¿™å°±é™ä½äº†ç¼–ç¨‹çš„éš¾åº¦ï¼Œæä¾›äº†æ›´å®¹æ˜“çš„å¹¶å‘ã€‚ goroutine éå¸¸çš„è½»é‡ï¼Œä¸€ä¸ª goroutine åªå ç”¨å‡  KB çš„å†…å­˜ï¼Œå¹¶ä¸”è¿™å‡  KB çš„å†…å­˜å°±è¶³å¤Ÿ goroutine è¿è¡Œå®Œï¼Œè¿™å°±èƒ½åœ¨æœ‰é™çš„å†…å­˜ç©ºé—´ä¸­æ”¯æŒå¤§é‡çš„ goroutineï¼Œæ”¯æŒäº†æ›´å¤šçš„å¹¶å‘ã€‚è™½ç„¶ä¸€ä¸ª goroutine çš„æ ˆåªå ç”¨å‡  KBï¼Œä½†å®é™…æ˜¯å¯ä¼¸ç¼©çš„ï¼Œå¦‚æœéœ€è¦æ›´å¤šå†…å®¹ï¼Œruntime ä¼šè‡ªåŠ¨ä¸º goroutine åˆ†é… ","date":"2022-05-22","objectID":"/posts/how-go-works/:3:3","tags":["Go"],"title":"Goè¯­è¨€æ˜¯å¦‚ä½•è¿è¡Œçš„","uri":"/posts/how-go-works/"},{"categories":["Go"],"content":"è°ƒåº¦ç»„ä»¶ä¸è°ƒåº¦å¾ªç¯ go func() { fmt.Println(\"Hello World in Goroutine!\") } æ¯æ¬¡åˆ›å»ºä¸€ä¸ª Goroutine å…¶å®æ˜¯å‘ runtime æäº¤äº†ä¸€ä¸ªè®¡ç®—ä»»åŠ¡ï¼Œæœ‰ä»»åŠ¡äº§ç”Ÿå°±è¦æœ‰ä»»åŠ¡æ¶ˆè´¹ï¼Œå› æ­¤ Go çš„è°ƒåº¦æµç¨‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç”Ÿäº§-æ¶ˆè´¹çš„æµç¨‹ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€ä¸ªä»»åŠ¡æäº¤åˆ°é˜Ÿåˆ—ä¸­ï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ç­‰å¾…è¢«å–å‡ºæ‰§è¡Œ Go è¯­è¨€åœ¨ç¼–è¯‘æ—¶å°†ä¸€ä¸ªä»»åŠ¡åŒ…è£…ä¸ºä¸€ä¸ª g ä¹Ÿå°±æ˜¯æºç¨‹ï¼Œruntime/runtime2.go æºä»£ç å¦‚ä¸‹(éƒ¨åˆ†ä»£ç å·²çœç•¥) type g struct { // Stack parameters. // stack describes the actual stack memory: [stack.lo, stack.hi). // stackguard0 is the stack pointer compared in the Go stack growth prologue. // It is stack.lo+StackGuard normally, but can be StackPreempt to trigger a preemption. // stackguard1 is the stack pointer compared in the C stack growth prologue. // It is stack.lo+StackGuard on g0 and gsignal stacks. // It is ~0 on other goroutine stacks, to trigger a call to morestackc (and crash). stack stack // offset known to runtime/cgo ... m *m // current m; offset known to arm liblink sched gobuf // param is a generic pointer parameter field used to pass // values in particular contexts where other storage for the // parameter would be difficult to find. It is currently used // in three ways: // 1. When a channel operation wakes up a blocked goroutine, it sets param to // point to the sudog of the completed blocking operation. // 2. By gcAssistAlloc1 to signal back to its caller that the goroutine completed // the GC cycle. It is unsafe to do so in any other way, because the goroutine's // stack may have moved in the meantime. // 3. By debugCallWrap to pass parameters to a new goroutine because allocating a // closure in the runtime is forbidden. param unsafe.Pointer atomicstatus uint32 stackLock uint32 // sigprof/scang lock; TODO: fold in to atomicstatus goid int64 waitsince int64 // approx time when the g become blocked lockedm muintptr } Go æœ€å¼€å§‹é‡‡ç”¨çš„æ˜¯ GM æ¨¡å‹ï¼Œä½†ç”±äº GM æ¨¡å‹æ€§èƒ½ä¸å¥½ï¼Œåœ¨ 1.1 ä¹‹åè¿›è¡Œäº†æ”¹è¿›ï¼Œä¹Ÿå°±æœ‰äº†ç°åœ¨çš„ GMP G: goroutine M: æ“ä½œç³»ç»Ÿçº¿ç¨‹ P: processor å¤„ç†å™¨ï¼Œå¤„ç† M ä¸ G çš„å…³ç³» Is the language called Go or Golang?\rThe language is called Go. The â€œgolangâ€ moniker arose because the web site was originally golang.org. (There was no .dev domain then.) Many use the golang name, though, and it is handy as a label. For instance, the Twitter tag for the language is â€œ#golangâ€. The languageâ€™s name is just plain Go, regardless. A side note: Although the official logo has two capital letters, the language name is written Go, not GO. ","date":"2022-05-22","objectID":"/posts/how-go-works/:4:0","tags":["Go"],"title":"Goè¯­è¨€æ˜¯å¦‚ä½•è¿è¡Œçš„","uri":"/posts/how-go-works/"},{"categories":["Docker"],"content":"åœ¨ä½¿ç”¨ Docker æ„å»ºé•œåƒçš„æ—¶å€™æ‹‰å–ç³»ç»Ÿä¾èµ–æˆ–è€…æ›´æ–°é•œç³»ç»Ÿå¾ˆæ…¢å¯ä»¥æ›´æ¢æºè§£å†³ æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ slim-buster ç±»å‹çš„é•œåƒï¼Œéœ€è¦æ›´æ¢çš„æ˜¯aptæº RUN sed -i \"s@http://deb.debian.org@http://mirrors.aliyun.com@g\" /etc/apt/sources.list å¹¶ä¸” docker é•œåƒæ„å»ºçš„è¿‡ç¨‹ä¸­æ˜¯å¯ä»¥è®¾ç½®ä»£ç†çš„ ","date":"2022-05-13","objectID":"/posts/slim-buster-image-change-apt-source/:0:0","tags":["Docker"],"title":"Docker slim-buster Image Change Apt Source","uri":"/posts/slim-buster-image-change-apt-source/"},{"categories":null,"content":"è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ ä¸‹æ–‡å‡ºç°çš„å¾ˆå¤šå†…å®¹æ¥è‡ªæˆ‘çš„å¯¼å¸ˆç½—å’åŠ¼çš„æ¨èï¼Œä¹Ÿæœ‰ä¸€äº›æ˜¯æˆ‘è‡ªè®¤ä¸ºå€¼å¾—ä¸€è¯»çš„æ–‡ç« æˆ–ä¹¦ç± ç‹å çš„åšå®¢ æ€æ ·å†™ä¸€ä¸ªè§£é‡Šå™¨-ç‹å  æµ…è°ˆå›½å†…é«˜æ ¡ç¼–ç¨‹è¯­è¨€æ•™è‚² æ‰‹æŠŠæ‰‹æ•™ä½ æ„å»º C è¯­è¨€ç¼–è¯‘å™¨ æ¸…å-rCore-Tutorial-Book-v3 ç¼–è¯‘åŸç†-å›½é˜²ç§‘æŠ€å¤§å­¦ æˆ‘äººç”Ÿçš„å‰28å¹´-ç‹å‹‡ æ„å»ºå’Œéƒ¨ç½²æœºå™¨å­¦ä¹ å¾®æœåŠ¡çš„æœ€ç®€å•æ–¹æ³• Web3ç§‘å­¦å®¶æç®€å…¥é—¨æŒ‡å— Ground-Up Computer Science ç‹å çš„æ‰‹ç¨¿ ç”¨Rustå®ç°Luaè§£é‡Šå™¨ é«˜å¹¶å‘çš„å“²å­¦åŸç† æ·±å…¥é«˜å¯ç”¨æ¶æ„åŸç†ä¸å®è·µ The Little Book of Rust Macros The Little Book of Rust Macros ä¸­æ–‡ç‰ˆ ","date":"2022-05-11","objectID":"/posts/%E9%82%A3%E4%BA%9B%E8%AF%A5%E9%A3%9F%E7%94%A8%E7%9A%84%E4%B8%9C%E8%A5%BF/:0:0","tags":null,"title":"é‚£äº›ç¾å‘³çš„ä¸œè¥¿","uri":"/posts/%E9%82%A3%E4%BA%9B%E8%AF%A5%E9%A3%9F%E7%94%A8%E7%9A%84%E4%B8%9C%E8%A5%BF/"},{"categories":["Linux"],"content":"archlinux update lib error error: libmfx: signature from \"Daniel Bermond \u003cdbermond@archlinux.org\u003e\" is marginal trust :: File /var/cache/pacman/pkg/libmfx-22.1.0-1-x86_64.pkg.tar.zst is corrupted (invalid or corrupted package (PGP signature)). Do you want to delete it? [Y/n] solved pacman -Sy archlinux-keyring \u0026\u0026 pacman -Su ","date":"2022-04-24","objectID":"/posts/archlinux-signature-is-marginal-trust/:0:0","tags":["ArchLinux"],"title":"Archlinux Signature Is Marginal Trust","uri":"/posts/archlinux-signature-is-marginal-trust/"},{"categories":["Go"],"content":"gRPC client åœ¨Dialæ—¶é»˜è®¤ä»…èƒ½è§£æä¸€ä¸ªTCPåœ°å€ï¼Œå¹¶ä¸èƒ½é€šè¿‡etcdæ‹¿åˆ°æ³¨å†Œçš„serverçš„ipåœ°å€ï¼Œæ— æ³•è¾¾åˆ°clientä¸serverä¸€å¯¹å¤šæˆ–å¤šå¯¹å¤šçš„åœºæ™¯ï¼Œå°½ç®¡å¯ä»¥ä½¿ç”¨nginxå®ç°ï¼Œä½†æ˜¯å½“serveræ‰©ç¼©å®¹æ—¶nginxå°±æ˜¾å¾—ååˆ†é¸¡è‚‹ã€‚ åœ¨grpcæ–‡æ¡£gRPC Name Resolutionä¸­è®°å½•äº†è§£å†³æ–¹æ¡ˆï¼Œè™½ç„¶æ–‡æ¡£ä¸­è¯´çš„å†…å®¹ä¸æ˜¯å¾ˆè¯¦ç»†ï¼Œä½†æ˜¯åœ¨etcdçš„resolverå’Œv3 clientçš„æºä»£ç ä¸­è§£å†³æ–¹æ¡ˆå·²ç»å¾ˆæ˜ç¡®äº† åªéœ€è¦å®ç°Resolverå’ŒBuildæ¥å£å°±èƒ½é€šè¿‡åœ¨å®¢æˆ·ç«¯Dailçš„è¿‡ç¨‹å®ŒæˆæœåŠ¡å‘ç°ä»¥åŠè´Ÿè½½å‡è¡¡ GitHubä¸Šæœ‰äººå®ç°äº†grpc resolver consul addressçš„æ–¹æ³•https://github.com/simplesurance/grpcconsulresolver æˆ‘å®ç°çš„etcdç‰ˆæœ¬æœåŠ¡æ³¨å†Œä¸å‘ç°ç¨‹åºå¦‚ä¸‹ ","date":"2022-04-15","objectID":"/posts/grpc-client-resolver-etcd/:0:0","tags":["gRPC","etcd"],"title":"gRPC client resolve etcd","uri":"/posts/grpc-client-resolver-etcd/"},{"categories":["Go"],"content":"register register.go package etcd import ( \"context\" \"fmt\" \"log\" \"time\" clientv3 \"go.etcd.io/etcd/client/v3\" ) //projectName namespace const projectName = \"projectName\" type ServiceInfo struct { Name string Addr string } type Register struct { client *clientv3.Client sInfo *ServiceInfo leaseID clientv3.LeaseID stop chan struct{} ttl int64 } //NewRegister create register func NewRegister(endpoints []string, sInfo *ServiceInfo) (*Register, error) { client, err := clientv3.New(clientv3.Config{ Endpoints: endpoints, DialTimeout: 5 * time.Second, }) if err != nil { return nil, err } return \u0026Register{ client: client, sInfo: sInfo, ttl: 10, stop: make(chan struct{}, 1), }, nil } //Close register func (r *Register) Close() { r.stop \u003c- struct{}{} } //Key return a key of the service for register to etcd func (r *Register) Key() string { return fmt.Sprintf(\"/%s/%s/%s\", projectName, r.sInfo.Name, r.sInfo.Addr) } //Value return a value of the service address for register to etcd func (r *Register) Value() string { return r.sInfo.Addr } //register service func (r *Register) register() (\u003c-chan *clientv3.LeaseKeepAliveResponse, error) { ctx := context.Background() lease, err := r.client.Grant(ctx, r.ttl) if err != nil { log.Fatalf(\"cannot create lease error: %s\", err) } r.leaseID = lease.ID _, err = r.client.Put(ctx, r.Key(), r.Value(), clientv3.WithLease(lease.ID)) if err != nil { return nil, err } return r.client.KeepAlive(ctx, lease.ID) } // revoke revoke lease func (r *Register) revoke() error { _, err := r.client.Revoke(context.TODO(), r.leaseID) if err != nil { log.Println(err) return err } log.Printf(\"register service:%s stop\\n\", r.Key()) return err } //keepAlive keep the register alive func (r *Register) keepAlive() error { ch, err := r.register() if err != nil { log.Fatalf(\"keep alive faild error: %s\", err) } for { select { case \u003c-r.stop: goto BREAK case \u003c-r.client.Ctx().Done(): return fmt.Errorf(\"register service have been closed\") case _, ok := \u003c-ch: if !ok { log.Println(\"keep alive channel closed\") return r.revoke() } } } BREAK: log.Println(\"stop lease\") return nil } //Run start register func (r *Register) Run() { if r.Key() == \"\" || r.Value() == \"\" { log.Fatalln(\"cannot read service info\") } log.Printf(\"register service {name: %s, address: %s}\\n\", r.sInfo.Name, r.sInfo.Addr) go r.keepAlive() } ","date":"2022-04-15","objectID":"/posts/grpc-client-resolver-etcd/:1:0","tags":["gRPC","etcd"],"title":"gRPC client resolve etcd","uri":"/posts/grpc-client-resolver-etcd/"},{"categories":["Go"],"content":"resolver resolver.go package etcd import ( \"context\" \"sync\" \"go.etcd.io/etcd/api/v3/mvccpb\" clientv3 \"go.etcd.io/etcd/client/v3\" \"google.golang.org/grpc/resolver\" ) type Resolver struct { sync.RWMutex Client *clientv3.Client cc resolver.ClientConn prefix string addresses map[string]resolver.Address } func NewResolver(endpoints []string) (*Resolver, error) { client, err := clientv3.New(clientv3.Config{ Endpoints: endpoints, }) if err != nil { return nil, err } r := \u0026Resolver{ Client: client, } return r, nil } //Build implement the Build interface func (r *Resolver) Build(target resolver.Target, cc resolver.ClientConn, opts resolver.BuildOptions) (resolver.Resolver, error) { r.cc = cc r.prefix = target.URL.Path go r.watcher() r.ResolveNow(resolver.ResolveNowOptions{}) return r, nil } //Scheme address scheme func (r *Resolver) Scheme() string { return \"etcd\" } func (r *Resolver) ResolveNow(resolver.ResolveNowOptions) { } func (r *Resolver) Close() { } //watcher resolver keys from etcd and watch keys func (r *Resolver) watcher() { r.addresses = make(map[string]resolver.Address) response, err := r.Client.Get(context.Background(), r.prefix, clientv3.WithPrefix()) if err == nil { for _, kv := range response.Kvs { r.setAddress(string(kv.Key), string(kv.Value)) } r.cc.UpdateState(resolver.State{ Addresses: r.getAddresses(), }) } watch := r.Client.Watch(context.Background(), r.prefix, clientv3.WithPrefix()) for response := range watch { for _, event := range response.Events { switch event.Type { case mvccpb.PUT: r.setAddress(string(event.Kv.Key), string(event.Kv.Value)) case mvccpb.DELETE: r.delAddress(string(event.Kv.Key)) } } r.cc.UpdateState(resolver.State{ Addresses: r.getAddresses(), }) } } //setAddress set the alive service address to the map func (r *Resolver) setAddress(key, address string) { r.Lock() defer r.Unlock() r.addresses[key] = resolver.Address{Addr: string(address)} } //delAddress delete the dead service address func (r *Resolver) delAddress(key string) { r.Lock() defer r.Unlock() delete(r.addresses, key) } //getAddresses get resolver address from custom resolver func (r *Resolver) getAddresses() []resolver.Address { addresses := make([]resolver.Address, 0, len(r.addresses)) for _, address := range r.addresses { addresses = append(addresses, address) } return addresses } ç¨‹åºæ¯”è¾ƒç®€å•ï¼Œå¯å®šåˆ¶æ€§ä¹Ÿå¾ˆå¼º ","date":"2022-04-15","objectID":"/posts/grpc-client-resolver-etcd/:2:0","tags":["gRPC","etcd"],"title":"gRPC client resolve etcd","uri":"/posts/grpc-client-resolver-etcd/"},{"categories":["Go"],"content":"example server.go sInfo := ServiceInfo{ Name: \"hello\", Addr: \"127.0.0.1:8080\", } r, err := NewRegister([]string{\"1.15.241.96:2379\"}, \u0026sInfo) if err != nil { panic(err) } defer r.Close() r.Run() client.go r, err := NewResolver([]string{\"1.15.241.96:2379\"}) if err != nil { panic(err) } resolver.Register(r) ctx := context.Background() target := fmt.Sprintf(\"etcd:///%s/hello\", projectName) cc, err := grpc.DialContext( ctx, target, grpc.WithDefaultServiceConfig(fmt.Sprintf(`{\"LoadBalancingPolicy\": \"%s\"}`, roundrobin.Name)), grpc.WithTransportCredentials(insecure.NewCredentials()), ) ","date":"2022-04-15","objectID":"/posts/grpc-client-resolver-etcd/:3:0","tags":["gRPC","etcd"],"title":"gRPC client resolve etcd","uri":"/posts/grpc-client-resolver-etcd/"},{"categories":["Docker"],"content":"å°½ç®¡Dockerçš„æ“ä½œååˆ†ç®€å•ï¼Œä½†æ˜¯ä»ç„¶ä¸æ˜¯æ‰€æœ‰å¼€å‘è€…éƒ½ä¼šï¼Œå¤§å¤šæ•°å¼€å‘è€…å¾€å¾€åªå…³æ³¨äºæœ¬èº«æ‰€åœ¨é¢†åŸŸï¼ŒæœåŠ¡éƒ¨ç½²è¿™ä»¶äº‹æƒ…ä¸Šå¹¶ä¸æ“…é•¿ã€‚ ","date":"2022-04-06","objectID":"/posts/go%E6%93%8D%E4%BD%9Cdocker/:0:0","tags":["Docker","GO"],"title":"Goæ“ä½œDocker","uri":"/posts/go%E6%93%8D%E4%BD%9Cdocker/"},{"categories":["Docker"],"content":"Goä¸ºä»€ä¹ˆèƒ½å¤Ÿæ“ä½œDockerï¼Ÿ Dockerä½¿ç”¨çš„æ˜¯C-Sæ¶æ„ï¼Œæˆ‘ä»¬å¼€å‘è€…åœ¨ç»ˆç«¯æ“ä½œDockeræ—¶ï¼Œä½¿ç”¨çš„æ˜¯Dockerçš„å®¢æˆ·ç«¯ã€‚è€ŒçœŸæ­£æ§åˆ¶Dockeré•œåƒã€å®¹å™¨çš„éƒ½æ˜¯Docker Daemon Dockerå®˜æ–¹æä¾›äº†Goå’ŒPythonçš„SDKï¼Œæœ¬æ–‡å°†ä½¿ç”¨Goæ“ä½œDocker ","date":"2022-04-06","objectID":"/posts/go%E6%93%8D%E4%BD%9Cdocker/:1:0","tags":["Docker","GO"],"title":"Goæ“ä½œDocker","uri":"/posts/go%E6%93%8D%E4%BD%9Cdocker/"},{"categories":["Docker"],"content":"å…ˆå†³æ¡ä»¶ æœ¬æ–‡ä½¿ç”¨çš„Dockerç¯å¢ƒå’ŒDocker Swarmé›†ç¾¤ä¸­çš„ç¯å¢ƒç›¸åŒ æœ¬æ–‡å°†é€šè¿‡VS Codeè¿œç¨‹è¿æ¥çš„æ–¹å¼ï¼Œè¿æ¥é›†ç¾¤ä¸­çš„mangerèŠ‚ç‚¹ã€‚ ç¯å¢ƒåç§° ç‰ˆæœ¬ Go 1.17.6 github.com/docker/docker/client 20.10.14 Docker 20.10.14 ç›®å½•ç»“æ„å¦‚ä¸‹ . â”œâ”€â”€ go.mod â”œâ”€â”€ go.sum â”œâ”€â”€ main.go â””â”€â”€ Makefile ç”±äºæ“ä½œDockeréœ€è¦rootæƒé™ï¼Œæ‰€ä»¥ä½¿ç”¨Makefileæ„å»º .PHONY: build build: @go build run: sudo ./\"docker-go\" clean: @go clean åˆ›å»ºDockerç»“æ„ä½“ package main type Docker struct { Cli *client.Client } func main() { ctx := context.Background() cli, err := client.NewClientWithOpts(client.FromEnv) if err != nil { log.Fatal(err) } docker := Docker{Cli: cli} } ","date":"2022-04-06","objectID":"/posts/go%E6%93%8D%E4%BD%9Cdocker/:2:0","tags":["Docker","GO"],"title":"Goæ“ä½œDocker","uri":"/posts/go%E6%93%8D%E4%BD%9Cdocker/"},{"categories":["Docker"],"content":"é•œåƒ ","date":"2022-04-06","objectID":"/posts/go%E6%93%8D%E4%BD%9Cdocker/:3:0","tags":["Docker","GO"],"title":"Goæ“ä½œDocker","uri":"/posts/go%E6%93%8D%E4%BD%9Cdocker/"},{"categories":["Docker"],"content":"è·å–é•œåƒåˆ—è¡¨ func (d *Docker) GetImages(ctx context.Context) { imgOpt := types.ImageListOptions{All: true} imgSums, err := d.Cli.ImageList(ctx, imgOpt) if err != nil { log.Fatal(err) } for _, img := range imgSums { fmt.Printf(\"%+v\\n\", img) } } è¿è¡Œmake build \u0026\u0026 make run è¾“å‡ºå¦‚ä¸‹ {Containers:-1 Created:1649160806 ID:sha256:554eaad3b8fc804b411ff398bcd4b5d59c4891a4770048270697a75a54dc65a3 Labels:map[] ParentID:sha256:5d0ab176d25dca0a7b0ee04685fa79120666d548805ad14dbb0f2fb062b5a7f2 RepoDigests:[] RepoTags:[getip:latest] SharedSize:-1 Size:11761646 VirtualSize:11761646} {Containers:-1 Created:1649160806 ID:sha256:5185163db340a8cdb581aaf2ae4c1e7003980a7709147162f005107f6dc6f441 Labels:map[] ParentID:sha256:0ac33e5f5afa79e084075e8698a22d574816eea8d7b7d480586835657c3e1c8b RepoDigests:[\u003cnone\u003e@\u003cnone\u003e] RepoTags:[\u003cnone\u003e:\u003cnone\u003e] SharedSize:-1 Size:11761646 VirtualSize:11761646} {Containers:-1 Created:1649160806 ID:sha256:5d0ab176d25dca0a7b0ee04685fa79120666d548805ad14dbb0f2fb062b5a7f2 Labels:map[] ParentID:sha256:5185163db340a8cdb581aaf2ae4c1e7003980a7709147162f005107f6dc6f441 RepoDigests:[\u003cnone\u003e@\u003cnone\u003e] RepoTags:[\u003cnone\u003e:\u003cnone\u003e] SharedSize:-1 Size:11761646 VirtualSize:11761646} {Containers:-1 Created:1649117999 ID:sha256:0ac33e5f5afa79e084075e8698a22d574816eea8d7b7d480586835657c3e1c8b Labels:map[] ParentID: RepoDigests:[alpine@sha256:4edbd2beb5f78b1014028f4fbb99f3237d9561100b6881aabbf5acce2c4f9454] RepoTags:[alpine:3.15] SharedSize:-1 Size:5574964 VirtualSize:5574964} {Containers:-1 Created:1648569764 ID:sha256:12766a6745eea133de9fdcd03ff720fa971fdaf21113d4bc72b417c123b15619 Labels:map[maintainer:NGINX Docker Maintainers \u003cdocker-maint@nginx.com\u003e] ParentID: RepoDigests:[nginx@sha256:2275af0f20d71b293916f1958f8497f987b8d8fd8113df54635f2a5915002bf1] RepoTags:[nginx:latest] SharedSize:-1 Size:141522028 VirtualSize:141522028} {Containers:-1 Created:1646356536 ID:sha256:7642119cd16177d874dcbfe1c550affd336dbe4cabb3339ef685ac1d6ec71ccc Labels:map[] ParentID: RepoDigests:[golang@sha256:5616dca835fa90ef13a843824ba58394dad356b7d56198fb7c93cbe76d7d67fe] RepoTags:[golang:1.16-alpine] SharedSize:-1 Size:301868964 VirtualSize:301868964} {Containers:-1 Created:1616097222 ID:sha256:580c0e4e98b06d258754cf28c55f21a6fa0dc386e6fe0bf67e453c3642de9b8b Labels:map[] ParentID: RepoDigests:[portainer/portainer@sha256:fb45b43738646048a0a0cc74fcee2865b69efde857e710126084ee5de9be0f3f] RepoTags:[portainer/portainer:latest] SharedSize:-1 Size:79085285 VirtualSize:79085285} é€šè¿‡sudo docker imagesæŸ¥çœ‹é•œåƒä¿¡æ¯ REPOSITORY TAG IMAGE ID CREATED SIZE getip latest 554eaad3b8fc 19 hours ago 11.8MB alpine 3.15 0ac33e5f5afa 30 hours ago 5.57MB nginx latest 12766a6745ee 7 days ago 142MB golang 1.16-alpine 7642119cd161 4 weeks ago 302MB portainer/portainer latest 580c0e4e98b0 12 months ago 79.1MB Q1: ä¸ºä»€ä¹ˆå¾—åˆ°é•œåƒæ•°é‡å’Œé•œåƒIDæ˜¯ä¸åŒ¹é…çš„ï¼Ÿ A1: é€šè¿‡docker imageså‘½ä»¤è·å–åˆ°çš„é•œåƒä¿¡æ¯æœ‰é™ï¼Œé€šè¿‡docker images -a â€“digests â€“no-truncå°±èƒ½çœ‹åˆ°ç›¸åŒä¿¡æ¯äº† ç®€å•æ¨¡æ‹Ÿdocker imagesæ”¹é€ GetImagesæ–¹æ³• type Img struct { Created string ID string Tag string Size string Repository string } const timeLayout = \"2006å¹´01æœˆ02æ—¥ 15:04:05\" func (d *Docker) GetImages(ctx context.Context) { imgOpt := types.ImageListOptions{All: true} imgSums, err := d.Cli.ImageList(ctx, imgOpt) if err != nil { log.Fatal(err) } var imgs []*Img for _, img := range imgSums { tagAndName := strings.Split(img.RepoTags[0], \":\") imgs = append(imgs, \u0026Img{ Created: time.Unix(img.Created, 0).Format(timeLayout), Size: fmt.Sprintf(\"%.2fMB\", float64(img.Size)/float64(1024*1024)), Tag: tagAndName[1], Repository: tagAndName[0], ID: img.ID[7:19], }) } for _, img := range imgs { fmt.Printf(\"%+v\\n\", img) } } è‡³äºfilterè¿™é‡Œå°±ä¸åšäº† ","date":"2022-04-06","objectID":"/posts/go%E6%93%8D%E4%BD%9Cdocker/:3:1","tags":["Docker","GO"],"title":"Goæ“ä½œDocker","uri":"/posts/go%E6%93%8D%E4%BD%9Cdocker/"},{"categories":["Docker"],"content":"æ‹‰å–æŒ‡å®šé•œåƒ è¿™é‡Œä½¿ç”¨äº†\"github.com/docker/docker/pkg/jsonmessage\"è¿™ä¸ªåŒ…ï¼Œèƒ½å¤Ÿåœ¨æ§åˆ¶å°ä¸­è¾“å‡ºå’Œé€šè¿‡Dockerå®¢æˆ·ç«¯æ‹‰å–é•œåƒæ—¶ç›¸åŒçš„æ ·å¼ func (d *Docker) ImagePull(ctx context.Context, name string) { opt := types.ImagePullOptions{} reader, err := d.Cli.ImagePull(ctx, name, opt) if err != nil { log.Fatal(err) } defer reader.Close() termFd, isTerm := term.GetFdInfo(os.Stderr) jsonmessage.DisplayJSONMessagesStream(reader, os.Stderr, termFd, isTerm, nil) } ","date":"2022-04-06","objectID":"/posts/go%E6%93%8D%E4%BD%9Cdocker/:3:2","tags":["Docker","GO"],"title":"Goæ“ä½œDocker","uri":"/posts/go%E6%93%8D%E4%BD%9Cdocker/"},{"categories":["Docker"],"content":"å‰è¨€ ä¹Ÿè®¸k8sæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œä½†æ˜¯Dockerçš„Swarmæ–¹æ¡ˆæœªå¿…ä¸å€¼å¾—å°è¯•ã€‚ ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:1:0","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"Docker Swarm Swarmæ˜¯Dockerå®˜æ–¹æä¾›çš„ä¸€æ¬¾é›†ç¾¤ç®¡ç†å·¥å…·ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯æŠŠè‹¥å¹²å°Dockerä¸»æœºæŠ½è±¡ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œå¹¶ä¸”é€šè¿‡ä¸€ä¸ªå…¥å£ç»Ÿä¸€ç®¡ç†è¿™äº›Dockerä¸»æœºä¸Šçš„å„ç§Dockerèµ„æºã€‚Swarmå’ŒKubernetesæ¯”è¾ƒç±»ä¼¼ï¼Œä½†æ˜¯æ›´åŠ è½»ï¼Œå…·æœ‰çš„åŠŸèƒ½ä¹Ÿè¾ƒkubernetesæ›´å°‘ä¸€äº›ã€‚ Swarmé›†ç¾¤æä¾›ç»™ç”¨æˆ·ç®¡ç†é›†ç¾¤å†…æ‰€æœ‰å®¹å™¨çš„æ“ä½œæ¥å£ä¸ä½¿ç”¨ä¸€å°Dockerä¸»æœºåŸºæœ¬ç›¸åŒã€‚ ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:2:0","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"å…ˆå†³æ¡ä»¶ ä¸€ä¸‹æ¡ä»¶æ»¡è¶³å…¶ä¸­ä¸€ä¸ªå³å¯ è‡³å°‘ä¸‰å°å®‰è£…äº†Dockerçš„æœåŠ¡å™¨ è‡³å°‘ä¸‰å°å®‰è£…äº†Dockerçš„è™šæ‹Ÿæœºè™šæ‹Ÿæœº è‡³å°‘ä¸‰å°å®‰è£…äº†Dockerå¹¶ä¸”åœ¨åŒä¸€å±€åŸŸç½‘å†…çš„çœŸå®ä¸»æœº è‡³å°‘ä¸‰å°å®‰è£…äº†Dockerå¹¶ä¸”èƒ½å¤Ÿäº’ç›¸è®¿é—®çš„ä¸»æœº æœ¬æ–‡ä½¿ç”¨ä¸‰å°è™šæ‹Ÿæœºè¿›è¡Œæ­å»ºï¼Œä¸ºäº†ä¾¿äºæè¿°ï¼Œæœ¬æ–‡ä½¿ç”¨ä¸‰å°è™šæ‹Ÿæœºç³»ç»Ÿéƒ½æ˜¯Ubuntu20.04ä»£å·ä½¿ç”¨node1, node2, node3 ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:3:0","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"æ­å»ºSwarmé›†ç¾¤ ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:4:0","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"åˆå§‹åŒ–mangerèŠ‚ç‚¹ sudo docker swarm init --advertise-addr 172.26.95.252 åœ¨node1å‘½ä»¤æ‰§è¡Œåå½“å‰èŠ‚ç‚¹ä¼šåˆå§‹åŒ–é›†ç¾¤ï¼Œå¹¶ä¸”è¾“å‡ºå…¶ä»–èŠ‚ç‚¹åŠ å…¥æ˜¯éœ€è¦ä½¿ç”¨çš„token åœ¨Dockerså®˜æ–¹æ–‡æ¡£ä¸­æè¿°è¿‡managerèŠ‚ç‚¹å¯ä»¥ä¸æ­¢ä¸€ä¸ªï¼Œä½†æ˜¯æœ¬æ–‡ä¸­ç”±äºç¯å¢ƒé™åˆ¶ä»…ä½¿ç”¨ä¸€ä¸ªmangerèŠ‚ç‚¹å’Œä¸¤ä¸ªworkerèŠ‚ç‚¹ã€‚ ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:4:1","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"node2å’Œnode3åŠ å…¥Swarmé›†ç¾¤ åœ¨node2å’Œnode3ä¸­æ‰§è¡ŒåŠ å…¥é›†ç¾¤å‘½ä»¤ sudo docker swarm join --token SWMTKN-1-59365h5vtnl4d7o09pw0unlswmk3u3z-ez6iildqkry77i57my 172.26.95.252:2377 å‘½ä»¤æ‰§è¡ŒæˆåŠŸåè¾“å‡ºå†…å®¹å¦‚ä¸‹ This node joined a swarm as a worker. åœ¨node1ï¼ˆmangerèŠ‚ç‚¹ï¼‰ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹ä¸ªèŠ‚ç‚¹åˆ—è¡¨ sudo docker node ls ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:4:2","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"æ­å»ºç§æœ‰ä»“åº“ ç”±äºæœ¬æ–‡åé¢ç« èŠ‚ä¸­çš„å†…å®¹ä¼šæ¶‰åŠåˆ°è‡ªå»ºé•œåƒçš„éƒ¨ç½²æµ‹è¯•ï¼Œæ‰€ä»¥éœ€è¦æ­å»ºç§æœ‰ä»“åº“è¿›è¡Œéƒ¨ç½²ï¼Œåœ¨node1ä¸­æ­å»ºï¼š sudo docker run -d -p 5000:5000 -v /opt/data/registry:/var/lib/registry --restart=always --name registry registry åœ¨node1ã€2ã€3ä¸­é…ç½®/etc/docker/daemon.jsonï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ç›´æ¥åˆ›å»ºå³å¯ { \"registry-mirror\": [ \"https://hub-mirror.c.163.com\", \"https://mirror.baidubce.com\" ], \"insecure-registries\": [ \"172.26.95.252:5000\" ] } ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:4:3","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"éƒ¨ç½²portainer/portainer ä½¿ç”¨portaineræ¥å¯è§†åŒ–ç®¡ç†Swarmé›†ç¾¤ï¼Œæ­¤å¤„ä½¿ç”¨é›†ç¾¤éƒ¨ç½²çš„æ–¹å¼å®‰è£…ã€‚ sudo docker service create \\ --name portainer \\ --publish 9000:9000 \\ --constraint 'node.role == manager' \\ --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\ portainer/portainer \\ -H unix:///var/run/docker.sock å¯ä»¥çœ‹åˆ°PORTSæ˜¯*:9000-\u003e9000/tcpè€Œä¸æ˜¯0.0.0.0:9000-\u003e9000/tcpè¯´æ˜å¯ä»¥é€šè¿‡é›†ç¾¤ä¸­ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„ipè¿›è¡Œè®¿é—®ï¼Œç¬”è€…å·²åšè¿‡æµ‹è¯•ç¡®å®å¯ä»¥ã€‚ æ­¤å¤„ä»…å±•ç¤ºSwarmèŠ‚ç‚¹åˆ—è¡¨ï¼Œè‡³äºæ›´å¤šåŠŸèƒ½å¾…è¯»ç€è‡ªå·±æ¢ç´¢äº† ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:5:0","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"è´Ÿè½½å‡è¡¡ä¸å‰¯æœ¬ Swarmæ˜¯è‡ªå¸¦è´Ÿè½½å‡è¡¡ç­–ç•¥çš„ï¼Œå½“æˆ‘ä»¬éƒ¨ç½²å®¹å™¨æ—¶æŒ‡å®šreplicaså‚æ•°ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºå¤šä¸ªç›¸åŒçš„å®¹å™¨å‰¯æœ¬å¹¶ä¸”æ‰§è¡Œè´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚ ä¸ºäº†æµ‹è¯•è´Ÿè½½å‡è¡¡ç¬”è€…å†™äº†ä¸€ä¸ªç®€å•çš„æœåŠ¡ï¼Œè·å–æœ¬æœºipç„¶åè¿”å›ã€‚ ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:6:0","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"æµ‹è¯•ç¨‹åº go mod init getip package main import ( \"errors\" \"fmt\" \"net\" \"net/http\" ) func getLocalIp() (string, error) { addrs, err := net.InterfaceAddrs() if err != nil { return \"\", err } for _, addr := range addrs { if ipnet, ok := addr.(*net.IPNet); ok \u0026\u0026 !ipnet.IP.IsLoopback() { if ipnet.IP.To4() != nil \u0026\u0026 ipnet.IP.IsGlobalUnicast() { return ipnet.IP.String(), nil } } } return \"\", errors.New(\"valid local IP not found\") } func main() { server := http.Server{ Addr: \":8080\", Handler: nil, } http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { ipAddr, err := getLocalIp() if err != nil { w.Write([]byte(\"cannot get service ip\")) } w.Write([]byte(fmt.Sprintf(\"\u003ch1\u003e%s\u003c/h1\u003e\", ipAddr))) }) panic(server.ListenAndServe()) } ç„¶åæ„å»ºDockeré•œåƒï¼Œå› ä¸ºä½œè€…è™šæ‹Ÿæœºä¸­æœ‰golang-alpineå’Œalpineé•œåƒæ‰€ä»¥ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºï¼Œå¦‚æœè¯»ç€æ„Ÿè§‰golang-alpineä¸‹è½½æ…¢å¯ä»¥ä½¿ç”¨golangçš„è·¨å¹³å°ç¼–è¯‘ ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:6:1","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"é•œåƒæ„å»º FROM golang:1.16-alpine AS builder COPY . /go/src/getip WORKDIR /go/src/getip RUN go install FROM alpine:3.15 COPY --from=builder /go/bin/getip /go/bin/ EXPOSE 8080 ENTRYPOINT [\"/go/bin/getip\"] ç„¶åæ„å»ºé•œåƒ sudo docker build -t getip -f ./deployment/Dockerfile . ç»™é•œåƒæ‰“ä¸Štag sudo docker tag getip:latest 172.26.95.252:5000/getip:1.0.0 ä¸Šä¼ é•œåƒåˆ°ç§æœ‰ä»“åº“ sudo docker push 172.26.95.252:5000/getip:1.0.0 ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:6:2","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"éƒ¨ç½²æµ‹è¯• sudo docker service create --replicas 3 -p 8080:8080 --name getip 172.26.95.252:5000/getip:1.0.0 ä¸ºäº†ä¾¿äºæµ‹è¯•å±•ç¤ºä½¿ç”¨bashç›´æ¥åœ¨å‘½ä»¤è¡Œæµ‹è¯• for i in $(seq 3);do curl 172.26.95.252:8080;echo ;done ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºç¡®å®æ‰§è¡Œäº†è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œè´Ÿè½½å‡è¡¡ç­–ç•¥æ—¶æœ€ç®€å•çš„è½®è¯¢ã€‚è‡³äºè¾“å‡ºç»“æœä¸­çš„ipä¸ºä»€ä¹ˆä¸æ˜¯è™šæ‹Ÿæœºçš„ipå‘¢ï¼Ÿå› ä¸ºç¨‹åºæ˜¯åœ¨å®¹å™¨ä¸­è¿è¡Œçš„ï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯å®¹å™¨å†…éƒ¨çš„ipã€‚ å†çœ‹ä¸€ä¸‹æœåŠ¡éƒ¨ç½²æƒ…å†µï¼Œç¡®å®šæ˜¯ä¸æ˜¯çœŸçš„éƒ¨ç½²åˆ°äº†ä¸åŒèŠ‚ç‚¹ä¸Š sudo docker service ps getip ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:6:3","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["Docker"],"content":"å‡ºé”™æµ‹è¯• åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¦‚æœæœåŠ¡å‡ºé”™å¼‚å¸¸é€€å‡ºäº†éœ€è¦æ‰‹åŠ¨é‡å¯ï¼Œä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œä½†æ˜¯Swarmé›†ç¾¤çš„å‰¯æœ¬å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒSwarmé›†ç¾¤ä¼šå§‹ç»ˆç»´æŒæŒ‡å®šæ•°é‡çš„å‰¯æœ¬ï¼Œå¦‚æœæœ‰æœåŠ¡å‡ºé”™å¼‚å¸¸é€€å‡ºSwarmå°±ä¼šç«‹åˆ»åˆ›å»ºå‰¯æœ¬å®¹å™¨ã€‚ä¸ºäº†éªŒè¯Swarmé›†ç¾¤æ˜¯çœŸçš„èƒ½ç»´æŒå›ºå®šæ•°é‡çš„å®¹å™¨å‰¯æœ¬è¿™é‡Œæ”¹å†™å‰é¢çš„ç¨‹åºï¼Œè®©æœåŠ¡è¿‡ä¸€æ®µæ—¶é—´å°±å¼‚å¸¸é€€å‡ºã€‚ package main import ( \"errors\" \"fmt\" \"math/rand\" \"net\" \"net/http\" \"time\" ) func getLocalIp() (string, error) { addrs, err := net.InterfaceAddrs() if err != nil { return \"\", err } for _, addr := range addrs { if ipnet, ok := addr.(*net.IPNet); ok \u0026\u0026 !ipnet.IP.IsLoopback() { if ipnet.IP.To4() != nil \u0026\u0026 ipnet.IP.IsGlobalUnicast() { return ipnet.IP.String(), nil } } } return \"\", errors.New(\"valid local IP not found\") } func panicError() { time.Sleep(time.Duration(rand.Intn(50)+50) * time.Second) panic(errors.New(\"break the service\")) } func main() { server := http.Server{ Addr: \":8080\", Handler: nil, } go panicError() http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { ipAddr, err := getLocalIp() if err != nil { w.Write([]byte(\"cannot get service ip\")) } w.Write([]byte(fmt.Sprintf(\"\u003ch1\u003e%s\u003c/h1\u003e\", ipAddr))) }) panic(server.ListenAndServe()) } åˆ é™¤åŸæœ‰æœåŠ¡ sudo docker service rm getip ç„¶åé‡æ–°æ„å»ºéƒ¨ç½²é•œåƒã€‚ sudo docker build -t getip:1.1.0 -f ./deployment/Dockerfile . sudo docker tag getip:1.1.0 172.26.95.252:5000/getip:1.1.0 sudo docker service create --replicas 3 -p 8080:8080 --name getip 172.26.95.252:5000/getip:1.1.0 ä»ç„¶ä½¿ç”¨ä¸Šä¸€èŠ‚æµ‹è¯•å‘½ä»¤ï¼Œç”±äºè´Ÿè½½å‡è¡¡ä¸ç”¨æµ‹è¯•äº†ï¼Œæ‰€ä»¥å¾ªç¯æ¬¡æ•°æ”¹ä¸º3ï¼Œæ¯è¿‡100ç§’æµ‹è¯•ä¸€æ¬¡ï¼Œæœ¬æ–‡ä¸€å…±æµ‹è¯•äº†3æ¬¡ã€‚ for i in $(seq 3);do curl 172.26.95.252:8080;echo ;done ä¸‰æ¬¡çš„ipå…¨éƒ½ä¸åŒï¼Œè¯´æ˜å°±ç®—ç¨‹åºå¼‚å¸¸ç»ˆæ­¢é€€å‡ºï¼ŒSwarmä»ç„¶ä¼šç»´æŒå›ºå®šçš„å‰¯æœ¬æ•°é‡ã€‚ ","date":"2022-04-05","objectID":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/:6:4","tags":["Docker"],"title":"Docker Swarmé›†ç¾¤","uri":"/posts/docker-swarm%E9%9B%86%E7%BE%A4/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"Arch ","date":"2022-03-02","objectID":"/posts/software-tools/:0:0","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"yay æ‹‰å–AURä¸­çš„è½¯ä»¶ï¼Œé¡¹ç›®åœ°å€ï¼šhttps://github.com/Jguer/yay ","date":"2022-03-02","objectID":"/posts/software-tools/:0:1","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"neovim sudo pacman -S neovim æ›´å¿«çš„vimï¼Œå­¦ä¼šäº†vimå†ä¹Ÿä¸æƒ³ä½¿ç”¨å…¶ä»–ç¼–è¾‘å™¨äº†ï¼Œå°±æ˜¯è°ƒè¯•ä¸æ–¹ä¾¿ï¼Œè¡¥å…¨æ’ä»¶ä½¿ç”¨coc.nvimï¼Œcocé¡¹ç›®åœ°å€ï¼šhttps://github.com/neoclide/coc.nvim ","date":"2022-03-02","objectID":"/posts/software-tools/:0:2","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"google-chrome yay -S google-chrome ","date":"2022-03-02","objectID":"/posts/software-tools/:0:3","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"visual-studio-code-bin yay -S visual-studio-code-bin æœ‰çš„ä¸œè¥¿ç”¨neovimä¸æ–¹ä¾¿çš„æ—¶å€™ç”¨ä¸€ä¸‹ï¼Œåœ¨Linuxä¸Šè½»æ¾åŠé€æ˜ ","date":"2022-03-02","objectID":"/posts/software-tools/:0:4","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"LibreOffice sudo pacman -S liberoffice liberoffice-fresh-zh-cn Linuxä¸Šçš„åŠå…¬è½¯ä»¶ï¼ŒåŠŸèƒ½ä¹Ÿæ˜¯ååˆ†å¼ºå¤§ ","date":"2022-03-02","objectID":"/posts/software-tools/:0:5","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"lazygit yay -S lazygit ç»ˆç«¯ä¸‹çš„gitå·¥å…· ","date":"2022-03-02","objectID":"/posts/software-tools/:0:6","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"zsh sudo pacman -S zsh é…åˆoh-my-zshè®©å‘½ä»¤å†™èµ·æ¥å¾ˆçˆ½ï¼Œzshæ’ä»¶ä½¿ç”¨çš„zinitç®¡ç† oh-my-zshé¡¹ç›®åœ°å€ï¼šhttps://github.com/ohmyzsh/ohmyzsh æ‹‰å–GitHubçš„oh-my-zshä¼šå¾ˆæ…¢ï¼Œå¯ä»¥ä½¿ç”¨Giteeçš„oh-my-zshï¼šhttps://gitee.com/mirrors/oh-my-zshï¼Œä¸‹è½½toolsä¸­çš„install.shè„šæœ¬ï¼Œä¿®æ”¹ä»¥ä¸‹Default settingså†…å®¹ # Default settings ZSH=${ZSH:-~/.oh-my-zsh} -REPO=${REPO:-ohmyzsh/ohmyzsh} +REPO=${REPO:-mirrors/oh-my-zsh} -REMOTE=${REMOTE:-https://github.com/${REPO}.git} +REMOTE=${REMOTE:-https://gitee.com/${REPO}.git} BRANCH=${BRANCH:-master} ç„¶åæˆæƒæ‰§è¡Œå³å¯ã€‚ ä½¿ç”¨zinitè¿›è¡Œæ’ä»¶ç®¡ç†ï¼Œzinité¡¹ç›®åœ°å€ï¼šhttps://github.com/zdharma/zinit ","date":"2022-03-02","objectID":"/posts/software-tools/:0:7","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"rofi sudo pacman -S rofi é…åˆpolybar-themesæ›´å¥½çœ‹ polybar-themesé¡¹ç›®åœ°å€ï¼šhttps://github.com/adi1090x/polybar-themes ","date":"2022-03-02","objectID":"/posts/software-tools/:0:8","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"alsa-utils pacman -S alsa-utils ç»ˆç«¯éŸ³é¢‘æ§åˆ¶è½¯ä»¶ï¼Œä½¿ç”¨alsamixerå‘½ä»¤è°ƒå‡º ","date":"2022-03-02","objectID":"/posts/software-tools/:0:9","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"st ååˆ†å°å·§ä½†åŠŸèƒ½å¼ºå¤§çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œè¿™ä¸ªç»ˆç«¯éœ€è¦è‡ªå·±æ‹‰å–æºç ç¼–è¯‘ï¼ŒåŸå§‹çš„ç‰ˆæœ¬å¾ˆä¸‘ï¼Œä½†æ˜¯å¯ä»¥æ‰“è¡¥ä¸ï¼Œåœ¨GitHubä¸Šä¹Ÿæœ‰æ‰“è¿‡è¡¥ä¸çš„ä»“åº“ é¡¹ç›®åœ°å€ï¼šhttps://st.suckless.org/ ","date":"2022-03-02","objectID":"/posts/software-tools/:0:10","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"Alacritty sudo pacman -S alacritty rustå†™çš„ç”¨GPUæ¸²æŸ“çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œstå’Œalacrittyæˆ‘éƒ½åœ¨ä½¿ç”¨ ","date":"2022-03-02","objectID":"/posts/software-tools/:0:11","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"ranger sudo pacman -S ranger ç»ˆç«¯ä¸‹çš„æ–‡ä»¶ç®¡ç†å™¨ï¼Œåœ¨æ–‡ä»¶å¤¹é—´è·³è½¬å¤ªæ–¹ä¾¿äº†ï¼Œçˆ±ä¸é‡Šæ‰‹ ","date":"2022-03-02","objectID":"/posts/software-tools/:0:12","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"wget sudo pacman -S wget ä¸‹è½½æ–‡ä»¶ä½¿ç”¨ ","date":"2022-03-02","objectID":"/posts/software-tools/:0:13","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"flameshot sudo pacman -S flameshot æˆªå›¾è½¯ä»¶ï¼Œéœ€è¦ç”¨å‘½ä»¤å¯åŠ¨ flameshot gui ","date":"2022-03-02","objectID":"/posts/software-tools/:0:14","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"feh sudo pacman -S feh è®¾ç½®æ¡Œé¢å£çº¸çš„è½¯ä»¶ feh --bg-scale å£çº¸è·¯å¾„ ","date":"2022-03-02","objectID":"/posts/software-tools/:0:15","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"fcitx5 sudo pacman -S fcitx5-qt fcitx5-gtk fcitx5-configtool ","date":"2022-03-02","objectID":"/posts/software-tools/:0:16","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"neofetch sudo pacman -S neofetch åœ¨ç»ˆç«¯ä¸‹ä½¿ç”¨neofetchå‘½ä»¤æŸ¥çœ‹æ•´ä½“ç³»ç»Ÿä¿¡æ¯ ","date":"2022-03-02","objectID":"/posts/software-tools/:0:17","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"htop sudo pacman -S htop ç»ˆç«¯ä¸‹çš„è¿›ç¨‹ç®¡ç†å™¨ï¼Œç”¨htopå‘½ä»¤è°ƒå‡º ","date":"2022-03-02","objectID":"/posts/software-tools/:0:18","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"fzf sudo pacman -S fzf ç»ˆç«¯ä¸‹çš„æ–‡ä»¶æŸ¥æ‰¾å·¥å…· ","date":"2022-03-02","objectID":"/posts/software-tools/:0:19","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"figlet sudo pacman -S figlet åœ¨ç»ˆç«¯ä¸‹è¾“å‡ºç©ºå¿ƒASCIIå­—ç¬¦ ","date":"2022-03-02","objectID":"/posts/software-tools/:0:20","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"toilet sudo pacman -S toilet ç»ˆç«¯ä¸‹è¾“å‡ºå®å¿ƒASCIIå­—ç¬¦ï¼Œå¯ä»¥é™„å¸¦é¢œè‰² ","date":"2022-03-02","objectID":"/posts/software-tools/:0:21","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"pyenv Linuxä¸Šç®¡ç†Pythonç‰ˆæœ¬çš„å·¥å…·ï¼Œé¡¹ç›®åœ°å€ï¼šhttps://github.com/pyenv/pyenv é€šå¸¸ç”¨å®ƒç®¡ç†Pythonç‰ˆæœ¬ï¼Œä½†æ˜¯ä¸ç”¨å®ƒåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ ","date":"2022-03-02","objectID":"/posts/software-tools/:0:22","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"reflector ç”¨æ¥æ›´æ–°pacmané•œåƒæº sudo pacman -S reflector sudo reflector --verbose --country China --latest 15 rate --save /etc/pacman.d/mirrorlist ","date":"2022-03-02","objectID":"/posts/software-tools/:0:23","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"rsync ç”¨äºæ–‡ä»¶ä¼ è¾“ã€å¤åˆ¶ã€æœ‰æ–­ç‚¹ç»­ä¼ çš„åŠŸèƒ½ sudo pacman -S rsync ","date":"2022-03-02","objectID":"/posts/software-tools/:0:24","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"tmux ç»ˆç«¯å¤ç”¨å·¥å…· sudo pacman -S tmux ","date":"2022-03-02","objectID":"/posts/software-tools/:0:25","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"gpg åŠ å¯†å·¥å…· sudo pacman -S gnupg ","date":"2022-03-02","objectID":"/posts/software-tools/:0:26","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"xf86-input-libinput xf86-input-libinputé…ç½®è§¦æ§æ¿è¡Œä¸º ","date":"2022-03-02","objectID":"/posts/software-tools/:0:27","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"ä¸€äº›åˆ«è‡´çš„å°ä¸œè¥¿ ","date":"2022-03-02","objectID":"/posts/software-tools/:1:0","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"nyancat ","date":"2022-03-02","objectID":"/posts/software-tools/:1:1","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"cmatrix Windows ","date":"2022-03-02","objectID":"/posts/software-tools/:1:2","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"æµè§ˆå™¨ Chrome ","date":"2022-03-02","objectID":"/posts/software-tools/:2:0","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"Coding ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨ Python åä¸ºé•œåƒåœ°å€ï¼šhttps://repo.huaweicloud.com/python/ é…ç½®ç¯å¢ƒå˜é‡ python -V è®¾ç½®é•œåƒåœ°å€ pip config set global.index-url https://repo.huaweicloud.com/repository/pypi/simple node é…ç½®ç¯å¢ƒå˜é‡ node --version è®¾ç½®å…¨å±€æ¨¡å—çš„å­˜æ”¾è·¯å¾„ã€cacheçš„è·¯å¾„ npm config set prefix \"D:\\soft\\nodejs\\node_global\" npm config set cache \"D:\\soft\\nodejs\\node_cache\" æ‹‰å–cnpm npm install -g cnpm --registry=https://registry.npm.taobao.org Go è®¾ç½®GOROOTã€GOPATH è®¾ç½®GOPROXY https://goproxy.io,direct æŸ¥çœ‹ç¯å¢ƒé…ç½® go env Gcc è®¾ç½®ç¯å¢ƒå˜é‡ gcc -v JDK8 åä¸ºå¼€æºé•œåƒç«™ï¼šhttps://repo.huaweicloud.com/openjdk/ æ•°æ®åº“ MySQL MongoDB mycli pip install mycli ç¼–è¾‘å™¨å’ŒIDE vscode åŒæ­¥é…ç½® ä½¿ç”¨setting syncæ’ä»¶ ä¿®æ”¹é…ç½®æ–‡ä»¶ typora æ‰“å¼€è®¾ç½®ä¸­çš„markdownæ‰©å±•è¯­æ³•ä¸­çš„å†…è”å…¬å¼ã€æ•°å­¦å…¬å¼è‡ªåŠ¨æ·»åŠ åºå· jetbrains-toolbox-app è®¾ç½®å­˜å‚¨ä½ç½®å’Œåˆ é™¤æ—§ç‰ˆæœ¬ ç‰ˆæœ¬æ§åˆ¶ Git ","date":"2022-03-02","objectID":"/posts/software-tools/:3:0","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"å…¶ä»–å·¥å…· ftp filezilla ç»ˆç«¯\u0026ssh Windows terminalï¼ˆå¾®è½¯åº”ç”¨å•†åº—ä¸‹è½½ï¼‰ mobaxterm æ•°æ®åº“å¯è§†åŒ– HeidiSQL compass AnotherRedisDesktopManager æµç¨‹å›¾ drawio GIFå½•åˆ¶ ScreenToGif èƒ½å¯¹æœ€åå½•åˆ¶çš„æ¯ä¸€å¸§ç”»é¢è¿›è¡Œç¼–è¾‘ æŠ“åŒ… Charles wireshark å›¾åºŠ PicGo æ–‡ä»¶æŸ¥æ‰¾ everything é€Ÿåº¦æå¿« ä¸å¯æè¿°è½¯ä»¶ clash å­—ä½“ nerd font è§†é¢‘æ’­æ”¾å™¨ Potplayer Qucklook Windowsåº”ç”¨å•†åº—ä¸‹è½½ï¼Œæ–‡ä»¶å¿«é€Ÿé¢„è§ˆ åƒcsvæ•°æ®ï¼Œcodeï¼Œå›¾ç‰‡éƒ½å¯ä»¥é¢„è§ˆå¾ˆæ–¹ä¾¿ PowerToys ç±»ä¼¼äºmacä¸Šçš„èšç„¦æœç´¢ï¼ŒPowerToys scoop Windowsä¸‹çš„ä¸€ä¸ªåŒ…ç®¡ç†å™¨ è®¾ç½®scoopå®‰è£…ä½ç½® ç®¡ç†å‘˜æƒé™æ‰“å¼€powershell(æˆ–è€…Windows Terminal) $env:SCOOP='D:\\soft\\scoop' é…ç½®åŒ…å®‰è£…çš„ä½ç½® $env:SCOOP_GLOBAL='F:\\GlobalScoopApps' å®‰è£… Invoke-Expression (New-Object System.Net.WebClient).DownloadString('https://get.scoop.sh') chocolatey chocolateyæ˜¯Windowsä¸‹çš„å¦ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œå’Œscoopæ­é…ä½¿ç”¨ å®‰è£… Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1')) æ›´æ”¹å®‰è£…ä½ç½® å®‰è£…ä½ç½®æš‚æ—¶ä¸çŸ¥é“å¦‚ä½•ç›´æ¥æ›´æ”¹ï¼Œå¯ä»¥å®‰è£…ä»¥åå°†ç›®å½•å‰ªåˆ‡åˆ°æƒ³è¦å®‰è£…çš„ä½ç½® ä¿®æ”¹ç¯å¢ƒå˜é‡ä¸­çš„å€¼ æ›´æ”¹åŒ…å®‰è£…çš„ä½ç½® ä¿®æ”¹ç¯å¢ƒå˜é‡ oh-my-posh oh-my-poshæ˜¯ä¸€ä¸ªWindowsä¸‹çš„ç»ˆç«¯ç¾åŒ–å·¥å…·ï¼Œæ­é…Windows Terminalä½¿ç”¨ï¼Œæ¯•ç«Ÿä»£ç ä¸ä¼šå¤©å¤©å†™ä½†æ˜¯ç»ˆç«¯å¤©å¤©ç”¨ å› ä¸ºå®‰è£…è¿‡ç¨‹ç¨€é‡Œç³Šæ¶‚ï¼Œæ‰€ä»¥å¼„æ˜ç™½åæ›´æ–° ä¸»é¢˜å¯ä»¥å‚ç…§å®˜æ–¹æ–‡æ¡£ ","date":"2022-03-02","objectID":"/posts/software-tools/:4:0","tags":["Github","ç¯å¢ƒé…ç½®"],"title":"software-tools","uri":"/posts/software-tools/"},{"categories":null,"content":"æ¯å¹´æ¡ƒèŠ±å¼€çš„æ—¶å€™ï¼Œå°±ä¼šæƒ³èµ·ä¸€ä¸ªäººï¼Œå¥¹æ›¾ç»å¾ˆå–œæ¬¢æˆ‘ã€‚ ","date":"2022-03-02","objectID":"/about/:0:0","tags":["blog"],"title":"å…³äºæˆ‘","uri":"/about/"},{"categories":["Github"],"content":"goå¼€æºå·¥å…·åˆé›†2 ","date":"2022-02-18","objectID":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%862/:0:0","tags":["Go","Github"],"title":"goå¼€æºå·¥å…·åˆé›†2","uri":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%862/"},{"categories":["Github"],"content":"grafana staræ•°ï¼š47.1k å¼€æ”¾å’Œå¯ç»„åˆçš„å¯è§‚å¯Ÿæ€§å’Œæ•°æ®å¯è§†åŒ–å¹³å°ã€‚å¯è§†åŒ–æ¥è‡ªPrometheusã€Lokiã€Elasticsearchã€InfluxDBã€Postgresç­‰å¤šä¸ªæ¥æºçš„æŒ‡æ ‡ã€æ—¥å¿—å’Œè·Ÿè¸ªã€‚ grafanaèƒ½å¤Ÿå¸®åŠ©ä½¿ç”¨è€…å¿«é€Ÿéƒ¨ç½²å‡ºä¸€å¥—å¯é«˜åº¦è‡ªå®šä¹‰çš„å¯è§†åŒ–ç›‘æ§å¹³å°ï¼Œç›¸ä¿¡ä¸ç®¡æ˜¯å¼€å‘è€…è¿˜æ˜¯è¿ç»´äººå‘˜éƒ½éœ€è¦è¿™æ ·ä¸€ä¸ªæ¼‚äº®çš„ä»ªè¡¨ç›˜æ¥ç›‘æ§æœåŠ¡çš„è°ƒç”¨é‡ã€‚ ","date":"2022-02-18","objectID":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%862/:1:0","tags":["Go","Github"],"title":"goå¼€æºå·¥å…·åˆé›†2","uri":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%862/"},{"categories":["Github"],"content":"filebrowser staræ•°ï¼š14.7k filebrowserèƒ½å¤Ÿæä¾›æŒ‡å®šç›®å½•ä¸‹çš„webæ–‡ä»¶ç®¡ç†ç•Œé¢ï¼Œå¯ç”¨äºä¸Šä¼ ã€åˆ é™¤ã€é¢„è§ˆã€é‡å‘½åå’Œç¼–è¾‘æ–‡ä»¶ã€‚å®ƒå…è®¸åˆ›å»ºå¤šä¸ªç”¨æˆ·ï¼Œæ¯ä¸ªç”¨æˆ·å¯ä»¥æœ‰è‡ªå·±çš„ç›®å½•ã€‚ å¦‚æœå®¶ä¸­æœ‰linuxæˆ–è€…æ ‘è“æ´¾æ­é…frpæˆ–è®¸èƒ½å¤Ÿå¿«é€Ÿæ‰“é€ ä¸€ä¸ªç®€æ˜“çš„ç§äººç½‘ç›˜ ","date":"2022-02-18","objectID":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%862/:2:0","tags":["Go","Github"],"title":"goå¼€æºå·¥å…·åˆé›†2","uri":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%862/"},{"categories":["Github"],"content":"gogs staræ•°ï¼š38.5k å¦‚æœä½ æƒ³åœ¨å®¶æ­å»ºä¸€ä¸ªç§äººçš„gitä»“åº“gogsä¸€å®šæ˜¯æœ€ä¼˜çš„é€‰æ‹©ï¼Œä¸€ä¸ªå»‰ä»·çš„æ ‘è“æ´¾å°±èƒ½æ»¡è¶³gogsçš„è¿è¡Œæ¡ä»¶ ","date":"2022-02-18","objectID":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%862/:3:0","tags":["Go","Github"],"title":"goå¼€æºå·¥å…·åˆé›†2","uri":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%862/"},{"categories":["Github"],"content":"gin-vue-admin staræ•°ï¼š11.5k gin-vue-admin æ˜¯ä¸€å¥—ä¸ºå¿«é€Ÿç ”å‘å‡†å¤‡çš„ä¸€æ•´å¥—å‰åç«¯åˆ†ç¦»æ¶æ„å¼çš„å¼€æºæ¡†æ¶ï¼Œæ—¨åœ¨å¿«é€Ÿæ­å»ºä¸­å°å‹é¡¹ç›®ã€‚ åŸºäºvite+vue3+ginæ­å»ºçš„å¼€å‘åŸºç¡€å¹³å°ï¼Œé›†æˆjwté‰´æƒï¼Œæƒé™ç®¡ç†ï¼ŒåŠ¨æ€è·¯ç”±ï¼Œåˆ†é¡µå°è£…ï¼Œå¤šç‚¹ç™»å½•æ‹¦æˆªï¼Œèµ„æºæƒé™ï¼Œä¸Šä¼ ä¸‹è½½ï¼Œä»£ç ç”Ÿæˆå™¨ï¼Œè¡¨å•ç”Ÿæˆå™¨ç­‰å¼€å‘å¿…å¤‡åŠŸèƒ½ã€‚ å€¼å¾—ä¸€æçš„æ˜¯gin-vue-adminçš„å¼€å‘è€…åœ¨bç«™ä¸Šä¼ äº†é¡¹ç›®æ•™å­¦è§†é¢‘æ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨ã€‚ ","date":"2022-02-18","objectID":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%862/:4:0","tags":["Go","Github"],"title":"goå¼€æºå·¥å…·åˆé›†2","uri":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%862/"},{"categories":["Github"],"content":"åˆ†äº«Githubä¸Šæœ‰è¶£çš„goå¼€æºé¡¹ç›® ","date":"2022-02-17","objectID":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/:0:0","tags":["Go","Github"],"title":"goå¼€æºå·¥å…·åˆé›†1","uri":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/"},{"categories":["Github"],"content":"Hugo staræ•°ï¼š57.1k Hugoæ˜¯ç”±Goè¯­è¨€å®ç°çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼ŒHexoç±»ä¼¼ã€‚å…·æœ‰ç®€å•ã€æ˜“ç”¨ã€é«˜æ•ˆã€æ˜“æ‰©å±•ã€å¿«é€Ÿéƒ¨ç½²ç­‰ç‰¹ç‚¹ã€‚ Hugoä¾èµ–äºMarkdownæ–‡ä»¶å‰ç«¯æ¨¡æ¿ï¼ŒHugoèƒ½å¤Ÿåœ¨åœ¨ä¸€ç§’å†…æ¸²æŸ“å‡ºä¸€ä¸ªä¸­ç­‰å¤§å°çš„ç½‘ç«™ã€‚ Hugoé€šå¸¸ç”¨äºæ„å»ºä¸ªäººåšå®¢ç½‘ç«™ã€æ–‡æ¡£ã€‚ å¦‚æœæƒ³æ„å»ºä¸ªäººåšå®¢æˆ–è€…é•¿æœŸå—Hexoç¼“æ…¢çš„é€Ÿåº¦å›°æ‰°ä¸å¦¨å°è¯•ä¸€ä¸‹Hugoã€‚ ","date":"2022-02-17","objectID":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/:1:0","tags":["Go","Github"],"title":"goå¼€æºå·¥å…·åˆé›†1","uri":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/"},{"categories":["Github"],"content":"gotop staræ•°ï¼š1.3k åŸºäºç»ˆç«¯çš„å›¾å½¢æ´»åŠ¨ç›‘è§†å™¨ï¼Œæ”¯æŒæŒ‰ç…§è¿›ç¨‹æ•°ã€CPUå ç”¨ç‡ã€å†…å­˜å ç”¨ç‡æ’åºï¼Œå¯èƒ½å¯¹äºå¤§å¤šæ•°ç¨‹åºå‘˜æ¥è¯´æ¯”è¾ƒç†Ÿæ‚‰çš„æ˜¯topæˆ–htopï¼Œæ¯«æ— ç–‘é—®å¦‚æœè®©æˆ‘é€‰ï¼Œæˆ‘è‚¯å®šé€‰æ‹©gotop htop gotop ","date":"2022-02-17","objectID":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/:2:0","tags":["Go","Github"],"title":"goå¼€æºå·¥å…·åˆé›†1","uri":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/"},{"categories":["Github"],"content":"frp staræ•°ï¼š53.3k frpæ˜¯ä½¿ç”¨goè¯­è¨€å†™çš„ä¸€ä¸ªä¸“æ³¨äºå†…ç½‘ç©¿é€çš„é«˜æ€§èƒ½çš„åå‘ä»£ç†åº”ç”¨ï¼Œæ”¯æŒ TCPã€UDPã€HTTPã€HTTPS ç­‰å¤šç§åè®®ã€‚å¯ä»¥å°†å†…ç½‘æœåŠ¡ä»¥å®‰å…¨ã€ä¾¿æ·çš„æ–¹å¼é€šè¿‡å…·æœ‰å…¬ç½‘ IP èŠ‚ç‚¹çš„ä¸­è½¬æš´éœ²åˆ°å…¬ç½‘ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ä½œè€…å¼€é€šäº†çŸ¥è¯†æ˜Ÿçƒï¼Œç”¨äºåˆ†äº«frpç›¸å…³çš„çŸ¥è¯†å’ŒæŠ€æœ¯ã€‚ ","date":"2022-02-17","objectID":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/:3:0","tags":["Go","Github"],"title":"goå¼€æºå·¥å…·åˆé›†1","uri":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/"},{"categories":["Github"],"content":"Yarning staræ•°ï¼š6.2k Yarningæ˜¯ä¸€ä¸ªSQLå®¡æ ¸å¹³å°ï¼Œæ”¯æŒSQLæŸ¥è¯¢ã€SQLå®¡æ ¸ã€é‚®ä»¶æ¨é€ã€ç”¨æˆ·æƒé™ç®¡ç†ã€AutoTaskè‡ªåŠ¨æ‰§è¡Œç­‰åŠŸèƒ½ã€‚ ","date":"2022-02-17","objectID":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/:4:0","tags":["Go","Github"],"title":"goå¼€æºå·¥å…·åˆé›†1","uri":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/"},{"categories":["Github"],"content":"lazygit staræ•°ï¼š25.9k lazygitæ˜¯ä¸€ä¸ªç®€å•çš„gitå‘½ä»¤ç»ˆç«¯ç•Œé¢ï¼Œå®ƒçš„äº¤äº’å°±åƒvimä¸€æ ·é€šè¿‡é”®ç›˜å®Œæˆï¼Œä½†æ˜¯å‘½ä»¤æ›´åŠ ç®€å•ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å¿«é€Ÿé«˜æ•ˆçš„å®Œæˆå¦‚ä»£ç æäº¤ã€æ¨é€ã€åˆ†æ”¯åˆå¹¶ã€ç‰ˆæœ¬å›é€€ç­‰gitç›¸å…³çš„å‘½ä»¤æ“ä½œ ","date":"2022-02-17","objectID":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/:5:0","tags":["Go","Github"],"title":"goå¼€æºå·¥å…·åˆé›†1","uri":"/posts/go%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%861/"},{"categories":["Github"],"content":"å‰è¨€ ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜æœ‰è‡ªå·±çš„åšå®¢ä¸ä»…å¯ä»¥è®°å½•æˆ‘ä»¬è‡ªå·±çš„å­¦ä¹ ç¬”è®°ã€æå‡è‡ªå·±çš„çŸ¥ååº¦ï¼Œå¹¶ä¸”åœ¨é¢è¯•çš„æ—¶å€™ä¹Ÿæ˜¯åŠ åˆ†åˆ©å™¨ã€‚ æ›¾ç»ç¬”è€…ä¹Ÿæƒ³è¿‡ä½¿ç”¨CSDNã€åšå®¢å›­è¿™ç±»åšå®¢ç½‘ç«™çš„æœåŠ¡ï¼Œä½†æ˜¯æƒ³åˆ°ä¸Šé¢çš„ç•Œé¢æ ·å¼å’Œå¹¿å‘Šå°±æ”¾å¼ƒäº†ï¼Œäºæ˜¯é‡‡ç”¨äº†hexo+nginxçš„ç»„åˆï¼Œhexoæ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºnode.jså®ç°çš„ä¸€ä¸ªåšå®¢æ¡†æ¶ã€‚å› ä¸ºhexoæ˜¯jså†™çš„ï¼Œæ‰€ä»¥æ‹¥æœ‰å¤§é‡çš„ç²¾ç¾ä¸»é¢˜ï¼Œç”šè‡³åªè¦è‡ªå·±ä¼šä¸€ç‚¹å‰ç«¯ä¹Ÿèƒ½å¤Ÿå¼€å‘å±äºè‡ªå·±çš„ä¸»é¢˜ã€‚ ç¬”è€…ä½¿ç”¨hexo+nginxè¿™å¥—ç»„åˆæ‹³å¤§æ¦‚æœ‰ä¸¤å¹´çš„æ—¶é—´ï¼Œéšç€ä½¿ç”¨æ—¶é—´çš„å˜é•¿ä»¥åŠä¸»é¢˜çš„æ ·å¼å®šåˆ¶åŒ–è¶Šæ¥è¶Šå¤šç¬”è€…å‘ç°hexoåœ¨å°†markdownç¼–è¯‘ä¸ºé™æ€htmlæ—¶é€Ÿåº¦è¶Šæ¥è¶Šæ…¢äº†ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯æ¯æ¬¡é¡µé¢æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šåŠ è½½è®¸å¤šé‡å¤çš„jsã€cssæ–‡ä»¶å¯¼è‡´è®¿é—®é€Ÿåº¦å°±ç®—æ˜¯åœ¨æœ¬åœ°ä¹Ÿéå¸¸ç¼“æ…¢ï¼Œäºæ˜¯ç¬”è€…å†³å®šå°†åšå®¢æ¡†æ¶æ›´æ¢ä¸ºhugoã€‚ hugoæ˜¯goè¯­è¨€ç¼–å†™çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œåœ¨å®‰è£…éƒ¨ç½²ä¸Šéƒ½ååˆ†çš„ç®€å•å¿«é€Ÿï¼Œå°½ç®¡ä¸»é¢˜æ•°é‡ç›¸å¯¹äºhexoè€Œè¨€è¾ƒå°‘ï¼Œä½†æ˜¯ä¸»é¢˜æ•°é‡ä¹Ÿè¾¾åˆ°äº†ä¸€åƒå¤šä¸ªã€‚hugoåœ¨GitHubä¸Šçš„staræ•°é‡è¾¾åˆ°äº†57.1kï¼Œæ¯”hexoè¿˜è¦é«˜ã€‚å¹¶ä¸”hugoçš„æ›´æ–°é¢‘ç‡è¿œé«˜äºhexoã€‚ ","date":"2022-02-15","objectID":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/:1:0","tags":["blog","Go","Github"],"title":"é™æ€ç½‘ç«™ç”Ÿæˆå™¨Hugo","uri":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/"},{"categories":["Github"],"content":"å®‰è£… æç¤ºï¼šç¬”è€…ç”µè„‘ç¯å¢ƒä¸ºWindows11 x64ï¼Œgoç‰ˆæœ¬ä¸º1.17 ","date":"2022-02-15","objectID":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/:2:0","tags":["blog","Go","Github"],"title":"é™æ€ç½‘ç«™ç”Ÿæˆå™¨Hugo","uri":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/"},{"categories":["Github"],"content":"å®‰è£…æ–¹å¼ä»‹ç» hugoæä¾›äº†å¤šç§å®‰è£…æ–¹å¼ï¼Œå¹¶ä¸”å°†ç¼–è¯‘å¥½çš„ç¨‹åºå‘å¸ƒåˆ°äº†å¤šä¸ªåŒ…ç®¡ç†å¹³å°ï¼Œæ¯”å¦‚Homebrewã€MacPortsã€Chocolateyã€Scoopã€Snapã€Aurç­‰ç­‰ã€å¯ä»¥ç›´æ¥ä½¿ç”¨å¯¹åº”çš„åŒ…ç®¡ç†å™¨å‘½ä»¤å®‰è£…ã€‚ hugoä¹Ÿå‘å¸ƒäº†ç¼–è¯‘å¥½çš„ç¨‹åºåœ¨GitHub releasessä¸Šå¯ä»¥ä¸‹è½½ç”µè„‘å¯¹åº”çš„ç‰ˆæœ¬ç„¶åå°†ç¨‹åºæ‰€åœ¨ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡å³å¯ã€‚ ç¬”è€…ä½œä¸ºä¸€ä¸ªgoç¨‹åºå‘˜ï¼Œå†³å®šä½¿ç”¨æºç ç¼–è¯‘çš„æ–¹å¼è¿›è¡Œå®‰è£…ã€‚ ","date":"2022-02-15","objectID":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/:2:1","tags":["blog","Go","Github"],"title":"é™æ€ç½‘ç«™ç”Ÿæˆå™¨Hugo","uri":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/"},{"categories":["Github"],"content":"æºç ç¼–è¯‘å®‰è£… cloneæºç  å¦‚æœæ²¡æœ‰ä»£ç†å»ºè®®ä½¿ç”¨GitHubå›½å†…é•œåƒè¿›è¡Œclone git clone --depth=1 https://github.com/gohugoio/hugo ç¼–è¯‘ ç¼–è¯‘ä¹‹å‰éœ€è¦æ³¨æ„åœ¨hugoçš„readmeä¸­Build and Install the Binaries from Source (Advanced Install)ä¸­æåˆ°goçš„ç‰ˆæœ¬éœ€è¦å¤§äºç­‰äº1.16 ç¼–è¯‘çš„æ—¶å€™ä¼šå»æ‹‰å–ç›¸å…³ä¾èµ–ï¼Œæ‰€ä»¥ä¸ç”¨æå‰ä½¿ç”¨go mod tidyæˆ–è€…go mod downloadæ£€æŸ¥ä¸‹è½½ç›¸å…³ä¾èµ– go build ç¼–è¯‘å®Œæˆä¹‹åæµ‹è¯•ä¸€ä¸‹ å¯ä»¥çœ‹åˆ°æœ‰æç¤ºä¿¡æ¯äº†ï¼Œä½†æ˜¯ç¼–è¯‘å‡ºæ¥çš„ç¨‹åºæœ‰63MB releaseså‘å¸ƒçš„æœ€æ–°çš„Windowsç‰ˆæœ¬åªæœ‰48MBï¼Œå»æ‰ç¬¦å·è¡¨å’Œè°ƒè¯•ä¿¡æ¯å†æ¬¡ç¼–è¯‘ï¼Œç„¶åç¼–è¯‘å‡ºæ¥çš„ç‰ˆæœ¬åªæœ‰49MBäº† go build -ldflags \"-s -w\" æœ€åæ˜¯æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œå½“ç„¶ä¸æ·»åŠ ç¯å¢ƒå˜é‡ä¹Ÿå¯ä»¥ï¼Œç¯å¢ƒå˜é‡æ·»åŠ å®Œæˆä¹‹åå¯ä»¥æµ‹è¯•ä¸€ä¸‹ hugo version ","date":"2022-02-15","objectID":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/:2:2","tags":["blog","Go","Github"],"title":"é™æ€ç½‘ç«™ç”Ÿæˆå™¨Hugo","uri":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/"},{"categories":["Github"],"content":"å®šåˆ¶ç½‘ç«™ åˆå§‹åŒ–ç½‘ç«™ æ³¨æ„ï¼šç¬”è€…å¹¶æ²¡æœ‰æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œç¬”è€…å·²ç»å®‰è£…è¿‡hugoï¼Œå› ä¸ºå†™è¿™ç¯‡æ–‡ç« æ‰€ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„æ‰§è¡Œç¼–è¯‘å‡ºæ¥çš„hugo.exe ä½¿ç”¨new siteå‘½ä»¤åˆ›å»ºsiteï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯åˆ›å»ºçš„siteå­˜æ”¾çš„ç›®å½•åç§° .\\hugo\\hugo.exe new site site-demo # hugo new site site-demo è¿è¡Œé€Ÿåº¦ç‰¹åˆ«å¿«ï¼Œç¬”è€…æŒ‰ä¸‹å›è½¦å°±è¾“å‡ºæç¤ºäº†ï¼Œè¿™ä¸ç¦è®©ç¬”è€…æƒ³è¯•è¯•hugoå’Œhexoåˆå§‹åŒ–çš„é€Ÿåº¦å·®è·åˆ°åº•æœ‰å¤šå¤§ï¼Œäºæ˜¯æ‰¾æ¥äº†ä¸€å°â€œå°æ°´ç®¡â€ã€‚â€œå°æ°´ç®¡â€ä¸Šé¢å®‰è£…çš„æ˜¯linuxç³»ç»Ÿï¼Œcpuæ˜¯i5 6ä»£åŒæ ¸ï¼Œå†…å­˜æ˜¯4Gã€‚ hugoï¼š hexoï¼š ä»æˆªå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå°½ç®¡hexoåˆå§‹åŒ–é™æ€ç½‘ç«™æ‰€éœ€è¦çš„ä¾èµ–åœ¨æœ¬åœ°æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹æ„å»ºæ•´ä¸ªé¡¹ç›®ä¾ç„¶èŠ±è´¹äº†16ç§’ è¿›å…¥ç›®å½•ä½¿ç”¨treeå‘½ä»¤å¯ä»¥çœ‹åˆ°hugoç”Ÿæˆçš„æ–‡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªconfig.tomlæ–‡ä»¶å°±æ˜¯ç½‘ç«™çš„é…ç½®æ–‡ä»¶ . â”œâ”€â”€ archetypes â”‚Â â””â”€â”€ default.md â”œâ”€â”€ config.toml â”œâ”€â”€ content â”œâ”€â”€ data â”œâ”€â”€ layouts â”œâ”€â”€ static â””â”€â”€ themes ç”Ÿæˆæ–‡ç«  hugo new posts/hello-hugo.md å¦‚æœå‘½ä»¤è¿è¡ŒæˆåŠŸå°±ä¼šè¾“å‡ºä¸€ä¸ªå­˜æ”¾äº†ç”Ÿæˆçš„æ–‡ç« çš„æ–‡ä»¶åœ°å€ï¼Œæ‰“å¼€æ–‡ä»¶å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†æ–‡ç« æ ‡é¢˜ã€åˆ›å»ºæ—¶é—´ã€æ˜¯å¦æ˜¯è‰ç¨¿ï¼ˆdraftï¼‰ä¸‰ä¸ªä¿¡æ¯ï¼Œè¿™ä¸‰ä¸ªéƒ½æ˜¯hugoé»˜è®¤ç”Ÿæˆçš„ï¼Œå½“ç„¶å¯ä»¥è‡ªå®šä¹‰ç”Ÿæˆæ¨¡æ¿ ä¸ºäº†æ–¹ä¾¿ï¼Œç¬”è€…å°†hugoçš„readmeå†…å®¹ç›´æ¥å¤åˆ¶è¿‡æ¥ï¼Œç„¶åå°†draftæ”¹ä¸ºfalseï¼Œè¯»è€…å¯ä»¥è¾“å…¥ä»»æ„å†…å®¹è¿›è¡Œæµ‹è¯• è®¾ç½®ä¸»é¢˜ ä¸ç®¡æ˜¯hexoè¿˜æ˜¯hugoç”Ÿæˆçš„é™æ€ç½‘ç«™é¡¹ç›®éƒ½æ˜¯æ²¡æœ‰ä¸»é¢˜æ ·å¼çš„ï¼Œéƒ½éœ€è¦ä½¿ç”¨è€…è‡ªå·±è®¾ç½®ä¸»é¢˜ï¼Œhugoçš„ä¸»é¢˜åœ°å€åœ¨å®˜ç½‘å°±èƒ½çœ‹åˆ°https://themes.gohugo.io/ ç¬”è€…ä½¿ç”¨äº†Hugo PaperModä¸»é¢˜è¿›è¡Œæ¼”ç¤ºï¼ŒæŒ‰ç…§å®‰è£…è¯´æ˜è¿›è¡Œå®‰è£… clone git clone https://github.com/adityatelange/hugo-PaperMod themes/PaperMod --depth=1 æŸ¥çœ‹ä¸€ä¸‹themesæ–‡ä»¶å¤¹ï¼Œå‘ç°ç¡®å®å¤šå‡ºäº†PaperModæ–‡ä»¶å¤¹ ä¿®æ”¹é…ç½®æ–‡ä»¶ æŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼Œè¿™æ—¶åº”è¯¥ä¿®æ”¹ config.ymlæ–‡ä»¶ï¼Œè®¾ç½®themeé€‰é¡¹ä¸ºPaperModï¼Œä½†æ˜¯ç«™ç‚¹æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰config.ymlè¿™ä¸ªæ–‡ä»¶ï¼Œå…¶å®åœ¨è¯´æ˜æ–‡æ¡£çš„é¡¶éƒ¨introä¸­å·²ç»è¯´æ˜ï¼Œæ–‡æ¡£ç¤ºä¾‹å°†ä¼šä½¿ç”¨yml/yamlæ ¼å¼ï¼Œä½†æ˜¯åœ¨hugoç”Ÿæˆçš„é™æ€ç«™ç‚¹æ–‡ä»¶ä¸­æ˜¯ä½¿ç”¨çš„tomlæ ¼å¼ä½œä¸ºé…ç½®æ–‡ä»¶çš„ï¼ŒåŒ…æ‹¬PaperModè¿™ä¸ªä¸»é¢˜çš„é…ç½®æ–‡ä»¶ï¼Œè¿™æ—¶å€™åªéœ€è¦ä¿®æ”¹ç«™ç‚¹æ ¹ç›®å½•ä¸‹é¢çš„config.tomlæ–‡ä»¶ï¼ŒæŒ‰ç…§tomlæ ¼å¼å°†themeå€¼è®¾ç½®ä¸ºPaperModå³å¯ åœ¨å®‰è£…æ–‡æ¡£çš„ç»“å°¾è¿˜æä¾›äº†ä¸€ä»½ç¤ºä¾‹é…ç½®å’Œä¸€ä»½æ–‡ç« æ¨¡æ¿æ„Ÿå…´è¶£çš„è¯»ç€å¯ä»¥åœ¨ç«™ç‚¹æˆåŠŸå¯åŠ¨ä¹‹åè‡ªå·±å°è¯•è®¾ç½®ä¸€ä¸‹ã€‚ å¯åŠ¨hugoæœåŠ¡ å› ä¸ºå½“å‰æˆ‘ä»¬çš„ç¯å¢ƒè¿˜å¤„äºæœ¬åœ°ï¼Œåšå®¢æ–‡ç« å†…å®¹è¿˜æ˜¯markdownæ ¼å¼çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨hugoæœåŠ¡æ¥æ¸²æŸ“markdownæ–‡ç«  hugo server # åœ¨å¯åŠ¨æœåŠ¡æ—¶åŠ ä¸Š-Då‚æ•°å°±ä¼šæ¸²æŸ“æ–‡ç« æŠ¬å¤´draftå­—æ®µä¸ºtrueçš„æ–‡ç«  # hugo server -D # å¦‚æœæƒ³è¦æŒ‡å®šç›‘å¬ç«¯å£å¯ä»¥ä½¿ç”¨-på‚æ•° # hugo server -p 3333 å¯åŠ¨çš„é€Ÿåº¦éå¸¸å¿«ï¼Œåœ¨è¾“å‡ºä¿¡æ¯çš„å€’æ•°ç¬¬äºŒè¡Œæç¤ºæœåŠ¡æ˜¯ç›‘å¬åœ¨æœ¬åœ°çš„1313ç«¯å£çš„ï¼Œæ‰“å¼€æµè§ˆå™¨è¿›å…¥http://localhost:1313/ å¯ä»¥çœ‹åˆ°åœ¨ç½‘ç«™åç§°My New Hugo Siteæ—è¾¹è¿˜æœ‰ä¸€ä¸ªå¤œé—´æ¨¡å¼æŒ‰é’®ï¼Œç‚¹å‡»åšå®¢çš„ä¸»é¢˜å°±ä¼šå˜ä¸ºé»‘è‰²ï¼Œç‚¹å‡»æ–‡ç« æ ‡é¢˜è®¿é—®è¯¦æƒ…æ—¶ç¬”è€…å·²ç»æœ‰äº†\"èµ·é£\"çš„æ„Ÿè§‰ï¼Œé€Ÿåº¦éå¸¸çš„å¿« ","date":"2022-02-15","objectID":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/:3:0","tags":["blog","Go","Github"],"title":"é™æ€ç½‘ç«™ç”Ÿæˆå™¨Hugo","uri":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/"},{"categories":["Github"],"content":"ç”Ÿæˆé™æ€ç½‘ç«™ ç°åœ¨é€šè¿‡hugoæœåŠ¡å·²ç»åœ¨æœ¬åœ°çœ‹åˆ°äº†ç½‘ç«™ï¼Œå¦‚æœè¦å°†ç½‘ç«™æ”¾åˆ°æœåŠ¡å™¨ä¸Šé¢å¹¶ä¸”èƒ½å¤Ÿé€šè¿‡å…¬ç½‘è®¿é—®ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç° å°†ç”Ÿæˆçš„ç«™ç‚¹æ–‡ä»¶å¤¹æ‰“åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šé¢ï¼Œç„¶ååœ¨æœåŠ¡å™¨ä¸Šé¢å®‰è£…å’Œæœ¬åœ°ç‰ˆæœ¬ç›¸åŒçš„hugoï¼Œä½¿ç”¨hugoæœåŠ¡æ¸²æŸ“é™æ€ç½‘ç«™ï¼Œä¿®æ”¹æœåŠ¡å™¨å…¥ç«™è§„åˆ™å°±å¯ä»¥é€šè¿‡ipè®¿é—®åˆ°ç½‘ç«™äº†ã€‚è¿™ç§æ–¹å¼ä¸€èˆ¬ä¸æ¨èä½¿ç”¨ï¼Œå¦‚æœæœåŠ¡å™¨å®•æœºé‡å¯å°±éœ€è¦æ‰‹åŠ¨å¯åŠ¨hugoæœåŠ¡ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å†™ä¸€ä¸ªå¯åŠ¨æœåŠ¡çš„è„šæœ¬ï¼Œè½¯é“¾æ¥åˆ°/etc/rcN.d/ä¸‹é¢ï¼Œæ¯æ¬¡å¼€æœºçš„æ—¶å€™éƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œè„šæœ¬ å°†æœ¬åœ°ç«™ç‚¹æ–‡ä»¶ç¼–è¯‘ä¸ºé™æ€æ–‡ä»¶ï¼Œç„¶åä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸­è®©æœåŠ¡å™¨è½¯ä»¶ï¼ˆnginxï¼Œapacheç­‰ï¼‰æ‰˜ç®¡ã€‚ ç»ˆç«¯è¿›å…¥ç«™ç‚¹ç›®å½•ä¸­ï¼Œç„¶åä½¿ç”¨hugoå‘½ä»¤å°±èƒ½å°†markdownæ–‡ç« ç¼–è¯‘ä¸ºé™æ€æ–‡ä»¶äº†ï¼Œç”Ÿæˆçš„é™æ€æ–‡ä»¶å…¨éƒ¨æ”¾åˆ°äº†publicæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œå°†publicæ–‡ä»¶å¤¹ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œç„¶åé…ç½®nginxæˆ–apacheå°±å¯ä»¥äº† ","date":"2022-02-15","objectID":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/:4:0","tags":["blog","Go","Github"],"title":"é™æ€ç½‘ç«™ç”Ÿæˆå™¨Hugo","uri":"/posts/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8hugo/"},{"categories":["Docker"],"content":"ç”¨dockeræ¥éƒ¨ç½²æœåŠ¡ ","date":"2021-11-13","objectID":"/posts/docker%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%E4%BB%AC/:0:0","tags":["Docker"],"title":"dockeréƒ¨ç½²æœåŠ¡ä»¬","uri":"/posts/docker%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%E4%BB%AC/"},{"categories":["Docker"],"content":"yapi æ–¹æ¡ˆæ¥æºäºdocker-yapi repositories é•œåƒæº https://mirrors.aliyun.com/alpine/v3.6/main/ https://mirrors.aliyun.com/alpine/v3.6/community/ Dockerfile ç”¨äºæ„å»ºyapié•œåƒ FROM node:12-alpine COPY repositories /etc/apk/repositories RUN npm install -g yapi-cli --registry https://registry.npm.taobao.org EXPOSE 3000 9090 init-mongo.js ç”¨äºåˆå§‹åŒ–mongoï¼Œmongoçš„adminå¯†ç å’Œyapiç”¨æˆ·åå¯†ç éƒ½åœ¨è¿™é‡Œæ›´æ”¹ db.createUser({ user: 'admin', pwd: 'admin123456', roles: [ { role: \"root\", db: \"admin\" } ] }); db.auth(\"admin\", \"admin123456\"); db.createUser({ user: 'yapi', pwd: 'yapi123456', roles: [ { role: \"dbAdmin\", db: \"yapi\" }, { role: \"readWrite\", db: \"yapi\" } ] }); docker-compose.yml ç¼–æ’å®¹å™¨ version: '3.1' services: mongo: image: mongo:4 restart: always environment: MONGO_INITDB_ROOT_USERNAME: root MONGO_INITDB_ROOT_PASSWORD: example MONGO_INITDB_DATABASE: yapi volumes: - ./mongo-conf:/docker-entrypoint-initdb.d - ./mongo/etc:/etc/mongo - ./mongo/data/db:/data/db ports: - 27017:27017 healthcheck: test: [\"CMD\", \"netstat -anp | grep 27017\"] interval: 2m timeout: 10s retries: 3 yapi: build: context: ./ dockerfile: Dockerfile image: yapi # ç¬¬ä¸€æ¬¡å¯åŠ¨ä½¿ç”¨ command: \"yapi server\" # ä¹‹åä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ # command: \"node /my-yapi/vendors/server/app.js\" volumes: - ./my-yapi:/my-yapi ports: - 9090:9090 - 3000:3000 depends_on: - mongo ","date":"2021-11-13","objectID":"/posts/docker%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%E4%BB%AC/:1:0","tags":["Docker"],"title":"dockeréƒ¨ç½²æœåŠ¡ä»¬","uri":"/posts/docker%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%E4%BB%AC/"},{"categories":["Docker"],"content":"kafkaé›†ç¾¤ docker-compose.yaml version: \"3\" services: zookeeper: image: wurstmeister/zookeeper container_name: zookeeper ports: - \"2181:2181\" kafka1: image: wurstmeister/kafka ports: - \"9092:9092\" environment: KAFKA_ADVERTISED_HOST_NAME: 192.168.3.249 KAFKA_CREATE_TOPICS: TestComposeTopic:4:3 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_BROKER_ID: 1 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.3.249:9092 KAFKA_LISTENERS: PLAINTEXT://0.0.0.0:9092 container_name: kafka01 volumes: - /var/run/docker.sock:/var/run/docker.sock kafka2: image: wurstmeister/kafka ports: - \"9093:9093\" environment: KAFKA_ADVERTISED_HOST_NAME: 192.168.3.249 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_BROKER_ID: 2 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.3.249:9093 KAFKA_LISTENERS: PLAINTEXT://0.0.0.0:9093 container_name: kafka02 volumes: - /var/run/docker.sock:/var/run/docker.sock kafka3: image: wurstmeister/kafka ports: - \"9094:9094\" environment: KAFKA_ADVERTISED_HOST_NAME: 192.168.3.249 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_BROKER_ID: 3 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.3.249:9094 KAFKA_LISTENERS: PLAINTEXT://0.0.0.0:9094 container_name: kafka03 volumes: - /var/run/docker.sock:/var/run/docker.sock ","date":"2021-11-13","objectID":"/posts/docker%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%E4%BB%AC/:2:0","tags":["Docker"],"title":"dockeréƒ¨ç½²æœåŠ¡ä»¬","uri":"/posts/docker%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%E4%BB%AC/"},{"categories":["python"],"content":"æ—¥å¿—åœ¨å¼€å‘ä¸­è¿˜æ˜¯å¾ˆå¸¸ç”¨çš„ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æœ€åŸå§‹çš„system.outä½†æ˜¯è¿™æ ·åšå¤ªç®€é™‹äº†ï¼Œæˆ‘åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å¾ˆå¤šæ—¶å€™éƒ½ä¼šä½¿ç”¨æ—¥å¿—ï¼Œåœ¨å¤„ç†å¼‚å¸¸çš„æ—¶å€™æˆ–è€…æ‰§è¡ŒæŸä¸ªå…³é”®æ–¹æ³•çš„æ—¶å€™æˆ‘éƒ½ä¼šä½¿ç”¨æ—¥å¿—ï¼Œå› ä¸ºè¿™æ ·èƒ½æ›´å¥½çš„ç›‘æ§ç¨‹åºï¼Œä½†æ˜¯ä½¿ç”¨pythonä¸­çš„loggingåº“è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œè™½ç„¶æ¯æ¬¡éƒ½æ˜¯å¤åˆ¶ç²˜è´´ä»¥å‰å†™çš„é…ç½®ï¼Œä½†æ˜¯æ”¹èµ·æ¥çš„æ—¶å€™è¿˜æ˜¯æŒºéº»çƒ¦çš„ ","date":"2021-08-08","objectID":"/posts/python%E6%97%A5%E5%BF%97%E5%BA%93loguru/:0:0","tags":["python"],"title":"pythonæ—¥å¿—åº“loguru","uri":"/posts/python%E6%97%A5%E5%BF%97%E5%BA%93loguru/"},{"categories":["python"],"content":"loguru é€šå¸¸æˆ‘é…ç½®å¥½loggingä¹‹ååœ¨ç¨‹åºæœ€å¼€å§‹çš„æ—¶å€™å°±è¿›è¡ŒåŠ è½½ï¼Œç„¶ååªéœ€è¦åœ¨å…¶ä»–ä½ç½®å®ä¾‹åŒ–loggerå°±è¡Œ å¦‚æœåªè¦getLoggerä¼ å…¥çš„å­—ç¬¦ä¸²æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›åŒä¸€ä¸ªlogger import logging import os import sys from logging import handlers logger = logging.getLogger(__name__) logger.setLevel(logging.DEBUG) fmt = logging.Formatter(\"%(asctime)s | %(levelname)s | %(message)s\") LOGFILE = os.path.expanduser(\"log\") console_handler = logging.StreamHandler(sys.stderr) console_handler.setFormatter(fmt) logger.addHandler(console_handler) file_handler = handlers.RotatingFileHandler(LOGFILE) file_handler.setFormatter(fmt) logger.addHandler(file_handler) ä¸Šé¢é‚£ä¸€å †é…ç½®å…¶å®ä¹Ÿä¸å¤æ‚ï¼Œä½†æ˜¯ä½“éªŒç¡®å®ä¸æ˜¯å¾ˆå¥½ï¼Œå°¤å…¶æ˜¯è¦ç›‘æ§æŸä¸ªå‡½æ•°çš„æ—¶å€™è¿˜éœ€è¦å†™ä¸€ä¸ªè£…é¥°å™¨ ä½†æ˜¯loguruå°±å¾ˆèˆ’æœï¼Œæˆ‘ä¸éœ€è¦é…ç½®ä»€ä¹ˆå†…å®¹ï¼Œå°±ç®—ä½¿ç”¨æœ€åŸå§‹çš„loggerä¹Ÿèƒ½æœ‰å¾ˆå¥½çš„ä½“éªŒ pip install loguru from loguru import logger logger.debug(\"debug\") logger.info(\"info\") logger.warning(\"warning\") logger.error(\"error\") logger.critical(\"critical\") ","date":"2021-08-08","objectID":"/posts/python%E6%97%A5%E5%BF%97%E5%BA%93loguru/:1:0","tags":["python"],"title":"pythonæ—¥å¿—åº“loguru","uri":"/posts/python%E6%97%A5%E5%BF%97%E5%BA%93loguru/"},{"categories":["python"],"content":"é”™è¯¯æº¯æº @logger.catch def foo(a, b): return a / b foo(1, 0) å½“ç„¶è¿™ä¸ªè£…é¥°å™¨åªèƒ½åœ¨æˆ‘ä»¬ç¨‹åºç»ˆæ­¢çš„æ—¶å€™æé†’æˆ‘ä»¬ï¼Œåœ¨å®é™…çš„å¼€å‘ä¸­å¾€å¾€éƒ½æ˜¯éœ€è¦è®©ç¨‹åºç»§ç»­å¾€ä¸‹èµ°çš„ï¼Œé€šå¸¸ä¼šåœ¨æœ€ååšä¸€ä¸ªexcept Exceptionçš„å¤„ç†ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å¯èƒ½çŸ¥é“å…¨éƒ¨çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬èƒ½å¤„ç†çš„å¤§å¤šæ˜¯æˆ‘ä»¬èƒ½é¢„æ–™åˆ°ä»¥åŠæµ‹è¯•çš„æ—¶å€™é‡åˆ°çš„å¼‚å¸¸ï¼Œå¦‚æœæŒ‰ç…§ä¼ ç»Ÿçš„ç›´æ¥è¾“å‡ºæ–¹å¼ä¿¡æ¯è‚¯å®šä¸å¤Ÿï¼Œå¦‚æœdebugçš„è¯å¤ªéº»çƒ¦ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨logger.exception def foo(squ): try: return squ[5] except Exception as e: logger.exception(e) finally: return 0 print(foo([1, 2])) è¿™ä¸ªåŠŸèƒ½çœŸçš„å¾ˆèµï¼Œèƒ½åœ¨æµ‹è¯•çš„æ—¶å€™è½»æ¾çš„å‘ç°é—®é¢˜çš„åŸå›  ","date":"2021-08-08","objectID":"/posts/python%E6%97%A5%E5%BF%97%E5%BA%93loguru/:1:1","tags":["python"],"title":"pythonæ—¥å¿—åº“loguru","uri":"/posts/python%E6%97%A5%E5%BF%97%E5%BA%93loguru/"},{"categories":["Python"],"content":"å®ä¸ç›¸ç’ï¼Œä½œä¸ºä¸€ä¸ªå–œæ¬¢æ”¶é›†å£çº¸çš„boyï¼Œæˆ‘ç›¯ä¸Šwallhavenå¾ˆä¹…äº† ä½ å¯èƒ½è§‰å¾—æˆ‘åœ¨è¯´è¿™ç§é£æ ¼çš„ å®ä¸ç›¸ç’æˆ‘å…¶å®ä¸å–œæ¬¢ï¼Œæˆ‘å–œæ¬¢çš„æ˜¯è¿™ç§ å“ˆå“ˆå“ˆ~anywaysï¼ èµ·å› æ˜¯æˆ‘çš„ç”µè„‘ç”¨çš„æ˜¯åŠ¨æ€å£çº¸ï¼ˆå†™äº†ä¸ªè‡ªåŠ¨åˆ‡æ¢çš„shellè„šæœ¬ï¼‰ï¼Œè€Œä¸€ä¸ªæœˆå‰æˆ‘ç”µè„‘ä¸Šåªæœ‰ä¸‰å¼ å£çº¸ï¼Œå½“æˆ‘çœ‹åˆ°wallhavençš„å£çº¸æ—¶æˆ‘ç¬¬ä¸€æƒ³æ³•æ˜¯æˆ‘è¯¥æ‹¥æœ‰å®ƒä»¬ï¼Œå¦‚æœä½ å–œæ¬¢å£çº¸å¯èƒ½ä¹Ÿå’Œæˆ‘ä¸€æ ·ğŸ˜ğŸ˜ğŸ˜ æƒ³è¦è¿™äº›å£çº¸ä¸€å¼ ä¸€å¼ çš„æ‰‹åŠ¨ä¸‹è½½å½“ç„¶æ˜¯è¡Œä¸é€šçš„ï¼Œéœ€è¦å€ŸåŠ©ä¸€äº›ç‰¹æ®Šæ‰‹æ®µ æ­£ç‰‡å¼€å§‹ ","date":"2021-05-19","objectID":"/posts/python-%E5%BC%82%E6%AD%A5%E4%B8%8B%E8%BD%BD%E5%A3%81%E7%BA%B8/:0:0","tags":["Python"],"title":"python å¼‚æ­¥ä¸‹è½½å£çº¸","uri":"/posts/python-%E5%BC%82%E6%AD%A5%E4%B8%8B%E8%BD%BD%E5%A3%81%E7%BA%B8/"},{"categories":["Python"],"content":"è§£æç½‘é¡µ ç¬”è€…è¦æŠ“å–çš„å£çº¸åœ°å€ï¼šhttps://wallhaven.cc/search?q=like%3Arddgwm è§‚å¯Ÿåˆ—è¡¨é¡µï¼Œå‘ç°å‘ä¸‹æ»šåŠ¨åï¼Œurlä¸­çš„pageå‚æ•°ä¼šæ”¹å˜ ç„¶åç®€å•æµ‹è¯•ä¸€ä¸‹åçˆ¬è™«ï¼ˆæ‰‹æ®µè¿‡äºæš´èºå°±ä¸å±•ç¤ºäº†ï¼‰ï¼Œå‘ç°æ²¡æœ‰å‘çˆ¬è™«ï¼Œä½†å‡ºäºå°Šæ•¬è¿˜æ˜¯æºå¸¦ä¸ŠUser-Agentï¼Œç®€å•å°è£…ä¸€ä¸‹åˆ—è¡¨é¡µçš„è¯·æ±‚ï¼Œä¸€å…±åªæœ‰8é¡µï¼Œå¦‚æœè¯»è€…æ¯”è¾ƒé—²ä¹Ÿå¯ä»¥è‡ªè¡Œç ´è§£ä¸€ä¸‹total page import requests from requests.exceptions import RequestException def download_html(url) -\u003e str: headers = { \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\" } try: resp = requests.get(url, headers=headers) if resp.status_code == 200: return resp.content.decode(\"utf8\") return \"\" except RequestException: return \"\" def run(): link_list = [] for i in range(1, 9): url = f\"https://wallhaven.cc/search?q=like%3Arddgwm\u0026page={i}\" html = download_html(url) if __name__ == \"__main__\": run() é‚£ä¹ˆæ¥ä¸‹æ¥å°±è¦è§£æhtmlè·å–åˆ°å›¾ç‰‡urläº† å½“æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·å®šä½åˆ°å›¾ç‰‡çš„æ—¶å€™å‘ç°srcçš„å€¼æ˜¯å°å›¾çš„é“¾æ¥ ç‚¹å‡»å°é¢è¿›å»ä¹‹åå‘ç°å›¾ç‰‡æ˜¯è¿™æ ·çš„ å¾ˆæ˜¾ç„¶è¿™ä¸ªé¡µé¢æ˜¯ç”±å‰ç«¯ç¨‹åºæ¸²æŸ“å‡ºæ¥çš„ï¼Œè¿™ä¸ªé¡µé¢ä¸æ˜¯å›¾ç‰‡ï¼Œå› æ­¤éœ€è¦é¼ æ ‡å³é”®ç‚¹å‡»è¿™ä¸ªé¡µé¢ä¸­çš„å¤§å›¾ç‰‡ï¼Œé€‰ä¸­åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€å›¾ç‰‡ å½“ç„¶ä¹Ÿå¯ä»¥ä»è¿™ä¸ªé¡µé¢ä¸­è§£æåˆ°å›¾ç‰‡é“¾æ¥ï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦ åœ¨æ–°æ‰“å¼€çš„çª—å£ä¸­å‘ç°urlå˜æˆäº†è¿™æ ·https://w.wallhaven.cc/full/rd/wallhaven-rddgwm.jpgï¼Œè¿™ä¸ªé“¾æ¥å’Œåˆ—è¡¨é¡µä¸­srcçš„å€¼å¾ˆåƒï¼Œç®€å•å†™ä¸ªå‡½æ•°è½¬æ¢ä¸€ä¸‹ def image_link_process(image_link: str) -\u003e str: # https://w.wallhaven.cc/full/rd/wallhaven-rddgwm.jpg # https://th.wallhaven.cc/small/rd/rddgwm.jpg if \"small\" in image_link: image_link = image_link.replace(\"th\", \"w\") image_link = image_link.replace(\"small\", \"full\") url_path = image_link.split(\"/\") url_path[-1] = f\"wallhaven-{url_path[-1]}\" return \"/\".join(url_path) return \"\" æ¬§å…‹ï¼è¿è¡Œä¹‹åå‘ç°èƒ½è½¬æ¢æˆåŠŸï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å°±æ˜¯æå–åˆ°srcçš„å€¼ï¼Œç¼–å†™ä¸€ä¸ªç®€å•çš„è„šæœ¬æµ‹è¯•ä¸€ä¸‹ import requests from lxml import etree def test(): url = \"https://wallhaven.cc/search?q=like%3Arddgwm\u0026page=1\" headers = { \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\" } resp = requests.get(url, headers=headers) html = resp.content.decode(\"utf8\") print(html, end=\"\\n\\n\\n\") element = etree.HTML(html) image_links = element.xpath('//img[@alt=\"loading\"]/@src') print(image_links) if __name__ == '__main__': test() å‘ç°ä¸å¯¹å•Š æŸ¥çœ‹è¾“å‡ºçš„htmlï¼Œå‘ç°å¯¹åº”æ ‡ç­¾æ²¡æœ‰srcå±æ€§ï¼Œä½†æ˜¯æœ‰data-srcå±æ€§ï¼Œå› æ­¤æå–data-srcçš„å€¼ï¼Œå°†xpathè¡¨è¾¾å¼æ”¹ä¸º //img[@alt=\"loading\"]/@data-src å†æ¬¡è¿è¡Œï¼è¿™ä¸‹æ¬§å…‹äº†ï¼ æ¥ä¸‹æ¥å°±æ˜¯é‡å¤´æˆäº†ï¼ä¸‹è½½å›¾ç‰‡ï¼ ","date":"2021-05-19","objectID":"/posts/python-%E5%BC%82%E6%AD%A5%E4%B8%8B%E8%BD%BD%E5%A3%81%E7%BA%B8/:1:0","tags":["Python"],"title":"python å¼‚æ­¥ä¸‹è½½å£çº¸","uri":"/posts/python-%E5%BC%82%E6%AD%A5%E4%B8%8B%E8%BD%BD%E5%A3%81%E7%BA%B8/"},{"categories":["Python"],"content":"ä¸‹è½½å›¾ç‰‡ é€šå¸¸åœ¨ç”¨requestsè·å–ç½‘é¡µçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨textæˆ–è€…content.decode()çš„æ–¹æ³•å°†è¯·æ±‚è¿”å›çš„æ•´ä¸ªbodyè¯»å‡ºæ¥ï¼Œä½†æ˜¯å¯¹äºwallhavenä¸Šåˆ†è¾¨ç‡æ™®ééƒ½å¾ˆé«˜çš„å›¾ç‰‡è€Œè¨€ï¼Œæˆ‘ä»¬åº”è¯¥åˆ†å—è¯»å–ã€‚ å› ä¸ºå›¾ç‰‡ä¼ è¾“çš„è¿‡ç¨‹æœ¬æ¥å°±æ˜¯ä¸€ä¸ªæµå¼ä¼ è¾“ï¼Œä½¿ç”¨response.get(stream=True)å°†æ¨è¿Ÿå“åº”å†…å®¹çš„ä¸‹è½½ï¼Œå½“æˆ‘ä»¬è¯»å–çš„æ—¶å€™æ‰ä¼šä¸‹è½½ å› ä¸ºè¦åˆ†å—è¯»å–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ¯æ¬¡è¯»ä¸€å®šæ•°é‡çš„å­—èŠ‚çš„æ–‡ä»¶å‡ºæ¥ï¼Œæ‰€ä»¥è¦ä½¿ç”¨response.iter_content(chunk)çš„æ–¹å¼å»è¯»ï¼Œä¸€æ¬¡è¯»chunkä¸ªå­—èŠ‚çš„å†…å®¹ def download_image(image_link): headers = { \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\" } resp = requests.get(image_link, headers=headers, stream=True) try: if resp.status_code == 200: with open(file=f'images/{image_link.split(\"/\")[-1]}', mode=\"wb\") as f: for chunk in resp.iter_content(chunk_size=1024): f.write(chunk) print(\"ä¸‹è½½æˆåŠŸ\") else: print(\"ä¸‹è½½å¤±è´¥\") except: print(\"ä¸‹è½½å¤±è´¥\") ","date":"2021-05-19","objectID":"/posts/python-%E5%BC%82%E6%AD%A5%E4%B8%8B%E8%BD%BD%E5%A3%81%E7%BA%B8/:2:0","tags":["Python"],"title":"python å¼‚æ­¥ä¸‹è½½å£çº¸","uri":"/posts/python-%E5%BC%82%E6%AD%A5%E4%B8%8B%E8%BD%BD%E5%A3%81%E7%BA%B8/"},{"categories":["Python"],"content":"è¿›åº¦æ¡ æœ¬æ–‡ä½¿ç”¨çš„æ”¯æŒè¿›åº¦æ¡çš„ç¬¬ä¸‰æ–¹åº“ä¸ºrichï¼ŒrichåŠŸèƒ½ååˆ†å¼ºå¤§ å®‰è£…ååœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å°±èƒ½çœ‹åˆ°æ ·ä¾‹å±•ç¤º python -m rich.progress å› ä¸ºä»£ç ç®€å•æ‰€ä»¥å°±ä¸åºŸè¯äº† def download_image(image_link): headers = { \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\" } resp = requests.get(image_link, headers=headers, stream=True) try: # è·å–å›¾ç‰‡æ€»å­—èŠ‚æ•° file_size = int(resp.headers['content-length']) if resp.status_code == 200: with open(file=f'images/{image_link.split(\"/\")[-1]}', mode=\"wb\") as f: # åˆ›å»ºå¹¶å¯åŠ¨Progressï¼ˆè¿›åº¦æ¡ï¼‰å¯¹è±¡ with Progress() as progress: # ç»™Progresså¯¹è±¡æ·»åŠ ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶æŒ‡å®šä»»åŠ¡å¤§å° task1 = progress.add_task(f'[red]Downloading...{f.name}', total=file_size) for chunk in resp.iter_content(chunk_size=1024): f.write(chunk) # æ›´æ–°è¿›åº¦æ¡ progress.update(task1, advance=1024) else: print(\"ä¸‹è½½å¤±è´¥\") except: print(\"ä¸‹è½½å¤±è´¥\") é€šè¿‡Progresså¯¹è±¡å¯ä»¥åˆ›å»ºå¤šæ¡è¿›åº¦æ¡ ","date":"2021-05-19","objectID":"/posts/python-%E5%BC%82%E6%AD%A5%E4%B8%8B%E8%BD%BD%E5%A3%81%E7%BA%B8/:3:0","tags":["Python"],"title":"python å¼‚æ­¥ä¸‹è½½å£çº¸","uri":"/posts/python-%E5%BC%82%E6%AD%A5%E4%B8%8B%E8%BD%BD%E5%A3%81%E7%BA%B8/"},{"categories":["Python"],"content":"å®Œæ•´ç¨‹åºå¦‚ä¸‹ import requests from requests.exceptions import RequestException from lxml import etree from typing import List from rich.progress import Progress def download_html(url) -\u003e str: headers = { \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\" } try: resp = requests.get(url, headers=headers) if resp.status_code == 200: return resp.content.decode(\"utf8\") return \"\" except RequestException: return \"\" def parse_image_link(html: str) -\u003e List: element = etree.HTML(html) links = element.xpath('//img[@alt=\"loading\"]/@data-src') return links def image_link_process(image_link: str) -\u003e str: # https://w.wallhaven.cc/full/v9/wallhaven-v9gk6l.jpg # https://th.wallhaven.cc/small/v9/v9gk6l.jpg if \"small\" in image_link: image_link = image_link.replace(\"th\", \"w\") image_link = image_link.replace(\"small\", \"full\") url_path = image_link.split(\"/\") url_path[-1] = f\"wallhaven-{url_path[-1]}\" return \"/\".join(url_path) return \"\" def download_image(image_link): headers = { \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\" } resp = requests.get(image_link, headers=headers, stream=True) try: file_size = int(resp.headers['content-length']) if resp.status_code == 200: with open(file=f'images/{image_link.split(\"/\")[-1]}', mode=\"wb\") as f: with Progress() as progress: task1 = progress.add_task(f'[red]Downloading...{f.name}', total=file_size) for chunk in resp.iter_content(chunk_size=1024): f.write(chunk) progress.update(task1, advance=1024) else: print(\"ä¸‹è½½å¤±è´¥\") except: print(\"ä¸‹è½½å¤±è´¥\") def run(): link_list = [] for i in range(1, 9): url = f\"https://wallhaven.cc/search?q=like%3Arddgwm\u0026page={i}\" html = download_html(url) links = parse_image_link(html) link_list.extend(links) for image_link in link_list: image_link = image_link_process(image_link) download_image(image_link) if __name__ == '__main__': run() è¿™å°±å®Œäº†ï¼Ÿå½“ç„¶æ²¡æœ‰ï¼Œå¯èƒ½å„ä½è¯»è€…å·²ç»æƒ³å¥½æ€ä¹ˆç”¨å¤šçº¿ç¨‹æˆ–è€…å¤šè¿›ç¨‹åŠ é€Ÿäº†ï¼Œä½†æ˜¯å•Šï¼å°±æ˜¯è¿™ä¸ªä½†æ˜¯ï¼å¤šçº¿ç¨‹å¤šæ²¡æ„æ€ï¼åç¨‹~~~å†²ï¼ æç¤ºï¼šä½¿ç”¨å¹¶å‘ä¼šå¯¼è‡´è¿›åº¦æ¡å¯¹è±¡é‡å¤ï¼Œä½†æ˜¯å¹¶ä¸å½±å“æ•ˆæœ å› ä¸ºç¯‡å¹…å·²ç»è¾ƒé•¿ï¼Œæ‰€ä»¥ç¬”è€…ä¾¿ä¸å†è®²è¿°ç¨‹åºå¦‚ä½•ç¼–å†™ï¼Œå…¬ä¼—å·åå°å›å¤â€œwallhavenâ€å³å¯è·å–åç¨‹ç‰ˆç¨‹åº ","date":"2021-05-19","objectID":"/posts/python-%E5%BC%82%E6%AD%A5%E4%B8%8B%E8%BD%BD%E5%A3%81%E7%BA%B8/:4:0","tags":["Python"],"title":"python å¼‚æ­¥ä¸‹è½½å£çº¸","uri":"/posts/python-%E5%BC%82%E6%AD%A5%E4%B8%8B%E8%BD%BD%E5%A3%81%E7%BA%B8/"},{"categories":["Git"],"content":"è®°å½•ä¸€äº› git ä¸­ä¸å¸¸ç”¨çš„æ“ä½œ ","date":"2021-05-06","objectID":"/posts/git%E6%93%8D%E4%BD%9C%E5%B0%8F%E6%8A%80%E5%B7%A7/:0:0","tags":["Git"],"title":"git æ“ä½œå°æŠ€å·§","uri":"/posts/git%E6%93%8D%E4%BD%9C%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["Git"],"content":"ç™»å½•å¯†ç è¾“å…¥ æˆ‘ä¸å–œæ¬¢ä½¿ç”¨sshéªŒè¯ï¼Œå¹¶æ²¡æœ‰é…ç½®è¿‡Giteeå’ŒGithubçš„sshéªŒè¯ï¼Œåªæ˜¯æƒ³ç®€ç®€å•å•çš„è¾“å…¥ä¸€ä¸‹å¯†ç ã€‚ å› ä¸ºæ¢äº†æ–°çš„ç”µè„‘ï¼Œæˆ‘åŸæ¥çš„ç”µè„‘ä½¿ç”¨çš„æ˜¯Archlinuxï¼Œæ–°ç”µè„‘è¿˜æ˜¯Windowsï¼Œåˆšæ¢ç”µè„‘çš„æ—¶å€™ï¼Œæˆ‘è¿˜æ˜¯ä½¿ç”¨Archlinuxè¿›è¡Œå¼€å‘ï¼Œåæ¥éœ€è¦è¿›è¡Œæ•°æ®æŒ–æ˜æ‰é€æ­¥è¿ç§»äº†ç¯å¢ƒï¼Œä½†æ˜¯æˆ‘åŸºæœ¬æ²¡æœ‰ç”¨è¿‡Windowsä¸Šçš„Gitè¿›è¡Œpushï¼Œæˆ‘å·²ç»å¿˜äº†æ˜¯ä»€ä¹ˆæ—¶å€™çš„äº‹æƒ…äº†ï¼Œæˆ‘çš„Giteeå¯†ç å’ŒGithubå¯†ç å¾ˆåƒï¼Œåœ¨pushæ—¶è¾“é”™è¿‡å¯†ç ã€‚ ä¸‰ç‚¹å‰æï¼š ä¸è®°å¾—æ˜¯å¦ç”¨Windowsä¸Šçš„gitæ¨é€æˆåŠŸè¿‡ æ¨é€çš„æ—¶å€™è‚¯å®šè¾“é”™è¿‡å¯†ç  æ²¡æœ‰é…ç½®è¿‡sshéªŒè¯ å› æ­¤æ¨æ–­æ˜¯Windowsæˆ–è€…Gitä¿å­˜äº†æˆ‘è¾“é”™çš„å¯†ç ï¼Œåœ¨æˆ‘pushçš„æ—¶å€™å°±è‡ªåŠ¨å°†ç”¨æˆ·åå’Œå¯†ç æ‹¿å»éªŒè¯äº†ï¼ŒWindowsä¸‹å­˜å‚¨å¯†ç æ˜¯åœ¨æ§åˆ¶é¢æ¿-\u003eç”¨æˆ·å¸æˆ·\u003eç®¡ç†ä½ çš„å‡­æ®-\u003eWindowså‡­æ®ä¸­ï¼Œæ‰“å¼€ä¸€çœ‹ï¼Œæœç„¶å‘ç°äº†æˆ‘æœ‰è¿‡Githubå’ŒGiteeçš„è®°å½•ï¼Œå› æ­¤å°†å‡­æ®åˆ é™¤ã€‚ å†æ¬¡æ¨é€ï¼Œå‡ºç°å¼¹çª—è¾“å…¥è´¦æˆ·å’Œå¯†ç ï¼Œå‘ç°æ¨é€æˆåŠŸã€‚ä¿®æ”¹ä»“åº“ï¼Œå†æ¬¡æäº¤å¹¶æ¨é€ï¼Œå‘ç°å¹¶æ²¡æœ‰è¾“å…¥å¯†ç ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯Windowsåˆå­˜å‚¨äº†ã€‚Windowsä¸ºä»€ä¹ˆè¦å­˜å‚¨è¿™ä¸ªè´¦æˆ·å’Œå¯†ç ï¼Œè¿æ¥æœåŠ¡å™¨æ—¶ä¹Ÿæ²¡æœ‰å­˜å‚¨çš„è¿‡ç¨‹ï¼Œæ€€ç–‘æ˜¯Gitå¹²çš„ã€‚ é€šè¿‡æŸ¥çœ‹Gitçš„å®˜æ–¹æ–‡æ¡£ï¼Œå‡­è¯å­˜å‚¨ï¼Œå‘ç°ç¡®æœ‰å…¶äº‹ï¼Œå› æ­¤æ‰¾åˆ°Gitå®‰è£…è·¯å¾„ä¸­çš„etcæ–‡ä»¶å¤¹ï¼Œä¿®æ”¹é‡Œé¢çš„gitconfigæ–‡ä»¶ï¼Œåˆ é™¤[credential]é…ç½®é¡¹ï¼Œç„¶ååˆ é™¤Windowsä¸­çš„å‡­æ®ï¼Œå†æ¬¡æ¨é€åå‘ç°Windowså¹¶æ²¡æœ‰å­˜å‚¨äº†ã€‚ ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡æ¨é€è¾“ç”¨æˆ·åå’Œå¯†ç çš„æ—¶å€™éƒ½ä¼šæœ‰ä¸€ä¸ªå¼¹çª—å‡ºæ¥ï¼Œä½“éªŒå¾ˆä¸å¥½ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è§£å†³ git config --global --unset credential.helper ","date":"2021-05-06","objectID":"/posts/git%E6%93%8D%E4%BD%9C%E5%B0%8F%E6%8A%80%E5%B7%A7/:1:0","tags":["Git"],"title":"git æ“ä½œå°æŠ€å·§","uri":"/posts/git%E6%93%8D%E4%BD%9C%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["Git"],"content":"git diff output åœ¨åš git diff çš„æ—¶å€™å†…å®¹å¾ˆå°‘ï¼Œä½†æ˜¯æ€»æ˜¯ä¸ä¼šè¾“å‡ºåˆ°ç»ˆç«¯ä¸­ï¼Œè€Œæ˜¯è¿›å…¥äº†ä¸€ä¸ªæ–°çš„é¡µé¢ï¼ŒæŸ¥åˆ°å¯ä»¥é€šè¿‡å‘½ä»¤æ“ä½œ git config pager.diff false çœ‹æ¥æƒ³è¦å°† git çš„ä¸€äº›ä¸œè¥¿ç›´æ¥è¾“å‡ºå¯ä»¥é…ç½® pager å‚æ•°ï¼Œä¹Ÿå¯ä»¥åœ¨å‘½ä»¤ä¸­å¢åŠ  --no-pager å‚æ•° git --no-pager \u003csubcommand\u003e \u003coptions\u003e å¯ä»¥åšå…¨å±€é…ç½® git config --global core.pager cat ","date":"2021-05-06","objectID":"/posts/git%E6%93%8D%E4%BD%9C%E5%B0%8F%E6%8A%80%E5%B7%A7/:2:0","tags":["Git"],"title":"git æ“ä½œå°æŠ€å·§","uri":"/posts/git%E6%93%8D%E4%BD%9C%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["Python"],"content":"collectionsæ¨¡å—å®ç°äº†ç‰¹å®šç›®æ ‡çš„å®¹å™¨ï¼Œè¿™äº›å®¹å™¨èƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å¿«é€Ÿç®€æ´çš„å®ç°æƒ³æ³• ","date":"2021-04-26","objectID":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/:0:0","tags":["collections","Python","å®¹å™¨"],"title":"åŠ é€Ÿä¸‹ç­ä¹‹collectionsæ¨¡å—","uri":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/"},{"categories":["Python"],"content":"namedtuple namedtupleåˆè¢«ç§°ä¸ºå…·åå…ƒç»„ï¼Œå®˜æ–¹è§£é‡Šä¸ºâ€œåˆ›å»ºå‘½åå…ƒç»„å­ç±»çš„å·¥å‚å‡½æ•°â€ï¼Œä¹Ÿå°±æ˜¯è¯´namedtupleæ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œé‚£ä¹ˆnamedtupleæ˜¯å¦‚ä½•å°†ä¼ å…¥çš„å‚æ•°æ„å»ºå‡ºä¸€ä¸ªç±»å¹¶è¿”å›çš„å‘¢ï¼Ÿå…¶å®è¿™ä¸Šé¢åˆå›åˆ°äº†Pythonä¸­ä¸€åˆ‡çš†å¯¹è±¡ä¸Š namedtupleæºç  def namedtuple(typename, field_names, *, rename=False, defaults=None, module=None): \"\"\"Returns a new subclass of tuple with named fields. \u003e\u003e\u003e Point = namedtuple('Point', ['x', 'y']) \u003e\u003e\u003e Point.__doc__ # docstring for the new class 'Point(x, y)' \u003e\u003e\u003e p = Point(11, y=22) # instantiate with positional args or keywords \u003e\u003e\u003e p[0] + p[1] # indexable like a plain tuple 33 \u003e\u003e\u003e x, y = p # unpack like a regular tuple \u003e\u003e\u003e x, y (11, 22) \u003e\u003e\u003e p.x + p.y # fields also accessible by name 33 \u003e\u003e\u003e d = p._asdict() # convert to a dictionary \u003e\u003e\u003e d['x'] 11 \u003e\u003e\u003e Point(**d) # convert from a dictionary Point(x=11, y=22) \u003e\u003e\u003e p._replace(x=100) # _replace() is like str.replace() but targets named fields Point(x=100, y=22) \"\"\" # Validate the field names. At the user's option, either generate an error # message or automatically replace the field name with a valid name. if isinstance(field_names, str): field_names = field_names.replace(',', ' ').split() field_names = list(map(str, field_names)) typename = _sys.intern(str(typename)) if rename: seen = set() for index, name in enumerate(field_names): if (not name.isidentifier() or _iskeyword(name) or name.startswith('_') or name in seen): field_names[index] = f'_{index}' seen.add(name) for name in [typename] + field_names: if type(name) is not str: raise TypeError('Type names and field names must be strings') if not name.isidentifier(): raise ValueError('Type names and field names must be valid ' f'identifiers: {name!r}') if _iskeyword(name): raise ValueError('Type names and field names cannot be a ' f'keyword: {name!r}') seen = set() for name in field_names: if name.startswith('_') and not rename: raise ValueError('Field names cannot start with an underscore: ' f'{name!r}') if name in seen: raise ValueError(f'Encountered duplicate field name: {name!r}') seen.add(name) field_defaults = {} if defaults is not None: defaults = tuple(defaults) if len(defaults) \u003e len(field_names): raise TypeError('Got more default values than field names') field_defaults = dict(reversed(list(zip(reversed(field_names), reversed(defaults))))) # Variables used in the methods and docstrings field_names = tuple(map(_sys.intern, field_names)) num_fields = len(field_names) arg_list = ', '.join(field_names) if num_fields == 1: arg_list += ',' repr_fmt = '(' + ', '.join(f'{name}=%r' for name in field_names) + ')' tuple_new = tuple.__new__ _dict, _tuple, _len, _map, _zip = dict, tuple, len, map, zip # Create all the named tuple methods to be added to the class namespace namespace = { '_tuple_new': tuple_new, '__builtins__': {}, '__name__': f'namedtuple_{typename}', } code = f'lambda _cls, {arg_list}: _tuple_new(_cls, ({arg_list}))' __new__ = eval(code, namespace) __new__.__name__ = '__new__' __new__.__doc__ = f'Create new instance of {typename}({arg_list})' if defaults is not None: __new__.__defaults__ = defaults @classmethod def _make(cls, iterable): result = tuple_new(cls, iterable) if _len(result) != num_fields: raise TypeError(f'Expected {num_fields} arguments, got {len(result)}') return result _make.__func__.__doc__ = (f'Make a new {typename} object from a sequence ' 'or iterable') def _replace(self, /, **kwds): result = self._make(_map(kwds.pop, field_names, self)) if kwds: raise ValueError(f'Got unexpected field names: {list(kwds)!r}') return result _replace.__doc__ = (f'Return a new {typename} object replacing specified ' 'fields with new values') def __repr__(self): 'Return a nicely formatted representation string' return self.__class__.__name__ + repr_fmt % self def _asdict(self): 'Return a new dict which maps field names to their values.' return _dict(_zip(self._fields, self)) def __getnewargs__(self): 'Return self as a plain tuple. Used by copy and pickle.' return _tuple(self) # Modify function metadata to help with introspection and debugging for method in ( __new__, _make.__func__, _replace, __","date":"2021-04-26","objectID":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/:1:0","tags":["collections","Python","å®¹å™¨"],"title":"åŠ é€Ÿä¸‹ç­ä¹‹collectionsæ¨¡å—","uri":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/"},{"categories":["Python"],"content":"Counter Counteræ˜¯ä¸€ç§å®¹å™¨ç±»å‹ï¼Œæºç å¾ˆé•¿ï¼Œè¿™é‡Œå°±å±•ç¤ºäº†ï¼ŒCounterç»§æ‰¿è‡ªdictï¼Œæ‰€ä»¥Counterçš„å¤§éƒ¨åˆ†åŠŸèƒ½å’Œdictç›¸åŒï¼Œä½†æ˜¯Counterçš„ä¸»è¦åŠŸèƒ½å°±å’Œåå­—ä¸€æ ·ï¼Œè®¡æ•°ï¼ä¹Ÿå°±æ˜¯ç»Ÿè®¡åºåˆ—ä¸­çš„å…ƒç´ å‡ºç°çš„æ¬¡æ•° def update(self, iterable=None, /, **kwds): '''Like dict.update() but add counts instead of replacing them. Source can be an iterable, a dictionary, or another Counter instance. \u003e\u003e\u003e c = Counter('which') \u003e\u003e\u003e c.update('witch') # add elements from another iterable \u003e\u003e\u003e d = Counter('watch') \u003e\u003e\u003e c.update(d) # add elements from another counter \u003e\u003e\u003e c['h'] # four 'h' in which, witch, and watch 4 ''' # The regular dict.update() operation makes no sense here because the # replace behavior results in the some of original untouched counts # being mixed-in with all of the other counts for a mismash that # doesn't have a straight-forward interpretation in most counting # contexts. Instead, we implement straight-addition. Both the inputs # and outputs are allowed to contain zero and negative counts. if iterable is not None: if isinstance(iterable, _collections_abc.Mapping): if self: self_get = self.get for elem, count in iterable.items(): self[elem] = count + self_get(elem, 0) else: # fast path when counter is empty super().update(iterable) else: _count_elements(self, iterable) if kwds: self.update(kwds) Counteråœ¨å®ä¾‹åŒ–çš„çš„è¿‡ç¨‹ä¸­æ‰§è¡Œ__init__æ–¹æ³•æ—¶ä¼šè°ƒç”¨updateæ–¹æ³•ï¼Œåœ¨updateæ–¹æ³•ä¸­å¦‚æœä¼ å…¥çš„å¯è¿­ä»£å¯¹è±¡æ˜¯æ˜ å°„ç±»å‹ï¼Œé‚£ä¹ˆå°†ä¼šéå†æ·»åŠ å¯¹åº”çš„æ˜ å°„å…³ç³»ï¼Œå› ä¸ºCounteræœ¬èº«å°±ç»§æ‰¿è‡ªdictæ‰€ä»¥å®ƒè‡ªå·±å°±æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå®ƒå†…éƒ¨ä¹Ÿæ²¡æœ‰ç»´æŠ¤å­—å…¸ï¼Œæ‰€ä»¥forå¾ªç¯éå†æ·»åŠ é”®çš„è®¡æ•°æ—¶æ˜¯self[slem]ï¼Œå› æ­¤è¿™ä¹Ÿè¦æ±‚å¦‚æœä¼ å…¥çš„æ˜¯æ˜ å°„ç±»å‹é‚£ä¹ˆéœ€è¦æ˜¯key(Any):value(int)å½¢å¼çš„ï¼Œå¦‚æœä¸æ˜¯æ˜ å°„ç±»å‹ï¼Œé‚£ä¹ˆå°†ä¼šæ‰§è¡Œ_count_elementså‡½æ•° def _count_elements(mapping, iterable): 'Tally elements from the iterable.' mapping_get = mapping.get for elem in iterable: mapping[elem] = mapping_get(elem, 0) + 1 è¿™ä¸ªå‡½æ•°å¾ˆç®€å•ï¼Œå°±å¹²äº†ä¸€ä»¶äº‹æƒ…ï¼Œéå†åºåˆ—ä¸­çš„å…ƒç´ ï¼Œç„¶åå°†è¯¥å…ƒç´ çš„è®¡æ•°åŠ ä¸€ ç¤ºä¾‹ from collections import Counter c = Counter([1, 2, 3, 4, 5, 10, 221, 12, 4, 2]) print(c) # Counter({2: 2, 4: 2, 1: 1, 3: 1, 5: 1, 10: 1, 221: 1, 12: 1}) c.update({7: 10}) # å°†é”®å€¼å¯¹æŒ‰å€¼æ’åºåï¼Œè¿”å›æŒ‡å®šæ•°é‡çš„é”®å€¼å¯¹ï¼Œå¦‚æœå‚æ•°æ˜¯2ï¼Œé‚£ä¹ˆå°†è¿”å›å‰2ä¸ª print(c.most_common(1)) # [(7, 10)] ","date":"2021-04-26","objectID":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/:2:0","tags":["collections","Python","å®¹å™¨"],"title":"åŠ é€Ÿä¸‹ç­ä¹‹collectionsæ¨¡å—","uri":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/"},{"categories":["Python"],"content":"deque dequeåˆè¢«ç§°ä½œåŒç«¯é˜Ÿåˆ—ï¼Œæ˜¯ä¸€ä¸ªå¾ˆåƒlistçš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ˜¯ç»§æ‰¿æˆ–ç»´æŠ¤çš„listï¼Œç›¸æ¯”äºlistå®ç°çš„é˜Ÿåˆ—ï¼Œdequeå®ç°çš„é˜Ÿåˆ—æ‹¥æœ‰æ›´ä½çš„æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ã€‚listå®ç°åœ¨å‡ºé˜Ÿï¼ˆpopï¼‰å’Œæ’å…¥ï¼ˆinsertï¼‰æ—¶çš„ç©ºé—´å¤æ‚åº¦å¤§çº¦ä¸ºO(n)ï¼Œdequeåœ¨å‡ºé˜Ÿï¼ˆpopï¼‰å’Œå…¥é˜Ÿï¼ˆappendï¼‰æ—¶çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œå¹¶ä¸”dequeæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¯´åˆ°çº¿ç¨‹å®‰å…¨ï¼ŒPythonä¸­çš„Queueå†…éƒ¨ç»´æŠ¤çš„å°±æ˜¯deque class Queue: '''Create a queue object with a given maximum size. If maxsize is \u003c= 0, the queue size is infinite. ''' def __init__(self, maxsize=0): self.maxsize = maxsize self._init(maxsize) # mutex must be held whenever the queue is mutating. All methods # that acquire mutex must release it before returning. mutex # is shared between the three conditions, so acquiring and # releasing the conditions also acquires and releases mutex. self.mutex = threading.Lock() # Notify not_empty whenever an item is added to the queue; a # thread waiting to get is notified then. self.not_empty = threading.Condition(self.mutex) # Notify not_full whenever an item is removed from the queue; # a thread waiting to put is notified then. self.not_full = threading.Condition(self.mutex) # Notify all_tasks_done whenever the number of unfinished tasks # drops to zero; thread waiting to join() is notified to resume self.all_tasks_done = threading.Condition(self.mutex) self.unfinished_tasks = 0 def _init(self, maxsize): self.queue = deque() dequeä¸ºä»€ä¹ˆä¼šè¢«ç§°ä½œåŒç«¯é˜Ÿåˆ—å‘¢ï¼Ÿå› ä¸ºdequeå®ç°äº†ä»é˜Ÿåˆ—ä¸¤ç«¯æ·»åŠ å’Œåˆ é™¤å…ƒç´ çš„æ–¹æ³•ã€‚ class deque(object): \"\"\" deque([iterable[, maxlen]]) --\u003e deque object A list-like sequence optimized for data accesses near its endpoints. \"\"\" def append(self, *args, **kwargs): # real signature unknown \"\"\" Add an element to the right side of the deque. \"\"\" pass def appendleft(self, *args, **kwargs): # real signature unknown \"\"\" Add an element to the left side of the deque. \"\"\" pass def pop(self, *args, **kwargs): # real signature unknown \"\"\" Remove and return the rightmost element. \"\"\" pass def popleft(self, *args, **kwargs): # real signature unknown \"\"\" Remove and return the leftmost element. \"\"\" pass æ³¨é‡Šå·²ç»è¯´çš„å¾ˆè¯¦ç»†äº†ï¼Œdequeçš„æºç å¾ˆå®¹æ˜“é˜…è¯»ï¼Œå»ºè®®è¯»è€…éƒ½å»é˜…è¯»ä¸€ä¸‹ï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„æ–¹æ³•rotateï¼Œç”¨rotateæ–¹æ³•å¯ä»¥å°†é˜Ÿåˆ—è¿›è¡Œæ—‹è½¬ï¼ˆè¿™é‡ŒæŒ‡çš„æ˜¯dequeï¼‰ def rotate(self, *args, **kwargs): # real signature unknown \"\"\" Rotate the deque n steps to the right (default n=1). If n is negative, rotates left. \"\"\" pass ä¼ å…¥çš„å‚æ•°nå¯ä»¥ä¸ºæ­£ä¹Ÿå¯ä»¥ä¸ºè´Ÿï¼Œå¦‚æœä¸ºè´Ÿå°±æ˜¯å°†å·¦è¾¹çš„å…ƒç´ å¾€å³ç§»åŠ¨nä¸ªï¼Œå¦‚æœä¸ºæ­£å°±æ˜¯å°†å³è¾¹çš„å…ƒç´ å¾€å·¦ç§»åŠ¨nä¸ªï¼Œä¹Ÿå°±æ˜¯å°†è¿™ä¸ªé˜Ÿåˆ—çœ‹ä½œä¸€ä¸ªç¯ from collections import ChainMap, deque q = deque([1, 2, 3, 4]) q.rotate(1) print(q) # deque([4, 1, 2, 3]) q.rotate(1) print(q) # deque([3, 4, 1, 2]) q.rotate(1) print(q) # deque([2, 3, 4, 1]) q.rotate(-1) print(q) # deque([3, 4, 1, 2]) q.rotate(-2) print(q) # deque([1, 2, 3, 4]) ","date":"2021-04-26","objectID":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/:3:0","tags":["collections","Python","å®¹å™¨"],"title":"åŠ é€Ÿä¸‹ç­ä¹‹collectionsæ¨¡å—","uri":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/"},{"categories":["Python"],"content":"ChainMap ä¸€ä¸ª ChainMap å°†å¤šä¸ªå­—å…¸æˆ–è€…å…¶ä»–æ˜ å°„ç»„åˆåœ¨ä¸€èµ·ï¼Œåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å¯æ›´æ–°çš„è§†å›¾ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ åœ¨Pythonä¸­çš„å­—å…¸é‡Œï¼Œå› ä¸ºé”®å€¼æ˜¯æ˜ å°„å…³ç³»ï¼Œåº•å±‚æ˜¯hashè¡¨ï¼Œå› æ­¤ä¸€ä¸ªé”®åªèƒ½æ˜ å°„åˆ°ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯ChainMapé€šè¿‡ç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨æ¥å®ç°å¤šä¸ªé”®å…±å­˜ï¼Œä¹Ÿå°±æ˜¯ä»–ä»¬è¿˜åœ¨åŸæ¥çš„å­—å…¸ä¸­ã€‚ class ChainMap(_collections_abc.MutableMapping): ''' A ChainMap groups multiple dicts (or other mappings) together to create a single, updateable view. The underlying mappings are stored in a list. That list is public and can be accessed or updated using the *maps* attribute. There is no other state. Lookups search the underlying mappings successively until a key is found. In contrast, writes, updates, and deletions only operate on the first mapping. ''' def __init__(self, *maps): '''Initialize a ChainMap by setting *maps* to the given mappings. If no mappings are provided, a single empty dictionary is used. ''' self.maps = list(maps) or [{}] # always at least one map å¯ä»¥çœ‹åˆ°åœ¨__init__æ–¹æ³•ä¸­ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°mapsï¼Œè¿™ä¸ªå‚æ•°æ˜¯ä¸å®šé•¿å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä¼ å¤šä¸ªdictï¼Œå¦‚æœä»€ä¹ˆå‚æ•°éƒ½æ²¡æœ‰ä¼ ï¼Œé‚£ä¹ˆå°†æ˜¯ä¸€ä¸ªåˆ—è¡¨ä¸­åŒ…å«ä¸€ä¸ªç©ºå­—å…¸ã€‚ è¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‡½æ•°ç®€å•ç†è§£ def chain(*maps): cha = list(maps) or [{}] return cha a = {'x': 1, 'z': 3} b = {'y': 2, 'z': 4} print(chain(a, b)) # [{'x': 1, 'z': 3}, {'y': 2, 'z': 4}] ChainMapç¤ºä¾‹å¦‚ä¸‹ from collections import ChainMap a = {'x': 1, 'z': 3} b = {'y': 2, 'z': 4} chain1 = ChainMap() chain2 = ChainMap(a) chain3 = ChainMap(a, b) print(chain1) # ChainMap({}) print(chain2) # ChainMap({'x': 1, 'z': 3}) print(chain3) # ChainMap({'x': 1, 'z': 3}, {'y': 2, 'z': 4}) è‡³äºè¾“å‡ºä¸ä¸€æ ·æ˜¯å› ä¸ºæºç ä¸­çš„__repr__æ–¹æ³•å¯¼è‡´çš„ @_recursive_repr() def __repr__(self): return f'{self.__class__.__name__}({\", \".join(map(repr, self.maps))})' ChainMapåœ¨è¿›è¡Œéå†çš„æ—¶å€™å¾€å¾€åªä¼šæ‰¾ä¸€ä¸ªé”®è¿›è¡Œå–å€¼ï¼Œæ¯”å¦‚ä¸Šé¢çš„ç¨‹åºä¸­ä¸¤ä¸ªdictéƒ½æœ‰zï¼Œä½†æ˜¯åœ¨éå†çš„æ—¶å€™åªä¼šå–åˆ°ç¬¬ä¸€ä¸ª from collections import ChainMap a = {'x': 1, 'z': 3} b = {'y': 2, 'z': 4} chain = ChainMap(a, b) for k, v in chain.items(): print(k,v) # y 2 # z 3 # x 1 å½“å¯¹ChainMapä¿®æ”¹çš„æ—¶å€™äº¦æ˜¯å¦‚æ­¤ æ³¨æ„ï¼šå‰é¢è¯´è¿‡ï¼ŒChainMapä¸­listç»´æŠ¤çš„æ˜¯å­—å…¸çš„å¼•ç”¨ï¼Œå› æ­¤å¦‚æœå¯¹ChainMapè¿›è¡Œä¿®æ”¹ï¼Œå°†ä¼šä½¿åŸæ¥dictä¸­çš„å€¼æ”¹å˜ from collections import ChainMap a = {'x': 1, 'z': 3} b = {'y': 2, 'z': 4} chain = ChainMap(a, b) chain.maps[0]['x'] = 10 print(a) # {'x': 10, 'z': 3} æ³¨æ„ï¼Œè¿™é‡Œçš„mapsä¸æ˜¯æ–¹æ³•ï¼Œå°±æ˜¯å†…éƒ¨ç»´æŠ¤çš„åˆ—è¡¨ï¼Œæ‰€ä»¥å°½é‡ä¸è¦è°ƒç”¨ ","date":"2021-04-26","objectID":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/:4:0","tags":["collections","Python","å®¹å™¨"],"title":"åŠ é€Ÿä¸‹ç­ä¹‹collectionsæ¨¡å—","uri":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/"},{"categories":["Python"],"content":"OrderedDict OrderedDictç»§æ‰¿äº†Pythonä¸­çš„dictï¼Œåˆè¢«ç§°ä¸ºæœ‰åºå­—å…¸ï¼Œä½†æ˜¯åœ¨Python3.6å¼€å§‹dictå·²ç»æ˜¯æœ‰åºçš„äº†ï¼Œè€Œä¸”æ“ä½œèµ·æ¥æ•ˆç‡æ›´é«˜ from collections import OrderedDict dic1 = dict() dic1[\"name\"] = \"å¼ ä¸‰\" dic1[\"age\"] = \"18\" dic1[\"height\"] = \"180\" dic1[\"sex\"] = \"1\" dic1[\"glasses\"] = \"1\" dic1[\"hair\"] = \"é•¿\" dic2 = OrderedDict() dic2[\"name\"] = \"å¼ ä¸‰\" dic2[\"age\"] = \"18\" dic2[\"height\"] = \"180\" dic2[\"sex\"] = \"1\" dic2[\"glasses\"] = \"1\" dic2[\"hair\"] = \"é•¿\" print(dic1) print(dic2) è¯»è€…å¯ä»¥è‡ªè¡ŒéªŒè¯ ç¬”è€…è¿™é‡Œå°±ä»‹ç»OrderedDictçš„åŸå› æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹æ³• popitem(last=True)ï¼Œlastå‚æ•°å¯ä»¥è®¾ç½®popçš„æ–¹å‘ from collections import OrderedDict dic2 = OrderedDict() dic2[\"name\"] = \"å¼ ä¸‰\" dic2[\"age\"] = \"18\" dic2[\"height\"] = \"180\" dic2[\"sex\"] = \"1\" dic2[\"glasses\"] = \"1\" dic2[\"hair\"] = \"é•¿\" while dic2: print(dic2.popitem(last=False)) move_to_end(key, last=True)ï¼Œ from collections import OrderedDict dic2 = OrderedDict() dic2[\"name\"] = \"å¼ ä¸‰\" dic2[\"age\"] = \"18\" dic2[\"height\"] = \"180\" dic2[\"sex\"] = \"1\" dic2[\"glasses\"] = \"1\" dic2[\"hair\"] = \"é•¿\" print(dic2) # OrderedDict([('name', 'å¼ ä¸‰'), ('age', '18'), ('height', '180'), ('sex', '1'), ('glasses', '1'), ('hair', 'é•¿')]) dic2.move_to_end(\"name\") print(dic2) # OrderedDict([('age', '18'), ('height', '180'), ('sex', '1'), ('glasses', '1'), ('hair', 'é•¿'), ('name', 'å¼ ä¸‰')]) __reversed__ï¼Œåœ¨Python3.8ä¹‹å‰dictæ˜¯æ²¡æœ‰__reversed__æ–¹æ³•çš„ï¼Œè™½ç„¶ç°åœ¨æœ‰äº†ï¼Œä¸è¿‡æœ¬æ–‡è¿˜æ˜¯æä¸€ä¸‹ from collections import OrderedDict dic2 = OrderedDict() dic2[\"name\"] = \"å¼ ä¸‰\" dic2[\"age\"] = \"18\" dic2[\"height\"] = \"180\" dic2[\"sex\"] = \"1\" dic2[\"glasses\"] = \"1\" dic2[\"hair\"] = \"é•¿\" print(dic2) for item in reversed(dic2.items()): print(item) ","date":"2021-04-26","objectID":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/:5:0","tags":["collections","Python","å®¹å™¨"],"title":"åŠ é€Ÿä¸‹ç­ä¹‹collectionsæ¨¡å—","uri":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/"},{"categories":["Python"],"content":"defaultdict defaultdictå’ŒOrderedDictä¸€æ ·æ˜¯dictçš„ä¸€ä¸ªå­ç±»ï¼Œå°±å’Œåå­—ä¸€æ ·ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥æŒ‡å®šé”®å€¼å¯¹çš„valueæ˜¯ä»€ä¹ˆç±»å‹çš„ from collections import defaultdict d = defaultdict(list) d[\"person\"].append(\"å¼ ä¸‰\") d[\"person\"].append(\"æå››\") d[\"class\"].append(\"1ç­\") d[\"class\"].extend([\"äºŒç­\", \"ä¸‰ç­\"]) print(d) # defaultdict(\u003cclass 'list'\u003e, {'person': ['å¼ ä¸‰', 'æå››'], 'class': ['1ç­', 'äºŒç­', 'ä¸‰ç­']}) è¦æŠŠvalueè®¾ç½®ä¸ºä»€ä¹ˆç±»å‹ï¼Œåˆå§‹åŒ–çš„æ—¶å€™æŒ‡å®šå¥½å°±è¡Œäº† ","date":"2021-04-26","objectID":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/:6:0","tags":["collections","Python","å®¹å™¨"],"title":"åŠ é€Ÿä¸‹ç­ä¹‹collectionsæ¨¡å—","uri":"/posts/%E5%8A%A0%E9%80%9F%E4%B8%8B%E7%8F%AD%E4%B9%8Bcollections%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/"},{"categories":["Python"],"content":"å¦‚æœç»å¸¸ä½¿ç”¨Pythonåº”è¯¥èƒ½æ³¨æ„åˆ°Pythonä¸­ç»å¸¸å‡ºç°withå…³é”®å­—ã€‚ ","date":"2021-04-24","objectID":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/:0:0","tags":["Python"],"title":"Pythonä¸Šä¸‹æ–‡ç®¡ç†å™¨","uri":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/"},{"categories":["Python"],"content":"å‰è¨€ åœ¨ç¨‹åºä¸­å½“æ–‡ä»¶èµ„æºä½¿ç”¨å®Œä¹‹åæˆ‘ä»¬éœ€è¦å°†æ–‡ä»¶å¯¹è±¡å…³é—­ï¼Œæ•°æ®åº“è¿æ¥æ“ä½œå®Œæˆä¹‹åéœ€è¦å°†æ•°æ®åº“å…³é—­ï¼Œçº¿ç¨‹æ± ã€è¿æ¥æ± ã€è¿›ç¨‹æ± ä½¿ç”¨å®Œä¹‹åæˆ‘ä»¬éœ€è¦å°†èµ„æºå¯¹è±¡æ”¾å›é˜Ÿåˆ—ä¸­ç»´æŠ¤ï¼Œsocketé•¿é“¾æ¥ç”¨å®Œä¹‹åæˆ‘ä»¬éœ€è¦æ–­å¼€è¿æ¥ã€‚ åœ¨å†™ç¨‹åºçš„æ—¶å€™æˆ‘ä»¬æ€»æ˜¯éœ€è¦è€ƒè™‘èµ„æºçš„å›æ”¶ï¼Œåœ¨Goè¯­è¨€ä¸­ç»å¸¸è¦ç”¨åˆ°deferå¯¹èµ„æºè¿›è¡Œç®¡ç†ï¼Œåœ¨Pythonä¸­æˆ‘ä»¬å¯ä»¥è€ƒè™‘çš„æ–¹å¼å¾ˆå¤šï¼Œå¦‚__del__åè®®ï¼Œä½†æ˜¯ä½¿ç”¨__del__åè®®åœ¨ä¸€äº›åœºæ™¯ä¸‹å¹¶ä¸èƒ½ç®€å•ä¼˜é›…çš„å®Œæˆéœ€æ±‚ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦èŠ±æ›´å¤šçš„ç²¾åŠ›å»æ„å»ºä¸€ä¸ªèƒ½ç”¨çš„å¯¹è±¡ä»¥åŠæ§åˆ¶å¯¹è±¡çš„é”€æ¯ï¼Œå¦‚æœé‡åˆ°å¾ªç¯å¼•ç”¨å’Œå¤šå¼•ç”¨å°†å¯¼è‡´æ— æ³•æ­£å¸¸é”€æ¯å®ä¾‹ã€‚è€Œä½¿ç”¨ä¸Šä¸‹æ–‡åè®®å°†ä¼šä½¿ç¨‹åºçš„å¥å£®æ€§æ›´å¼ºã€‚ ","date":"2021-04-24","objectID":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/:1:0","tags":["Python"],"title":"Pythonä¸Šä¸‹æ–‡ç®¡ç†å™¨","uri":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/"},{"categories":["Python"],"content":"ä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®® åœ¨Pythonä¸­ä»»ä½•å®ç°äº†__enter__å’Œ__exit__çš„ç±»å®ä¾‹åŒ–çš„å¯¹è±¡éƒ½å¯ä»¥è¢«ç§°ä½œä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡ï¼Œä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡å¯ä»¥è¢«withå…³é”®å­—è¿›è¡Œç®¡ç†ï¼Œé€šå¸¸withç®¡ç†ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ class ContextManagerObject: def __enter__(self): pass def __exit__(self): pass with ContextManagerObject as cmo: ... withå…³é”®å­—åé¢è·Ÿå®ç°ä¸Šçº¿æ–‡ç®¡ç†å™¨åè®®çš„å¯¹è±¡ï¼Œç„¶å__enter__æ–¹æ³•ä¼šè¢«æ‰§è¡Œï¼Œå¾—åˆ°çš„ç»“æœå°†èµ‹å€¼ç»™asåçš„å˜é‡ï¼Œå½“withçš„ä½œç”¨åŸŸç»“æŸåå°†æ‰§è¡Œå¯¹è±¡çš„__exit__æ–¹æ³• ","date":"2021-04-24","objectID":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/:2:0","tags":["Python"],"title":"Pythonä¸Šä¸‹æ–‡ç®¡ç†å™¨","uri":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/"},{"categories":["Python"],"content":"æ‰‹åŠ¨å®ç°openæ–¹æ³• ç¤ºä¾‹ï¼š class Open(object): def __init__(self, file, mode, encoding, **kwargs) -\u003e None: self.file = file self.mode = mode self.encoding = encoding self.kwargs = kwargs def __enter__(self): print(\"æ‰§è¡Œ__enter__\") self.f = open(file=self.file, mode=self.mode, encoding=self.encoding, **self.kwargs) return self.f def __exit__(self, exc_type, exc_value, traceback): print(\"æ‰§è¡Œ__exit__\") self.f.close() with Open('./demo', mode=\"w\", encoding=\"utf8\") as f: f.write(\"Hello World!\") åœ¨ä¸Šé¢çš„ç¨‹åºä¸­å°è¯•ç€æ¨¡ä»¿å†…å»ºçš„openå»å®ç°äº†ä¸€ä¸ªæ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®çš„Openç±»ï¼Œè¿™ä¸ªç±»å‹çš„å¯¹è±¡åªè¦è¢«withè¿›è¡Œç®¡ç†ï¼Œå°±ä¼šæ‰§è¡Œ__enter__æ–¹æ³•ï¼Œå½“ä½œç”¨åŸŸèŒƒå›´ç»“æŸä¹‹åå°±ä¼šæ‰§è¡Œ__exit__æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨å†å»å…³é—­æ–‡ä»¶ï¼Œè¿™æ ·è®©æˆ‘ä»¬çš„ç¨‹åºçš„å¥å£®æ€§ä»¥åŠå¯ç»´æŠ¤æ€§éƒ½å¾—åˆ°äº†æé«˜ã€‚åœ¨åç¨‹ä¸­å¦‚æœæƒ³è¦è¿™æ ·ä½¿ç”¨ï¼Œéœ€è¦å®ç°__aenter__æ–¹æ³•å’Œ__aexit__æ–¹æ³•ã€‚ ","date":"2021-04-24","objectID":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/:3:0","tags":["Python"],"title":"Pythonä¸Šä¸‹æ–‡ç®¡ç†å™¨","uri":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/"},{"categories":["Python"],"content":"contextmanagerè£…é¥°å™¨ ä¸Šé¢æåˆ°çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®æ˜¯éœ€è¦åœ¨ç±»ä¸­å®ç°çš„ï¼Œå¦‚æœæƒ³å°†ç±»ä¸­çš„æ–¹æ³•ï¼Œæˆ–è€…æ˜¯å°†ä¸€ä¸ªæ™®é€šçš„å‡½æ•°å˜ä¸ºå¯ä»¥é€šè¿‡withå…³é”®å­—è¿›è¡Œç®¡ç†ï¼Œå°±å¯ä»¥ä½¿ç”¨contextmanagerè£…é¥°å™¨è£…é¥°ï¼Œcontextmanagerè£…é¥°å™¨å¯ä»¥è®©è¢«è£…é¥°çš„æ™®é€šå‡½æ•°å˜ä¸ºä¸€ä¸ªå¯ä»¥è¢«withå…³é”®å­—ç®¡ç†çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡ã€‚ from contextlib import contextmanager @contextmanager def open_file(file: str, mode: str, encoding: str): # ä½¿ç”¨withå…³é”®å­—ä¹‹åè¿”å›yieldåé¢çš„å†…å®¹ f = open(file=file, mode=mode, encoding=encoding) try: yield f # withä½œç”¨åŸŸç»“æŸå finally: f.close() with open_file(file='./demo', mode='w', encoding='utf8') as f: f.write('Hello World') ","date":"2021-04-24","objectID":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/:3:1","tags":["Python"],"title":"Pythonä¸Šä¸‹æ–‡ç®¡ç†å™¨","uri":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/"},{"categories":["Python"],"content":"contextmanageråŸç† ä»è£…é¥°å™¨çš„åŸç†ä¸­å¯ä»¥çŸ¥é“ï¼Œcontextmanageråº”è¯¥æ˜¯å°†å‡½æ•°åŒ…è£…æˆäº†ä¸€ä¸ªå®ç°äº†ä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®çš„å¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨æŒ‡å‘äº†è¿™ä¸ªå‡½æ•°åã€‚å› æ­¤çœ‹ä¼¼æ˜¯åœ¨è°ƒç”¨å‡½æ•°ï¼Œå…¶å®æ˜¯åœ¨è°ƒç”¨è¿™ä¸ªç±»ã€‚ contextmanageræºç  def contextmanager(func): \"\"\"@contextmanager decorator. Typical usage: @contextmanager def some_generator(\u003carguments\u003e): \u003csetup\u003e try: yield \u003cvalue\u003e finally: \u003ccleanup\u003e This makes this: with some_generator(\u003carguments\u003e) as \u003cvariable\u003e: \u003cbody\u003e equivalent to this: \u003csetup\u003e try: \u003cvariable\u003e = \u003cvalue\u003e \u003cbody\u003e finally: \u003ccleanup\u003e \"\"\" @wraps(func) def helper(*args, **kwds): return _GeneratorContextManager(func, args, kwds) return helper ä»æºç ä¸­å¯ä»¥çœ‹åˆ°çš„ç¡®æ˜¯è¿™æ ·ï¼Œcontextmanagerå°†è¢«è£…é¥°å‡½æ•°ä½œä¸ºå‚æ•°ä¼ ç»™äº†_GeneratorContextManagerè¿™ä¸ªç±»è¿›è¡Œå®ä¾‹åŒ– _GeneratorContextManageræºç  class _GeneratorContextManager(_GeneratorContextManagerBase, AbstractContextManager, ContextDecorator): \"\"\"Helper for @contextmanager decorator.\"\"\" def _recreate_cm(self): # _GCM instances are one-shot context managers, so the # CM must be recreated each time a decorated function is # called return self.__class__(self.func, self.args, self.kwds) def __enter__(self): # do not keep args and kwds alive unnecessarily # they are only needed for recreation, which is not possible anymore del self.args, self.kwds, self.func try: return next(self.gen) except StopIteration: raise RuntimeError(\"generator didn't yield\") from None def __exit__(self, type, value, traceback): if type is None: try: next(self.gen) except StopIteration: return False else: raise RuntimeError(\"generator didn't stop\") else: if value is None: # Need to force instantiation so we can reliably # tell if we get the same exception back value = type() try: self.gen.throw(type, value, traceback) except StopIteration as exc: # Suppress StopIteration *unless* it's the same exception that # was passed to throw(). This prevents a StopIteration # raised inside the \"with\" statement from being suppressed. return exc is not value except RuntimeError as exc: # Don't re-raise the passed in exception. (issue27122) if exc is value: return False # Likewise, avoid suppressing if a StopIteration exception # was passed to throw() and later wrapped into a RuntimeError # (see PEP 479). if type is StopIteration and exc.__cause__ is value: return False raise except: # only re-raise if it's *not* the exception that was # passed to throw(), because __exit__() must not raise # an exception unless __exit__() itself failed. But throw() # has to raise the exception to signal propagation, so this # fixes the impedance mismatch between the throw() protocol # and the __exit__() protocol. # # This cannot use 'except BaseException as exc' (as in the # async implementation) to maintain compatibility with # Python 2, where old-style class exceptions are not caught # by 'except BaseException'. if sys.exc_info()[1] is value: return False raise raise RuntimeError(\"generator didn't stop after throw()\") _GeneratorContextManageræ˜¯å¤šç»§æ‰¿ï¼Œä½†æ˜¯è¿™é‡Œçš„å…³é”®æ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼Œåœ¨__enter__æ–¹æ³•ä¸­returnäº†ä¸€ä¸ªnext(self.gen)ï¼Œæˆ‘ä»¬å¤–éƒ¨å®šä¹‰çš„å‡½æ•°æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¯ä»¥é€šè¿‡nextå‡½æ•°ä»æ‰§è¡Œç»“æœä¸­å–å€¼ï¼Œå› æ­¤è¿™ä¸ªself.genå¯èƒ½å°±æ˜¯å¤–éƒ¨å‡½æ•°æ‰§è¡Œçš„ç»“æœã€‚è€Œäº‹å®ä¹Ÿæ˜¯å¦‚æ­¤ _GeneratorContextManagerBaseæºç  class _GeneratorContextManagerBase: \"\"\"Shared functionality for @contextmanager and @asynccontextmanager.\"\"\" def __init__(self, func, args, kwds): self.gen = func(*args, **kwds) self.func, self.args, self.kwds = func, args, kwds # Issue 19330: ensure context manager instances have good docstrings doc = getattr(func, \"__doc__\", None) if doc is None: doc = type(self).__doc__ self.__doc__ = doc # Unfortunately, this still doesn't provide good help output when # inspecting the created context manager instances, since pydoc # currently bypasses the instance docstring and shows the docstring # for the class instead. # See http://bugs.python.org/issue19404 for more details. åœ¨_GeneratorContextManagerBaseçš„æºç ä¸­ï¼Œåˆå§‹åŒ–å‡½æ•°__init__å°±æ‰§è¡Œäº†å¤–éƒ¨ä¼ å…¥çš„funcå‡½æ•°ï¼Œç„¶åèµ‹å€¼ç»™äº†self.gen å½“withè¯­å¥å—ç»“æŸä¹‹åï¼Œå°†æ‰§è¡Œ__exit__ä¸­çš„å†…å®¹ï¼Œå› æ­¤ç»§ç»­ä½¿ç”¨next(self.gen)å°†æ‰§è¡Œå¤–éƒ¨è¢«è£…é¥°å‡½æ•°ä¸­yieldä¸­çš„å†…å®¹ è€ŒAbstractContextManagerå°±æ˜¯å¤šæ€ class AbstractContextManager(abc.ABC): \"\"\"An abstract base class for context managers.\"\"\" __class_getitem__ = classmethod(GenericAlias) def __enter__(","date":"2021-04-24","objectID":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/:3:2","tags":["Python"],"title":"Pythonä¸Šä¸‹æ–‡ç®¡ç†å™¨","uri":"/posts/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/"},{"categories":["è®¾è®¡æ¨¡å¼"],"content":"å•ä¾‹æ¨¡å¼ï¼Œå±äºåˆ›å»ºç±»å‹çš„ä¸€ç§å¸¸ç”¨çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ã€‚é€šè¿‡å•ä¾‹æ¨¡å¼çš„æ–¹æ³•åˆ›å»ºçš„ç±»åœ¨å½“å‰è¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ ","date":"2021-04-21","objectID":"/posts/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/:0:0","tags":["è®¾è®¡æ¨¡å¼","Python","Go"],"title":"å•ä¾‹æ¨¡å¼","uri":"/posts/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"},{"categories":["è®¾è®¡æ¨¡å¼"],"content":"å¸¸è§çš„å•ä¾‹æ¨¡å¼åº”ç”¨åœºæ™¯ æ—¥å¿—å¯¹è±¡ï¼šä¸€èˆ¬æ¥è¯´æ—¥å¿—å¯¹è±¡æ˜¯å•ä¾‹çš„ï¼Œå› ä¸ºç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™æ§åˆ¶æ—¥å¿—çš„è¾“å‡ºã€è¿½åŠ éƒ½æ˜¯ç”±ä¸€ä¸ªæ—¥å¿—å¯¹è±¡è¿›è¡Œç»´æŠ¤çš„ ç”µè„‘å›æ”¶ç«™ï¼šä¸ç®¡æ˜¯macè¿˜æ˜¯Windowsçš„å›æ”¶ç«™ï¼ˆåºŸçº¸ç¯“ï¼‰éƒ½æ˜¯å•ä¾‹çš„ Windowsä»»åŠ¡ç®¡ç†å™¨ çº¿ç¨‹æ± ã€æ•°æ®åº“è¿æ¥æ± ï¼šå»åˆ›å»ºè¿‡å¤šçš„çº¿ç¨‹æ± æˆ–è€…è¿æ¥æ± éƒ½ä¼šå¯¹ç¨‹åºçš„æ€§èƒ½é€ æˆå½±å“ï¼Œå¹¶ä¸”çº¿ç¨‹æ± æˆ–æ•°æ®åº“è¿æ¥æ± å·²ç»ç»´æŠ¤äº†å¾ˆå¤šçš„çº¿ç¨‹å¯¹è±¡æˆ–è€…è¿æ¥å¯¹è±¡ï¼Œæ²¡å¿…è¦é‡å¤åˆ›å»ºé”€æ¯ ç½‘ç«™ipè®¿é—®è®¡æ•°å™¨ ä»¥ä¸Šéƒ½æ˜¯ä¸€äº›å¸¸è§çš„å•ä¾‹æ¨¡å¼çš„åº”ç”¨åœºæ™¯ ","date":"2021-04-21","objectID":"/posts/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/:1:0","tags":["è®¾è®¡æ¨¡å¼","Python","Go"],"title":"å•ä¾‹æ¨¡å¼","uri":"/posts/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"},{"categories":["è®¾è®¡æ¨¡å¼"],"content":"Pythonçš„__new__å®ç°å•ä¾‹æ¨¡å¼ Pythonæ˜¯é¢å‘å¯¹è±¡è¯­è¨€ï¼Œè¦å®ç°å•ä¾‹æ¨¡å¼ï¼Œåªéœ€è¦æ§åˆ¶ç±»çš„å®ä¾‹åŒ–è¿‡ç¨‹å³å¯ class IPCounter(object): _instance = None _count = 0 def __new__(cls): # åˆ¤æ–­æ˜¯å¦å­˜åœ¨å½“å‰ç±»çš„å®ä¾‹å¯¹è±¡ if not cls._instance: # å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºè¯¥ç±»çš„å®ä¾‹å¯¹è±¡ cls._instance = super().__new__(cls) # è¿”å›è¿™ä¸ªç±»çš„å®ä¾‹å¯¹è±¡ return cls._instance @classmethod def add(cls): cls._count += 1 @classmethod @property def count(cls): return cls._count ip_counter1 = IPCounter() ip_counter1.add() ip_counter2 = IPCounter() print(ip_counter2.count) # 2 print(id(ip_counter1) == id(ip_counter2)) # True ä¸Šé¢çš„ç¨‹åºä¸­ä¸ºä»€ä¹ˆcountè¦è®¾ç½®ä¸ºç±»å˜é‡ï¼Ÿ å¦‚æœè®¾ç½®ä¸ºå®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆæ¯æ¬¡åˆå§‹åŒ–å¯¹è±¡çš„æ—¶å€™countéƒ½ä¼šæ”¹å˜ class IPCounter(object): _instance = None def __new__(cls): if not cls._instance: cls._instance = super().__new__(cls) return cls._instance def __init__(self): self.count = 0 def add(self): self.count += 1 ip_counter1 = IPCounter() print(id(ip_counter1)) # 2098428296976 ip_counter1.add() ip_counter2 = IPCounter() print(ip_counter1.count) # 0 print(ip_counter2.count) # 0 print(id(ip_counter1) == id(ip_counter2)) # True ä¸Šé¢çš„ç¨‹åºè¿è¡Œåip_counter1å’Œip_counter2çš„countéƒ½ä¼šå˜ä¸º0ï¼Œè™½ç„¶å¯¹è±¡çš„idåœ°å€å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä½†æ˜¯åœ¨å®ä¾‹åŒ–ip_counter2çš„æ—¶å€™__init__æ–¹æ³•è¢«é‡æ–°æ‰§è¡Œäº†ä¸€éï¼Œæ‰€ä»¥countåº”è¯¥æ˜¯ç±»å˜é‡ï¼Œè€Œä¸æ˜¯å®ä¾‹å˜é‡ æ³¨æ„ï¼šä¸Šé¢çš„ä¾‹å­è¯´æ˜äº†ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬é€šè¿‡å•ä¾‹æ¨¡å¼å®ç°å®ä¾‹åŒ–çš„å¯¹è±¡éƒ½å”¯ä¸€çš„ï¼Œå†…å­˜ä¸­ä¸ä¼šå­˜åœ¨ç¬¬äºŒä¸ªè¯¥ç±»å‹çš„å¯¹è±¡ï¼Œå› æ­¤åªè¦æˆ‘ä»¬å¯¹è¯¥å¯¹è±¡æœ‰ä»»ä½•ä¿®æ”¹éƒ½ä¼šå½±å“åˆ°å…¶ä»–å±‚é¢ï¼ˆå¹¶å‘æƒ…å†µä¸‹ï¼‰çš„æ§åˆ¶ ","date":"2021-04-21","objectID":"/posts/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/:2:0","tags":["è®¾è®¡æ¨¡å¼","Python","Go"],"title":"å•ä¾‹æ¨¡å¼","uri":"/posts/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"},{"categories":["è®¾è®¡æ¨¡å¼"],"content":"Pythonè£…é¥°å™¨å®ç°å•ä¾‹æ¨¡å¼ ä¸Šé¢çš„ç¨‹åºä¸­çš„ç¡®æ˜¯å·²ç»å®ç°äº†å•ä¾‹ï¼Œä½†æ˜¯ç”±äºå¯¹è±¡å±æ€§å­˜åœ¨å¯èƒ½å˜æ›´çš„é—®é¢˜ï¼Œå°½ç®¡åœ¨ç¨‹åºè¿è¡Œä¸­ä¸å»æ”¹å˜å±æ€§å°±æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä¸ºäº†è€ƒè™‘åˆ°è¿™ç§ç‰¹æ®Šæƒ…å†µå°±å¿…é¡»ä¸å¯¹å±æ€§è¿›è¡Œèµ‹å€¼ å› æ­¤æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„å“ˆå¸Œè¡¨ï¼Œå°†å®ä¾‹åŒ–å¥½çš„å¯¹è±¡å­˜å‚¨åˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œå¦‚æœå†æ¬¡è¿›è¡Œå®ä¾‹åŒ–å°±è¿”å›å·²ç»å®ä¾‹åŒ–å¥½çš„å¯¹è±¡ï¼Œè¿™æ ·å°±èµ·åˆ°äº†é˜²æ­¢å±æ€§è¢«ä¿®æ”¹çš„ä½œç”¨ def singleton(cls): _instance = {} def _singleton(*args, **kwargs): # åˆ¤æ–­è¿™ä¸ªç±»æœ‰æ²¡æœ‰å¯¹è±¡ if cls not in _instance: # å¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºä¸€ä¸ªå¯¹è±¡,å¹¶ä¿å­˜åˆ°å­—å…¸å½“ä¸­ _instance[cls] = cls(*args, **kwargs) # å°†å®ä¾‹å¯¹è±¡è¿”å› return _instance[cls] return _singleton @singleton class IPCounter(object): def __init__(self) -\u003e None: self.count = 0 def add(self): self.count += 1 ip_counter1 = IPCounter() ip_counter1.add() ip_counter2 = IPCounter() print(ip_counter2.count) # 1 print(id(ip_counter1) == id(ip_counter2)) # True è£…é¥°å™¨è¿™ç§æ–¹æ³•è™½ç„¶è§£å†³äº†å¯¹è±¡å±æ€§çš„é—®é¢˜ï¼Œä½†æ˜¯ç¬”è€…å¹¶ä¸æ¨èï¼Œç¬”è€…æ›´æ¨èç©ºå€¼å¯¹è±¡å®ä¾‹åŒ–çš„æ–¹å¼å®ç°å•ä¾‹æ¨¡å¼ ","date":"2021-04-21","objectID":"/posts/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/:3:0","tags":["è®¾è®¡æ¨¡å¼","Python","Go"],"title":"å•ä¾‹æ¨¡å¼","uri":"/posts/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"},{"categories":["è®¾è®¡æ¨¡å¼"],"content":"Goå®ç°å•ä¾‹æ¨¡å¼ package main import \"fmt\" type IPCounter struct { Count int } // å®šä¹‰ä¸€ä¸ªinstanceå˜é‡ç”¨äºä¿å­˜IPCounterçš„åœ°å€ var instance *IPCounter func (c *IPCounter) Add() { c.Count += 1 } func Init() *IPCounter { // å¦‚æœIPCounterå·²ç»æœ‰å®ä¾‹äº†ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›è¯¥å®ä¾‹çš„åœ°å€ if instance == nil { instance = \u0026IPCounter{Count: 0} } return instance } func main() { ipCounter1 := Init() ipCounter1.Add() fmt.Println(ipCounter1.Count) ipCounter2 := Init() fmt.Println(ipCounter2.Count) fmt.Println(ipCounter1.Count) } å› ä¸ºGoä¸­æœ‰æŒ‡é’ˆçš„å­˜åœ¨ï¼Œæ‰€ä»¥å®Œæˆå•ä¾‹æ¨¡å¼çš„è®¾è®¡ä¼šå¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯Goæ˜¯å¹¶å‘æ€§å¾ˆå¼ºçš„è¯­è¨€ï¼Œå¦‚æœåœ¨å¹¶å‘çš„æƒ…å†µä¸‹åˆ›å»ºè¯¥ç±»å‹çš„å¯¹è±¡ï¼Œé‚£ä¹ˆåœ¨æœ€å¼€å§‹è®¿é—®çš„å‡ ä¸ªåç¨‹åœ¨è¿›è¡Œåˆ¤æ–­çš„æ—¶å€™instanceéƒ½æ˜¯nilï¼Œå› æ­¤éœ€è¦ç¡®ä¿å‡½æ•°åªè¢«æ‰§è¡Œä¸€æ¬¡ sync.Onceçš„Doæ–¹æ³•èƒ½å¤Ÿç¡®ä¿å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ package main package main import ( \"fmt\" \"sync\" ) type IPCounter struct { Count int } var ( once sync.Once c *IPCounter ) func (c *IPCounter) Add() { c.Count += 1 } func Init() *IPCounter { // å°†åˆå§‹åŒ–çš„é€»è¾‘æ”¾åˆ°åŒ¿åå‡½æ•°ä¸­ once.Do(func() { fmt.Println(\"åˆå§‹åŒ–ä¸­\") c = new(IPCounter) c.Add() }) fmt.Println(\"åˆå§‹åŒ–å·²å®Œæˆ\") return c } func main() { for i := 0; i \u003c 10; i++ { ipConfig := Init() fmt.Println(ipConfig) } fmt.Println(c.Count) // 1 } ","date":"2021-04-21","objectID":"/posts/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/:4:0","tags":["è®¾è®¡æ¨¡å¼","Python","Go"],"title":"å•ä¾‹æ¨¡å¼","uri":"/posts/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"},{"categories":["æ•°æ®å¤„ç†"],"content":"pandasæ•°æ®å¤„ç†å°æŠ€å·§1â€”â€”å¢é•¿ç‡ æœ‰å¦‚ä¸‹ä¸€ç»„æ•°æ®data.csvï¼Œéœ€è¦è®¡ç®—æ¯ä¸€å¹´çš„å¢é•¿ç‡ 2015,2016,2017,2018,2019 14.0,13.583333333333334,11.25,9.5,6.583333333333333 53.0,53.75,52.583333333333336,47.75,41.916666666666664 2.0,1.5324999999999998,1.325,1.2166666666666668,1.075 183.0,132.16666666666666,131.33333333333334,139.25,125.75 108.0,98.5,88.58333333333333,80.66666666666667,68.08333333333333 64.0,62.916666666666664,56.083333333333336,50.583333333333336,42.666666666666664 8047587.043913767,9061608.73437349,10532812.13233023,11761045.58411076,17765141.70873344 18170803.33249806,2764507.352052998,9064101.361637741,23820561.03652501,30151960.60064027 -2600910.093767846,-1484838.60873719,-1423809.746289836,-4193999.136869889,-19551559.66273892 -13962845.8889949,-4658095.704427481,-2210798.896100461,-16929512.17251258,9417823.196205355 å…ˆè¯»å–æ•°æ® import pandas as pd data = pd.read_excel('data.csv') data.head() å¦‚æœä½¿ç”¨å¾ªç¯ï¼Œå°±ä¼šé™·å…¥pandaså¤„ç†æ•°æ®çš„è¯¯åŒºä¸­ï¼Œpandasæ˜¯ç”¨Cå¼€å‘çš„Pythonç¬¬ä¸‰æ–¹åº“ï¼Œä½¿ç”¨pandasè¿›è¡Œæ•°æ®å¤„ç†æ˜¯éå¸¸å¿«çš„ã€‚ ","date":"2021-04-17","objectID":"/posts/pandas%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%B0%8F%E6%8A%80%E5%B7%A7%E4%B8%80/:0:0","tags":["Python","æ•°æ®å¤„ç†"],"title":"pandasæ•°æ®å¤„ç†å°æŠ€å·§1","uri":"/posts/pandas%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%B0%8F%E6%8A%80%E5%B7%A7%E4%B8%80/"},{"categories":["æ•°æ®å¤„ç†"],"content":"shiftæ–¹æ³•ç§»åŠ¨æ•°æ® æ•°æ®æ¨ªå‘ç§»åŠ¨ä¸€ä½ data.shift(periods=1, axis=1) ç„¶ååšå·®ï¼Œå°†åŸå§‹æ•°æ®å‘åç§»åŠ¨ä¸€ä½ï¼Œå†åšå•†å°±èƒ½å¾—åˆ°å¢é•¿ç‡ (data - data.shift(periods=1, axis=1))/data.shift(periods=1, axis=1) ","date":"2021-04-17","objectID":"/posts/pandas%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%B0%8F%E6%8A%80%E5%B7%A7%E4%B8%80/:1:0","tags":["Python","æ•°æ®å¤„ç†"],"title":"pandasæ•°æ®å¤„ç†å°æŠ€å·§1","uri":"/posts/pandas%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%B0%8F%E6%8A%80%E5%B7%A7%E4%B8%80/"},{"categories":["æ•°æ®å¤„ç†"],"content":"diffæ–¹æ³•åšå·®åˆ† å‰é¢åšå·®å€¼çš„è¿‡ç¨‹å…¶å®å°±æ˜¯ä¸€é˜¶å·®åˆ†ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥é€šè¿‡diffæ–¹æ³•å®Œæˆ data.diff(periods=1, axis=1) åé¢çš„è¿‡ç¨‹ä¸å†è®¡ç®— ","date":"2021-04-17","objectID":"/posts/pandas%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%B0%8F%E6%8A%80%E5%B7%A7%E4%B8%80/:2:0","tags":["Python","æ•°æ®å¤„ç†"],"title":"pandasæ•°æ®å¤„ç†å°æŠ€å·§1","uri":"/posts/pandas%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%B0%8F%E6%8A%80%E5%B7%A7%E4%B8%80/"},{"categories":["æ•°æ®å¤„ç†"],"content":"pct_changeæ–¹æ³•ç›´æ¥è®¡ç®— pct_changeæ–¹æ³•å¯ä»¥ç”¨æ¥ç›´æ¥è®¡ç®—å˜åŒ–ç‡ data.pct_change(periods=1, axis=1) ","date":"2021-04-17","objectID":"/posts/pandas%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%B0%8F%E6%8A%80%E5%B7%A7%E4%B8%80/:3:0","tags":["Python","æ•°æ®å¤„ç†"],"title":"pandasæ•°æ®å¤„ç†å°æŠ€å·§1","uri":"/posts/pandas%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%B0%8F%E6%8A%80%E5%B7%A7%E4%B8%80/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"Kafkaæ˜¯ä¸€ä¸ªé«˜ååç‡çš„åˆ†å¸ƒå¼è®¢é˜…æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¼ ç»Ÿçš„å…³ç³»å­˜å‚¨å‹æ•°æ®åº“ï¼Œå¦‚MySQLã€MongoDBéƒ½æœ‰ä¸€ä¸ªç—›ç‚¹ï¼Œé‚£å°±æ˜¯æ€§èƒ½è¾ƒå·®ï¼Œåœ¨é«˜å¹¶å‘è®¿é—®çš„æƒ…å†µä¸‹å¾ˆå¯èƒ½ä¼šå¥”æºƒæ‰ã€‚å…¶å®redisä¸­æœ‰ä¸€ä¸ªç”¨äºæ¶ˆæ¯è®¢é˜…çš„æ•°æ®ç»“æ„queueï¼Œä½†æ˜¯redisä¸­çš„æ•°æ®æ˜¯æ”¾åˆ°å†…å­˜å½“ä¸­çš„ï¼Œå¦‚æœæ¶ˆæ¯é‡è¿‡å¤§å¾ˆå¯èƒ½ä¼šé€ æˆå†…å­˜å¥”æºƒï¼Œè€Œä¸”å¦‚æœæœºå™¨å‘ç”Ÿæ•…éšœï¼Œå†…å­˜ä¸­çš„æ•°æ®å¾ˆå¯èƒ½ä¼šæ¸…ç©ºã€‚ å¯¹æ¯”äºredisï¼ŒKafkaä¸­å‘å¸ƒæ¶ˆæ¯å’Œæ¶ˆè´¹æ¶ˆæ¯çš„é€Ÿåº¦éƒ½ç›¸å¯¹è¾ƒæ…¢ï¼Œä½†æ˜¯Kafkaä¹Ÿè¶³ä»¥æ”¯æ’‘ä½å¹¶å‘ï¼Œè€Œä¸”Kafkaæ”¶åˆ°æ¶ˆæ¯åæ˜¯å­˜å‚¨åˆ°ç¡¬ç›˜å½“ä¸­çš„ï¼Œå› æ­¤å°±ç®—æ˜¯æœåŠ¡å™¨å®•æœºä¹Ÿä¸ä¼šé€ æˆæ•°æ®çš„ä¸¢å¤±ã€‚ ","date":"2021-04-09","objectID":"/posts/kafka%E4%BD%BF%E7%94%A8/:0:0","tags":["Kafka","Python","Go","å¹¶å‘"],"title":"Kafkaå®‰è£…ä¸ä½¿ç”¨","uri":"/posts/kafka%E4%BD%BF%E7%94%A8/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"Kafkaä»‹ç» åœ¨Kafkaä¸­æ¶ˆæ¯çš„å­˜å‚¨ä¸è¯»å–è¢«ç§°ä½œç”Ÿäº§ä¸æ¶ˆè´¹ï¼ŒKafkaå­˜å‚¨çš„æ¶ˆæ¯éƒ½æ˜¯æœ‰æ—¶æ•ˆæ€§çš„ï¼ˆè¿™ä¸ªæ—¶é—´å¯ä»¥ç”±å¼€å‘è€…è‡ªå·±è®¾ç½®ï¼‰ï¼ŒKafkaå°±åƒä¸€ä¸ªæ¶ˆæ¯çš„åº“å­˜å¸‚åœºï¼Œæ¶ˆæ¯è¢«åˆ†ç±»ç”Ÿäº§ä¹‹åå‘é€åˆ°Kafkaï¼Œç„¶åå¼€å§‹åˆ†ç±»æ¶ˆè´¹ï¼Œå¦‚æœæ²¡æœ‰æ¶ˆæ¯å°±ä¼šä¸€ç›´è½®è¯¢ åœ¨Kafkaé›†ç¾¤ä¸­ï¼Œæ¯ä¸ªBrokerå°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ï¼Œæ¯ä¸ªTopicéƒ½æœ‰ä¸€ä¸ªLeaderï¼Œå½“ç”Ÿäº§æ•°æ®çš„æ—¶å€™ä¼šç”Ÿäº§åˆ°Leaderçš„æœåŠ¡å™¨ï¼Œç„¶åLeaderä¼šå°†æ•°æ®å‘é€ç»™Followerä¼šåšä¸€ä¸ªå¤‡ä»½ï¼Œæ¶ˆè´¹çš„æ—¶å€™ä¹Ÿæ˜¯ä»Leaderæ‰€åœ¨æœåŠ¡å™¨ä¸­å–ã€‚ Partitionæ˜¯åˆ†åŒºï¼Œå½“å¹¶å‘å¾€Kafkaä¸­ç”Ÿäº§æ•°æ®çš„æ—¶å€™å¦‚æœæœ‰å¤šä¸ªPartitionä¼šå°†æ•°æ®åˆ†å¸ƒå‘é€ç»™æŒ‡å®šçš„Partitionï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªTopicä¸­çš„æ•°æ®å°†è¢«å­˜å‚¨åœ¨ä¸åŒçš„Partitionä¸­ã€‚ ","date":"2021-04-09","objectID":"/posts/kafka%E4%BD%BF%E7%94%A8/:1:0","tags":["Kafka","Python","Go","å¹¶å‘"],"title":"Kafkaå®‰è£…ä¸ä½¿ç”¨","uri":"/posts/kafka%E4%BD%BF%E7%94%A8/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"Windowså¹³å° ","date":"2021-04-09","objectID":"/posts/kafka%E4%BD%BF%E7%94%A8/:2:0","tags":["Kafka","Python","Go","å¹¶å‘"],"title":"Kafkaå®‰è£…ä¸ä½¿ç”¨","uri":"/posts/kafka%E4%BD%BF%E7%94%A8/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"ä¸‹è½½ Kafkaåœ¨æ‰€æœ‰å¹³å°çš„å®‰è£…éƒ½æ˜¯åŒä¸€ä¸ªå®‰è£…åŒ…ï¼Œåˆ°å®˜ç½‘ä¸‹è½½ç¼–è¯‘å¥½çš„å³å¯ï¼šhttp://kafka.apache.org/ Kafkaçš„å¯åŠ¨ä¾èµ–äºZooKeeperç»„ä»¶ï¼Œåœ¨è¾ƒæ–°çš„Kafkaå®‰è£…åŒ…ä¸­å·²ç»å¸¦äº†ZooKeeperï¼Œåªè¦é…ç½®å¥½å¯åŠ¨å°±è¡Œã€‚ ä¸‹è½½å®Œæˆä¹‹åè§£å‹ ç„¶åéœ€è¦å»ºç«‹ä¸€ä¸ªå­˜æ”¾æ•°æ®çš„æ–‡ä»¶å¤¹ï¼Œå› ä¸ºæ˜¯åœ¨Windowså¹³å°ä¸‹å®éªŒä½¿ç”¨ï¼Œæ‰€ä»¥æ–‡ä»¶å¤¹å°±å»ºåœ¨å®‰è£…ç›®å½•å³å¯ ç„¶åå†åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹åˆ†å¸ƒç»™Zookeeperå’ŒKafkaä½¿ç”¨ æ¥ç€è¿›å…¥configç›®å½•ä¿®æ”¹é…ç½®æ–‡ä»¶ é¦–å…ˆä¿®æ”¹Zookeeperçš„é…ç½®æ–‡ä»¶zookeeper.propertiesï¼Œå°†dataDirä¿®æ”¹ä¸ºåˆšåˆšåˆ›å»ºçš„zk_dataæ–‡ä»¶å¤¹ dataDir=D:/soft/kafka_2.12/data/zk_data ç„¶åä¿®æ”¹Kafkaçš„é…ç½®æ–‡ä»¶server.propertiesï¼Œå°†log.dirsä¿®æ”¹ä¸ºåˆšåˆšåˆ›å»ºçš„kafka_logæ–‡ä»¶å¤¹ log.dirs=D:/soft/kafka_2.12/data/kafka_log ","date":"2021-04-09","objectID":"/posts/kafka%E4%BD%BF%E7%94%A8/:2:1","tags":["Kafka","Python","Go","å¹¶å‘"],"title":"Kafkaå®‰è£…ä¸ä½¿ç”¨","uri":"/posts/kafka%E4%BD%BF%E7%94%A8/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"å¯åŠ¨Kafka åœ¨å¯åŠ¨Kafkaå‰éœ€è¦å…ˆå¯åŠ¨Zookeeperï¼Œåœ¨æ­¤å°±ä¸é…ç½®ç¯å¢ƒå˜é‡äº†ï¼Œé€šè¿‡å‘½ä»¤åœ¨å®‰è£…è·¯å¾„å¯åŠ¨å³å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨Windowsä¸‹å¯åŠ¨è„šæœ¬éƒ½åœ¨binç›®å½•ä¸‹çš„windowsç›®å½•ä¸‹ï¼ŒLinuxçš„æ˜¯åœ¨binè·¯å¾„ä¸‹ å¯åŠ¨Zookeeperå’ŒKafkaéƒ½éœ€è¦æŒ‡å®šé…ç½®æ–‡ä»¶ .\\bin\\windows\\zookeeper-server-start.bat .\\config\\zookeeper.properties ç„¶åå¯åŠ¨Kafka .\\bin\\windows\\kafka-server-start.bat .\\config\\server.properties ","date":"2021-04-09","objectID":"/posts/kafka%E4%BD%BF%E7%94%A8/:2:2","tags":["Kafka","Python","Go","å¹¶å‘"],"title":"Kafkaå®‰è£…ä¸ä½¿ç”¨","uri":"/posts/kafka%E4%BD%BF%E7%94%A8/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"Pythonå®ç°ç”Ÿäº§ä¸æ¶ˆè´¹ å› ä¸ºpykafkaå·²ç»å¾ˆä¹…æ²¡æ›´æ–°äº†ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨kafka-pythonæ“ä½œKafka pip install kafka-python ç”Ÿäº§è€… producer_demo.py from kafka import KafkaProducer from time import sleep def start_producer(): producer = KafkaProducer(bootstrap_servers='127.0.0.1:9092') for i in range(0, 100000): msg = f'msg is {i}' producer.send(topic='FreedomAndDiscipline', value=msg.encode('utf-8')) sleep(3) if __name__ == '__main__': start_producer() æ¶ˆè´¹è€… consumer_demo.py from kafka import KafkaConsumer def start_consumer(): consumer = KafkaConsumer('FreedomAndDiscipline', bootstrap_servers='127.0.0.1:9092') for msg in consumer: print(msg) if __name__ == '__main__': start_consumer() å› ä¸ºè¿™é‡Œå¹¶æ²¡æœ‰è®¾ç½®ä»Topicå¼€å§‹çš„ä½ç½®å¼€å§‹è¯»ï¼Œæ‰€ä»¥å½“consumer_demo.pyå¯åŠ¨ä¹‹ååªèƒ½æ¥æ”¶åˆ°producer_demo.pyåé¢å‘é€æ¥çš„æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„è¾“å‡ºå†…å®¹ä¸­ç¬¬ä¸€æ¡æ¶ˆæ¯æ˜¯msg is 47 ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=2, timestamp=1618372466839, timestamp_type=0, key=None, value=b'msg is 47', headers=[], checksum=None, serialized_key_size=-1, serialized_value_size=9, serialized_header_size=-1) ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=3, timestamp=1618372469851, timestamp_type=0, key=None, value=b'msg is 48', headers=[], checksum=None, serialized_key_size=-1, serialized_value_size=9, serialized_header_size=-1) ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=4, timestamp=1618372472865, timestamp_type=0, key=None, value=b'msg is 49', headers=[], checksum=None, serialized_key_size=-1, serialized_value_size=9, serialized_header_size=-1) ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=5, timestamp=1618372475876, timestamp_type=0, key=None, value=b'msg is 50', headers=[], checksum=None, serialized_key_size=-1, serialized_value_size=9, serialized_header_size=-1) ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=6, timestamp=1618372478879, timestamp_type=0, key=None, value=b'msg is 51', headers=[], checksum=None, serialized_key_size=-1, serialized_value_size=9, serialized_header_size=-1) ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=7, timestamp=1618372481886, timestamp_type=0, key=None, value=b'msg is 52', headers=[], checksum=None, serialized_key_size=-1, serialized_value_size=9, serialized_header_size=-1) ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=8, timestamp=1618372484894, timestamp_type=0, key=None, value=b'msg is 53', headers=[], checksum=None, serialized_key_size=-1, serialized_value_size=9, serialized_header_size=-1) ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=9, timestamp=1618372487894, timestamp_type=0, key=None, value=b'msg is 54', headers=[], checksum=None, serialized_key_size=-1, serialized_value_size=9, serialized_header_size=-1) å¦‚æœéœ€è¦ä»è¯¥Topicæœ€å¼€å§‹çš„ä½ç½®è¯»ï¼Œéœ€è¦è®¾ç½®Partitionçš„ä½ç½®ï¼Œç„¶åå‘Šè¯‰è¿æ¥å¯¹è±¡offsetä»å“ªå¼€å§‹ from kafka import KafkaConsumer def start_consumer(): consumer = KafkaConsumer(bootstrap_servers='127.0.0.1:9092') # åˆ›å»ºPartitionå¯¹è±¡ tp = TopicPartition('FreedomAndDiscipline', 0) # ç»™è¿æ¥å¯¹è±¡æŒ‡å®šPartitionå¯¹è±¡ consumer.assign([tp]) # å‘Šè¯‰Kafkaæ¶ˆè´¹å¯¹è±¡è¦ä»æŒ‡å®šPartitionå¯¹è±¡çš„æŒ‡å®šoffsetå¼€å§‹æ¶ˆè´¹ consumer.seek(tp, offset=0) for msg in consumer: print(msg) if __name__ == '__main__': start_consumer() ç°åœ¨å¾—åˆ°çš„å°±æ˜¯topicä¸ºFreedomAndDisciplineï¼Œpartitionä¸º0ï¼Œoffsetä¸º0çš„ç»“æœ ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=0, timestamp=1618372897061, timestamp_type=0, key=None, value=b'msg is 0', headers=[], checksum=None, serialized_key_size=-1, serialized_value_size=8, serialized_header_size=-1) ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=1, timestamp=1618372900064, timestamp_type=0, key=None, value=b'msg is 1', headers=[], checksum=None, serialized_key_size=-1, serialized_value_size=8, serialized_header_size=-1) ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=2, timestamp=1618372903074, timestamp_type=0, key=None, value=b'msg is 2', headers=[], checksum=None, serialized_key_size=-1, serialized_value_size=8, serialized_header_size=-1) ConsumerRecord(topic='FreedomAndDiscipline', partition=0, offset=3, timestamp=1618372","date":"2021-04-09","objectID":"/posts/kafka%E4%BD%BF%E7%94%A8/:2:3","tags":["Kafka","Python","Go","å¹¶å‘"],"title":"Kafkaå®‰è£…ä¸ä½¿ç”¨","uri":"/posts/kafka%E4%BD%BF%E7%94%A8/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"Goå®ç°ç”Ÿäº§ä¸æ¶ˆè´¹ ç”Ÿäº§è€…ç¨‹åº package main import ( \"fmt\" \"github.com/Shopify/sarama\" \"log\" \"time\" ) func main() { // Kafkaé…ç½®å¯¹è±¡ config := sarama.NewConfig() // æ¶ˆæ¯å‘é€æˆåŠŸå°†æ¶ˆæ¯å‘é€æˆåŠŸçš„ä¿¡æ¯å‘é€åˆ°Successes channel config.Producer.Return.Successes = true // é…ç½®partitionåˆ†åŒºä½ç½®ä¸ºæŒ‡å®šåˆ†åŒº config.Producer.Partitioner = sarama.NewManualPartitioner // åˆå§‹åŒ–Producerå¯¹è±¡ producer, err := sarama.NewSyncProducer([]string{\"localhost:9092\"}, config) if err != nil { panic(err) } defer func() { if err := producer.Close(); err != nil { log.Println(\"Failed to close producer:\", err) } }() for i := 1; i \u003c 1000; i++ { // æ¶ˆæ¯è®¾ç½® msg := \u0026sarama.ProducerMessage{ Topic: \"HelloKafka\", Partition: 0, Value: sarama.StringEncoder(fmt.Sprintf(\"msg is %d\", i)), } // å‘é€æ¶ˆæ¯ partition, offset, err := producer.SendMessage(msg) if err != nil { panic(err) } if partition != 0 { log.Fatalf(\"message should have been produced to partition 0! but hane been produced to partition %d\", partition) } log.Printf(\"Produced message to partition %d with offset %d\", partition, offset) time.Sleep(time.Second*10) } } æ¶ˆè´¹è€…ç¨‹åº package main import ( \"fmt\" \"github.com/Shopify/sarama\" \"log\" ) func main() { // åˆå§‹åŒ–æ¶ˆè´¹å¯¹è±¡ consumer, err := sarama.NewConsumer([]string{\"127.0.0.1:9092\"}, nil) if err != nil { panic(err) } // è·å–æŒ‡å®šä¸»é¢˜ä¸‹çš„partitionåˆ—è¡¨ partitionList, err := consumer.Partitions(\"HelloKafka\") if err != nil { panic(err) } // éå†partitionåˆ—è¡¨ï¼Œä»partitionä¸­æ¶ˆè´¹æ¶ˆæ¯ for _, partition := range partitionList { topic := \"HelloKafka\" // åˆå§‹åŒ–PartitionConsumerå¯¹è±¡ partitionConsumer, err := consumer.ConsumePartition(topic, partition, sarama.OffsetOldest) if err != nil { panic(err) } defer partitionConsumer.AsyncClose() for msg := range partitionConsumer.Messages() { log.Printf(\"Partition:%d Offset:%d Key:%v Value:%v\", msg.Partition, msg.Offset, msg.Key, msg.Value) } } } åœ¨æ¶ˆè´¹è€…ä¸­ï¼Œå¦‚æœä¸æƒ³è¦è·å–ä»¥å‰çš„æ¶ˆæ¯ï¼Œåªè·å–æ–°çš„æ¶ˆæ¯åªéœ€è¦åœ¨ConsumePartitionæ–¹æ³•ä¸­è®¾ç½®offsetä¸ºsarama.OffsetNewestå³å¯ ","date":"2021-04-09","objectID":"/posts/kafka%E4%BD%BF%E7%94%A8/:2:4","tags":["Kafka","Python","Go","å¹¶å‘"],"title":"Kafkaå®‰è£…ä¸ä½¿ç”¨","uri":"/posts/kafka%E4%BD%BF%E7%94%A8/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"ä½¿ç”¨Dockeræ­å»ºKafkaé›†ç¾¤ åœ¨ä¸Šé¢çš„ç¨‹åºä¸­æˆ‘ä»¬éƒ½æ˜¯åœ¨å•æœºç¯å¢ƒä¸‹è¿›è¡Œçš„ï¼Œåœ¨å®é™…çš„ç”Ÿäº§ç¯å¢ƒä¸­å‡ ä¹éƒ½æ˜¯åœ¨é›†ç¾¤ä¸­è¿›è¡Œçš„ï¼Œä½†æ˜¯ä½¿ç”¨è™šæ‹Ÿæœºè€—è´¹çš„å†…å­˜å¤ªå¤§ï¼Œå› æ­¤ä½¿ç”¨dockeræ¥æ­å»ºKafkaé›†ç¾¤è¿›è¡Œå®éªŒ å¾…æ›´æ–° ","date":"2021-04-09","objectID":"/posts/kafka%E4%BD%BF%E7%94%A8/:3:0","tags":["Kafka","Python","Go","å¹¶å‘"],"title":"Kafkaå®‰è£…ä¸ä½¿ç”¨","uri":"/posts/kafka%E4%BD%BF%E7%94%A8/"},{"categories":["Python"],"content":"åœ¨å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œä¸å¯é¿å…çš„å°±æ˜¯MySQLçš„è®¿é—®é—®é¢˜ï¼Œç”±äºMySQLçš„æ€§èƒ½å¹¶ä¸å¼ºï¼Œå› æ­¤åœ¨è¿›è¡Œå¹¶å‘è®¿é—®çš„æ—¶å€™å¾€å¾€ä¼šä½¿ç”¨è¿æ¥æ± ã€‚ åœ¨Pythonä¸­å¼‚æ­¥æ“ä½œçš„æ—¶å€™æ€§èƒ½è¿˜ç®—æ˜¯æ¯”è¾ƒå¼ºçš„ï¼Œå› æ­¤å»ºç«‹ä¸€ä¸ªè¿æ¥æ± æ˜¯å¿…é¡»çš„ã€‚æ•°æ®åº“è¿æ¥æ± å°±æ˜¯åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™å°±å»åˆ›å»ºä¸€å®šæ•°é‡çš„æ•°æ®åº“è¿æ¥å¯¹è±¡ï¼Œç„¶ååœ¨å‘è¿æ¥æ± ç”³è¯·è¿æ¥çš„æ—¶å€™è¿”å›ä¸€ä¸ªè¿æ¥å¯¹è±¡ï¼Œæ•°æ®åº“æ“ä½œå®Œæˆä¹‹åå¹¶ä¸ä¼šç«‹åˆ»é‡Šæ”¾è¿™ä¸ªè¿æ¥å¯¹è±¡ï¼Œè€Œæ˜¯å°†è¿™ä¸ªè¿æ¥å¯¹è±¡æ”¾å›è¿æ¥æ± ä¸­ã€‚ åœ¨å¤šçº¿ç¨‹ä¸­å’Œåç¨‹ä¸­å»ºç«‹çš„è¿æ¥æ± æ˜¯ä¸åŒçš„ï¼Œå¤šçº¿ç¨‹ä¸‹å¯ä»¥ä½¿ç”¨dbutilsæˆ–è€…twistedè¿™ä¸¤ä¸ªç¬¬ä¸‰æ–¹åº“å»ºç«‹è¿æ¥æ± ï¼Œåœ¨åç¨‹ä¸­å¯ä»¥ä½¿ç”¨aiomysqlè¿™ä¸ªç¬¬ä¸‰æ–¹åº“å»ºç«‹å¼‚æ­¥è¿æ¥æ±  ","date":"2021-04-08","objectID":"/posts/python-mysql%E8%BF%9E%E6%8E%A5%E6%B1%A0/:0:0","tags":["Python","MySQL"],"title":"Python MySQLè¿æ¥æ± ","uri":"/posts/python-mysql%E8%BF%9E%E6%8E%A5%E6%B1%A0/"},{"categories":["Python"],"content":"å¤šçº¿ç¨‹ç‰ˆ dbutils æœ¬æ–‡ä½¿ç”¨çš„dbutilsç‰ˆæœ¬ä¸º2.0ï¼Œåœ¨å†™æœ¬æ–‡æ—¶ä¸ºæœ€æ–°ç‰ˆæœ¬ pip install dbutils pymysql åˆå§‹åŒ–çº¿ç¨‹æ±  import pymysql from dbutils.pooled_db import PooledDB config = { \"creator\": pymysql, \"host\": \"127.0.0.1\", \"port\": 3306, \"user\": \"username\", \"password\": \"pw\", \"db\": \"database\", \"charset\": \"utf8\", \"mincached\": 5, \"maxcached\": 8, \"maxconnections\": 50, 'cursorclass': pymysql.cursors.DictCursor } pool = PooledDB(**config) è·å–è¿æ¥å¯¹è±¡å’Œæ¸¸æ ‡å¯¹è±¡ conn = pool.connection() cursor = conn.cursor() æŸ¥è¯¢æ•°æ®åº“ç‰ˆæœ¬ cursor.execute(\"SELECT VERSION()\") conn.commit() print(cursor.fetchone()) å½“æˆ‘ä»¬ä½¿ç”¨å®Œä¹‹åéœ€è¦å…³é—­æ¸¸æ ‡ç„¶åé‡Šæ”¾è¿æ¥å¯¹è±¡ cursor.close() conn.close() è¿™é‡Œconn.close()å¹¶ä¸æ˜¯å°†è¿æ¥æ± å…³é—­äº†ï¼Œåªæ˜¯å°†è¿™ä¸ªè¿æ¥å¯¹è±¡é€€å›åˆ°è¿æ¥æ± ä¸­ã€‚ ä¸Šé¢çš„è¿æ¥æ± å»ºç«‹çš„å†™æ³•åœ¨å•ä¸ªçº¿ç¨‹ä¸­è¿˜èƒ½ä½¿ç”¨ï¼Œå½“è¿›å…¥äº†å¤šçº¿ç¨‹çš„å¹¶å‘æƒ…å†µä¸‹å°±ä¼šæœ‰é—®é¢˜ ç¤ºä¾‹db.py from dbutils.pooled_db import PooledDB import pymysql from contextlib import contextmanager class MysqlPool(object): pool: PooledDB _instance = None def __new__(cls, *args, **kwargs): if not cls._instance: config = { \"creator\": pymysql, \"host\": \"127.0.0.1\", \"port\": 3306, \"user\": \"username\", \"password\": \"passwd\", \"db\": \"database\", \"charset\": \"utf8\", \"mincached\": 5, \"maxcached\": 8, \"maxconnections\": 50, 'cursorclass': pymysql.cursors.DictCursor } cls.pool = PooledDB(**config) cls._instance = super().__new__(cls) return cls._instance @classmethod @contextmanager def conn(cls): _conn = cls.pool.connection() yield _conn _conn.commit() _conn.close() p = MysqlPool() with p.conn() as conn: cursor = conn.cursor() cursor.execute(\"SELECT VERSION()\") print(cursor.fetchone()) cursor.close() è™½ç„¶åœ¨ä¸Šé¢çš„ç¨‹åºä¸­å°†è°ƒç”¨æ–¹æ³•åŠ å·¥ä¸ºäº†å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ‰“å¼€çš„ç¨‹åºï¼Œä½†æ˜¯æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™éƒ½è¦ç”¨withæ–¹æ³•æ‰“å¼€ï¼Œè€Œä¸”è¿˜éœ€è¦å…³é—­cursorï¼Œæ¯”è¾ƒç¹ç from dbutils.pooled_db import PooledDB import pymysql from contextlib import contextmanager from functools import wraps class MysqlPool(object): pool: PooledDB _instance = None def __new__(cls, *args, **kwargs): if not cls._instance: config = { \"creator\": pymysql, \"host\": \"127.0.0.1\", \"port\": 3306, \"user\": \"pujic\", \"password\": \"a\", \"db\": \"demo\", \"charset\": \"utf8\", \"mincached\": 5, \"maxcached\": 8, \"maxconnections\": 50, 'cursorclass': pymysql.cursors.DictCursor } cls.pool = PooledDB(**config) cls._instance = super().__new__(cls) return cls._instance # ä½¿ç”¨classmethodè£…é¥°å™¨è®©è¯¥æ–¹æ³•æˆä¸ºç±»æ–¹æ³•ï¼Œä»è€Œå¯ä»¥è®¿é—®åˆ°pool @classmethod # ä½¿ç”¨contextmanagerè£…é¥°å™¨è®©connæˆä¸ºä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡ @contextmanager def conn(cls): _conn = cls.pool.connection() yield _conn _conn.commit() _conn.close() p = MysqlPool() def db_connection(func): @wraps(func) def wrapper(*args, **kwargs): with p.conn() as conn: try: cursor = conn.cursor() result = func(*args, **kwargs, cursor=cursor) return result except Exception as e: print(e) # å¦‚æœå‘ç”Ÿå¼‚å¸¸å°±å›æ»š conn.rollback() finally: cursor.close() return wrapper @db_connection def test(cursor): cursor.execute(\"SELECT VERSION()\") print(cursor.fetchone()) test() ä¸Šé¢çš„ç¨‹åºè¿˜å­˜åœ¨ä¸€ä¸ªå°é—®é¢˜ï¼Œå½“ç¨‹åºæœ€å¼€å§‹å¹¶å‘è®¿é—®çš„æ—¶å€™è‚¯å®šä¼šå¯¼è‡´å•ä¾‹æ¨¡å¼å¤±æ•ˆï¼Œæ‰€ä»¥åœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­æœ€å¥½åŠ ä¸Šé”ï¼Œè¿™é‡Œå°±ä¸åœ¨æ¼”ç¤ºäº† ä¸ºä»€ä¹ˆä¸Šé¢çš„ç¨‹åºä¸­ä¸åœ¨MysqlPoolç±»ä¸­å®ç°__enter__å’Œ__exit__æ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨contextmanagerè£…é¥°å™¨å°†connæ–¹æ³•å˜ä¸ºä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡ï¼Œé‚£æ˜¯å› ä¸ºå¦‚æœåœ¨ç±»ä¸­å®ç°ä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼Œé‚£ä¹ˆæ‹¿åˆ°çš„connectionæˆ–è€…cursoréƒ½å°†å…¨å±€å”¯ä¸€ï¼Œé‚£ä¹ˆåœ¨å¹¶å‘ä¸‹å°±é€ æˆå…¨å±€åªæœ‰ä¸€ä¸ªconnectionçš„é—®é¢˜ï¼Œå…·ä½“ç»†èŠ‚å¯ä»¥çœ‹å•ä¾‹æ¨¡å¼å’Œä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼Œ ","date":"2021-04-08","objectID":"/posts/python-mysql%E8%BF%9E%E6%8E%A5%E6%B1%A0/:1:0","tags":["Python","MySQL"],"title":"Python MySQLè¿æ¥æ± ","uri":"/posts/python-mysql%E8%BF%9E%E6%8E%A5%E6%B1%A0/"},{"categories":["Python"],"content":"å¼‚æ­¥åç¨‹ç‰ˆ aiomysqlæœ¬èº«æä¾›äº†çº¿ç¨‹æ± å¯ä¾›ä½¿ç”¨è€…è¿›è¡Œæ“ä½œï¼Œå› ä¸ºæ˜¯å¼‚æ­¥åˆ›å»ºçš„è¿æ¥æ± ï¼Œæ‰€ä»¥éœ€è¦æŠŠæ•´ä¸ªåˆ›å»ºè¿‡ç¨‹å°è£…åˆ°åç¨‹ä¸­ï¼Œå®˜æ–¹æ¨èä½¿ç”¨create_poolè¿™ä¸ªå·¥å‚å‡½æ•°æ¥åˆ›å»ºè¿æ¥æ± ï¼Œå¹¶ä¸”è¿æ¥æ± ä¹Ÿæ”¯æŒå¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œcursorä¹Ÿæ”¯æŒå¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œä½†æ˜¯è¿æ¥æ± å¹¶ä¸æ˜¯å•ä¾‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ç¡®ä¿è¿æ¥æ± åœ¨æ•´ä¸ªäº‹ä»¶å¾ªç¯æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æ˜¯å•ä¾‹çš„å³å¯ æœ¬æ–‡ä½¿ç”¨çš„aiomysqlç‰ˆæœ¬ä¸º0.0.21ï¼Œåœ¨å†™æœ¬æ–‡æ—¶ä¸ºæœ€æ–°ç‰ˆæœ¬ å®ä¾‹aiodb.py import aiomysql import asyncio class MysqlPool: pool = None @classmethod async def init_pool(cls): try: if not cls.pool: _pool = await aiomysql.create_pool( minsize=5, # è¿æ¥æ± æœ€å°å€¼ maxsize=20, # è¿æ¥æ± æœ€å¤§å€¼ host='127.0.0.1', port=3306, user='username', password='passwd', db='database', autocommit=True, # è‡ªåŠ¨æäº¤æ¨¡å¼ ) cls.pool = _pool except Exception as e: print(e) async def test(): p1 = MysqlPool() await p1.init_pool() p2 = MysqlPool() print(id(p1.pool)) print(id(p2.pool)) async with p1.pool.acquire() as conn: async with conn.cursor() as cur: await cur.execute(\"SELECT VERSION()\") print(await cur.fetchone()) if __name__ == '__main__': loop = asyncio.get_event_loop() loop.run_until_complete(test()) æ­¤æ—¶é€šè¿‡MysqlPoolä½¿ç”¨çš„è¿æ¥æ± è™½ç„¶æ˜¯å•ä¾‹çš„äº†ï¼Œä½†æ˜¯MysqlPoolå¹¶ä¸æ˜¯ï¼Œæ‰€ä»¥è¿˜éœ€è¦æ§åˆ¶MysqlPoolçš„å®ä¾‹åŒ–è¿‡ç¨‹ï¼ŒåŒæ—¶ä¹Ÿè¦è®©æ•´ä¸ªæ•°æ®åº“çš„æ“ä½œè¿‡ç¨‹å˜å¾—ç®€å• import aiomysql import asyncio from functools import wraps class MysqlPool: _pool = None _instance = None def __new__(cls, *args, **kwargs): if not cls._instance: cls._instance = super().__new__(cls) return cls._instance @classmethod async def init_pool(cls): try: if not cls._pool: cls._pool = await aiomysql.create_pool( minsize=5, # è¿æ¥æ± æœ€å°å€¼ maxsize=20, # è¿æ¥æ± æœ€å¤§å€¼ host='127.0.0.1', port=3306, user='pujic', password='a', db='demo', autocommit=True, # è‡ªåŠ¨æäº¤æ¨¡å¼ ) except Exception as e: print(e) @classmethod async def pool(cls): # ä¹Ÿå¯ä»¥å°†è¿æ¥æ± åˆå§‹åŒ–çš„æ­¥éª¤æ”¾åˆ°ç±»å®ä¾‹åŒ–åï¼Œå‡å°‘åˆå§‹åŒ–æ£€æŸ¥ await cls.init_pool() return cls._pool p1 = MysqlPool() def db_connection(func): @wraps(func) async def wrapper(*args, **kwargs): pool = await p1.pool() async with pool.acquire() as conn: async with conn.cursor() as cursor: try: result = await func(*args, **kwargs, cursor=cursor) return result except Exception as e: print(e) await conn.rollback() return wrapper @db_connection async def test(cursor): await cursor.execute(\"SELECT VERSION()\") print(await cursor.fetchone()) if __name__ == '__main__': loop = asyncio.get_event_loop() loop.run_until_complete(test()) åˆ°æ­¤MySQLçš„è®¿é—®è¿æ¥æ± å°±åŸºæœ¬å®Œæˆäº† ","date":"2021-04-08","objectID":"/posts/python-mysql%E8%BF%9E%E6%8E%A5%E6%B1%A0/:2:0","tags":["Python","MySQL"],"title":"Python MySQLè¿æ¥æ± ","uri":"/posts/python-mysql%E8%BF%9E%E6%8E%A5%E6%B1%A0/"},{"categories":["Python"],"content":"ç»“è¯­ ä»¥ä¸Šç¨‹åºä¼šåœ¨å¹¶å‘ä¸­å‡ºç°çš„å­˜åœ¨å¤šä¸ªå®ä¾‹çš„é—®é¢˜å°±äº¤ç»™è¯»è€…è¿›è¡Œè§£å†³äº† Pythonæ—¢ç„¶æ˜¯é¢å‘å¯¹è±¡è¯­è¨€ï¼Œåœ¨è¿›è¡Œå·¥ç¨‹åŒ–çš„ç¨‹åºå¼€å‘æ—¶å°±æ›´åº”è¯¥å¯¹ç¨‹åºè¿›è¡Œé«˜åº¦çš„å°è£…ï¼Œé¿å…ä½¿ç”¨é‡å¤å†—ä½™çš„ä»£ç ï¼Œå¾ˆå¤šäººåœ¨å­¦ä¹ Pythonçš„æ—¶å€™æ€»æ˜¯æ„Ÿè§‰å†™èµ·æ¥å¾ˆçˆ½ï¼Œé‚£æ˜¯å› ä¸ºå­¦ä¹ è¿‡ç¨‹ä¸­ç”¨åˆ°çš„ä¸œè¥¿åŸºæœ¬éƒ½æ˜¯Pythonç¤¾åŒºçš„å¼€å‘è€…ä»¬è¿›è¡Œé«˜åº¦å°è£…åçš„åŒ…ï¼Œæˆ–è€…æ˜¯Pythonæ ‡å‡†åº“ä¸­é«˜åº¦å°è£…å¥½çš„åŒ…ã€‚å½“è¿›å…¥å·¥ç¨‹åŒ–å¼€å‘çš„æ—¶å€™å´å‘ç°çœ‹ä¸æ‡‚åˆ«äººçš„ä»£ç ï¼Œè‡ªå·±çš„ä»£ç ç»´æŠ¤èµ·æ¥å¾ˆå›°éš¾ï¼Œä¸€æ”¹å°±æ˜¯æ”¹å‡ ä¸ªå…³è”æ–‡ä»¶ã€‚ä½œä¸ºä¸€ä¸ªPythonå¼€å‘è€…ï¼Œåœ¨è¿›è¡ŒPythonç¨‹åºå­¦ä¹ å’Œå¼€å‘çš„æ—¶å€™åº”è¯¥å°†Pythonè§†ä¸ºå·¥ç¨‹åŒ–è¯­è¨€ï¼Œè€Œä¸æ˜¯è„šæœ¬è¯­è¨€ ","date":"2021-04-08","objectID":"/posts/python-mysql%E8%BF%9E%E6%8E%A5%E6%B1%A0/:3:0","tags":["Python","MySQL"],"title":"Python MySQLè¿æ¥æ± ","uri":"/posts/python-mysql%E8%BF%9E%E6%8E%A5%E6%B1%A0/"},{"categories":["æ•°æ®å¤„ç†"],"content":"æˆ‘ä»¬åœ¨å‡ ä¹æ‰€æœ‰çš„æ•°æ®å¤„ç†åœºæ™¯ä¸­ï¼Œç”¨pandaså°†æ•°æ®è¯»å…¥å†…å­˜ä¹‹åè¦åšçš„ç¬¬ä¸€ä»¶äº‹éƒ½æ˜¯æŸ¥çœ‹æ•°æ®çš„æè¿° å¯ä»¥ä½¿ç”¨infoæ–¹æ³•æ¥æŸ¥çœ‹æ•°æ®ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­—æ®µçš„ç±»å‹ï¼Œå­—æ®µçš„æ¡æ•°ï¼Œå­—æ®µæ˜¯å¦åŒ…å«ç©ºå€¼ã€‚è¿™æ˜¯æ²¡æœ‰å¤„ç†è¿‡çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è®¸å¤šçš„objectç±»å‹çš„ï¼Œè¿™ä¸ªobjectå°±æ˜¯å­—ç¬¦ä¸² åœ¨ä¸Šé¢çš„æ•°æ®ä¸­å¤§éƒ¨åˆ†éƒ½æ˜¯åˆ†ç±»å˜é‡ï¼Œè¿ç»­æ€§å˜é‡åªæœ‰å®¤ã€å…ã€å»ºç­‘é¢ç§¯ã€æˆ¿å±‹å¹´é™ã€å…³æ³¨äººæ•°ã€æ¯å¹³ä»·æ ¼ ä½†æ˜¯å› ä¸ºå¹¶æ²¡æœ‰å¤„ç†è¿‡ï¼Œæ‰€ä»¥èƒ½å¤Ÿè¯»å–åç›´æ¥è¯†åˆ«çš„åªæœ‰4ä¸ªå­—æ®µ data.describe() å¯¹æ•°æ®è¿›è¡Œæè¿°æ€§åˆ†æå¾—åˆ°çš„ç»“æœä¹Ÿä»…ä»…æ˜¯è¿™å››ä¸ªå­—æ®µ æˆ‘çš„è€å¸ˆè¯´è¿‡èƒ½ç”¨å›¾å±•ç¤ºä¸œè¥¿å°±ä¸è¦ç”¨è¡¨æ ¼å±•ç¤ºï¼Œä½†æ˜¯å¦‚æœè¦ç”Ÿæˆä¸€å¥—è¯¦ç»†çš„æŠ¥å‘Šå›¾è¡¨è¿˜æ˜¯éœ€è¦å‡ è¡Œä»£ç çš„ï¼Œäºæ˜¯ä¸å¾—ä¸ä»‹ç»ä¸€ä¸ªç”¨äºæ•°æ®æ¢ç´¢æ€§åˆ†æçš„ç¬¬ä¸‰æ–¹åº“pandas-profilingï¼Œç›´æ¥ä¸Šç»“æœ import pandas_profiling pandas_profiling.ProfileReport(data) ğŸ˜“æŠ¥å‘Šç»“æœå¤ªé•¿ï¼Œå›¾ç‰‡å¤ªå¤§å°±å±•ç¤ºå‡ å¼ å§ï¼ ","date":"2021-03-21","objectID":"/posts/pandas%E6%95%B0%E6%8D%AE%E6%8F%8F%E8%BF%B0%E6%80%A7%E5%88%86%E6%9E%90/:0:0","tags":["pandas","æ•°æ®å¤„ç†"],"title":"pandasæ•°æ®æè¿°æ€§åˆ†æ","uri":"/posts/pandas%E6%95%B0%E6%8D%AE%E6%8F%8F%E8%BF%B0%E6%80%A7%E5%88%86%E6%9E%90/"},{"categories":["æ•°æ®åº“"],"content":"å› ä¸ºä½œä¸šçš„åŸå› æˆ‘éœ€è¦ä½¿ç”¨MySQL5.7æ¥å­˜å‚¨æ•°æ®ï¼Œä½†æ˜¯åœ¨AURä¸Šåªèƒ½å®‰è£…mariadbã€‚æˆ‘ä¹Ÿå°è¯•é€šè¿‡MySQLå®˜ç½‘æ‰“åŒ…çš„é€šç”¨å®‰è£…åŒ…å®‰è£…ï¼Œä½†æ˜¯ä¸€ç›´å¤±è´¥ï¼Œäºæ˜¯åªèƒ½é€šè¿‡dockeræ¥è¿è¡ŒMySQLäº†ã€‚ ","date":"2021-03-20","objectID":"/posts/python%E8%BF%9E%E6%8E%A5docker%E4%B8%AD%E8%BF%90%E8%A1%8Cmysql/:0:0","tags":["docker","python","mysql"],"title":"pythonè¿æ¥dockerä¸­è¿è¡Œmysql","uri":"/posts/python%E8%BF%9E%E6%8E%A5docker%E4%B8%AD%E8%BF%90%E8%A1%8Cmysql/"},{"categories":["æ•°æ®åº“"],"content":"å®‰è£…docker å®‰è£… sudo pacman -S docker å¯åŠ¨ systenctl start docker å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°dockerç”¨æˆ·ç»„ sudo gpasswd -a pujic docker é€€å‡ºå½“å‰ç”¨æˆ·é‡æ–°ç™»å½• è¿è¡Œhello-world docker run hello-world ","date":"2021-03-20","objectID":"/posts/python%E8%BF%9E%E6%8E%A5docker%E4%B8%AD%E8%BF%90%E8%A1%8Cmysql/:1:0","tags":["docker","python","mysql"],"title":"pythonè¿æ¥dockerä¸­è¿è¡Œmysql","uri":"/posts/python%E8%BF%9E%E6%8E%A5docker%E4%B8%AD%E8%BF%90%E8%A1%8Cmysql/"},{"categories":["æ•°æ®åº“"],"content":"åˆ›å»ºMySQLå®¹å™¨ æ‹‰å–MySQL5.7é•œåƒï¼ˆé€Ÿåº¦å¤ªæ…¢å¯ä»¥é…ç½®é˜¿é‡Œäº‘é•œåƒåœ°å€ï¼‰ docker pull mysql:5.7 åˆ›å»ºMySQLé…ç½®æ–‡ä»¶ sudo mkdir -p /opt/mysql/{conf, data} sudo nvim /opt/mysql/conf/my.cnf my.cnfæ·»åŠ å¦‚ä¸‹å†…å®¹ [mysqld] user=mysql character-set-server=utf8 default_authentication_plugin=mysql_native_password [client] default-character-set=utf8 [mysql] default-character-set=utf8 åˆ›å»ºMySQL5.7å®¹å™¨ docker run -d -p 3306:3306 --privileged=true -v /opt/mysql/conf/my.cnf:/etc/mysql/my.cnf -v /opt/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=p --name mysql_container mysql:5.7 å‚æ•°è¯´æ˜ å‚æ•° è§£é‡Š -p ç«¯å£æ˜ å°„ï¼Œå†’å·å‰é¢çš„ç«¯å£æ˜¯å‘å¤–æš´æ¼çš„ç«¯å£ â€“privileged=true å®¹å™¨å†…çš„rootæ‹¥æœ‰çœŸæ­£rootæƒé™ï¼Œå¦åˆ™å®¹å™¨å†…rootåªæ˜¯å¤–éƒ¨æ™®é€šç”¨æˆ·æƒé™ -v æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ˜ å°„ -e MYSQL_ROOT_PASSWORD è®¾ç½®rootç”¨æˆ·çš„å¯†ç  â€“name mysql_container å®¹å™¨çš„åç§°ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡å®¹å™¨åç§°å…³é—­å¯åŠ¨å®¹å™¨ ","date":"2021-03-20","objectID":"/posts/python%E8%BF%9E%E6%8E%A5docker%E4%B8%AD%E8%BF%90%E8%A1%8Cmysql/:2:0","tags":["docker","python","mysql"],"title":"pythonè¿æ¥dockerä¸­è¿è¡Œmysql","uri":"/posts/python%E8%BF%9E%E6%8E%A5docker%E4%B8%AD%E8%BF%90%E8%A1%8Cmysql/"},{"categories":["æ•°æ®åº“"],"content":"é…ç½®MySQL è¿›å…¥å®¹å™¨å†…çš„å‘½ä»¤è¡Œ docker exec -t mysql_container bash ç™»å½•MySQL mysql -u root -p åˆ›å»ºMySQLç”¨æˆ· CREATE USER 'pujic'@'%' IDENTIFIED BY 'a'; å¯¹ç”¨æˆ·è¿›è¡Œæˆæƒ GRANT ALL ON *.* TO 'pujic'@'%'; ","date":"2021-03-20","objectID":"/posts/python%E8%BF%9E%E6%8E%A5docker%E4%B8%AD%E8%BF%90%E8%A1%8Cmysql/:3:0","tags":["docker","python","mysql"],"title":"pythonè¿æ¥dockerä¸­è¿è¡Œmysql","uri":"/posts/python%E8%BF%9E%E6%8E%A5docker%E4%B8%AD%E8%BF%90%E8%A1%8Cmysql/"},{"categories":["æ•°æ®åº“"],"content":"Pythonè¿æ¥æµ‹è¯• import pymysql conn = pymysql.Connection(host='localhost', port=3306, user='pujic', password='a') cursor = conn.sursor() cursor.execute('SELECT VERSION()') print(cursor,fetchone()) æˆåŠŸè¾“å‡ºç‰ˆæœ¬ä¿¡æ¯è¯´æ˜å·²ç»é…ç½®å®Œæˆ ","date":"2021-03-20","objectID":"/posts/python%E8%BF%9E%E6%8E%A5docker%E4%B8%AD%E8%BF%90%E8%A1%8Cmysql/:4:0","tags":["docker","python","mysql"],"title":"pythonè¿æ¥dockerä¸­è¿è¡Œmysql","uri":"/posts/python%E8%BF%9E%E6%8E%A5docker%E4%B8%AD%E8%BF%90%E8%A1%8Cmysql/"},{"categories":["æ•°æ®å¤„ç†"],"content":"åœ¨æ•°æ®å¤„ç†çš„æ—¶å€™ç»å¸¸ä¼šé‡åˆ°æ—¶é—´åºåˆ—æ•°æ®ï¼Œç¬”è€…æœ‰å¹¸åœ¨4æ¬¡ç«èµ›6æ¬¡é›†è®­ä¸­é‡åˆ°è¿‡7æ¬¡æ—¶åºå‹æ•°æ®ï¼Œå…¶ä¸­ç«èµ›ä¸­æœ‰2æ¬¡éœ€è¦å¯¹æ•°æ®è¿›è¡Œèšåˆï¼Œé›†è®­ä¸­æœ‰2æ¬¡éœ€è¦å¯¹æ•°æ®è¿›è¡Œèšåˆã€‚ é€šå¸¸æˆ‘ä»¬æ‹¿åˆ°çš„æ•°æ®éƒ½æ˜¯å­˜å‚¨ä¸ºäº†excelæ–‡ä»¶æˆ–è€…csvæ–‡ä»¶ï¼Œpandasåœ¨è¯»å–æ•°æ®æ—¶å¦‚æœæ²¡æœ‰æŒ‡å®šæ•°æ®ç±»å‹ï¼Œè¯»å–å‡ºæ¥çš„éæ•°å€¼å‹æ•°æ®éƒ½å°†æ˜¯objectç±»å‹ï¼ˆä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²ï¼Œå’ŒPythonä¸­æ•°æ®ç±»æœ‰ä¸€äº›åŒºåˆ«ï¼‰ é€šè¿‡DataFrameçš„infoæ–¹æ³•æŸ¥çœ‹æ•°æ®çš„åŸºæœ¬ä¿¡æ¯ import pandas as pd data = pd.read_excel(\"./file.xlsx\") data.info() å¦‚æœè¯»å…¥çš„æ•°æ®ä¸­æœ‰2000-01-01ã€2000-01-01 12:00ã€2000-01è¿™æ ·çš„æ•°æ®è‚¯å®šä¼šè¢«å®šä¹‰ä¸ºobjectç±»å‹ã€‚ ","date":"2021-03-19","objectID":"/posts/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/:0:0","tags":["pandas","æ•°æ®å¤„ç†"],"title":"æ—¶é—´åºåˆ—æ•°æ®å¤„ç†","uri":"/posts/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"},{"categories":["æ•°æ®å¤„ç†"],"content":"èšåˆ æœ‰ä¸‹é¢ä¸€æ®µcsvæ•°æ®ï¼Œéœ€è¦è®¡ç®—å‡ºæ¯ä¸ªæœˆçš„é”€å”®é¢å’Œé”€é‡ date,å›½åº†,åŒåä¸€,åŒåäºŒ,å…ƒæ—¦,é”€å”®é¢,åº“å­˜,å¹³å‡å”®ä»·,æ ‡ä»·,æŠ˜æ‰£,æ–°æ½®ç¨‹åº¦,é”€é‡ 2018-10-01,1,0,0,0,2060.0,630,89.56521606445312,98.75,0.9069895148277283,0,23 2018-10-02,1,0,0,0,1498.75,617,88.1617660522461,98.75,0.8927773833274841,0,17 2018-10-03,1,0,0,0,1367.5,600,91.16666412353516,98.75,0.9232067465782166,0,15 2018-10-04,1,0,0,0,1062.5,591,88.54166412353516,98.75,0.8966244459152222,0,12 2018-10-05,1,0,0,0,730.0,583,91.25,98.75,0.9240506291389465,0,8 2018-10-06,1,0,0,0,1332.5,572,88.83333587646484,98.75,0.8995780944824219,0,15 2018-10-07,1,0,0,0,728.75,590,91.09375,98.75,0.922468364238739,0,8 2018-11-11,0,1,0,0,843.75,482,84.375,98.75,0.8544303774833679,0,10 2018-12-12,0,0,1,0,501.25,367,71.60713958740234,98.75,0.7251355648040771,0,7 2018-12-30,0,0,0,1,520.0,354,86.66666412353516,98.75,0.8776370882987976,0,6 é¦–å…ˆè¯»å…¥æ•°æ®ï¼Œç„¶åæ£€æŸ¥ä¸€ä¸‹æ•°æ®ç±»å‹ import pandas as pd df = pd.read_csv(\"./data.csv\") df.head() df.info() æ­¤æ—¶å¯ä»¥çœ‹åˆ°dateå­—æ®µå¹¶ä¸æ˜¯datetimeç±»å‹ï¼Œå› æ­¤éœ€è¦å°†dateå­—æ®µè½¬ä¸ºdatetimeç±»å‹ï¼Œéœ€è¦ä½¿ç”¨pandasä¸­çš„to_datetimeå‡½æ•° df[\"date\"] = pd.to_datetime(df[\"date\"]) df['date'] æ­¤æ—¶dateå­—æ®µå·²ç»è½¬æ¢ä¸ºäº†datetimeç±»å‹ï¼Œä½†æ˜¯æ­¤æ—¶æˆ‘ä»¬æƒ³åƒpandasä¸­æ“ä½œæ—¶é—´åºåˆ—æ•°æ®é‚£æ ·æ“ä½œè¿™ç»„æ•°æ®è¿˜éœ€è¦ä¸€äº›è®¾ç½®ï¼Œpandasä¸­æ—¶é—´åºåˆ—æ•°æ®çš„ç´¢å¼•æ˜¯æ—¶é—´ df.index = df[\"date\"] del df[\"date\"] é‚£ä¹ˆæ­¤æ—¶è¿™ä¸ªDataFrameå°±æ˜¯ä¸€ç»„æ—¶é—´åºåˆ—æ•°æ®äº† ä½¿ç”¨resampleæ–¹æ³•å¯¹æ•°æ®è¿›è¡Œé‡é‡‡æ ·ï¼Œå’Œgroupbyæœ‰ä¸€ç‚¹åƒ df.resample(\"M\").sum() è®¡ç®—å‡ºæ¥çš„ç»“æœä¸­ï¼Œç´¢å¼•å·²ç»å˜ä¸ºäº†è¿™ä¸ªæœˆçš„æœ€åä¸€å¤© æ¯ä¸ªæœˆçš„é”€å”®é¢å’Œé”€é‡å·²ç»è®¡ç®—å‡ºæ¥äº†ï¼Œå°½ç®¡å…¶ä»–æ•°æ®èšåˆçš„æ–¹æ³•æœ‰äº›ä¸å¯¹ï¼Œå¹³å‡å”®ä»·ã€æ ‡ä»·ã€åº”è¯¥å–å‡å€¼ã€‚åº“å­˜åº”è¯¥å–è¿™ä¸ªæœˆæœ€åä¸€å¤©çš„æ•°æ®ã€‚æ–°æ½®ç¨‹åº¦å¯ä»¥å–å‡å€¼ä¹Ÿå¯ä»¥ä¸è¦ã€‚èŠ‚å‡æ—¥åº”è¯¥æ˜¯è¿™ä¸ªæœˆæœ‰èŠ‚å‡æ—¥å°±æ˜¯1ï¼Œæ²¡æœ‰å°±æ˜¯0ï¼Œä¹Ÿå¯ä»¥æ±‚å’Œï¼Œçœ‹è¿™ä¸€ä¸ªæœˆæœ‰å‡ å¤©æ˜¯èŠ‚å‡æ—¥ã€‚å½“ç„¶å…¶ä»–å­—æ®µå¦‚ä½•æ“ä½œåº”è¯¥å…·ä½“çœ‹éœ€æ±‚ã€‚ def last_data(temp): return temp[-1] def is_festival(temp): if 1 in temp.values: return 1 return 0 df.resample(\"M\").agg({ \"å›½åº†\": is_festival, \"åŒåä¸€\": is_festival, \"åŒåäºŒ\": is_festival, \"å…ƒæ—¦\": is_festival, \"åº“å­˜\": last_data, \"å¹³å‡å”®ä»·\": \"mean\", \"æ ‡ä»·\": \"mean\", \"æŠ˜æ‰£\": \"mean\", \"é”€å”®é¢\": \"sum\", \"é”€é‡\": \"sum\" }) å¸¸è§çš„æ—¶é—´é¢‘ç‡ å­—æ®µ è¯´æ˜ Y å¹´ Q å­£åº¦ M æœˆ W å‘¨ D å¤© H å°æ—¶ æ›´å¤šé‡é‡‡æ ·æ–¹æ³•å¯ä»¥é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼šhttps://pandas.pydata.org/docs/reference/api/pandas.DataFrame.resample.html ","date":"2021-03-19","objectID":"/posts/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/:1:0","tags":["pandas","æ•°æ®å¤„ç†"],"title":"æ—¶é—´åºåˆ—æ•°æ®å¤„ç†","uri":"/posts/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"},{"categories":["æ•°æ®å¤„ç†"],"content":"è®¡ç®—æ—¶é—´å·® æœ‰ä¸‹é¢ä¸€ç»„æ•°æ® title,brand,buy_time,km,speedbox,displacement,es_price,new_price,city,year_type,level,suv,horsepower,fuel,length,width,height,drive å¤§ä¼— å®æ¥ 2014æ¬¾ 1.6L è‡ªåŠ¨æ—¶å°šå‹,ä¸€æ±½-å¤§ä¼—,2014-08,3.82,è‡ªåŠ¨,1.6L,8.0,13.0,åŒ—äº¬,2014æ¬¾,ç´§å‡‘å‹,0,105é©¬åŠ›,æ±½æ²¹,4523,1775,1467,å‰ç½®å‰é©± ç¦ç‰¹ ç¦ç¿æ–¯ 2015æ¬¾ 1.5L è‡ªåŠ¨æ—¶å°šå‹,é•¿å®‰ç¦ç‰¹,2015-12,2.35,è‡ªåŠ¨,1.5L,7.8,13.0,åŒ—äº¬,2015æ¬¾,ç´§å‡‘å‹,0,113é©¬åŠ›,æ±½æ²¹,4587,1825,1490,å‰ç½®å‰é©± å¤§ä¼— é€Ÿè…¾ 2012æ¬¾ 1.6L è‡ªåŠ¨èˆ’é€‚å‹,ä¸€æ±½-å¤§ä¼—,2012-05,6.67,è‡ªåŠ¨,1.6L,7.0,16.4,åŒ—äº¬,2012æ¬¾,ç´§å‡‘å‹,0,105é©¬åŠ›,æ±½æ²¹,4644,1778,1482,å‰ç½®å‰é©± å¥”é©°Cçº§ 2011æ¬¾ C 200 CGI æ—¶å°šå‹,åŒ—äº¬å¥”é©°,2013-01,11.83,è‡ªåŠ¨,1.8T,15.0,42.1,åŒ—äº¬,2011æ¬¾,ä¸­å‹,0,184é©¬åŠ›,æ±½æ²¹,4591,1770,1444,å‰ç½®åé©± å¤§ä¼— å¸•è¨ç‰¹ 2013æ¬¾ 2.0TSI DSGå¾¡å°Šç‰ˆ,ä¸Šæ±½å¤§ä¼—,2013-11,8.95,è‡ªåŠ¨,2.0T,13.0,27.7,åŒ—äº¬,2013æ¬¾,ä¸­å‹,0,200é©¬åŠ›,æ±½æ²¹,4870,1834,1472,å‰ç½®å‰é©± å“ˆå¼—H6 2011æ¬¾ 2.0L æ‰‹åŠ¨ä¸¤é©±ç²¾è‹±å‹,é•¿åŸæ±½è½¦,2012-11,5.17,æ‰‹åŠ¨,2.0L,4.5,11.5,åŒ—äº¬,2011æ¬¾,ç´§å‡‘å‹,1,133é©¬åŠ›,æ±½æ²¹,4640,1825,1690,å‰ç½®å‰é©± èµ·äºšK3 2013æ¬¾ 1.6L è‡ªåŠ¨GLS,ä¸œé£æ‚¦è¾¾èµ·äºš,2014-07,6.58,è‡ªåŠ¨,1.6L,7.0,13.5,åŒ—äº¬,2013æ¬¾,ç´§å‡‘å‹,0,128é©¬åŠ›,æ±½æ²¹,4600,1780,1445,å‰ç½®å‰é©± å¥”é©°Cçº§ 2011æ¬¾ C 200 CGI æ—¶å°šå‹,åŒ—äº¬å¥”é©°,2012-08,7.33,è‡ªåŠ¨,1.8T,16.0,42.1,åŒ—äº¬,2011æ¬¾,ä¸­å‹,0,184é©¬åŠ›,æ±½æ²¹,4591,1770,1444,å‰ç½®åé©± å¥”é©°Eçº§ 2015æ¬¾ æ”¹æ¬¾ E 260 L,åŒ—äº¬å¥”é©°,2016-01,10.36,è‡ªåŠ¨,2.0T,32.0,53.0,åŒ—äº¬,2015æ¬¾,ä¸­å¤§å‹,0,211é©¬åŠ›,æ±½æ²¹,5024,1854,1477,å‰ç½®åé©± æœ¬ç”° ç¼¤æ™º 2016æ¬¾ 1.8L CVTä¸¤é©±å…ˆé”‹å‹,å¹¿æ±½æœ¬ç”°,2016-08,0.87,è‡ªåŠ¨,1.8L,12.5,16.7,åŒ—äº¬,2016æ¬¾,å°å‹,1,136é©¬åŠ›,æ±½æ²¹,4294,1772,1605,å‰ç½®å‰é©± æˆ‘éœ€è¦è®¡ç®—æ¯æ¬¾æ±½è½¦åˆ°ä»Šå¹´å·²ç»ä¹°äº†å¤šå°‘å¹´ df = pd.read_csv(\"ershouche.csv\") df[\"buy_time\"] = pd.to_datetime(df[\"buy_time\"]) df[\"buy_time\"] å› ä¸ºè¿™ä¸ªæ—¶é—´æ˜¯æˆ‘ä»¬éœ€è¦æ‹¿æ¥è®¡ç®—çš„ï¼Œæ•´ç»„æ•°æ®ä¹Ÿä¸éœ€è¦æˆ‘ä»¬èšåˆï¼Œæ‰€ä»¥ä¸ç”¨å°†ç´¢å¼•è®¾ç½®ä¸ºæ—¶é—´ï¼Œpandasä¸­å·²ç»å°†æ—¶é—´æ ¼å¼åŒ–äº†ï¼Œè‡ªåŠ¨è¡¥ä¸Šäº†å¤© é¦–å…ˆæˆ‘ä»¬è¦è·å–åˆ°æ¯æ¡æ•°æ®å¯¹åº”çš„å¹´ä»½ df[\"buy_time\"].dt.year æˆ‘ä»¬å¯ä»¥é€šè¿‡æ—¶é—´åºåˆ—ç±»å‹çš„dtæ–¹æ³•è·å–åˆ°å¹´æœˆæ—¥ ç„¶åéœ€è¦è·å–å½“å‰çš„å¹´ä»½ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨2021ï¼Œä½†æ˜¯ä¸ºäº†ç¨‹åºåœ¨ä»»ä½•å¹´ä»½éƒ½å¤Ÿå‡†ç¡®å°±éœ€è¦è°ƒç”¨å‡½æ•°æ¥å®Œæˆ import datetime this_year = datetime.datetime.now().year ç„¶åç›´æ¥åšå·®å°±è¡Œï¼Œå› ä¸ºå¾—åˆ°çš„å¹´ä»½éƒ½æ˜¯æ•´æ•°ç±»å‹ this_year - df[\"buy_time\"].dt.year å¦‚æœæƒ³è¦è®¡ç®—åˆ°ç°åœ¨ä¹°äº†å¤šå°‘å¤©è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæ—¥æœŸç›´æ¥ç›¸å‡å³å¯ datetime.datetime.now() - df[\"buy_time\"] å¾—åˆ°çš„å¤©æ•°å¹¶ä¸èƒ½ç›´æ¥æ‹¿æ¥åˆ†æï¼Œéœ€è¦è½¬æ¢ä¸ºæ•°å€¼å‹ day_diff = datetime.datetime.now() - df[\"buy_time\"] day_diff.map(lambda x: x.days) ä½†æ˜¯æ—¶é—´å¤©æ•°å·®ä¼¼ä¹ä¸å¤ªå‡†ç¡®ï¼Œå› ä¸ºåŸæ•°æ®ä¸­åªç»™åˆ°äº†æœˆä»½ï¼Œç›´æ¥ç”¨å½“å‰å¤©æ•°è®¡ç®—æœˆä»½ä¼¼ä¹ä¸å¤ªå‡†ç¡®ï¼Œç”¨å¹´ä»½å·®ä¹˜ä»¥12å†åŠ ä¸Šå½“å‰çš„æœˆä»½å·®å³å¯ now = datetime.datetime.now() (now.year - df[\"buy_time\"].dt.year) * 12 + (now.month - df[\"buy_time\"].dt.month) å…¶ä»–çš„åœ¨pandasä¸­æ ¼å¼æ—¥æœŸæ—¶é—´ã€æ—¶é—´åºåˆ—æ’å€¼ç­‰ç­‰ç¬”è€…éƒ½é‡åˆ°çš„åœºæ™¯ä¸å¤šï¼Œç¬”è€…é‡åˆ°éœ€è¦æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´çš„åœºæ™¯ä¸ªäººè®¤ä¸ºæ˜¯å½“æ—¶åœ¨å¤„ç†æ•°æ®çš„æ—¶å€™æ²¡æœ‰æ“ä½œå¥½ï¼Œå¦‚æœç¬”è€…åç»­é‡åˆ°å…¶ä»–åœ¨å®é™…æ•°æ®å¤„ç†åœºæ™¯ä¸­ç”¨å¾ˆæ–¹ä¾¿çš„æ–¹æ³•å†è¿›è¡Œè¡¥å…… ","date":"2021-03-19","objectID":"/posts/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/:2:0","tags":["pandas","æ•°æ®å¤„ç†"],"title":"æ—¶é—´åºåˆ—æ•°æ®å¤„ç†","uri":"/posts/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"},{"categories":["æ•°æ®å¤„ç†"],"content":"æ•°æ®åˆ†ç»„èšåˆåœ¨æ•°æ®åˆ†æä¸­æ˜¯ç»å¸¸å‡ºç°çš„ä¸€ä¸ªé—®é¢˜ï¼Œåˆ†ç»„ä¹‹åå¾€å¾€ä¼´éšç€èšåˆï¼Œä½†å¶å°”åˆ†ç»„ä¹Ÿä¼šè¢«ç”¨æ¥åšæ•°æ®ç­›é€‰ï¼Œä½†æ˜¯é€šè¿‡åˆ†ç»„åšæ•°æ®ç­›é€‰çš„æ–¹æ³•è‚¯å®šä¸æ˜¯å¾ˆå¥½çš„ç­›é€‰æ–¹æ³• ","date":"2021-03-13","objectID":"/posts/pandas%E6%95%B0%E6%8D%AE%E8%81%9A%E5%90%88/:0:0","tags":["pandas","æ•°æ®å¤„ç†"],"title":"pandasæ•°æ®åˆ†ç»„èšåˆ","uri":"/posts/pandas%E6%95%B0%E6%8D%AE%E8%81%9A%E5%90%88/"},{"categories":["æ•°æ®å¤„ç†"],"content":"groupbyåˆ†ç»„ åœ¨pandasä¸­æˆ‘ä»¬é€šå¸¸æ“ä½œçš„éƒ½æ˜¯DataFrameå’ŒSeriesè¿›è¡Œæ•°æ®å¤„ç†ï¼Œä½†æ˜¯å¤§é‡çš„åœºæ™¯éƒ½æ˜¯åœ¨DataFrameä¸‹è¿›è¡Œçš„ï¼Œä¸è¿‡pandasä¸­ä¸ç®¡æ˜¯DataFrameè¿˜æ˜¯Serieséƒ½æ˜¯æœ‰èšåˆæ–¹æ³•çš„æˆ‘ä»¬å¯ä»¥é€šè¿‡groupbyæ–¹æ³•è¿›è¡Œåˆ†ç»„ import pandas as pd df = pd.DataFrame({ \"A\": [\"k1\", \"k2\", \"k1\", \"k3\", \"k2\"], \"B\": [1, 2, 3, 4, 5], \"C\": [6, 7, 8, 9, 10] }) åœ¨ä¸Šé¢çš„æ•°æ®ä¸­Aåˆ—æ˜¯æ¯ç»„æ•°æ®çš„ç¼–å·ï¼Œéœ€è¦é€šè¿‡Aåˆ—å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶éœ€è¦å°†ç¼–å·ç›¸åŒçš„æ•°æ®æ”¾åˆ°ä¸€èµ·ï¼Œå¦‚æœä½¿ç”¨ç­›é€‰çš„æ–¹æ³•è¿›è¡Œï¼Œé‚£ä¹ˆè¦æ“ä½œä¸‰æ¬¡ï¼Œå¹¶ä¸”è¿˜éœ€è¦äº‹å…ˆçŸ¥é“æœ‰å“ªäº›ä¸åŒçš„ç¼–å·ã€‚ è¿™æ ·çš„é—®é¢˜ç»å¸¸å‡ºç°åœ¨æ•°æ®åˆ†æå½“ä¸­ï¼Œæˆ‘ä»¬æ‹¿åˆ°çš„æ•°æ®é€šå¸¸å¹¶ä¸æ˜¯åªæœ‰ä¸€ä¸ªåˆ†ç»„ï¼Œå¯èƒ½å¤–é¢æœ‰ä¸€ä¸ªå¤§ç±»ï¼Œå¤§ç±»ä¸­åˆåŒ…å«å°ç±»ã€‚æ¯”å¦‚è¯´å¤§ç±»æ˜¯æ°´æœã€é¥®æ–™å¹²ç²®éƒ½æ˜¯å¤§ç±»ï¼Œæ°´æœä¸­åˆåŒ…å«éœ€è¦å‰Šçš®çš„æ°´æœå’Œä¸éœ€è¦å‰Šçš®çš„æ°´æœå·²ç»å¯ä»¥å‰Šçš®ä¹Ÿå¯ä»¥ä¸å‰Šçš®å°±åƒçš„æ°´æœï¼Œéœ€è¦å‰Šçš®çš„æ°´æœæœ‰èŠ’æœã€ç«é¾™æœç­‰ç­‰ å½“ç„¶è¿™æ˜¯å°†é—®é¢˜æ”¾åˆ°äº†ç”Ÿæ´»å½“ä¸­ï¼Œæˆ‘ä»¬ç”±æ­¤å®Œå…¨å¯ä»¥æ¨æ–­å½“æˆ‘ä»¬é‡åˆ°çœŸå®æ•°æ®åˆ†æé—®é¢˜çš„æ—¶å€™é—®é¢˜çš„å¤æ‚æ€§ï¼Œå½“ç„¶åœ¨æ¨¡å‹å»ºç«‹çš„è¿‡ç¨‹è¿™äº›æ•°æ®å¤„ç†é—®é¢˜é€šå¸¸åªæ˜¯ä¼šè€—è´¹ä¸€äº›æ—¶é—´å°±èƒ½è§£å†³ã€‚ å›åˆ°é—®é¢˜ä¸­ï¼Œä¸‹é¢çš„ä»£ç ä½¿ç”¨è¿‡æ•°æ®ç­›é€‰çš„æ–¹æ³•å°†k1ã€k2ã€k3ç­›é€‰å‡ºæ¥ group = [] for key in df[\"A\"].value_counts().index: group.append(df[df[\"A\"]==key]) è¿™ç§æ–¹æ³•æ— å¯åšéçš„å¢å¼ºäº†ç¨‹åºçš„é€šç”¨æ€§ï¼Œä½†æ˜¯æ“ä½œlistæ— ç–‘ä¼šå°†è€—æ—¶æå‡ å› æ­¤æˆ‘ä»¬è‚¯å®šéœ€è¦å€ŸåŠ©pandasä¸­çš„æ•°æ®ç»“æ„ group = df.groupby(\"A\") æ­¤æ—¶å¾—åˆ°çš„groupå°±æ˜¯ä¸€ä¸ªpandasä¸­çš„DataFrameGroupByå¯¹è±¡ï¼Œæœ‰è¿™ä¸ªå¯¹è±¡å…¶å®æˆ‘ä»¬å·²ç»å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥çš„å¤„ç†äº†ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡ä¸­åŒ…å«çš„ä¸œè¥¿å¾ˆæœ‰æ„æ€ for item in group: print(item) groupéå†å‡ºæ¥çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªtupleï¼Œæ¯ä¸€ä¸ªtupleä¸­åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯è¿™ä¸ªç»„çš„åˆ†ç»„ä¾æ®ï¼Œä¹Ÿå°±æ˜¯keyï¼Œç¬¬äºŒä¸ªå…ƒç´ å°±æ˜¯åˆ†ç»„å¾—åˆ°çš„ç»“æœï¼Œå…¶å®åˆ°è¿™é‡Œä»äº§ç”Ÿçš„ç»“æœæ¥çœ‹å°±å¾ˆæœ‰æ„æ€äº†ï¼Œåœ¨cookbookä¸€ä¹¦ä¸­çš„ç¬¬ä¸€ç« èŠ‚å°±æœ‰å…³äºdictåˆ†ç»„çš„å†…å®¹ï¼Œå¦‚æœæƒ³å¯¹pandasæœ‰æ›´æ·±å…¥çš„ç†è§£å¯ä»¥é€šè¿‡cookbookä¸­çš„ç›¸å…³å†…å®¹æ„Ÿå—ä¸€ä¸‹ ","date":"2021-03-13","objectID":"/posts/pandas%E6%95%B0%E6%8D%AE%E8%81%9A%E5%90%88/:1:0","tags":["pandas","æ•°æ®å¤„ç†"],"title":"pandasæ•°æ®åˆ†ç»„èšåˆ","uri":"/posts/pandas%E6%95%B0%E6%8D%AE%E8%81%9A%E5%90%88/"},{"categories":["æ•°æ®å¤„ç†"],"content":"èšåˆ é€šè¿‡ä¸Šé¢çš„ç¨‹åºå¾—åˆ°çš„åˆ†ç»„ç»“æœè‚¯å®šæ˜¯éœ€è¦é€šè¿‡èšåˆå‡½æ•°è¿ç®—çš„ï¼Œæ¯”å¦‚æ±‚å’Œã€å‡å€¼ group.mean() group.sum() æ³¨æ„ï¼šæ­¤æ—¶èšåˆåçš„è¡¨æ ¼çš„indexæ˜¯Aåˆ—ï¼Œå› æ­¤å¦‚æœéœ€è¦å­˜å‚¨çš„æ—¶å€™éœ€è¦ä¿ç•™indexï¼Œå…¶ä»–åˆå¹¶ç­‰æ“ä½œéœ€è¦æ³¨æ„index å½“å‰çš„èšåˆæ–¹æ³•å·²ç»èƒ½å¤Ÿå¤„ç†ä¸€äº›åŸºæœ¬æ•°æ®ï¼Œä½†æ˜¯åœ¨è¿›è¡Œæ•°æ®åˆ†æçš„æ—¶å€™å¾€å¾€æ•°æ®å½¢å¼å¹¶ä¸æ˜¯å•ä¸€çš„ï¼Œæœ‰ä¸€äº›è¿ç»­æ€§æ€§çš„æ•°å€¼å˜é‡æˆ‘ä»¬å¯èƒ½éœ€è¦è¿›è¡Œæ±‚å’Œæˆ–è€…å¹³å‡ï¼Œå¦‚æœé‡åˆ°åˆ†å˜é‡çš„æ—¶å€™å°±å¹³å‡ï¼ˆå…·ä½“æ–¹æ³•çœ‹æ¡ˆä¾‹ï¼‰ï¼Œä¸¤ç§ç±»å‹çš„æ•°å€¼å˜é‡åœ¨èšåˆçš„æ—¶å€™ä½¿ç”¨çš„èšåˆæ–¹æ³•å¯èƒ½ä¸ä¼šç›¸åŒï¼Œå› æ­¤è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦æ ¹æ®å­—æ®µæŒ‡å®šèšåˆå‡½æ•° import pandas as pd df2 = pd.DataFrame({ \"A\": [\"k1\", \"k2\", \"k1\", \"k3\", \"k2\"], \"B\": [1, 2, 3, 4, 5], \"C\": [6, 7, 8, 9, 10], \"D\": [1, 2, 1, 3, 2] }) ç°åœ¨çš„è¡¨æ ¼ä¸­æœ‰ä¸€ä¸ªåˆ†ç±»å­—æ®µDï¼ŒAå­—æ®µä¸­åŒä¸€ä¸ªç±»åˆ«çš„å­—æ®µç°åœ¨éœ€è¦æ±‚å’Œï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯ç±»åˆ«å€¼ä¸å˜Då­—æ®µéœ€è¦æ±‚å‡å€¼ï¼Œè¿™æ—¶å€™éœ€è¦ä½¿ç”¨aggæ–¹æ³• df2.groupby(\"A\").agg({\"B\": \"sum\", \"C\": \"sum\", \"D\": \"mean\"}) ä½¿ç”¨aggæ–¹æ³•å¯ä»¥ä½¿ç”¨å¤šä¸ªèšåˆå‡½æ•° df2.groupby(\"A\").agg({\"B\": [\"mean\", \"sum\"], \"C\": [\"mean\", \"sum\"], \"D\": \"mean\"}) å¦‚æœèšåˆå‡½æ•°æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ï¼Œä½¿ç”¨çš„æ—¶å€™ä¸éœ€è¦åŠ å¼•å· ","date":"2021-03-13","objectID":"/posts/pandas%E6%95%B0%E6%8D%AE%E8%81%9A%E5%90%88/:2:0","tags":["pandas","æ•°æ®å¤„ç†"],"title":"pandasæ•°æ®åˆ†ç»„èšåˆ","uri":"/posts/pandas%E6%95%B0%E6%8D%AE%E8%81%9A%E5%90%88/"},{"categories":["æ•°æ®å¤„ç†"],"content":"å½“æˆ‘ä»¬åœ¨åšæ•°æ®åˆ†ææˆ–è€…æ•°æ®æŒ–æ˜çš„æ—¶å€™éš¾å…ä¼šé‡åˆ°éœ€è¦åˆå¹¶å¤šä¸ªè¡¨æ ¼çš„æƒ…å†µï¼Œåœ¨pandasä¸­è¦è¿æ¥è¡¨æ ¼çš„å§¿åŠ¿éå¸¸ä¹‹å¤šï¼Œåˆé€‚çš„åœºæ™¯ä¸‹å…ˆæ‹©åˆé€‚çš„æ–¹æ¡ˆå°†åŠ å¿«æˆ‘ä»¬æ•°æ®å¤„ç†çš„è¿‡ç¨‹ã€‚ ä»¥ä¸‹æ¡ˆä¾‹å‡ä¸ºå®é™…æ•°æ®å¤„ç†åœºæ™¯ä¸­é‡åˆ°çš„é—®é¢˜ç®€åŒ–è€Œæ¥ã€‚ æ³¨æ„ï¼šåœ¨æ‰€æœ‰çš„æ•°æ®å¤„ç†æ–‡ç« ä¸­ï¼Œæˆ‘å¹¶ä¸ä¼šè®²è§£å‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼Œä¹Ÿä¸ä¼šæ·±å…¥è®²è§£å‡½æ•°çš„åŸç†ï¼Œå¦‚æœæƒ³äº†è§£è¯¥å‡½æ•°æ›´è¯¦ç»†çš„å†…å®¹å»ºè®®é˜…è¯»å®˜æ–¹æ–‡æ¡£ ","date":"2021-03-09","objectID":"/posts/pandas%E8%BF%9E%E6%8E%A5%E8%A1%A8%E6%A0%BC/:0:0","tags":["æ•°æ®å¤„ç†"],"title":"pandasåˆå¹¶è¡¨æ ¼ä¸ç´¢å¼•è®¾ç½®","uri":"/posts/pandas%E8%BF%9E%E6%8E%A5%E8%A1%A8%E6%A0%BC/"},{"categories":["æ•°æ®å¤„ç†"],"content":"merge åˆå¹¶ç»´åº¦ç›¸åŒçš„è¡¨ å‡è®¾æœ‰å¦‚ä¸‹ä¸¤ä¸ªè¡¨æ ¼df1å’Œdf2ï¼Œå…¶ä¸­Aåˆ—è¡¨ç¤ºä¸åŒçš„å­¦ç”Ÿï¼ŒBåˆ—å’ŒCåˆ—è¡¨ç¤ºæ”¹å­¦ç”Ÿå¯¹åº”çš„ç§‘ç›®çš„æˆç»©ï¼Œç°åœ¨éœ€è¦å°†ä¸¤ä¸ªè¡¨æ ¼è¿›è¡Œåˆå¹¶å¾—åˆ°æ¯ä½å­¦ç”Ÿçš„å¹³å‡æˆç»©ã€‚ import pandas as pd df1 = pd.DataFrame({ \"A\": [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"], \"B\": [56, 18, 67, 98, 66, 82] }) df2 = pd.DataFrame({ \"A\": [\"f\", \"d\", \"e\", \"c\", \"a\", \"b\"], \"C\": [78, 47, 90, 81, 46, 79] }) df1ã€df2æ•°æ®å¦‚ä¸‹ å› ä¸ºè¿™ä¸ªé—®é¢˜ä¸åªæ˜¯ä¸€ä¸ªç®€ç­”çš„å †å æˆ–ç»‘å®šï¼Œè¿™æ˜¯ä¸€ä¸ªåˆå¹¶æ’åºçš„è¿‡ç¨‹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨pandasä¸­çš„mergeå‡½æ•° pd.merge(df1, df2, on=\"A\").mean(axis=1) è®¡ç®—ç»“æœå¦‚ä¸‹ ç»“ç®—ç»“æœæ˜æ˜¾æ˜¯ä¸€ä¸ªSeriesï¼Œä½†æ˜¯é€šè¿‡ç¼©å½±æ¥æ‰¾å€¼å®åœ¨æ˜¯ä¸æ–¹ä¾¿ï¼Œæˆ‘å¸Œæœ›å¯ä»¥ç›´æ¥å‡ºç°äººåå¯¹åº”ç€æˆç»©çš„æ•°æ®å½¢å¼ å…ˆå°†ç»“æœçš„å€¼èµ‹ç»™ä¸€ä¸ªå˜é‡ s = pd.merge(df1, df2, on=\"A\").mean(axis=1) ç„¶åè®¾ç½®ç´¢å¼•çš„å€¼ s.index = df1['A'] é‚£ä¹ˆæˆ‘è¿˜æƒ³ç»™sè®¾ç½®ä¸€ä¸ªnameå› ä¸ºå¯èƒ½è¿˜éœ€è¦å’Œå…¶ä»–è¡¨çš„æ•°æ®è¿›è¡Œåˆå¹¶è¿›è¡Œè®¡ç®— s.name = \"å¹³å‡æˆç»©\" mergeå‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°howï¼ŒæŒ‡çš„æ˜¯åˆå¹¶(è¿æ¥)çš„æ–¹å¼ï¼šinner(å†…è¿æ¥)ï¼Œleft(å·¦å¤–è¿æ¥)ï¼Œright(å³å¤–è¿æ¥)ï¼Œouter(å…¨å¤–è¿æ¥)ï¼Œé»˜è®¤ä¸ºinnerã€‚ inneråªè¿”å›ä¸¤ä¸ªè¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è¡Œ leftè¿”å›åŒ…æ‹¬å·¦è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å’Œå³è¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è¡Œ outerå’Œinnerç›¸åï¼Œrightå’Œleftç›¸å åˆå¹¶ç»´åº¦ä¸åŒçš„è¡¨ å¦‚æœæˆ‘ä»¬éœ€è¦è®¡ç®—Bã€Cç§‘ç›®çš„å¹³å‡æˆç»©ï¼Œä½†æ˜¯å¦‚æœCç§‘ç›®æˆç»©å°äº60çš„åŒå­¦è®¡ç®—å¹³å‡æˆç»©çš„æ—¶å€™ä¸è€ƒè™‘Cç§‘ç›®çš„å¹³å‡æˆç»©ã€‚è¿™æ ·çš„æƒ…å†µä¸‹æˆ‘ä»¬æœ€å¥½æ˜¯ä¸è¦å…ˆè¿›è¡Œè¡¨çš„åˆå¹¶æ“ä½œï¼Œè™½ç„¶å¯ä»¥å…ˆå°†è¡¨åˆå¹¶åå†æŒ‰Cç§‘ç›®çš„æˆç»©è¿›è¡Œè®¡ç®—ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¤šå‡ºå¾ˆå¤šçš„Pythonä»£ç ï¼Œå› ä¸ºpandasæ˜¯Cå†™çš„Pythonåº“ï¼Œæ‰€ä»¥åœ¨æ“ä½œæ•°æ®çš„æ—¶å€™èƒ½ä¸ç”¨Pythonä¸­çš„è¯­æ³•å°±ä¸è¦ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå¯¹dfä¸­çš„æ•°æ®è¿›è¡Œç­›é€‰ï¼Œç„¶ååˆå¹¶åè®¡ç®—çš„å·¥ä½œpandasè‡ªå·±å°±å¸®æˆ‘ä»¬å®Œæˆäº† import pandas as pd df1 = pd.DataFrame({ \"A\": [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"], \"B\": [56, 18, 67, 98, 66, 82] }) df2 = pd.DataFrame({ \"A\": [\"f\", \"d\", \"e\", \"c\", \"a\", \"b\"], \"C\": [78, 47, 90, 81, 46, 79] }) df2 = df2[df2[\"C\"]\u003e60] df1ã€df2æ•°æ®å¦‚ä¸‹ pd.merge(df1, df2, on=\"A\") è¿æ¥ç»“æœå¦‚ä¸‹ å¾—åˆ°çš„ç»“æœç»´åº¦ä¸¢å¤±äº†ï¼Œè¿™ç§æƒ…å†µä¸‹ç›´æ¥ä½¿ç”¨mergeæ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºmergeé»˜è®¤è¿æ¥æ–¹å¼æ˜¯innerï¼Œæ‰€ä»¥åªèƒ½è¿”å›Aå­—æ®µç›¸ç­‰çš„è¡Œï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨left pd.merge(df1, df2, on=\"A\", how=\"left\") è¿æ¥ç»“æœå¦‚ä¸‹ ç„¶åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ±‚å‡å€¼äº†ï¼Œå› ä¸ºpandaså¤Ÿèªæ˜ï¼Œåœ¨è®¡ç®—å‡å€¼çš„æ—¶å€™å¦‚æœæœ‰å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼å°±ä¸ä¼šè¢«å¸¦å…¥è®¡ç®— pd.merge(df1, df2, on=\"A\", how=\"left\").mean(axis=1) è®¡ç®—ç»“æœå¦‚ä¸‹å›¾ ä»¥å¤šä¸ªåˆ—ä¸ºåŸºå‡†è¿›è¡Œåˆå¹¶ ä»¥å¤šä¸ªåˆ—ä¸ºåŸºå‡†è¿›è¡Œåˆå¹¶ï¼Œé‚£ä¹ˆåªéœ€è¦å°†mergeå‡½æ•°çš„onå‚æ•°å€¼æŒ‡å®šä¸ºåˆ—è¡¨ import pandas as pd df1 = pd.DataFrame({ \"A\": [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"], \"B\": [97, 98, 99, 100, 101, 102], \"C\": [56, 18, 67, 98, 66, 82] }) df2 = pd.DataFrame({ \"A\": [\"f\", \"d\", \"e\", \"c\", \"a\", \"d\"], \"B\": [102, 122, 101, 99, 97, 100], \"D\": [78, 47, 90, 81, 46, 79] }) ä»¥ä¸Šé¢çš„è¡¨æ ¼ä¸ºä¾‹ï¼Œè¦åˆå¹¶df1å’Œdf2ï¼Œå¹¶ä¸”è¦df1å’Œdf2ä¸­çš„Aã€Båˆ—èƒ½å¤Ÿå¯¹ä¸Šï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªåˆå¹¶ç­›é€‰æ•°æ®çš„æ“ä½œï¼Œå› æ­¤åˆå¹¶æ–¹å¼é»˜è®¤ä¸ºinnerå°±å¯ä»¥ pd.merge(df1, df2, on=[\"A\", \"B\"]) ","date":"2021-03-09","objectID":"/posts/pandas%E8%BF%9E%E6%8E%A5%E8%A1%A8%E6%A0%BC/:1:0","tags":["æ•°æ®å¤„ç†"],"title":"pandasåˆå¹¶è¡¨æ ¼ä¸ç´¢å¼•è®¾ç½®","uri":"/posts/pandas%E8%BF%9E%E6%8E%A5%E8%A1%A8%E6%A0%BC/"},{"categories":["æ•°æ®å¤„ç†"],"content":"concat çºµå‘åˆå¹¶ åœ¨https://mp.weixin.qq.com/s/A76oeBfjuUCNuVhQgAzSgAä¸€æ–‡ä¸­å°±æ¶‰åŠäº†è¡¨æ ¼çš„åˆå¹¶æ“ä½œï¼Œè¿™ç§åˆå¹¶ç›¸å½“äºå †å ï¼Œconcatå‡½æ•°ä¸­è¦è¿æ¥çš„è¡¨æ ¼éœ€è¦æ”¾åˆ°åºåˆ—ä¸­ æ”¹å˜ä¸€ä¸‹æ•°æ®ï¼Œç°åœ¨æ˜¯æƒ³è¦åƒdf1ä¸­è¡¥å……æ•°æ® import pandas as pd df1 = pd.DataFrame({ \"A\": [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"], \"B\": [56, 18, 67, 98, 66, 82] }) df2 = pd.DataFrame({ \"A\": [\"g\", \"h\", \"i\", \"j\", \"k\", \"l\"], \"B\": [78, 47, 90, 81, 46, 79] }) è¿™æ—¶å€™éœ€è¦å°†è¿™ä¸¤ä¸ªè¡¨è¿›è¡Œåˆå¹¶ï¼Œå¾ˆæ˜¾ç„¶æ˜¯è¿›è¡Œä¸Šä¸‹åˆå¹¶çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨concatå‡½æ•°è¿›è¡Œåˆå¹¶ pd.concat([df1, df2]) concatå‡½æ•°é»˜è®¤æ˜¯åœ¨çºµå‘è¿›è¡Œåˆå¹¶ï¼Œä½†æ˜¯åˆå¹¶ä¹‹åå‘ç°æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œindexçš„é¡ºåºæ˜¯ä¸å¯¹çš„ï¼Œåœ¨æˆ‘ä»¬çºµå‘åˆå¹¶è¡¨æ ¼çš„æ—¶å€™å¹¶ä¸ä¼šæœ‰ä»€ä¹ˆå½±å“ï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜åœ¨ä¸€äº›æƒ…å†µä¸‹æ˜¯éœ€è¦è§£å†³çš„ï¼Œå…³äºç´¢å¼•çš„é—®é¢˜åé¢ä¼šè®²è§£ã€‚ æ¨ªå‘åˆå¹¶ æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æŒ‰ç´¢å¼•æ¨ªå‘åˆå¹¶ä¸¤ä¸ªè¡¨æ ¼çš„æ•°æ® import pandas as pd df1 = pd.DataFrame({ \"A\": [1, 2, 3, 4, 5, 6], \"B\": [1, 2, 3, 4, 5, 6] }) df2 = pd.DataFrame({ \"C\": [1, 2, 3, 4, 5, 6], \"D\": [1, 2, 3, 4, 5, 6] }) pd.concat([df1, df2], axis=1) æ­¤æ—¶æ˜¯åœ¨ç´¢å¼•ç›¸åŒçš„æƒ…å†µï¼Œå¦‚æœç´¢å¼•ä¸åŒå‘¢ï¼Ÿæœ‰æ—¶å€™éœ€è¦åˆå¹¶çš„æ•°æ®æ˜¯æˆ‘ä»¬ç­›é€‰å‡ºæ¥çš„æ—¶å€™ï¼Œä¸åŒçš„è¡¨æ ¼çš„ç´¢å¼•å¤§æ¦‚ç‡å°±æ˜¯ä¸åŒçš„ import pandas as pd df1 = pd.DataFrame({ \"A\": [1, 2, 3, 4, 5, 6], \"B\": [1, 2, 3, 4, 5, 6] }) df2 = pd.DataFrame( { \"C\": [1, 2, 3, 4, 5, 6], \"D\": [1, 2, 3, 4, 5, 6] }, index=range(1, 7) ) å†æ¬¡ç”¨concatåˆå¹¶è¡¨æ ¼ pd.concat([df1, df2], axis=1) é‚£ä¹ˆè¿™æ—¶å€™è¡¨æ ¼å°±é”™ä½äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡ç½®ç´¢å¼•çš„æ–¹å¼è§£å†³ èµ‹å€¼indexå±æ€§ df2.index = range(df2.shape[0]) reset_indexæ–¹æ³•é‡ç½®ç´¢å¼•ã€‚reset_indexæ–¹æ³•æœ‰ä¸€ä¸ªdropå‚æ•°ï¼Œè¡¨ç¤ºæ˜¯å¦åˆ é™¤åŸç´¢å¼•ï¼Œé»˜è®¤ä¸ºFalseï¼Œå¦‚æœæ˜¯Falseé‚£ä¹ˆåŸæ¥çš„ç´¢å¼•å°†ä¼šå¹¶å…¥DataFrameä¸­ df2.reset_index() df2.reset_index(drop=True) ä¸Šé¢é‡ç½®ç´¢å¼•çš„ä¸¤ç§æ–¹æ³•å·²ç»èƒ½å¤Ÿè§£å†³ç»ç»å¤§éƒ¨åˆ†é—®é¢˜ï¼Œè‡³äºå…¶ä»–è®¾ç½®ç´¢å¼•çš„æ–¹æ³•å°±ä¸ä»‹ç»äº†ï¼Œç¬”è€…å¸¸ç”¨æ–¹æ³•å°±è¿™ä¸¤ç§ æ³¨æ„ï¼šconcatç”¨æ¥åˆå¹¶DataFrameå’ŒSerieséƒ½æ˜¯å¯ä»¥çš„ï¼Œè€Œä¸”åˆå¹¶å¯¹è±¡ä¸­çš„å…ƒç´ å¹¶ä¸æ˜¯åªèƒ½ä¸¤ä¸ªï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šè®²è§£ ","date":"2021-03-09","objectID":"/posts/pandas%E8%BF%9E%E6%8E%A5%E8%A1%A8%E6%A0%BC/:2:0","tags":["æ•°æ®å¤„ç†"],"title":"pandasåˆå¹¶è¡¨æ ¼ä¸ç´¢å¼•è®¾ç½®","uri":"/posts/pandas%E8%BF%9E%E6%8E%A5%E8%A1%A8%E6%A0%BC/"},{"categories":["æ•°æ®å¤„ç†"],"content":"append appendçš„ç”¨æ³•å°±æ¯”è¾ƒç®€å•äº†ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯ç”¨æ¥åƒåŸæœ‰çš„è¡¨ä¸­è¿½åŠ æ•°æ®çš„ï¼Œè¿™ä¸ªè¿½åŠ åªèƒ½æ˜¯çºµå‘çš„è¿½åŠ ï¼Œå› ä¸ºDataFrameçš„ç»“æ„å®šä½æ˜¯ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“çš„çºµå‘è¡¨æ ¼ï¼ˆå½“ç„¶æœ‰çš„æ—¶å€™ä¹Ÿä¼šæ¨ªå‘è¿›è¡Œæ“ä½œï¼‰ ä½¿ç”¨concatä¸­è¿½åŠ æˆç»©çš„æ¡ˆä¾‹ import pandas as pd df1 = pd.DataFrame({ \"A\": [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"], \"B\": [56, 18, 67, 98, 66, 82] }) df2 = pd.DataFrame({ \"A\": [\"g\", \"h\", \"i\", \"j\", \"k\", \"l\"], \"B\": [78, 47, 90, 81, 46, 79] }) df1.append(df2) å¦‚æœè¦é‡ç½®ç´¢å¼•ï¼Œå¯ä»¥ç›´æ¥è®¾ç½®ignore_indexå‚æ•°çš„å€¼ä¸ºTrue df1.append(df2, ignore_index=True) ","date":"2021-03-09","objectID":"/posts/pandas%E8%BF%9E%E6%8E%A5%E8%A1%A8%E6%A0%BC/:3:0","tags":["æ•°æ®å¤„ç†"],"title":"pandasåˆå¹¶è¡¨æ ¼ä¸ç´¢å¼•è®¾ç½®","uri":"/posts/pandas%E8%BF%9E%E6%8E%A5%E8%A1%A8%E6%A0%BC/"},{"categories":["æ•°æ®å¤„ç†"],"content":"æ€»ç»“ mergeï¼šéœ€è¦æŒ‰ç…§æŸåˆ—æˆ–è€…å¤šåˆ—è¿›è¡Œåˆå¹¶çš„æ—¶å€™ä½¿ç”¨ concatï¼šéœ€è¦ç®€å•ç²—æš´çš„è¿›è¡Œåˆå¹¶çš„æ—¶å€™ä½¿ç”¨ï¼ˆæœ€å¸¸ç”¨ï¼‰ appendï¼šåªé€‚ç”¨äºè¿½åŠ æ•°æ®çš„æ—¶å€™ä½¿ç”¨ï¼ˆä¸å¸¸ç”¨ï¼Œå¤§å¤šæ•°æƒ…å†µè¿˜æ˜¯ä½¿ç”¨concatï¼‰ ","date":"2021-03-09","objectID":"/posts/pandas%E8%BF%9E%E6%8E%A5%E8%A1%A8%E6%A0%BC/:4:0","tags":["æ•°æ®å¤„ç†"],"title":"pandasåˆå¹¶è¡¨æ ¼ä¸ç´¢å¼•è®¾ç½®","uri":"/posts/pandas%E8%BF%9E%E6%8E%A5%E8%A1%A8%E6%A0%BC/"},{"categories":["æ•°æ®å¤„ç†"],"content":"åœ¨å‚åŠ æŸæ¯”èµ›çš„æ—¶å€™é‡åˆ°è¿‡ç»™å‡ºçš„è®­ç»ƒæ•°æ®é›†å¤§å°è¾¾åˆ°è¿‘9ä¸ªGçš„csvæ–‡ä»¶ï¼Œä½†æ˜¯è¿™9ä¸ªGçš„æ•°æ®ä¸­çš„æ•°æ®ä¸ä¸€å®šéƒ½æ˜¯æˆ‘éœ€è¦çš„ï¼Œæˆ‘éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œç­›é€‰ã€‚è¿™æ ·çš„æƒ…å†µéœ€è¦å°†æ•°æ®éƒ½è¯»è¿›å†…å­˜ä¸­ï¼Œå¦‚æœå†…å­˜å¤Ÿå¤§ï¼Œé‚£ä¹ˆå®Œå…¨æ²¡é—®é¢˜ï¼ˆæˆ‘å°è¯•è¿‡è‡³å°‘è¦32Gï¼‰ï¼Œè¿™æ ·ä¸€æ¬¡æ€§å…¨é‡è¯»å–æ•°æ®é›†å¹¶ä¸”æ“çºµè¿™ä¸ªæ•°æ®é›†å¯¹ç”µè„‘çš„è¦æ±‚æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œé‚£ä¹ˆè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ†å—è¯»å–æ•°æ®ã€‚ ","date":"2021-03-09","objectID":"/posts/pandas%E8%AF%BB%E5%8F%96%E5%A4%A7%E6%96%87%E4%BB%B6%E7%AD%9B%E9%80%89%E6%95%B0%E6%8D%AE/:0:0","tags":["pandas","æ•°æ®å¤„ç†"],"title":"pandasè¯»å–å¤§æ–‡ä»¶ç­›é€‰æ•°æ®","uri":"/posts/pandas%E8%AF%BB%E5%8F%96%E5%A4%A7%E6%96%87%E4%BB%B6%E7%AD%9B%E9%80%89%E6%95%B0%E6%8D%AE/"},{"categories":["æ•°æ®å¤„ç†"],"content":"pythonä¸­åˆ†å—è¯»å–æ–‡ä»¶ æ•°æ®åˆ†å—è¯»å–æˆ–è®¸åœ¨pythonä¸­å¾ˆé™Œç”Ÿï¼Œå› ä¸ºç»å¤§å¤šæ•°äººè¯»å–æ•°æ®éƒ½æ˜¯é‡‡ç”¨çš„readæ–¹æ³•æˆ–readlineæ–¹æ³• file = open(file=\"filename\", mode=\"r\", encoding=\"utf8\") text = file.read() print(text) file.close() file = open(file=\"filename\", mode=\"r\", encoding=\"utf8\") while line:=file.readline(): print(line) file.close() åˆ°è¿™é‡Œæˆ‘ä»¬çš„é—®é¢˜åŸºæœ¬å°±è§£å†³äº†ï¼Œå¯ä»¥æŒ‰è¡Œè¯»å–9ä¸ªGçš„csvç„¶åå¯¹æ–‡ä»¶è¿›è¡Œç­›é€‰ï¼Œä½†æ˜¯è¿™æ ·çš„æ•ˆç‡åŠå…¶ä½ä¸‹ï¼Œå¯ä»¥è¯•æƒ³ä¸€ä¸‹9ä¸ªGçš„csvæœ‰å¤šå°‘è¡Œï¼Œpythonçš„é€Ÿåº¦æ˜¯å¾ˆæ…¢çš„ï¼Œå› æ­¤æˆ‘ä»¬ä¸€æ¬¡è¯»å–åº”è¯¥è¯»å–æ›´å¤šè¡Œã€‚ å¦‚æœæˆ‘éœ€è¦è¯»å–ä¸€ä¸ª1TBçš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åªæœ‰ä¸€è¡Œï¼Œä½†æ˜¯è¿™ä¸ªæ–‡ä»¶æ¯”è¾ƒç‰¹æ®Šï¼Œæ¯ä¸ªæ®µè½éƒ½æ˜¯ä»¥\u003c--!--\u003eä½œä¸ºçš„åˆ†éš”ç¬¦ï¼Œæˆ‘è¦å°†æ¯ä¸ªæ®µè½è¯»å–å‡ºæ¥ç„¶åå­˜å‚¨åˆ°æ•°æ®åº“ä¸­ è¿™æ—¶å€™readlineå°±ä¸èƒ½è§£å†³é—®é¢˜äº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨readæ–¹æ³•ï¼Œä¹Ÿè®¸æ˜¯pythoné€šå¸¸éƒ½æ˜¯è¢«å½“ä½œè„šæœ¬è¯­è¨€ï¼Œæ‰€ä»¥å¾ˆå°‘æœ‰äººä¼šå»å‘æ˜é‡Œé¢çš„ä¸€äº›é—®é¢˜ï¼Œå…¶å®åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œå¦‚Goã€Javaã€C++åœ¨å­¦ä¹ æ–‡ä»¶è¯»å–çš„æ—¶å€™éƒ½ä¼šè®²æŒ‰å­—èŠ‚è¯»å–ï¼Œä½†æ˜¯pythonåŸºæœ¬ä¸ä¼šï¼Œåœ¨pythonä¸­æˆ‘å¦‚æœè¦è¯»å–ä¸€ä¸ªæ–‡ä»¶çš„å‰5ä¸ªå­—ç¬¦ï¼ˆå¦‚æœè¦è¯»å–å‰5ä¸ªå­—èŠ‚é‚£ä¹ˆè¯»å–æ–¹å¼å°±ä¸ºrbï¼‰ï¼Œé‚£ä¹ˆåªéœ€è¦ç»™readæ–¹æ³•æŒ‡å®šsizeå°±è¡Œ ç°åœ¨å‡è®¾è¿™1TBçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œæ–‡ä»¶åä¸ºsource qwertyuiop\u003c--!--\u003easdfghjkl\u003c--!--\u003ezxcvbnm file = open(file=\"./source\", mode=\"r\", encoding=\"utf8\") t = file.read(5) print(t) file.close() è¿™æ ·å°±è¯»å–äº†å‰5ä¸ªå­—ç¬¦é‚£ä¹ˆå½“æˆ‘ä»¬æŒ‡å®šäº†sizeä¹‹åé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶å¯¹è±¡ä¸­å°±ä¼šå­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä½ç½®çš„ç±»ä¼¼äºæŒ‡é’ˆçš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶å¯¹è±¡ç†è§£ä¸ºä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå°±åƒreadlineä¸€æ ·ï¼Œåªä¸è¿‡æˆ‘ä»¬æ¯æ¬¡è¯»å–è¿™ä¸ªæ–‡ä»¶æ—¶æœ‰4è¡Œå˜ä¸ºäº†æˆ‘ä»¬æŒ‡å®šçš„å­—ç¬¦æ•°ã€‚ file = open(file=\"./source\", mode=\"r\", encoding=\"utf8\") while t := file.read(3): print(t) é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä¸€ç‚¹ä¸€ç‚¹çš„è¯»å–æ–‡ä»¶ï¼Œå°†è¯»å–åˆ°çš„å†…å®¹æ‹¼æ¥èµ·æ¥ï¼Œå¦‚åœ¨æ‹¼æ¥çš„å­—ç¬¦ä¸²ä¸­å‘ç°äº†\u003c--!--\u003eé‚£ä¹ˆå°±åšä¸€ä¸ªåˆ‡ç‰‡å°†å­—ç¬¦ä¸²è¿›è¡Œåˆ‡å‰² secret = \"\u003c--!--\u003e\" file = open(file=\"./source\", mode=\"r\", encoding=\"utf8\") buffer = \"\" while chunk := file.read(5): buffer += chunk postion = buffer.find(secret) if postion \u003e= 0: print(buffer[:postion]) buffer = buffer[postion+len(secret)] print(buffer) file.close() è‡³äºæœ€åçš„è¾“å‡ºæ˜¯å› ä¸ºæˆ‘ä»¬çš„æ–‡ä»¶è¯»åˆ°æœ€åä¹‹åå¦‚æœæ²¡æœ‰åˆ†éš”ç¬¦çš„è¯é‚£ä¹ˆæœ€åçš„å­—ç¬¦æ˜¯ä¸ä¼šåœ¨å¾ªç¯ä¸­è¢«è¾“å‡ºçš„ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†åˆ¤æ–­æ˜¯å¦è¯»åˆ°æ–‡ä»¶æœ«å°¾çš„é€»è¾‘ç§»åˆ°å¾ªç¯ä¸­ï¼Œé‚£ä¹ˆåœ¨å¾ªç¯ä¸­å°±èƒ½è¾“å‡ºäº†ã€‚ é‚£ä¹ˆåˆ°è¿™é‡Œæˆ‘ä»¬çš„é—®é¢˜åŸºæœ¬å°±å·²ç»è®²å®Œäº†ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå¾ªç¯å°è£…ä¸ºä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œé‚£ä¹ˆè¿™æ ·æˆ‘ä»¬æ“ä½œçš„ç©ºé—´å°†å˜å¾—æ›´å¤§ã€‚ def seek(file: IO, secret: str) -\u003e Iterator: buffer = \"\" while chunk := file.read(5): buffer += chunk postion = buffer.find(secret) if postion \u003e= 0: yield buffer[:postion] buffer = buffer[postion+len(secret)] yield buffer ","date":"2021-03-09","objectID":"/posts/pandas%E8%AF%BB%E5%8F%96%E5%A4%A7%E6%96%87%E4%BB%B6%E7%AD%9B%E9%80%89%E6%95%B0%E6%8D%AE/:1:0","tags":["pandas","æ•°æ®å¤„ç†"],"title":"pandasè¯»å–å¤§æ–‡ä»¶ç­›é€‰æ•°æ®","uri":"/posts/pandas%E8%AF%BB%E5%8F%96%E5%A4%A7%E6%96%87%E4%BB%B6%E7%AD%9B%E9%80%89%E6%95%B0%E6%8D%AE/"},{"categories":["æ•°æ®å¤„ç†"],"content":"pandasåˆ†å—è¯»å–æ–‡ä»¶ åœ¨pandasä¸­è¯»å–è¡¨ç±»æ–‡ä»¶çš„æ—¶å€™æœ‰ä¸€ä¸ªå‚æ•°chunksizeï¼Œåªè¦æŒ‡å®šäº†è¿™ä¸ªå‚æ•°çš„æ•°å€¼ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ç»“æœå°±ä¸æ˜¯ä¸€ä¸ªDataFrameå¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªTextFileReaderï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ import pandas as pd reader = pd.read_csv('è®­ç»ƒç”¨æ•°æ®.csv', chunksize=1000) for chunk in reader: print(chunk) ä¸Šé¢çš„ç¨‹åºä¸­æŒ‡å®šçš„chunksize=1000è¡¨ç¤º1æ¬¡è¯»å–1000è¡Œï¼Œé‚£ä¹ˆç¬¬äºŒæ¬¡è¯»çš„æ—¶å€™å°±æ˜¯ä»1001è¡Œå¼€å§‹è¯»å–ã€‚ é‚£ä¹ˆæˆ‘ä»¬å°±èƒ½å°†è¯»å–å‡ºçš„å†…å®¹åšä¸€ä¸ªç­›é€‰ï¼Œå¹¶ä¸”ç”±äºæ¯æ¬¡åªè¯»å–äº†100è¡Œï¼Œè¿™æ ·å ç”¨çš„è®¡ç®—æœºå†…å­˜å°†ä¼šè¢«æ§åˆ¶å¾—æ¯”è¾ƒå°ã€‚ è¿™é‡Œæˆ‘å°±ç®€åŒ–æˆ‘çš„å·¥ä½œè¿‡ç¨‹ï¼Œæˆ‘éœ€è¦çš„ç›®æ ‡æ•°æ®æ˜¯å­˜æ”¾åœ¨å¦å¤–ä¸€ä¸ªcsvä¸­çš„æŸä¸€ç±»åˆ—é‡Œï¼Œä½†æ˜¯æˆ‘å°±ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨æ¥è¿›è¡Œç­›é€‰ import pandas as pd reader = pd.read_csv('è®­ç»ƒç”¨æ•°æ®.csv', chunksize=1000) df = pd.DataFrame() t = list(range(1, 2000, 7)) for chunk in reader: chunk = chunk[chunk[\"å°åŒºç¼–å·\"].isin(t)] df = pd.concat([df, chunk], axis=0) é‚£ä¹ˆè¿™é‡Œå°åŒºç¼–å·æ­£å¥½æ˜¯æˆ‘ç”Ÿæˆçš„tä¸­çš„æ•°å€¼ ","date":"2021-03-09","objectID":"/posts/pandas%E8%AF%BB%E5%8F%96%E5%A4%A7%E6%96%87%E4%BB%B6%E7%AD%9B%E9%80%89%E6%95%B0%E6%8D%AE/:2:0","tags":["pandas","æ•°æ®å¤„ç†"],"title":"pandasè¯»å–å¤§æ–‡ä»¶ç­›é€‰æ•°æ®","uri":"/posts/pandas%E8%AF%BB%E5%8F%96%E5%A4%A7%E6%96%87%E4%BB%B6%E7%AD%9B%E9%80%89%E6%95%B0%E6%8D%AE/"},{"categories":["Go"],"content":" gRPCæ˜¯å¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸­è¿è¡Œçš„ç°ä»£å¼€æºé«˜æ€§èƒ½RPCæ¡†æ¶ã€‚ å®ƒå¯ä»¥é€šè¿‡å¯æ’æ‹”çš„æ”¯æŒæ¥æœ‰æ•ˆåœ°è¿æ¥æ•°æ®ä¸­å¿ƒå†…å’Œè·¨æ•°æ®ä¸­å¿ƒçš„æœåŠ¡ï¼Œä»¥å®ç°è´Ÿè½½å¹³è¡¡ï¼Œè·Ÿè¸ªï¼Œè¿è¡ŒçŠ¶å†µæ£€æŸ¥å’Œèº«ä»½éªŒè¯ã€‚ å®ƒä¹Ÿé€‚ç”¨äºåˆ†å¸ƒå¼è®¡ç®—çš„æœ€åä¸€è‹±é‡Œï¼Œä»¥å°†è®¾å¤‡ï¼Œç§»åŠ¨åº”ç”¨ç¨‹åºå’Œæµè§ˆå™¨è¿æ¥åˆ°åç«¯æœåŠ¡ã€‚ ","date":"2021-02-28","objectID":"/posts/grpc%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8/:0:0","tags":["rpc","Go"],"title":"grpcæ¡†æ¶ä½¿ç”¨","uri":"/posts/grpc%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8/"},{"categories":["Go"],"content":"Protocol Buffers Protocol Bufferæ˜¯ä¸€ç§æ”¯æŒå¤šå¹³å°ã€å¤šè¯­è¨€ã€å¯æ‰©å±•çš„çš„æ•°æ®åºåˆ—åŒ–æœºåˆ¶ï¼Œç›¸è¾ƒäºXMLæ¥è¯´ï¼Œprotobufæ›´å°æ›´å¿«æ›´ç®€å•ï¼Œæ”¯æŒè‡ªå®šä¹‰çš„æ•°æ®ç»“æ„ï¼Œç”¨protobuç¼–è¯‘å™¨ç”Ÿæˆç‰¹å®šè¯­è¨€çš„æºä»£ç ï¼Œå¦‚C++ã€Javaã€Pythonï¼Œç›®å‰protoBufå¯¹ä¸»æµçš„ç¼–ç¨‹è¯­è¨€éƒ½æä¾›äº†æ”¯æŒ,éå¸¸æ–¹ä¾¿çš„è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚ å®‰è£… ä¸‹è½½ç¼–è¯‘å™¨https://github.com/protocolbuffers/protobuf/releases ç„¶åå°†ç¼–è¯‘å™¨æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ å®šä¹‰ä¼ è¾“æ•°æ® syntax = \"proto3\"; package messages; message DataRequest { string id = 1; } message DataPesponse { string data = 1; } service Greeter { rpc SayHello (DataRequest) returns (DataPesponse); } ç¼–è¯‘protoæ–‡ä»¶","date":"2021-02-28","objectID":"/posts/grpc%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8/:1:0","tags":["rpc","Go"],"title":"grpcæ¡†æ¶ä½¿ç”¨","uri":"/posts/grpc%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8/"},{"categories":["Go"],"content":"åœ¨ä¼ ç»Ÿçš„WebæœåŠ¡ä¸­ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæœåŠ¡å™¨å®Œæˆä¸€å¥—æˆ–å¤šå¥—éƒ¨ç½²æ–¹æ¡ˆï¼Œä½†æ˜¯éšç€ç”¨æˆ·çš„å¿«é€Ÿå¢é•¿ï¼Œä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„æœåŠ¡è¦å®Œæˆçš„å·¥ä½œé‡è¶Šæ¥è¶Šå¤§è€Œä¸”ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œå°±ç®—ä½¿ç”¨å¤šçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯å› ä¸ºä¸šåŠ¡é€»è¾‘çš„å¤æ‚æ€§å¯¼è‡´çº¿ç¨‹è¿›è¡Œç­‰å¾…çš„æ—¶é—´å˜å¾—å¾ˆé•¿ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±éœ€è¦å¯¹ä¸šåŠ¡è¿›è¡Œæ‹†åˆ†ï¼Œå°†å¤æ‚çš„ä¸šåŠ¡æ‹†åˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å°ä¸šåŠ¡ã€‚æ¯”å¦‚å¤§å¤šæ•°ç”¨æˆ·å¯¹ç½‘ç«™é¦–é¡µå‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœæ‰€æœ‰ä¸šåŠ¡é€»è¾‘éƒ½åœ¨ä¸€ä¸ªæœåŠ¡ä¸Šï¼Œä¸è€ƒè™‘å…¶ä»–é¡µé¢çš„ä¸šåŠ¡é€»è¾‘ï¼Œå°±å•çº¯è¯·æ±‚é¦–é¡µçš„å‹åŠ›éƒ½æ˜¯å·¨å¤§çš„ï¼Œè€Œä¸”ä¸€æ—¦ä¸šåŠ¡å¤æ‚ï¼Œæƒ³è¦åœ¨åç«¯å®ç°å¹¶å‘éš¾åº¦æ˜¯ååˆ†å¤§çš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ªä¸ªä¸šåŠ¡è¿›è¡Œè§£è€¦å‡ºæ¥ï¼Œé‚£ä¹ˆä¸šåŠ¡é€»è¾‘å°†å˜å¾—ç®€å•ç®€å•æ¸…æ™°ï¼ŒåŒæ—¶ç›¸å¯¹åº”çš„ä¸€äº›æœåŠ¡å°†èƒ½å¤Ÿå®¹æ˜“çš„å¹¶å‘èµ·æ¥ éšç€å¾®æœåŠ¡æ¶æ„çš„å…´èµ·ï¼ŒRPCçš„åº”ç”¨è¶Šæ¥è¶Šå¹¿æ³› ä»€ä¹ˆæ˜¯RPC åœ¨åˆ†å¸ƒå¼è®¡ç®—ï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆè‹±è¯­ï¼šRemote Procedure Callï¼Œç¼©å†™ä¸º RPCï¼‰æ˜¯ä¸€ä¸ªè®¡ç®—æœºé€šä¿¡åè®®ã€‚è¯¥åè®®å…è®¸è¿è¡Œäºä¸€å°è®¡ç®—æœºçš„ç¨‹åºè°ƒç”¨å¦ä¸€ä¸ªåœ°å€ç©ºé—´ï¼ˆé€šå¸¸ä¸ºä¸€ä¸ªå¼€æ”¾ç½‘ç»œçš„ä¸€å°è®¡ç®—æœºï¼‰çš„å­ç¨‹åºï¼Œè€Œç¨‹åºå‘˜å°±åƒè°ƒç”¨æœ¬åœ°ç¨‹åºä¸€æ ·ï¼Œæ— éœ€é¢å¤–åœ°ä¸ºè¿™ä¸ªäº¤äº’ä½œç”¨ç¼–ç¨‹ï¼ˆæ— éœ€å…³æ³¨ç»†èŠ‚ï¼‰ã€‚RPCæ˜¯ä¸€ç§æœåŠ¡å™¨-å®¢æˆ·ç«¯ï¼ˆClient/Serverï¼‰æ¨¡å¼ï¼Œç»å…¸å®ç°æ˜¯ä¸€ä¸ªé€šè¿‡å‘é€è¯·æ±‚-æ¥å—å›åº”è¿›è¡Œä¿¡æ¯äº¤äº’çš„ç³»ç»Ÿï¼Œä¸rpcç›¸å¯¹åº”çš„å¹¶ä¸æ˜¯ä¼ ç»Ÿçš„webæœåŠ¡ï¼Œè€Œæ˜¯æœ¬åœ°è°ƒç”¨ï¼ˆå¦‚æœ¬åœ°å‡½æ•°è°ƒç”¨ï¼‰ã€‚ å°†æœ¬åœ°è°ƒç”¨è½¬æ¢ä¸ºè¿œç¨‹è¿‡ç¨‹è°ƒç”¨å°†ä¼šé¢ä¸´å„ç§é—®é¢˜ å› ä¸ºRPCæ˜¯è®¡ç®—æœºé€šä¿¡åè®®ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ä»»ä½•è¯­è¨€ç¼–å†™æœåŠ¡ç«¯æˆ–è€…å®¢æˆ·ç«¯ï¼Œåªè¦åè®®èƒ½å¤Ÿå¯¹ä¸Šï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å°±èƒ½è¯·æ±‚åˆ°ç›¸åº”çš„å†…å®¹ã€‚ ","date":"2021-02-26","objectID":"/posts/go-rpc/:0:0","tags":["rpc","Go"],"title":"go-rpc","uri":"/posts/go-rpc/"},{"categories":["Go"],"content":"æœ¬åœ°è¿‡ç¨‹è°ƒç”¨ å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶ååœ¨mainå‡½æ•°ä¸­ç›´æ¥è°ƒç”¨ func add(a, b int) int { total := a + b return rotal } func main() { total = add(1, 2) fmt.Plintln(total) } è°ƒç”¨è¿‡ç¨‹ï¼š å°†1å’Œ2å‹å…¥addå‡½æ•°çš„æ ˆ è¿›å…¥addå‡½æ•°ï¼Œä»æ ˆä¸­å–å‡º1å’Œ2çš„å€¼åˆ†åˆ«èµ‹å€¼ç»™aå’Œb æ‰§è¡Œa+bå°†ç»“æœèµ‹å€¼ç»™å±€éƒ¨å˜é‡totalå¹¶å‹æ ˆ å°†æ ˆä¸­çš„å€¼å–å‡ºæ¥èµ‹å€¼ç»™total ","date":"2021-02-26","objectID":"/posts/go-rpc/:1:0","tags":["rpc","Go"],"title":"go-rpc","uri":"/posts/go-rpc/"},{"categories":["Go"],"content":"è¿œç¨‹è°ƒç”¨è¿‡ç¨‹é¢ä¸´çš„é—®é¢˜ åœ¨è¿œç¨‹è°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œçš„å‡½æ•°ä½“æ˜¯åœ¨è¿œç¨‹çš„æœºå™¨ä¸Šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°åœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­æ‰§è¡Œ Callçš„idæ˜ å°„ï¼šé¦–å…ˆå®¢æˆ·ç«¯éœ€è¦å‘Šè¯‰æœåŠ¡å™¨ï¼Œéœ€è¦è°ƒç”¨çš„å‡½æ•°ï¼Œè¿™é‡Œå‡½æ•°å’Œè¿›ç¨‹IDå­˜åœ¨ä¸€ä¸ªæ˜ å°„ï¼Œå®¢æˆ·ç«¯è¿œç¨‹è°ƒç”¨æ—¶ï¼Œéœ€è¦æŸ¥ä¸€ä¸‹å‡½æ•°ï¼Œæ‰¾åˆ°å¯¹åº”çš„IDï¼Œç„¶åæ‰§è¡Œå‡½æ•°çš„ä»£ç  åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼šå®¢æˆ·ç«¯éœ€è¦æŠŠæœ¬åœ°å‚æ•°ä¼ ç»™è¿œç¨‹å‡½æ•°ï¼Œæœ¬åœ°è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼Œç›´æ¥å‹æ ˆå³å¯ï¼Œä½†æ˜¯åœ¨è¿œç¨‹è°ƒç”¨è¿‡ç¨‹ä¸­ä¸åœ¨åŒä¸€ä¸ªå†…å­˜é‡Œï¼Œæ— æ³•ç›´æ¥ä¼ é€’å‡½æ•°çš„å‚æ•°ï¼Œå› æ­¤éœ€è¦å®¢æˆ·ç«¯æŠŠå‚æ•°è½¬æ¢æˆå­—èŠ‚æµï¼Œä¼ ç»™æœåŠ¡ç«¯ï¼Œç„¶åæœåŠ¡ç«¯å°†å­—èŠ‚æµè½¬æ¢æˆè‡ªèº«èƒ½è¯»å–çš„æ ¼å¼ï¼Œæ˜¯ä¸€ä¸ªåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ã€‚ ç½‘ç»œä¼ è¾“ï¼šè¿œç¨‹è°ƒç”¨å¾€å¾€æ˜¯ç”¨åœ¨ç½‘ç»œä¸Šï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ—¶é€šè¿‡ç½‘ç»œé“¾æ¥çš„ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½éœ€è¦é€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œå› æ­¤å°±éœ€è¦æœ‰ä¸€ä¸ªç½‘ç»œä¼ è¾“å±‚ã€‚ç½‘ç»œä¼ è¾“å±‚éœ€è¦æŠŠCall idå’Œåºåˆ—åŒ–åçš„å‚æ•°å­—èŠ‚æµä¼ ç»™æœåŠ¡ç«¯ï¼Œç„¶åå†æŠŠåºåˆ—åŒ–åçš„è°ƒç”¨ç»“æœä¼ å›å®¢æˆ·ç«¯ã€‚åªè¦å®Œæˆè¿™ä¸¤è€…éƒ½å¯ä»¥ä½œä¸ºä¼ è¾“å±‚ä½¿ç”¨ã€‚ ","date":"2021-02-26","objectID":"/posts/go-rpc/:2:0","tags":["rpc","Go"],"title":"go-rpc","uri":"/posts/go-rpc/"},{"categories":["Go"],"content":"rpcå¼€å‘çš„è¦ç´  rpcå¼€å‘çš„å››å¤§è¦ç´  RPCæŠ€æœ¯åœ¨æ¶æ„è®¾è®¡ä¸Šæœ‰å››éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šå®¢æˆ·ç«¯ã€å®¢æˆ·ç«¯å­˜æ ¹ã€æœåŠ¡ç«¯ã€æœåŠ¡ç«¯å­˜æ ¹ **å®¢æˆ·ç«¯(Client)ï¼š**æœåŠ¡è°ƒç”¨å‘èµ·æ–¹ï¼Œä¹Ÿç§°ä¸ºæœåŠ¡æ¶ˆè´¹è€…ã€‚ **å®¢æˆ·ç«¯å­˜æ ¹(Client Stub)ï¼š**è¯¥ç¨‹åºè¿è¡Œåœ¨å®¢æˆ·ç«¯æ‰€åœ¨çš„è®¡ç®—æœºæœºå™¨ä¸Šï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨è¦è°ƒç”¨çš„æœåŠ¡å™¨çš„åœ°å€ï¼Œå¦å¤–ï¼Œè¯¥ç¨‹åºè¿˜è´Ÿè´£å°†å®¢æˆ·ç«¯è¯·æ±‚è¿œç«¯æœåŠ¡å™¨ç¨‹åºçš„æ•°æ®ä¿¡æ¯æ‰“åŒ…æˆæ•°æ®åŒ…ï¼Œé€šè¿‡ç½‘ç»œå‘é€ç»™æœåŠ¡ç«¯Stubç¨‹åºï¼›å…¶æ¬¡ï¼Œè¿˜è¦æ¥æ”¶æœåŠ¡ç«¯Stubç¨‹åºå‘é€çš„è°ƒç”¨ç»“æœæ•°æ®åŒ…ï¼Œå¹¶è§£æè¿”å›ç»™å®¢æˆ·ç«¯ã€‚ **æœåŠ¡ç«¯(Server)ï¼š**è¿œç«¯çš„è®¡ç®—æœºæœºå™¨ä¸Šè¿è¡Œçš„ç¨‹åºï¼Œå…¶ä¸­æœ‰å®¢æˆ·ç«¯è¦è°ƒç”¨çš„æ–¹æ³•ã€‚ **æœåŠ¡ç«¯å­˜æ ¹(Server Stub)ï¼š**æ¥æ”¶å®¢æˆ·Stubç¨‹åºé€šè¿‡ç½‘ç»œå‘é€çš„è¯·æ±‚æ¶ˆæ¯æ•°æ®åŒ…ï¼Œå¹¶è°ƒç”¨æœåŠ¡ç«¯ä¸­çœŸæ­£çš„ç¨‹åºåŠŸèƒ½æ–¹æ³•ï¼Œå®ŒæˆåŠŸèƒ½è°ƒç”¨ï¼›å…¶æ¬¡ï¼Œå°†æœåŠ¡ç«¯æ‰§è¡Œè°ƒç”¨çš„ç»“æœè¿›è¡Œæ•°æ®å¤„ç†æ‰“åŒ…å‘é€ç»™å®¢æˆ·ç«¯Stubç¨‹åºã€‚ å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ç½‘ç»œä¸­çš„ä»»æ„ä¸¤å°è®¡ç®—æœºä¸Šå®ç°è¿œç¨‹è°ƒç”¨è¿‡ç¨‹ï¼Œè¦è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œå¦‚ï¼š ä¸¤å°ç‰©ç†æœºå™¨åœ¨ç½‘ç»œä¸­è¦å»ºç«‹ç¨³å®šå¯é çš„é€šä¿¡è¿æ¥ã€‚ ä¸¤å°æœåŠ¡å™¨çš„é€šä¿¡åè®®çš„å®šä¹‰é—®é¢˜ï¼Œå³ä¸¤å°æœåŠ¡å™¨ä¸Šçš„ç¨‹åºå¦‚ä½•è¯†åˆ«å¯¹æ–¹çš„è¯·æ±‚å’Œè¿”å›ç»“æœã€‚ä¹Ÿå°±æ˜¯è¯´ä¸¤å°è®¡ç®—æœºå¿…é¡»éƒ½èƒ½å¤Ÿè¯†åˆ«å¯¹æ–¹å‘æ¥çš„ä¿¡æ¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¯†åˆ«å‡ºå…¶ä¸­çš„è¯·æ±‚å«ä¹‰å’Œè¿”å›å«ä¹‰ï¼Œç„¶åæ‰èƒ½è¿›è¡Œå¤„ç†ã€‚è¿™å…¶å®å°±æ˜¯é€šä¿¡åè®®æ‰€è¦å®Œæˆçš„å·¥ä½œ åœ¨ä¸Šè¿°å›¾ä¸­ï¼Œé€šè¿‡1-10çš„æ­¥éª¤å›¾è§£çš„å½¢å¼ï¼Œè¯´æ˜äº†rpcæ¯ä¸€æ­¥çš„è°ƒç”¨è¿‡ç¨‹ã€‚å…·ä½“æè¿°ä¸ºï¼š 1ã€å®¢æˆ·ç«¯æƒ³è¦å‘èµ·ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œé¦–å…ˆé€šè¿‡è°ƒç”¨æœ¬åœ°å®¢æˆ·ç«¯Stubç¨‹åºçš„æ–¹å¼è°ƒç”¨æƒ³è¦ä½¿ç”¨çš„åŠŸèƒ½æ–¹æ³•åï¼› 2ã€å®¢æˆ·ç«¯Stubç¨‹åºæ¥æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„åŠŸèƒ½è°ƒç”¨è¯·æ±‚ï¼Œå°†å®¢æˆ·ç«¯è¯·æ±‚è°ƒç”¨çš„æ–¹æ³•åï¼Œæºå¸¦çš„å‚æ•°ç­‰ä¿¡æ¯åšåºåˆ—åŒ–æ“ä½œï¼Œå¹¶æ‰“åŒ…æˆæ•°æ®åŒ…ã€‚ 3ã€å®¢æˆ·ç«¯StubæŸ¥æ‰¾åˆ°è¿œç¨‹æœåŠ¡å™¨ç¨‹åºçš„IPåœ°å€ï¼Œè°ƒç”¨Socketé€šä¿¡åè®®ï¼Œé€šè¿‡ç½‘ç»œå‘é€ç»™æœåŠ¡ç«¯ã€‚ 4ã€æœåŠ¡ç«¯Stubç¨‹åºæ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„æ•°æ®åŒ…ä¿¡æ¯ï¼Œå¹¶é€šè¿‡çº¦å®šå¥½çš„åè®®å°†æ•°æ®è¿›è¡Œååºåˆ—åŒ–ï¼Œå¾—åˆ°è¯·æ±‚çš„æ–¹æ³•åå’Œè¯·æ±‚å‚æ•°ç­‰ä¿¡æ¯ã€‚ 5ã€æœåŠ¡ç«¯Stubç¨‹åºå‡†å¤‡ç›¸å…³æ•°æ®ï¼Œè°ƒç”¨æœ¬åœ°Serverå¯¹åº”çš„åŠŸèƒ½æ–¹æ³•è¿›è¡Œï¼Œå¹¶ä¼ å…¥ç›¸åº”çš„å‚æ•°ï¼Œè¿›è¡Œä¸šåŠ¡å¤„ç†ã€‚ 6ã€æœåŠ¡ç«¯ç¨‹åºæ ¹æ®å·²æœ‰ä¸šåŠ¡é€»è¾‘æ‰§è¡Œè°ƒç”¨è¿‡ç¨‹ï¼Œå¾…ä¸šåŠ¡æ‰§è¡Œç»“æŸï¼Œå°†æ‰§è¡Œç»“æœè¿”å›ç»™æœåŠ¡ç«¯Stubç¨‹åºã€‚ 7ã€æœåŠ¡ç«¯Stubç¨‹åºå°†ç¨‹åºè°ƒç”¨ç»“æœæŒ‰ç…§çº¦å®šçš„åè®®è¿›è¡Œåºåˆ—åŒ–ã€‚ 8ã€æœåŠ¡ç«¯é€šè¿‡ç½‘ç»œå°†æ•°æ®å‘é€å›å®¢æˆ·ç«¯ã€‚ 9ã€å®¢æˆ·ç«¯Stubç¨‹åºæ¥æ”¶åˆ°æœåŠ¡ç«¯Stubå‘é€çš„è¿”å›æ•°æ®ï¼Œ**å¯¹æ•°æ®è¿›è¡Œååºåˆ—åŒ–æ“ä½œï¼Œ**å¹¶å°†è°ƒç”¨è¿”å›çš„æ•°æ®ä¼ é€’ç»™å®¢æˆ·ç«¯è¯·æ±‚å‘èµ·è€…ã€‚ 10ã€å®¢æˆ·ç«¯è¯·æ±‚å‘èµ·è€…å¾—åˆ°è°ƒç”¨ç»“æœã€‚ Goå®ç°ä¸€ä¸ªç®€å•çš„rpc serverç«¯ type HelloService struct{} func (s *HelloService) Hello(request string, reply *string) error { *reply = \"Hello \" + request return nil } func main() { // åˆ›å»ºä¸€ä¸ªserver listener, err := net.Listen(\"tcp\", \":9988\") if err != nil { panic(err) } //æ³¨å†ŒæœåŠ¡ err = rpc.RegisterName(\"HelloService\", \u0026HelloService{}) if err != nil { panic(err) } //å¯åŠ¨æœåŠ¡ conn, err := listener.Accept() if err != nil { panic(err) } rpc.ServeConn(conn) } ä¸Šé¢çš„ç¨‹åºä¸­å®Œæˆäº†ä¸€ä¸ªç®€å•çš„serverç«¯ï¼Œé¦–å…ˆå»ºç«‹ä¸€ä¸ªtcpæœåŠ¡ã€‚ç„¶åé€šè¿‡goè¯­è¨€ä¸­è‡ªå¸¦çš„rpcåº“å®ŒæˆæœåŠ¡çš„æ³¨å†Œï¼Œåœ¨æœåŠ¡æ³¨å†Œçš„æ—¶å€™ä¼ é€’ä¸€ä¸ªæœåŠ¡åï¼Œè¿™ä¸ªæœåŠ¡åå¯ä»¥æ˜¯ä»»æ„åå­—ï¼Œä½†æ˜¯åœ¨å¼€å‘æ—¶ä¸€èˆ¬ä½¿ç”¨æä¾›æœåŠ¡çš„ç»“æ„ä½“çš„åå­—ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ªç»“æ„ä½“çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å’Œè¿™ä¸ªæœåŠ¡æ˜å°±è¿›è¡Œäº†ä¸€ä¸ªæ†ç»‘ã€‚æœ€åtcpæœåŠ¡è¿›è¡Œç›‘å¬ï¼Œå°†æ”¶åˆ°çš„è¿æ¥äº¤ç»™rpcæ¥å¤„ç†ã€‚ clientç«¯ func main() { // æ‹¨å· conn, err := rpc.Dial(\"tcp\", \":9988\") if err != nil { panic(err) } reply := new(string) // è°ƒç”¨ err = conn.Call(\"HelloService.Hello\", \"pujic\", reply) if err != nil { panic(err) } fmt.Printf(\"%s\", *reply) } ä¸Šé¢çš„ç¨‹åºä¸­é¦–å…ˆé€šè¿‡rpcåˆ›å»ºäº†ä¸€ä¸ªclientå¯¹è±¡ã€‚ç„¶åé€šè¿‡clientå¯¹è±¡è¿›è¡Œæ‹¨å·ï¼ŒCallæ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯è¦è°ƒç”¨çš„æœåŠ¡åå’Œæ–¹æ³•ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯serverç«¯ä¸­æ”¶åˆ°çš„requestå‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯serverç«¯æ”¶åˆ°çš„replyå‚æ•°ã€‚æœ€åæ‹¿åˆ°çš„ç»“æœåœ¨replyä¸­ï¼Œæ‰€ä»¥replyéœ€è¦ä¼ é€’æŒ‡é’ˆã€‚ ä¸Šé¢çš„æœåŠ¡æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¿æ¥åªèƒ½å»ºç«‹ä¸€æ¬¡ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨å¾ªç¯æ¥ä¸€åªç›‘å¬ type HelloService struct{} func (s *HelloService) Hello(request string, reply *string) error { *reply = \"Hello \" + request return nil } func main() { // åˆ›å»ºä¸€ä¸ªserver listener, err := net.Listen(\"tcp\", \":9988\") if err != nil { panic(err) } //æ³¨å†ŒæœåŠ¡ err = rpc.RegisterName(\"HelloService\", \u0026HelloService{}) if err != nil { panic(err) } //å¯åŠ¨æœåŠ¡ for { conn, err := listener.Accept() if err != nil { panic(err) } go rpc.ServeConn(conn) } } è¿™æ ·ä¿®æ”¹ä»¥åè¿™ä¸ªserverå°±å…·å¤‡äº†å¤„ç†å¹¶å‘çš„èƒ½åŠ› ","date":"2021-02-26","objectID":"/posts/go-rpc/:3:0","tags":["rpc","Go"],"title":"go-rpc","uri":"/posts/go-rpc/"},{"categories":["Go"],"content":"ä¿®æ”¹åºåˆ—åŒ–å’Œååºåˆ—åŒ–åè®® åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„åè®®ä½¿ç”¨çš„æ˜¯Gobç¼–ç ï¼Œè¿™ä¸ªç¼–ç æ˜¯Goè¯­è¨€ç‹¬æœ‰çš„ï¼Œå¦‚æœå…¶ä»–è¯­è¨€æƒ³è¦è°ƒç”¨ï¼Œå°±éœ€è¦ç›¸åº”çš„è¯­è¨€å®ŒæˆGobç¼–ç ï¼Œè¿™å°±è®©é—®é¢˜å˜å¾—å¾ˆå¤æ‚äº†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ›´æ¢ç¼–ç ï¼Œç°åœ¨ç»å¤§å¤šæ•°çš„è¯­è¨€éƒ½æ˜¯æ”¯æŒJSONç¼–ç åè®®çš„ï¼Œæ‰€ä»¥å¯ä»¥å°†ä¸Šé¢çš„serverç¼–ç åè®®æ¢ä¸ºJSON type HelloService struct{} func (s *HelloService) Hello(request string, reply *string) error { *reply = \"Hello \" + request return nil } func main() { // åˆ›å»ºä¸€ä¸ªserver listener, err := net.Listen(\"tcp\", \":9988\") if err != nil { panic(err) } // æœåŠ¡æ³¨å†Œ err = rpc.RegisterName(\"HelloService\", \u0026HelloService{}) if err != nil { panic(err) } // å¯åŠ¨æœåŠ¡ for { conn, err := listener.Accept() if err != nil { panic(err) } go rpc.ServeCodec(jsonrpc.NewServerCodec(conn)) } } serverç«¯å°±ä¸é€‚ç”¨é»˜è®¤çš„ServeConnäº†ï¼Œè€Œæ˜¯ä½¿ç”¨å¸¦æœ‰ç¼–è§£ç èƒ½åŠ›çš„ServeCodecï¼Œç„¶åä½¿ç”¨jsonrpcè¿›è¡Œç¼–è§£ç  å®¢æˆ·ç«¯çš„ä¿®æ”¹å°±ä¼šç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œå› ä¸ºç¼–è§£ç çš„æ–¹å¼æ¢äº†ï¼ŒåŸæ¥ç›´æ¥ä½¿ç”¨rpcæ‹¨å·æ˜¯å› ä¸ºéœ€è¦ä½¿ç”¨rpcå®Œæˆç¼–è§£ç ï¼Œä½†æ˜¯ç°åœ¨é€šè¿‡jsonrpcå®Œæˆç¼–è§£ç ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨rpcè¿›è¡Œæ‹¨å·ï¼Œç›´æ¥ä½¿ç”¨netè¿›è¡Œæ‹¨å·ã€‚ï¼ˆè¿™é‡Œè¯´çš„rpcæ˜¯goä¸­rpcè¿™ä¸ªåŒ…ï¼‰ func main() { conn, err := net.Dial(\"tcp\", \":9988\") if err != nil { panic(err) } reply := new(string) // client := rpc.NewClientWithCodec(jsonrpc.NewClientCodec(conn)) err = client.Call(\"HelloService.Hello\", \"pujic\", reply) if err != nil { panic(err) } fmt.Printf(\"%s\", *reply) } é‚£ä¹ˆæ—¢ç„¶ä½¿ç”¨äº†JSONçš„åè®®ï¼Œä¸å¦¨éªŒè¯ä¸€ç•ªåˆ«çš„è¯­è¨€æ˜¯å¦èƒ½å¤Ÿè°ƒç”¨ï¼Œåœ¨è°ƒç”¨ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“å®¢æˆ·ç«¯åˆ°åº•å‘é€äº†ä»€ä¹ˆç»™æœåŠ¡ç«¯ï¼Œ è¿›å…¥jsonrpc.NewClientCodecçš„æºç  func NewClientCodec(conn io.ReadWriteCloser) rpc.ClientCodec { return \u0026clientCodec{ dec: json.NewDecoder(conn), enc: json.NewEncoder(conn), c: conn, pending: make(map[uint64]string), } } è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªclientCodecå¯¹è±¡ï¼Œå†è¿›å…¥è¿™ä¸ªclientCodecå¯¹è±¡ type clientCodec struct { dec *json.Decoder // for reading JSON values enc *json.Encoder // for writing JSON values c io.Closer // temporary work space req clientRequest resp clientResponse // JSON-RPC responses include the request id but not the request method. // Package rpc expects both. // We save the request method in pending when sending a request // and then look it up by request ID when filling out the rpc Response. mutex sync.Mutex // protects pending pending map[uint64]string // map request id to method name } ä¸åè®®ç›¸å…³çš„å†…å®¹æˆ‘ä»¬ä¸éœ€è¦å…³ç³»ï¼Œçœ‹åˆ°reqå’Œrespï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡ç”¨æ¥ä¿å­˜è¯·æ±‚ä¼ è¾“çš„æ•°æ®å’Œè¿”å›çš„æ•°æ®ï¼Œè¿™é‡Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨reqï¼Œå› ä¸ºrespç¨‹åºä¼šå¸®æˆ‘ä»¬å¤„ç†ï¼Œè¦åœ¨å…¶ä»–è¯­è¨€ä¸­è°ƒç”¨ï¼Œå…³é”®å°±æ˜¯è¿™ä¸ªreqï¼ŒæŸ¥çœ‹clientRequest type clientRequest struct { Method string `json:\"method\"` Params [1]interface{} `json:\"params\"` Id uint64 `json:\"id\"` } è¿™æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªMethodå°±æ˜¯éœ€è¦è°ƒç”¨çš„æ–¹æ³•ï¼ŒParamsæ˜¯å‚æ•°ï¼Œè¿™ä¸ªIdå¹¶ä¸æ˜¯Call Id å®ƒåªæ˜¯ä¸€ä¸ªç¼–å·ï¼Œ ","date":"2021-02-26","objectID":"/posts/go-rpc/:3:1","tags":["rpc","Go"],"title":"go-rpc","uri":"/posts/go-rpc/"},{"categories":["æ•°æ®åº“"],"content":"å‰è¨€ ä¸ç®¡æ˜¯åœ¨Windowsä¸‹è¿˜æ˜¯åœ¨Linuxï¼Œæˆ‘éœ€è¦çœ‹MySQLä¸­çš„æ•°æ®çš„æ—¶å€™æˆ‘æ€»æ˜¯ä¼šæƒ…ä¸è‡ªç¦çš„åœ¨ç»ˆç«¯ä¸­è¿æ¥MySQLï¼Œç„¶åå†™SQLè¯­å¥æŸ¥çœ‹è¡¨ï¼Œæˆ–è€…åšåœ¨é‡Œé¢å®éªŒä¸€äº›SQLè¯­å¥ã€‚ æˆ‘å¶å°”ä¹Ÿä¼šç”¨ä¸€äº›MySQLçš„å¯è§†åŒ–å·¥å…·ï¼Œæ¯”å¦‚HeidiSQL å®ƒä¼šæŠŠæ‰€æœ‰çš„æŸ¥è¯¢è¯­å¥æ˜¾ç¤ºåœ¨ä¸‹æ–¹ï¼Œè¿™æ ·å…¶å®è¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿å­¦ä¹ çš„ï¼Œè™½ç„¶Navicatä¹Ÿæœ‰å›æ˜¾SQLè¯­å¥çš„åŠŸèƒ½ï¼Œä½†æ˜¯æ²¡æœ‰HeidiSQLæ–¹ä¾¿ä¸€äº›ï¼Œå½“ç„¶HeidiSQLç”šè‡³èƒ½ä»Windowsåº”ç”¨å•†åº—ä¸­ä¸‹è½½ã€‚ æˆ‘çœ‹åˆ°ç½‘ä¸Šæœ‰äººè¯´åœ¨mysql.cnfæ–‡ä»¶ä¸­æ·»åŠ auto-rehashå‚æ•°ï¼Œä½†æ˜¯å¯èƒ½æ˜¯æˆ‘æ“ä½œä¸å½“ï¼Œæ²¡æœ‰æˆåŠŸï¼Œå½“ç„¶ä¹Ÿæ— æ‰€è°“ï¼Œæœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚ ","date":"2021-02-02","objectID":"/posts/mycli%E6%8F%92%E4%BB%B6/:1:0","tags":["MySQL"],"title":"mycli æ’ä»¶","uri":"/posts/mycli%E6%8F%92%E4%BB%B6/"},{"categories":["æ•°æ®åº“"],"content":"mycli è¿™æ˜¯ä¸€ä¸ªPythonå†™çš„åŠŸèƒ½å¼ºå¤§çš„MySQLå‘½ä»¤è¡Œè¡¥å…¨æ’ä»¶ï¼Œå¹¶ä¸”æ˜¯å…è´¹å¼€æºçš„ã€‚ myclié¡¹ç›®åœ°å€ï¼šhttps://github.com/dbcli/mycli è¡¥å…¨ä½“éªŒå’Œç”¨vimå†™ä»£ç æ—¶å¾ˆåƒï¼Œé€šè¿‡tabé”®å°±èƒ½è¡¥å…¨ ","date":"2021-02-02","objectID":"/posts/mycli%E6%8F%92%E4%BB%B6/:1:1","tags":["MySQL"],"title":"mycli æ’ä»¶","uri":"/posts/mycli%E6%8F%92%E4%BB%B6/"},{"categories":["æ•°æ®åº“"],"content":"å®‰è£… å› ä¸ºæ˜¯Pythonå†™çš„ï¼Œæ‰€ä»¥åœ¨å„ä¸ªå¹³å°ä¸‹éƒ½å¯ä»¥é€šè¿‡pipå®‰è£… pip3 install mycli ","date":"2021-02-02","objectID":"/posts/mycli%E6%8F%92%E4%BB%B6/:1:2","tags":["MySQL"],"title":"mycli æ’ä»¶","uri":"/posts/mycli%E6%8F%92%E4%BB%B6/"},{"categories":["æ•°æ®åº“"],"content":"è¿æ¥ å¦‚æœæ˜¯å½“å‰ç³»ç»Ÿç”¨æˆ·åå’ŒMySQLç”¨æˆ·åç›¸åŒä¸”åªéœ€è¦ä½¿ç”¨æŸä¸ªæ•°æ®åº“é‚£ä¹ˆå¯ä»¥ç›´æ¥è¿æ¥ mycli database_name æç¤ºè¾“å…¥å¯†ç å°±èƒ½è¿›å…¥ ä½¿ç”¨å‚æ•°è¿æ¥ï¼Œå‚æ•°å’ŒMySQLè¿æ¥çš„å‚æ•°ç›¸åŒ mycli -u username -h 127.0.0.1 -P 3307 database_name å‚æ•°è¯´æ˜å¦‚ä¸‹ Options: -h, --host TEXT Host address of the database. -P, --port INTEGER Port number to use for connection. Honors $MYSQL_TCP_PORT. -u, --user TEXT User name to connect to the database. -S, --socket TEXT The socket file to use for connection. -p, --password TEXT Password to connect to the database. --pass TEXT Password to connect to the database. --ssh-user TEXT User name to connect to ssh server. --ssh-host TEXT Host name to connect to ssh server. --ssh-port INTEGER Port to connect to ssh server. --ssh-password TEXT Password to connect to ssh server. --ssh-key-filename TEXT Private key filename (identify file) for the ssh connection. --ssh-config-path TEXT Path to ssh configuration. --ssh-config-host TEXT Host for ssh server in ssh configurations (requires paramiko). --ssl-ca PATH CA file in PEM format. --ssl-capath TEXT CA directory. --ssl-cert PATH X509 cert in PEM format. --ssl-key PATH X509 key in PEM format. --ssl-cipher TEXT SSL cipher to use. --ssl-verify-server-cert Verify server's \"Common Name\" in its cert against hostname used when connecting. This option is disabled by default. -V, --version Output mycli's version. -v, --verbose Verbose output. -D, --database TEXT Database to use. -d, --dsn TEXT Use DSN configured into the [alias_dsn] section of myclirc file. --list-dsn list of DSN configured into the [alias_dsn] section of myclirc file. --list-ssh-config list ssh configurations in the ssh config (requires paramiko). -R, --prompt TEXT Prompt format (Default: \"\\t \\u@\\h:\\d\u003e \"). -l, --logfile FILENAME Log every query and its results to a file. --defaults-group-suffix TEXT Read MySQL config groups with the specified suffix. --defaults-file PATH Only read MySQL options from the given file. --myclirc PATH Location of myclirc file. --auto-vertical-output Automatically switch to vertical output mode if the result is wider than the terminal width. -t, --table Display batch output in table format. --csv Display batch output in CSV format. --warn / --no-warn Warn before running a destructive query. --local-infile BOOLEAN Enable/disable LOAD DATA LOCAL INFILE. --login-path TEXT Read this path from the login file. -e, --execute TEXT Execute command and quit. --init-command TEXT SQL statement to execute after connecting. --charset TEXT Character set for MySQL session. --help Show this message and exit. dsnè¿æ¥mycli mysql://[username[:password]@][host][:port][/database_name] mysql://username:password@host:3306/database_name ","date":"2021-02-02","objectID":"/posts/mycli%E6%8F%92%E4%BB%B6/:1:3","tags":["MySQL"],"title":"mycli æ’ä»¶","uri":"/posts/mycli%E6%8F%92%E4%BB%B6/"},{"categories":["æ•°æ®åº“"],"content":"ç•Œé¢ ç•Œé¢è¿˜æ˜¯å¾ˆå¥½çœ‹çš„ï¼Œæ”¯æŒå¤§å°å†™çš„è¡¥å…¨ï¼Œå¦‚æœæ˜¯å°å†™å°±è¡¥å…¨å°å†™ï¼Œå¦‚æœæ˜¯å¤§å†™å°±è¡¥å…¨å¤§å†™ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€è®©äººä¸€ç”¨å°±ä¸Šç˜¾çš„åŠŸèƒ½ï¼Œåœ¨ä¸Šé¢çš„è¯­å¥ä¸­æˆ‘åªæ‰“äº†DAï¼Œä½†æ˜¯åé¢çš„TABASESä¹Ÿæ˜¾ç¤ºå‡ºæ¥äº†åªæ˜¯é¢œè‰²æ¯”è¾ƒæµ…ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨æ–¹å‘é”®å³é”®ç›´æ¥è¡¥å…¨ï¼Œå› ä¸ºè¿™ä¸ªè¯­å¥æˆ‘å†™è¿‡äº†ï¼Œmycliæœ‰äº†å†å²è®°å½•ï¼Œæ‰€ä»¥ä¼šæœ‰ä¸€ä¸ªæç¤ºï¼Œè¿™ä¸ªå’Œoh-my-zshçš„æ’ä»¶å¾ˆåƒã€‚ ","date":"2021-02-02","objectID":"/posts/mycli%E6%8F%92%E4%BB%B6/:1:4","tags":["MySQL"],"title":"mycli æ’ä»¶","uri":"/posts/mycli%E6%8F%92%E4%BB%B6/"},{"categories":["æ•°æ®åº“"],"content":"é…ç½® åœ¨myclié¡¹ç›®ä¸­æœ‰ä¸€ä¸ªmyclircçš„æ–‡ä»¶ï¼Œç»å¸¸ç©Linuxçš„æœ‹å‹è‚¯å®šä¼šæœ‰æƒ³æ³•ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯mycliçš„é…ç½®æ–‡ä»¶çš„æ¨¡æ¿æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹mycliçš„é…ç½®æ–‡ä»¶æ¥åšä¸€äº›å®šåˆ¶åŒ–ï¼Œé‚£ä¹ˆé…ç½®æ–‡ä»¶åœ¨å“ªå‘¢ï¼Ÿé…ç½®æ–‡ä»¶åœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸º.myclircï¼Œä¹Ÿå°±æ˜¯~/.myclircï¼ŒWindowsç”¨æˆ·é€šå¸¸æ˜¯åœ¨C:\\Users\\xxxä¸‹ ä¿®æ”¹SQLè¯­æ³•é«˜äº®é¢œè‰²ï¼Œå¯ä»¥å‚ç…§https://www.mycli.net/syntaxè¿›è¡Œä¿®æ”¹ï¼Œæ¯”å¦‚æˆ‘è¦å°†é¢œè‰²æ”¹ä¸ºperldocï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­syntax_styleçš„å€¼ +syntax_style = defualt -syntax_style = perldoc å†æ¬¡æ‰“å¼€myclié¢œè‰²å°±æ”¹å˜äº† æ³¨æ„ï¼šåœ¨Windowsä¸‹ä¸€äº›é¢œè‰²æ— æ³•æ­£å¸¸æ˜¾ç¤º ä¿®æ”¹æç¤ºç¬¦ï¼Œmycliçš„é»˜è®¤æç¤ºç¬¦æ˜¯\u003eç¬¦å·ï¼Œæ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½çœ‹ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­prompt çš„å€¼ +prompt = â€˜\\t \\u@\\h:\\d\u003e -prompt = â€˜\\t \\u@\\h:\\dâ–¶ ``` ä¸‹é¢ä¸€è¡Œçš„prompt_continuationæ˜¯mycliæ¢è¡Œæç¤ºç¬¦ï¼Œé»˜è®¤æ˜¯-\u003eå› ä¸ºæˆ‘å­—ä½“çš„åŸå› ä¼šå°†è¿™ä¸ªç¬¦å·ç»“åˆä¸ºä¸€ä¸ªç®­å¤´ï¼Œå¦‚æœä¸å–œæ¬¢å¯ä»¥è‡ªè¡Œä¿®æ”¹ï¼Œå†æ¬¡æ‰“å¼€åæç¤ºç¬¦å°±å˜äº† ä¿®æ”¹ç™»å½•æç¤ºä¿¡æ¯ï¼Œé»˜è®¤çš„ç™»å½•æç¤ºä¿¡æ¯ä¼šè¾“å‡ºmysql versionã€mycli versionã€Chatã€Mailã€Homeè¿˜æœ‰å¯¹è´¡çŒ®äººå‘˜çš„æ„Ÿè°¢ï¼Œæˆ‘ä¸æƒ³è¦è¿™äº›æç¤ºï¼Œä½†æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­ä¼¼ä¹æ²¡æœ‰æ‰¾åˆ°å¯ä»¥ä¿®æ”¹çš„é€‰é¡¹ï¼Œé‚£ä¹ˆå°±å¾—ä»æºç ä¸‹æ‰‹äº†ï¼Œéœ€è¦ä¿®æ”¹å®‰è£…çš„è¿™ä¸ªåŒ…çš„æºä»£ç ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹éœ€è¦æ‰¾åˆ°Pythonå®‰è£…ä½ç½®ï¼Œç„¶åè¿›å…¥Lib\\site-packages\\mycliæ–‡ä»¶å¤¹ä¸‹ï¼Œä¿®æ”¹main.py æˆåŠŸåœ¨561è¡Œæ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„å†…å®¹ï¼Œæˆ‘è¦æ›´æ”¹Chatã€Mailã€Homeä»¥åŠå¯¹è´¡çŒ®äººå‘˜çš„æ„Ÿè°¢ï¼Œå‰é¢ä¸‰ä¸ªç›´æ¥æ”¹å°±è¡Œï¼Œæ„Ÿè°¢çš„è´¡çŒ®äººå‘˜åå­—è·å–è°ƒç”¨äº†thanks_pickerå‡½æ•°ï¼Œä¼ å…¥çš„å†…å®¹æ˜¯æ–‡ä»¶åœ°å€ï¼Œå¦‚æœä¸è¦ç›´æ¥æ³¨é‡Šæ‰å°±è¡Œï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å°†è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­çš„åå­—æ”¹ä¸ºè‡ªå·±çš„åå­—ï¼Œä½†æ˜¯è¿™æ ·ä¸å¤ªå°Šä½œè€…ä»¥åŠå¯¹è¿™ä¸ªé¡¹ç›®æœ‰è´¡çŒ®çš„äººå‘˜ï¼Œå› æ­¤æˆ‘åªæ˜¯ç®€å•çš„æ³¨é‡Šæ‰äº† ä¿å­˜é€€å‡ºï¼ å†æ¬¡è¿›å…¥mycliå¯ä»¥çœ‹åˆ°æç¤ºä¿¡æ¯å·²ç»æ”¹å˜äº†ï¼ ä½¿ç”¨viæ¨¡å¼ï¼Œä½œä¸ºç¨‹åºå‘˜æˆ–å¤šæˆ–å°‘å¬è¯´è¿‡vimï¼Œä½†æ˜¯vimä¸æ˜¯ç¼–è¾‘å™¨å—ï¼Ÿå’Œmycliæœ‰ä»€ä¹ˆå…³ç³»ï¼Œmycliçš„å‘½ä»¤è¡Œé»˜è®¤ä½¿ç”¨çš„æ˜¯emacsæ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯é”®ç›˜é”®ä½ç»‘å®šäº†emacsçš„é”®ä½ï¼Œå¯èƒ½æ²¡ç”¨è¿‡emacsçš„äººæ„Ÿè§‰ä¸åˆ°ï¼Œä½†æ˜¯è¿™ä¸ªé”®ä½ç»‘å®šæ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œå¯ä»¥æ”¹ä¸ºviã€‚å¦‚æœæ”¹ä¸ºäº†viæ¨¡å¼ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨viçš„å¿«æ·é”®ï¼Œå½“æŒ‰ä¸‹escé”®çš„æ—¶å€™å°±è¿›å…¥äº†NORMALæ¨¡å¼ï¼Œåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹å¯ä»¥ä½¿ç”¨hã€lå·¦å³ç§»åŠ¨å…‰æ ‡ï¼Œkã€jä¸Šä¸‹ç§»åŠ¨ï¼Œä½¿ç”¨wè®©å…‰æ ‡ç§»å‘å‰åŠ¨ä¸€ä¸ªå•è¯ï¼Œä½¿ç”¨bè®©å…‰æ ‡å‘åç§»åŠ¨ä¸€ä¸ªå•è¯ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šçš„å¿«é€Ÿç§»åŠ¨çš„å…‰æ ‡çš„æ–¹æ³•ï¼Œmycliä¸­èƒ½å®ç°çš„å¿«æ·é”®ä¸å¤šï¼Œä½†æ˜¯èƒ½æ»¡è¶³æ­£å¸¸çš„ç§»åŠ¨ä¿®æ”¹ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„key_bindingsçš„å€¼ +key_bindings = emacs -key_bindings = vi å› ä¸ºmycliæ˜¯å¼€æºçš„è‡ªå·±å¯ä»¥cloneä¸‹æ¥ç©ç©ï¼Œåšä¸€äº›æœ‰æ„æ€çš„ä¿®æ”¹ï¼ ","date":"2021-02-02","objectID":"/posts/mycli%E6%8F%92%E4%BB%B6/:1:5","tags":["MySQL"],"title":"mycli æ’ä»¶","uri":"/posts/mycli%E6%8F%92%E4%BB%B6/"},{"categories":["æ•°æ®åº“"],"content":"è®°å½•ä¸€ä¸‹æˆ‘æ¯”è¾ƒå–œæ¬¢çš„å‡ ä¸ªMongoDBå¯è§†åŒ–å·¥å…· ","date":"2021-02-01","objectID":"/posts/mongo%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/:0:0","tags":["MongoDB"],"title":"Mongoå¯è§†åŒ–å·¥å…·","uri":"/posts/mongo%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/"},{"categories":["æ•°æ®åº“"],"content":"å‰è¨€ MongoDBçš„å‘½ä»¤è¡ŒæŸ¥è¯¢ç•Œé¢å®åœ¨æ˜¯å¤ªä¸‘äº†ï¼Œè™½ç„¶å¯ä»¥ç”¨printjsonè®©è¾“å‡ºç¾åŒ–ä¸€ç‚¹ï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰å‘½ä»¤çš„ç¡®æ˜¯ç¹çã€‚ ä¸Šé¢çš„ç¤ºä¾‹ä¸­çš„è¾“å‡ºç¡®å®ä¸å¥½çœ‹ï¼Œä¸æ˜¯è¯´ä¸ç¾è§‚ï¼Œè€Œæ˜¯å½±å“åˆ°äº†æˆ‘æŸ¥çœ‹æ•°æ®ï¼Œå¦‚æœè¦ä½¿ç”¨printjsoné‚£ä¹ˆå°±éœ€è¦ä¸€æ¡ä¸€æ¡çš„ä¼ é€’ç»™printjson ![]https://pujichun-blog-1301170821.cos.ap-chengdu.myqcloud.com/img/20220405231031.png) éœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªå˜é‡æ¥ä¿å­˜æŸ¥è¯¢ç»“æœè¿”å›çš„è¿­ä»£å™¨ï¼Œç„¶åä¸€æ¡ä¸€æ¡çš„å–ï¼Œè™½ç„¶å¥½çœ‹äº†å¾ˆå¤šï¼Œä½†æ˜¯å†™èµ·æ¥ç¹æ‚ï¼Œè€Œä¸”ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæˆ‘å¹¶ä¸æ˜¯ä¸€ä¸ªJavaScriptç¨‹åºå‘˜ï¼Œæˆ‘ä»…ä»…æ˜¯æƒ³æŸ¥çœ‹ä¸€ä¸‹æˆ‘æŠ“å–çš„æ•°æ®ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±ä¸€å®šæ˜¯éœ€è¦ä½¿ç”¨å¯è§†åŒ–å·¥å…·äº†ã€‚ ","date":"2021-02-01","objectID":"/posts/mongo%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/:1:0","tags":["MongoDB"],"title":"Mongoå¯è§†åŒ–å·¥å…·","uri":"/posts/mongo%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/"},{"categories":["æ•°æ®åº“"],"content":"robo3t robo3tæ˜¯ä¸€ä¸ªå…è´¹çš„MongoDBå¯è§†åŒ–å·¥å…·ï¼Œç¨‹åºæ˜¯ç”¨C++ç¼–å†™çš„ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œèƒ½å¤Ÿæ»¡è¶³æˆ‘çš„éœ€æ±‚ robo3tè¿˜æ”¯æŒç¼–å†™æŸ¥è¯¢è¯­å¥ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿè¾ƒä¸ºçµæ´»ï¼Œä½†æ˜¯åŠŸèƒ½è¾ƒå°‘ï¼Œå½“æˆ‘å¯èƒ½éœ€è¦å°†ä¸€äº›æ•°æ®å¯¼å‡ºçš„æ—¶å€™robo3tå¹¶æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œè¿™æ—¶å€™æˆ‘éœ€è¦ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œè™½ç„¶å¹¶ä¸ä¼šèŠ±è´¹æˆ‘å¤šå°‘æ—¶é—´ï¼Œä½†æ˜¯æ„Ÿè§‰è¿˜æ˜¯æœ‰äº›ä¸æ–¹ä¾¿ï¼Œä½†æ˜¯å¹¶ä¸å¦¨ç¢robo3té€Ÿåº¦ä¹‹å¿«ã€‚ robo3tçš„å®˜ç½‘ï¼šhttps://robomongo.org/ ä¸‹è½½çš„æ—¶å€™è¦ç‚¹å‡»åˆ°Downloadé¡µé¢ä¸­ä¸‹è½½ï¼ŒDownload Your Double Packä¼šä¸€èµ·ä¸‹è½½Studio 3Tï¼ŒStudio 3Tæ˜¯ä»˜è´¹çš„ï¼ŒåŠŸèƒ½è¦å¼ºå¤§å¾—å¤šï¼Œä½†æ˜¯æˆ‘å¹¶æ²¡æœ‰ç”¨è¿‡ï¼Œå› ä¸ºæˆ‘ä¸éœ€è¦ã€‚ è¿›å…¥ä¸‹è½½é¡µé¢ä¹‹åé€‰æ‹©Download Robo 3T Only é€‰æ‹©å¯¹åº”å¾—ç³»ç»Ÿï¼Œç„¶åéšä¾¿å¡«å†™ä¸€ä¸‹ä¿¡æ¯ï¼Œå—¯éšä¾¿å¡«å†™ï¼ï¼Œç„¶åç‚¹å‡»Download for ...ï¼Œ ç„¶åé€‰æ‹©ç¨‹åºåŒ…ï¼Œexeæ˜¯å®‰è£…å¼•å¯¼ç¨‹åºï¼Œzipè§£å‹å³ç”¨ï¼Œæˆ‘é€šå¸¸éƒ½æ˜¯é€‰æ‹©zip è§£å‹ä¹‹åå°±æ˜¯è¿™äº›æ–‡ä»¶ï¼Œç„¶åç‚¹å‡»robo3t.exeå°±èƒ½æ‰“å¼€ç¨‹åºï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªå¿«æ·æ–¹å¼æ–¹ä¾¿å¯åŠ¨ æ‰“å¼€è½¯ä»¶ä¹‹åç‚¹å‡»Createå°±èƒ½åˆ›å»ºè¿æ¥ï¼Œå¡«å†™è¿æ¥åç§°ä»¥åŠåœ°å€å°±å¯ä»¥äº†ï¼Œå¦‚æœè¦è¿æ¥æœåŠ¡å™¨éœ€è¦é€‰æ‹©SSH ","date":"2021-02-01","objectID":"/posts/mongo%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/:2:0","tags":["MongoDB"],"title":"Mongoå¯è§†åŒ–å·¥å…·","uri":"/posts/mongo%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/"},{"categories":["æ•°æ®åº“"],"content":"MongoDBCompass è¿™ä¸ªè½¯ä»¶å¯èƒ½å¾ˆå¤šäººæ²¡æœ‰å¬è¯´è¿‡ï¼Œè¿™æ˜¯MongoDBå®˜æ–¹æ¨å‡ºçš„MongoDBå¯è§†åŒ–è½¯ä»¶ï¼Œè¿™ä¸ªè½¯ä»¶æ˜¯å¼€æºå…è´¹çš„ã€‚è¿™ä¸ªè½¯ä»¶çš„æ¨å‡ºï¼Œå¤§æœ‰ç§€ä¸€ä¸‹MongoDBåŠŸèƒ½å¼ºå¤§çš„æ„å‘³ã€‚ ç•Œé¢å’ŒåŠŸèƒ½ç›¸æ¯”äºrobo3tè¦æ›´å¥½ä¸€äº›ï¼Œæ”¯æŒå°†é›†åˆå¯¼å‡ºä¸ºJSONæˆ–CSVï¼Œæ”¯æŒå¯¼å…¥æ•°æ®ï¼Œæ”¯æŒå°†æŸ¥è¯¢è¯­å¥å¯¼å‡ºä¸ºJavaã€JavaScriptã€C#ã€Pythonçš„è¯­æ³•ï¼Œç”šè‡³æ”¯æŒä¸€äº›å¤æ‚çš„èšåˆæ“ä½œã€‚å”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œå› ä¸ºè¿™ä¸ªè½¯ä»¶æ˜¯JavaScriptå†™çš„ã€‚ Compasséœ€è¦åˆ°MongoDBå®˜ç½‘ä¸‹è½½ï¼šhttps://www.mongodb.com/ è¿™æ˜¯ä¸‹è½½åœ°å€ï¼šhttps://www.mongodb.com/try/download/compass é€‰æ‹©ç‰ˆæœ¬ã€å¹³å°å°±å¯ä»¥ä¸‹è½½äº† å¦‚æœæ˜¯zipåŒ…ï¼Œè§£å‹åä¼šæœ‰ä¸€ä¸ªMongoDBCompassæ–‡ä»¶ï¼ŒåŒå‡»å°±å¯ä»¥å¯åŠ¨äº† è¿æ¥çš„æ—¶å€™éœ€è¦æŒ‰ç…§ä¸€å®šçš„æ ¼å¼å¡«å†™è¿æ¥åœ°å€ï¼šmongodb://user:passward@host:port userï¼šmongodbçš„ç”¨æˆ·å passwordï¼šç”¨æˆ·å¯†ç  hostï¼šä¸»æœºåœ°å€ portï¼šmongodbç«¯å£ å¦‚æœç”¨æˆ·æ ¡éªŒå¯ä»¥ä¸ç”¨å¡«user:password@ æ¯”å¦‚æˆ‘æ˜¯æœ¬åœ°è¿æ¥è€Œä¸”ä¸éœ€è¦ç”¨æˆ·æ ¡éªŒé‚£ä¹ˆæˆ‘åœ¨è¿™é‡Œå¡«å†™çš„å°±æ˜¯mongodb://localhost:27017ï¼Œå¦‚æœç«¯å£ä¸æ˜¯27017é‚£ä¹ˆè‡ªè¡Œæ›´æ”¹å°±è¡Œã€‚å¦‚æœéœ€è¦è¿æ¥æœåŠ¡å™¨çš„mongodbé‚£ä¹ˆå¡«ä¸Šå¯¹åº”çš„å­—æ®µä¿¡æ¯å³å¯ã€‚ ","date":"2021-02-01","objectID":"/posts/mongo%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/:3:0","tags":["MongoDB"],"title":"Mongoå¯è§†åŒ–å·¥å…·","uri":"/posts/mongo%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/"},{"categories":["æ•°æ®åº“"],"content":"adminMongo adminMongoæ˜¯ä¸€ä¸ªå¼€æºçš„MongoDBå¯è§†åŒ–çš„WebæœåŠ¡é¡¹ç›®ï¼Œç¨‹åºæ˜¯ç”¨JavaScriptå†™çš„ï¼Œåœ¨GitHubä¸Šæœ‰3.7kçš„star adminMongoé¡¹ç›®åœ°å€ï¼šhttps://github.com/mrvautin/adminMongo å¯ä»¥åœ¨releasesä¸­ä¸‹è½½å‘è¡Œç‰ˆï¼Œä½†æ˜¯æˆ‘æ›´æ¨èå°†é¡¹ç›®cloneä¸‹æ¥è‡ªå·±ç©ç©ï¼Œè™½ç„¶è¿™ä¸ªé¡¹ç›®å·²ç»å¾ˆä¹…æ²¡æœ‰æ›´æ–°äº†ï¼Œä½†æ˜¯åœ¨åŠŸèƒ½ä¸Šè¿˜æ˜¯èƒ½æ»¡è¶³åŸºæœ¬çš„éœ€æ±‚ã€‚ git clone --depth=1 https://github.com/mrvautin/adminMongo.git cloneçš„æ—¶å€™åŠ ä¸Šæ·±åº¦è¿™ä¸ªå‚æ•°ä¼šå…‹éš†å¾—å¿«ä¸€ç‚¹ã€‚ æˆ‘ç›´æ¥cloneåˆ°äº†ç”¨æˆ·ç›®å½•ä¸‹ï¼Œæ–¹ä¾¿æˆ‘èƒ½å¿«é€Ÿçš„é€šè¿‡å‘½ä»¤è¡Œå·¥å…·æ‰“å¼€ã€‚ å› ä¸ºæ˜¯JavaScriptå†™çš„æ‰€ä»¥åç«¯éœ€è¦ä¾èµ–nodeï¼Œå¹¶ä¸”æ‹‰å–ä¾èµ–ä¹Ÿéœ€è¦ä½¿ç”¨npmå’Œnodeï¼Œå¦‚æœæ²¡æœ‰nodeçš„è¯å®‰è£…å³å¯ å› ä¸ºadminMongoçš„ä¾èµ–è¿˜æ˜¯æ¯”è¾ƒå¤šï¼Œå»ºè®®ä½¿ç”¨cnpmæ¥æ‹‰å–ä¾èµ– npm install -g cnpm --registry=https://registry.npm.taobao.org å¦‚æœå®‰è£…å¤±è´¥ä¹Ÿæ²¡å…³ç³»ï¼Œç»§ç»­ä½¿ç”¨npmä¹Ÿæ˜¯ä¸€æ ·çš„ å‘½ä»¤è¡Œå·¥å…·è¿›å…¥åˆ°adminMongoçš„ç›®å½•åæ‹‰å–ä¾èµ– npm install cnpm install ä¸Šé¢çš„å‘½ä»¤åªéœ€è¦æ‰§è¡Œä¸€ä¸ªï¼Œå¦‚æœæ²¡æœ‰cnpméœ€è¦æ‰§è¡Œç¬¬ä¸€ä¸ªï¼Œå¦‚æœæœ‰cnpmä¸¤ä¸ªéƒ½è¡Œï¼Œå‘½ä»¤æ‰§è¡Œåå°±ä¼šæ‹‰å–ä¾èµ–ï¼Œå› ä¸ºæˆ‘å·²ç»æ‹‰å–è¿‡äº†ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„æ˜¯å…¨éƒ¨ä¾èµ–éƒ½å®‰è£…äº† ä¾èµ–æ‹‰å–å®Œä¹‹åå¯ä»¥æ‰§è¡Œnpm start æˆ–node appå°±èƒ½å¯åŠ¨äº†ï¼Œå¯ä»¥çœ‹åˆ°ç›‘å¬çš„æ˜¯1234è¿™ä¸ªç«¯å£ï¼Œæµè§ˆå™¨è®¿é—®å°±è¡Œ ç¬¬ä¸€æ¬¡è®¿é—®æ˜¯è¿æ¥åˆ—è¡¨ å¡«å†™ä¸Šè¿æ¥ä¿¡æ¯ä¹‹åç‚¹å‡»Add connection ç‚¹å‡»Connectå°±èƒ½è¿æ¥äº† æ•´ä¸ªç•Œé¢è¿˜æ˜¯ååˆ†çš„å¥½çœ‹çš„ï¼Œåªæ˜¯åŠŸèƒ½æ²¡æœ‰é‚£ä¹ˆå¤šï¼Œå¦‚æœé¡¹ç›®è¦æ·»åŠ æ–°çš„è¿æ¥å¯ä»¥ç‚¹å‡»å³ä¸Šè§’çš„Connections å¦‚æœæƒ³è¦æ›´æ¢ç«¯å£éœ€è¦è‡ªå·±é…ç½®ä¸€ä¸‹configæ–‡ä»¶å¤¹ä¸‹çš„app.jsonæ–‡ä»¶ï¼Œæ¯”å¦‚è¯´å°†ç«¯å£æ”¹ä¸º8899 ç„¶åé‡æ–°å¯åŠ¨adminMongo è¿™æ—¶å€™è®¿é—®localhost:8899å°±èƒ½å‡ºç°ç•Œé¢äº†ï¼Œæ›´å¤šçš„é…ç½®å¯ä»¥å‚è€ƒREADME ","date":"2021-02-01","objectID":"/posts/mongo%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/:4:0","tags":["MongoDB"],"title":"Mongoå¯è§†åŒ–å·¥å…·","uri":"/posts/mongo%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/"},{"categories":["Go"],"content":"æ–‡ç« è¿ç§»åˆ°äº† Notion ä¸­ https://nervous-petunia-ec3.notion.site/Goroutine-f74ce82e31bb46179cfd678e7f693504?pvs=4 ","date":"2021-01-11","objectID":"/posts/goroutine/:0:0","tags":["Go"],"title":"goroutine","uri":"/posts/goroutine/"},{"categories":["Python"],"content":"æåˆ°é¸­å­ç±»å‹å¾ˆå¤šäººç¬¬ä¸€ååº”éƒ½æ˜¯â€œæœ‰ä¸€åªé¸Ÿï¼Œèµ°è·¯åƒé¸­å­ï¼Œå«èµ·æ¥åƒé¸­å­ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é¸­å­ã€‚â€ï¼Œè¿™å¥è¯æ²¡æœ‰é—®é¢˜ï¼Œæè¿°çš„ä¹Ÿçš„ç¡®æ˜¯é¸­å­ç±»å‹ï¼Œä½†æ˜¯åœ¨Pythonä¸­é¸­å­ç±»å‹åˆ°åº•æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ Pythonæ˜¯ä¸€é—¨æåº¦çµæ´»ä¸”å¤šå˜çš„è¯­è¨€ï¼Œæƒ³è¦å®ç°ä»€ä¹ˆåŠŸèƒ½éƒ½å¾ˆç®€å•ï¼Œå½“ç„¶æˆ‘è¿™é‡ŒæŒ‡çš„æ˜¯å•ä¸€åŠŸèƒ½ï¼Œæˆ–å•ä¸€é—®é¢˜ï¼Œå¾ˆå¤šäººå­¦äº†ä¸€ç‚¹Pythonå°±ä»¥ä¸ºè‡ªå·±æŒæ¡äº†ï¼Œä½†æ˜¯å´æ²¡æœ‰è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ï¼Œä»£ç å¯ç»´æŠ¤æ€§æå·®ï¼Œä»£ç é€šç”¨æ€§ä¸å¼ºã€‚ æ¥ç€ä¸Šé¢çš„é¸­å­ç±»å‹ï¼Œç½‘ä¸Šæœç´¢Pythoné¸­å­ç±»å‹ï¼Œå¾—å‡ºçš„çš„é€šå¸¸éƒ½æ˜¯ä¸‹é¢çš„ç¨‹åº class Duck: def __init__(self, name: str): self.name = name def quack(self): print(\"ga~ga~\") class Bird: def __init__(self, name: str): self.name = name def quack(self): print(\"ga~ga~\") è¿™ä¸ªçš„ç¡®æ˜¯å’Œé¸­å­ç±»å‹çš„æè¿°æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯è¯»äº†è¿™ä¸ªä»£ç èƒ½åšä»€ä¹ˆå—ï¼Œä»€ä¹ˆä¹Ÿä¸èƒ½åšï¼Œç¨å¾®å¥½ä¸€ç‚¹çš„æ–‡ç« ä¼šæœ‰ä¸‹é¢è¿™æ ·ç¤ºä¾‹ä»£ç  class Duck: def __init__(self, name: str): self.name = name def quack(self): print(\"ga~ga~\") class Bird: def __init__(self, name: str): self.name = name def quack(self): print(\"ga~ga~\") def quack(duck): duck.quack() if __name__ == '__main__': d1 = Duck(\"d1\") b1 = Bird(\"b1\") quack(d1) quack(b1) è¿™é‡Œå°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªæ¥å£å®é™…ä¸šåŠ¡ä¸Šçš„æ¥å£quackï¼Œè€Œä¸æ˜¯ç¨‹åºä¸­çš„interfaceï¼Œè¿™ä¸ªæ¥å£å°±è´Ÿè´£è°ƒç”¨ä¼ è¿›æ¥çš„å¯¹è±¡çš„quack()æ–¹æ³•ï¼Œè¿™æ ·çš„ç¨‹åºå‹‰å¼ºè¯´äº†ä¸€ç‚¹é¸­å­ç±»å‹çš„åº”ç”¨ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰è¯´æ¸…æ¥šPythonä¸­çš„é¸­å­ç±»å‹ã€‚ åœ¨çœ‹Pythonä¸­çœŸæ­£çš„é¸­å­ç±»å‹ä¹‹å‰ï¼Œå…ˆçœ‹ä¸€ä¸‹Goè¯­è¨€ä¸­çš„é¸­å­ç±»å‹ã€‚ type Duck interface { quack() } type duck struct { name string } type bird struct { name string } func (d duck) quack() { fmt.Println(\"ga~ga~\") } func (b bird) quack() { fmt.Println(\"jiu~jiu~\") } func quack(d Duck) { d.quack() } func main() { b := bird{name: \"b1\"} d := duck{name: \"d1\"} quack(b) quack(d) } åœ¨Goè¯­è¨€ä¸­é¸­å­ç±»å‹è¡¨ç°å¾—å°±å¾ˆæ˜ç¡®äº†ï¼Œæœ‰quackæ–¹æ³•çš„structå°±æ˜¯Duckç±»å‹ï¼Œè€Œä¸”å¯ä»¥å‘ç°å…¶å®ç»“æ„ä½“çš„quackæ–¹æ³•ä¸­çš„å†…å®¹å¯ä»¥æ˜¯ä»»æ„çš„ï¼Œæ‰€ä»¥æœ‰ä¸€åªé¸Ÿï¼Œèµ°è·¯åƒé¸­å­ï¼Œå«èµ·æ¥åƒé¸­å­ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é¸­å­ã€‚æè¿°çš„æ›´åº”è¯¥æ˜¯ä¸€ç§è¡Œä¸ºï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡çš„æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨Pythonä¸­é¸­å­ç±»å‹åº”è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ åœ¨Pythonä¸­æˆ‘ä»¬è¦é™å®šä¸€ç§ç±»å¿…é¡»æœ‰æŸç§æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨æŠ½è±¡ç±»å‹å’ŒæŠ½è±¡æ–¹æ³•ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªæŠ½è±¡åŸºç±»Duckï¼Œå®šä¹‰çš„è¿™ä¸ªæŠ½è±¡åŸºç±»å°±åƒå…¶ä»–è¯­è¨€ä¸­çš„interfaceä¸€æ · import abc class Duck(metaclass=abc.ABCMeta): def __init__(self, name: str): self.name = name @abc.abstractmethod def quack(self): pass åªè¦ç»§æ‰¿äº†Duckè¿™ä¸ªæŠ½è±¡åŸºç±»çš„ç±»ï¼Œéƒ½è¦å®ç°è¿™ä¸ªquackæ–¹æ³• class Chicken(Duck): def quack(self): print(\"guo~guo~\") class Bird(Duck): def quack(self): print(\"qiu~qiu~\") ç”šè‡³å› ä¸ºå®šä¹‰äº†æŠ½è±¡åŸºç±»ï¼Œä¸‹é¢å®šä¹‰å¥½çš„quackæ¥å£ä¸­çš„å‚æ•°å¯ä»¥å¾ˆæ˜ç¡®çš„æŒ‡å®šç±»å‹ import abc class Duck(metaclass=abc.ABCMeta): def __init__(self, name: str): self.name = name @abc.abstractmethod def quack(self): pass class Chicken(Duck): def quack(self): print(\"guo~guo~\") class Bird(Duck): def quack(self): print(\"qiu~qiu~\") def quack(d: Duck): d.quack() if __name__ == '__main__': d1 = Chicken(\"d1\") b1 = Bird(\"b1\") quack(d1) quack(b1) é‚£ä¹ˆåˆ°è¿™é‡ŒPythonä¸­çš„é¸­å­ç±»å‹å°±å·®ä¸å¤šäº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯é¸­å­ç±»å‹é‡è¦çš„æ˜¯ç±»çš„è¡Œä¸ºè€Œä¸æ˜¯ç±»çš„å†…å®¹ï¼Œå†…å®¹å¯ä»¥æ˜¯åƒå˜ä¸‡åŒ–çš„ï¼Œä½†æ˜¯è¡Œä¸ºçš„åè®®å¿…é¡»ç»Ÿä¸€ã€‚ ","date":"2020-12-28","objectID":"/posts/%E9%B8%AD%E5%AD%90%E7%B1%BB%E5%9E%8B/:0:0","tags":["Python","Go"],"title":"é¸­å­ç±»å‹","uri":"/posts/%E9%B8%AD%E5%AD%90%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"è®°å½•äº†æˆ‘å¯¹cookbookçš„å­¦ä¹ å’Œç†è§£ã€‚ä¸‹æ–¹æ‰€æœ‰ç¬”è®°å‡è®°è½½åœ¨jupyter notebookä¸­ï¼Œ ç”±äºç›´æ¥æ¸²æŸ“markdownæ•ˆæœä¸ä½³ï¼Œæ‰€ä»¥ç›´æ¥ä¸Šä¼ åˆ°äº†Giteeå’ŒGithub ","date":"2020-12-15","objectID":"/posts/cookbook%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/:0:0","tags":["Python"],"title":"cookbookç¬¬ä¸€ç« -æ•°æ®ç»“æ„å’Œç®—æ³•","uri":"/posts/cookbook%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/"},{"categories":["Python"],"content":"è®¾è®¡æ¨¡å¼ï¼šå¯¹è½¯ä»¶ä¸­æ™®éå­˜åœ¨ï¼ˆåå¤å‡ºç°ï¼‰çš„å„ç§é—®é¢˜ï¼Œæ‰€æå‡ºçš„è§£å†³æ–¹æ¡ˆã€‚æ¯ä¸€ä¸ªè®¾è®¡æ¨¡å¼éƒ½ç³»ç»Ÿåœ°å‘½åã€è§£é‡Šå’Œè¯„ä»·äº†é¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ä¸€ä¸ªé‡è¦çš„å’Œé‡å¤å‡ºç°çš„è®¾è®¡ã€‚ é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ï¼š å°è£… ç»§æ‰¿ å¤šæ€ ","date":"2020-12-13","objectID":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:0:0","tags":["Python","Pythonè¿›é˜¶"],"title":"Pythonè®¾è®¡æ¨¡å¼","uri":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["Python"],"content":"åˆ›å»ºæ€§æ¨¡å¼ ","date":"2020-12-13","objectID":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:1:0","tags":["Python","Pythonè¿›é˜¶"],"title":"Pythonè®¾è®¡æ¨¡å¼","uri":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["Python"],"content":"ç®€å•å·¥å‚æ¨¡å¼ ä¸ç›´æ¥å‘å®¢æˆ·ç«¯æš´éœ²å¯¹è±¡åˆ›å»ºçš„å®ç°ç»†èŠ‚ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªå·¥å‚ç±»æ¥è´Ÿè´£åˆ›å»ºäº§å“ç±»çš„å®ä¾‹ è§’è‰²ï¼š å·¥å‚è§’è‰²ï¼ˆCreatorï¼‰ æŠ½è±¡äº§å“è§’è‰²ï¼ˆProductï¼‰ å…·ä½“äº§å“è§’è‰²ï¼ˆConcrete Productï¼‰ \"\"\" ç®€å•å·¥å‚æ¨¡å¼ \"\"\" from abc import ABCMeta, abstractmethod class PayMent(metaclass=ABCMeta): \"\"\" abstract class æŠ½è±¡äº§å“è§’è‰² \"\"\" @abstractmethod def pay(self, money:int): pass class AliPay(PayMent): \"\"\" å…·ä½“äº§å“è§’è‰² \"\"\" def pay(self, money:int): print(f\"é€šè¿‡æ”¯ä»˜å®æ”¯ä»˜äº†{money}å…ƒ\") class WeChatPay(PayMent): \"\"\" å…·ä½“äº§å“è§’è‰² \"\"\" def pay(self, money:int): print(f\"é€šè¿‡å¾®ä¿¡æ”¯ä»˜äº†{money}å…ƒ\") class PaymentFactory(): \"\"\" å·¥å‚è§’è‰² \"\"\" def create_payment(self, method:str) -\u003e PayMent: if method == \"alipay\": return AliPay() elif method == \"wechat\": return WeChatPay() else: raise TypeError(f\"No such payment named {method}\") if __name__ == \"__main__\": pf = PaymentFactory() pm = pf.create_payment(\"wechat\") pm.pay(100) ä¼˜ç‚¹ï¼š éšè—äº†å¯¹è±¡åˆ›å»ºçš„å®ç°ç»†èŠ‚ å®¢æˆ·ç«¯ä¸éœ€è¦ä¿®æ”¹ä»£ç  ç¼ºç‚¹ è¿åäº†å•ä¸€èŒè´£åŸåˆ™ï¼Œå°†å‡ ç§åˆ›å»ºé€»è¾‘æ”¾åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­ å½“æ·»åŠ æ–°äº§å“æ˜¯ï¼Œéœ€è¦ä¿®æ”¹å·¥å‚ç±»ä»£ç ï¼Œè¿åäº†å¼€é—­åŸåˆ™ ","date":"2020-12-13","objectID":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:1:1","tags":["Python","Pythonè¿›é˜¶"],"title":"Pythonè®¾è®¡æ¨¡å¼","uri":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["Python"],"content":"å·¥å‚æ–¹æ³•æ¨¡å¼ å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªäº§å“ è§’è‰²ï¼š æŠ½è±¡å·¥å‚è§’è‰²ï¼ˆCreatorï¼‰ å…·ä½“å·¥å‚è§’è‰²ï¼ˆConcrete Creatorï¼‰ æŠ½è±¡äº§å“è§’è‰²ï¼ˆProductï¼‰ å…·ä½“äº§å“è§’è‰²ï¼ˆConcrete Productï¼‰ \"\"\" å·¥å‚æ¨¡å¼ \"\"\" from abc import ABCMeta, abstractmethod class PayMent(metaclass=ABCMeta): \"\"\" abstract class æŠ½è±¡äº§å“è§’è‰² \"\"\" @abstractmethod def pay(self, money: int): pass class AliPay(PayMent): \"\"\" å…·ä½“äº§å“è§’è‰² \"\"\" def pay(self, money: int): print(f\"é€šè¿‡æ”¯ä»˜å®æ”¯ä»˜äº†{money}å…ƒ\") class WeChatPay(PayMent): \"\"\" å…·ä½“äº§å“è§’è‰² \"\"\" def pay(self, money: int): print(f\"é€šè¿‡å¾®ä¿¡æ”¯ä»˜äº†{money}å…ƒ\") class PaymentFactory(metaclass=ABCMeta): \"\"\" æŠ½è±¡å·¥å‚è§’è‰² \"\"\" @abstractmethod def create_payment(self): pass class AlipyFactory(PaymentFactory): \"\"\" å…·ä½“å·¥å‚è§’è‰² \"\"\" def create_payment(self): return AliPay() class WechatPayFactory(PaymentFactory): \"\"\" å…·ä½“å·¥å‚è§’è‰² \"\"\" def create_payment(self): return WeChatPay() if __name__ == \"__main__\": pf = WechatPayFactory() pm = pf.create_payment(\"wechat\") pm.pay(100) ä¼˜ç‚¹ï¼š æ¯ä¸ªå…·ä½“äº§å“éƒ½å¯¹åº”ä¸€ä¸ªå…·ä½“çš„å·¥å‚ç±»ï¼Œä¸éœ€è¦ä¿®æ”¹ä»£ç  éšè—äº†å¯¹è±¡åˆ›å»ºçš„å®ç°ç»†èŠ‚ ç¼ºç‚¹ æ¯å¢åŠ ä¸€ä¸ªå…·ä½“äº§å“ç±»ï¼Œå°±å¿…é¡»å¢åŠ ä¸€ä¸ªç›¸åº”çš„å…·ä½“å·¥å‚ç±» ","date":"2020-12-13","objectID":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:1:2","tags":["Python","Pythonè¿›é˜¶"],"title":"Pythonè®¾è®¡æ¨¡å¼","uri":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["Python"],"content":"æŠ½è±¡å·¥å‚æ¨¡å¼ å®šä¹‰ä¸€ä¸ªå·¥å‚ç±»æ¥å£ï¼Œè®©å·¥å‚å­ç±»æ¥åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–çš„å¯¹è±¡ ç›¸æ¯”å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼ä¸­çš„æ¯ä¸€ä¸ªå…·ä½“å·¥å‚ç±»éƒ½ç”Ÿäº§ä¸€å¥—äº§å“ è§’è‰²ï¼š æŠ½è±¡å·¥å‚è§’è‰²ï¼ˆCreatorï¼‰ å…·ä½“å·¥å‚è§’è‰²ï¼ˆConcrete Creatorï¼‰ æŠ½è±¡äº§å“è§’è‰²ï¼ˆProductï¼‰ å…·ä½“äº§å“è§’è‰²ï¼ˆConcrete Productï¼‰ from abc import abstractmethod, ABCMeta # æŠ½è±¡äº§å“ class PhoneShell(metaclass=ABCMeta): @abstractmethod def show_shell(self): pass class CPU(metaclass=ABCMeta): @abstractmethod def show_cpu(self): pass class OS(metaclass=ABCMeta): @abstractmethod def show_os(self): pass # æŠ½è±¡å·¥å‚ class PhoneFactory(metaclass=ABCMeta): @abstractmethod def make_shell(self): pass @abstractmethod def make_cpu(self): pass @abstractmethod def make_os(self): pass # å…·ä½“äº§å“ class XiaoMiShell(PhoneShell): def show_shell(self): print(\"å°ç±³æœºå£³\") class HuaweiShell(PhoneShell): def show_shell(self): print(\"åä¸ºæœºå£³\") class AppleShell(PhoneShell): def show_shell(self): print(\"è‹¹æœæœºå£³\") class SnapDragon(CPU): def show_cpu(self): print(\"éªé¾™CPU\") class MediaTek(CPU): def show_cpu(self): print(\"è”å‘ç§‘CPU\") class AppleCPU(CPU): def show_cpu(self): print(\"è”å‘ç§‘CPU\") class Android(OS): def show_os(self): print(\"å®‰å“ç³»ç»Ÿ\") class IOS(OS): def show_os(self): print(\"IOSç³»ç»Ÿ\") # å…·ä½“å·¥å‚ class AppleFactory(PhoneFactory): def make_cpu(self): return AppleCPU() def make_shell(self): return AppleShell() def make_os(self): return IOS() class XiaoMiFactory(PhoneFactory): def make_cpu(self): return SnapDragon() def make_shell(self): return XiaoMiShell() def make_os(self): return Android() # å®¢æˆ·ç«¯ class Phone: def __init__(self, cpu: CPU, os: OS, shell: PhoneShell): self.cpu = cpu self.os = os self.shell = shell def show_info(self): print(\"æ‰‹æœºä¿¡æ¯\") self.cpu.show_cpu() self.shell.show_shell() self.os.show_os() def make_phone(factory: PhoneFactory) -\u003e Phone: cpu = factory.make_cpu() os = factory.make_os() shell = factory.make_shell() return Phone(cpu, os, shell) if __name__ == '__main__': p1 = make_phone(XiaoMiFactory()) p1.show_info() ä¼˜ç‚¹ï¼š å°†å®¢æˆ·ç«¯ä¸ç±»çš„å…·ä½“å®ç°ç›¸åˆ†ç¦» æ¯ä¸ªå·¥å‚åˆ›å»ºäº†ä¸€ä¸ªå®Œæ•´çš„äº§å“ç³»åˆ—ï¼Œä½¿å¾—æ˜“äºäº¤æ¢äº§å“ç³»åˆ— æœ‰åˆ©äºäº§å“çš„ä¸€è‡´æ€§ ç¼ºç‚¹ éš¾ä»¥æ”¯æŒæ–°ç§ç±»çš„ï¼ˆæŠ½è±¡äº§å“ï¼‰ ","date":"2020-12-13","objectID":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:1:3","tags":["Python","Pythonè¿›é˜¶"],"title":"Pythonè®¾è®¡æ¨¡å¼","uri":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["Python"],"content":"å»ºé€ è€…æ¨¡å¼ å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤º å»ºé€ è€…æ¨¡å¼ä¸æŠ½è±¡å·¥å‚æ¨¡å¼ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯ç”¨æ¥åˆ›å»ºå¤æ‚å¯¹è±¡ã€‚ä¸»è¦åŒºåˆ«æ˜¯å»ºé€ è€…æ¨¡å¼ç€é‡ä¸€æ­¥æ­¥æ„å»ºä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼ç€é‡äºå¤šä¸ªç³»åˆ—äº§å“å¯¹è±¡ è§’è‰² æŠ½è±¡å»ºé€ è€…ï¼ˆBuilderï¼‰ å…·ä½“å»ºé€ è€…ï¼ˆConcrete Builderï¼‰ æŒ‡æŒ¥è€…ï¼ˆDirectorï¼‰ äº§å“ï¼ˆProductï¼‰ from abc import ABCMeta, abstractmethod # äº§å“ class Player: def __init__(self, face=None, body=None, arm=None, leg=None) -\u003e None: self.face = face self.body = body self.arm = arm self.leg = leg def __str__(self) -\u003e str: return f\"{self.face}, {self.body}, {self.arm}, {self.leg}\" # æŠ½è±¡å»ºé€ è€… class PlayerBuilder(metaclass=ABCMeta): @abstractmethod def __init__(self) -\u003e None: self.player = Player() @abstractmethod def build_face(self): pass @abstractmethod def build_body(self): pass @abstractmethod def build_arm(self): pass @abstractmethod def build_leg(self): pass # å…·ä½“å»ºé€ è€… class CatBuild(PlayerBuilder): def __init__(self) -\u003e None: self.player = Player() def build_face(self): self.player.face = \"åœ†è„¸\" def build_body(self): self.player.body = \"è‹—æ¡\" def build_arm(self): self.player.arm = \"å°çŸ­æ‰‹\" def build_leg(self): self.player.leg = \"å°çŸ­è…¿\" class DogBuild(PlayerBuilder): def __init__(self) -\u003e None: self.player = Player() def build_face(self): self.player.face = \"å‚»è„¸\" def build_body(self): self.player.body = \"èƒ–\" def build_arm(self): self.player.arm = \"å°çŸ­æ‰‹\" def build_leg(self): self.player.leg = \"å°çŸ­è…¿\" # æŒ‡æŒ¥è€…æ§åˆ¶ç»„è£…é¡ºåº class PlayerDirector: def build_player(self, builder: PlayerBuilder) -\u003e Player: builder.build_body() builder.build_face() builder.build_arm() builder.build_leg() return builder.player if __name__ == \"__main__\": builder = CatBuild() director = PlayerDirector() p = director.build_player(builder) print(p) ä¼˜ç‚¹ éšè—äº†ä¸€ä¸ªäº§å“çš„å†…éƒ¨ç»“æ„ä½•è£…é…è¿‡ç¨‹ å°†æ„é€ ä»£ç ä¸è¡¨ç¤ºä»£ç åˆ†å¼€ å¯ä»¥å¯¹æ„é€ è¿‡ç¨‹è¿›è¡Œæ›´ç²¾ç»†çš„æ§åˆ¶ ","date":"2020-12-13","objectID":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:1:4","tags":["Python","Pythonè¿›é˜¶"],"title":"Pythonè®¾è®¡æ¨¡å¼","uri":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["Python"],"content":"å•ä¾‹æ¨¡å¼ ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ è§’è‰²ï¼š å•ä¾‹ï¼ˆSingletonï¼‰ from abc import ABCMeta, abstractmethod class Singleton: def __new__(cls, *args): if not hasattr(cls, \"_instance\"): cls._instance = super(Singleton, cls).__new__(cls) return cls._instance class MyClass(Singleton): def __init__(self, a) -\u003e None: self.a = a if __name__ == \"__main__\": m1 = MyClass(10) m2 = MyClass(20) print(m1.a) print(m2.a) print(id(m1)) print(id(m2)) ä¼˜ç‚¹ï¼š å¯¹å”¯ä¸€å®ä¾‹çš„å—æ§è®¿é—® å•ä¾‹ç›¸å½“äºå…¨å±€å˜é‡ï¼Œä½†é˜²æ­¢äº†å‘½åç©ºé—´è¢«æ±¡æŸ“ ","date":"2020-12-13","objectID":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:1:5","tags":["Python","Pythonè¿›é˜¶"],"title":"Pythonè®¾è®¡æ¨¡å¼","uri":"/posts/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["Linux"],"content":"Ubuntuç¯å¢ƒä¸‹æ“ä½œ ç¯å¢ƒï¼šUbuntu 20.04.1 ç¤ºä¾‹ï¼šhexoåšå®¢æ¡†æ¶ç”Ÿæˆçš„é™æ€æ–‡ä»¶ ","date":"2020-11-23","objectID":"/posts/nginx%E6%89%98%E7%AE%A1%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/:0:0","tags":["Linux","nginx"],"title":"nginxæ‰˜ç®¡é™æ€æ–‡ä»¶","uri":"/posts/nginx%E6%89%98%E7%AE%A1%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/"},{"categories":["Linux"],"content":"hexoæ¡†æ¶ç”Ÿæˆé™æ€æ–‡ä»¶å¹¶ä¸Šä¼  hexo g ç”Ÿæˆçš„é™æ€æ–‡ä»¶åœ¨publicæ–‡ä»¶å¤¹ä¸­ å°†publicæ–‡ä»¶å¤¹æ‰“åŒ…ä¸ºzipæ ¼å¼ï¼Œä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ‘è¿™é‡Œæ”¾åˆ°çš„æ˜¯ç”¨æˆ·ç›®å½•ä¸‹ï¼Œæˆ‘æ˜¯rootç”¨æˆ· å¦‚æœé™æ€æ–‡ä»¶ä¸­æœ‰ä¸­æ–‡åå­—ï¼Œè§£å‹æ—¶éœ€è¦æŒ‡å®šç¼–ç  unzip -O GBK public.zip ç„¶åæ£€æŸ¥publicæ–‡ä»¶å¤¹ä¸‹æ˜¯å¦è¿˜æ˜¯publicæ–‡ä»¶å¤¹ ","date":"2020-11-23","objectID":"/posts/nginx%E6%89%98%E7%AE%A1%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/:0:1","tags":["Linux","nginx"],"title":"nginxæ‰˜ç®¡é™æ€æ–‡ä»¶","uri":"/posts/nginx%E6%89%98%E7%AE%A1%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/"},{"categories":["Linux"],"content":"å®‰è£…nginx å®‰è£…openssl apt install openssl apt install libssl-dev wget http://nginx.org/download/nginx-1.18.0.tar.gz è§£å‹æ–‡ä»¶å¤¹ï¼Œè¿›å…¥ç›®å½• ./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module make \u0026\u0026 make install ln -s /usr/local/nginx/sbin/nginx /usr/bin/nginx å¯åŠ¨nginx nginx ","date":"2020-11-23","objectID":"/posts/nginx%E6%89%98%E7%AE%A1%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/:0:2","tags":["Linux","nginx"],"title":"nginxæ‰˜ç®¡é™æ€æ–‡ä»¶","uri":"/posts/nginx%E6%89%98%E7%AE%A1%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/"},{"categories":["Linux"],"content":"é…ç½®nginx ä¿®æ”¹é…ç½®æ–‡ä»¶ nvim /usr/local/nginx/conf/nginx.conf å°†ç¬¬ä¸€è¡Œç”¨æˆ·ä¿®æ”¹ä¸ºå½“å‰ç”¨æˆ· -user nobody; +user root; ä¿®æ”¹locationä¸­æ‰˜ç®¡æ–‡ä»¶åœ°å€ -root /root/html; +root /root/public; ä¿å­˜é€€å‡ºånginxé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ nginx -s reload ç„¶åè®¿é—®å…¬ç½‘ipå°±èƒ½çœ‹åˆ°é¡µé¢äº† ","date":"2020-11-23","objectID":"/posts/nginx%E6%89%98%E7%AE%A1%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/:0:3","tags":["Linux","nginx"],"title":"nginxæ‰˜ç®¡é™æ€æ–‡ä»¶","uri":"/posts/nginx%E6%89%98%E7%AE%A1%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/"},{"categories":["Python"],"content":"åç¨‹æ˜¯å±äºç¼–ç¨‹è¯­è¨€ä¸­å¾ˆé«˜çº§è€Œä¸”å¾ˆéš¾çš„çŸ¥è¯†ç‚¹ ","date":"2020-11-14","objectID":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/:0:0","tags":["å¼‚æ­¥IO"],"title":"åç¨‹å’Œå¼‚æ­¥IO","uri":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/"},{"categories":["Python"],"content":"å¹¶å‘ å¹¶å‘æ˜¯æŒ‡ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œæœ‰å‡ ä¸ªç¨‹åºåœ¨åŒä¸€ä¸ªcpuä¸Šè¿è¡Œï¼Œä½†æ˜¯ä»»æ„æ—¶åˆ»åªæœ‰ä¸€ä¸ªç¨‹åºåœ¨cpuä¸Šè¿è¡Œ ","date":"2020-11-14","objectID":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/:0:1","tags":["å¼‚æ­¥IO"],"title":"åç¨‹å’Œå¼‚æ­¥IO","uri":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/"},{"categories":["Python"],"content":"å¹¶è¡Œ å¹¶è¡Œæ˜¯æŒ‡ä»»æ„æ—¶åˆ»ç‚¹ä¸Šï¼Œæœ‰å¤šä¸ªç¨‹åºåŒæ—¶è¿è¡Œåœ¨å¤šä¸ªcpuä¸Šï¼Œå¹¶è¡Œçš„æ•°é‡å’Œcpuçš„æ•°é‡æ˜¯ä¸€æ ·çš„ ","date":"2020-11-14","objectID":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/:0:2","tags":["å¼‚æ­¥IO"],"title":"åç¨‹å’Œå¼‚æ­¥IO","uri":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/"},{"categories":["Python"],"content":"åŒæ­¥ åŒæ­¥æ˜¯æŒ‡ä»£ç è°ƒç”¨I/Oæ“ä½œæ—¶ï¼Œå¿…é¡»ç­‰å¾…I/Oé€ ä½œå®Œæˆæ—¶å€™æ‰èƒ½è¿”å›çš„è°ƒç”¨æ–¹å¼ ","date":"2020-11-14","objectID":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/:0:3","tags":["å¼‚æ­¥IO"],"title":"åç¨‹å’Œå¼‚æ­¥IO","uri":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/"},{"categories":["Python"],"content":"å¼‚æ­¥ å¼‚æ­¥æ˜¯æŒ‡ä»£ç è°ƒç”¨I/Oæ“ä½œæ—¶ï¼Œä¸å¿…ç­‰I/Oæ“ä½œå®Œæˆå°±è¿”å›çš„è°ƒç”¨æ–¹å¼ ","date":"2020-11-14","objectID":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/:0:4","tags":["å¼‚æ­¥IO"],"title":"åç¨‹å’Œå¼‚æ­¥IO","uri":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/"},{"categories":["Python"],"content":"é˜»å¡ é˜»å¡æ˜¯æŒ‡è°ƒç”¨å‡½æ•°æ—¶å½“å‰çº¿ç¨‹è¢«æŒ‚èµ· ","date":"2020-11-14","objectID":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/:0:5","tags":["å¼‚æ­¥IO"],"title":"åç¨‹å’Œå¼‚æ­¥IO","uri":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/"},{"categories":["Python"],"content":"éé˜»å¡ éé˜»å¡æ˜¯æŒ‡è°ƒç”¨å‡½æ•°æ—¶å½“å‰çº¿ç¨‹ä¸ä¼šè¢«æŒ‚èµ·ï¼Œè€Œæ˜¯ç«‹å³è¿”å› ","date":"2020-11-14","objectID":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/:0:6","tags":["å¼‚æ­¥IO"],"title":"åç¨‹å’Œå¼‚æ­¥IO","uri":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/"},{"categories":["Python"],"content":"Unixä¸‹äº”ç§I/Oæ¨¡å‹ é˜»å¡å¼I/O éé˜»å¡å¼I/O éé˜»å¡å¼I/Oè°ƒç”¨åè™½ç„¶ç«‹é©¬è¿”å›äº†ï¼Œä½†æ˜¯å´è¦å»ä¸åœçš„è¯¢é—®æ•°æ®æ˜¯å¦å‡†å¤‡å¥½ I/Oå¤šè·¯å¤ç”¨ selectå…¶å®ä¹Ÿæ˜¯é˜»å¡å¼çš„ï¼Œä½†æ˜¯å®ƒå¯ä»¥ç›‘å¬å¤šä¸ªå¥æŸ„ï¼Œå¦‚æœè¿™æ—¶å€™åŒæ—¶å‘èµ·äº†100ä¸ªsocketè¯·æ±‚ï¼Œé‚£ä¹ˆåªè¦æœ‰ä¸€ä¸ªè¿”å›äº†å°±ä¼šè¿”å›è°ƒç”¨ ä¿¡å·é©±åŠ¨å¼I/O ä¿¡å·é©±åŠ¨å¼I/Oå°±æ˜¯æ•°æ®æŠ¥å‡†å¤‡å¥½ä¹‹åå‘é€ä¸€ä¸ªå¯è°ƒç”¨ä¿¡å· å¼‚æ­¥I/O å¼‚æ­¥IOçœæ‰äº†å°†æ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´çš„æ—¶é—´ ç”±äºå¼‚æ­¥IOç¼–ç éš¾åº¦å¾ˆé«˜ï¼Œæ‰€ä»¥ç°åœ¨æ¯”è¾ƒæˆç†Ÿçš„æ¡†æ¶éƒ½æ˜¯ä½¿ç”¨çš„I/Oå¤šè·¯å¤ç”¨ ","date":"2020-11-14","objectID":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/:1:0","tags":["å¼‚æ­¥IO"],"title":"åç¨‹å’Œå¼‚æ­¥IO","uri":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/"},{"categories":["Python"],"content":"select selectå‡½æ•°ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦åˆ†3ç±»ï¼Œåˆ†åˆ«æ˜¯writefdsã€readfdså’Œexceptfdsï¼Œè°ƒç”¨åselectå‡½æ•°ä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰æè¿°ç¬¦å°±ç»ªï¼ˆæœ‰æ•°æ®å¯è¯»ã€å¯å†™ã€æˆ–è€…æœ‰exceptï¼‰ï¼Œæˆ–è€…è¶…æ—¶ï¼ˆtimeoutæŒ‡å®šç­‰å¾…æ—¶é—´ï¼Œå¦‚æœç«‹å³è¿”å›è®¾ä¸ºnullå³å¯ï¼‰ï¼Œå‡½æ•°è¿”å›ã€‚å½“selectå‡½æ•°è¿”å›åï¼Œå¯ä»¥é€šè¿‡éå†fdsetï¼Œæ¥æ‰¾åˆ°å°±ç»ªçš„æè¿°ç¬¦ã€‚ selectç›®å‰æœºä¼šåœ¨æ‰€æœ‰å¹³å°ä¸Šæ”¯æŒï¼Œå…¶è‰¯å¥½çš„è·¨å¹³å°æ”¯æŒä¹Ÿæ˜¯å®ƒçš„ä¸€ä¸ªä¼˜ç‚¹ï¼Œselectçš„ä¸€ä¸ªç¼ºç‚¹åœ¨äºå•ä¸ªè¿›ç¨‹èƒ½å¤Ÿç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦çš„æ•°é‡å­˜åœ¨æœ€å¤§é™åˆ¶ï¼Œåœ¨Linuxä¸Šä¸€èˆ¬ä¸º1024ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹å®å®šä¹‰ç”šè‡³é‡æ–°ç¼–è¯‘å†…æ ¸çš„æ–¹å¼æå‡è¿™ä¸€é™åˆ¶ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿä¼šé€ æˆæ•ˆç‡é™ä½ã€‚ ","date":"2020-11-14","objectID":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/:1:1","tags":["å¼‚æ­¥IO"],"title":"åç¨‹å’Œå¼‚æ­¥IO","uri":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/"},{"categories":["Python"],"content":"pull ä¸åŒäºselectä½¿ç”¨ä¸‰ä¸ªä½å›¾æ¥è¡¨ç¤ºä¸‰ä¸ªfdsetçš„æ–¹å¼ï¼Œpollä½¿ç”¨ä¸€ä¸ªpollfdçš„æŒ‡é’ˆå®ç°ã€‚ pollfdç»“æ„åŒ…å«äº†è¦ç›‘è§†çš„eventå’Œå‘ç”Ÿçš„event ï¼Œä¸å†ä½¿ç”¨selectâ€œå‚æ•°-å€¼â€ä¼ é€’çš„æ–¹å¼ã€‚åŒæ—¶ï¼Œpollfdå¹¶æ²¡æœ‰æœ€å¤§æ•°é‡é™åˆ¶(ä½†æ˜¯æ•°é‡è¿‡å¤§åæ€§èƒ½ä¹Ÿæ˜¯ä¼šä¸‹é™)ã€‚å’Œselectå‡½æ•°ä¸€ æ ·ï¼Œpollè¿”å›å,éœ€è¦è½®è¯¢pollfdæ¥è·å–å°±ç»ªçš„æè¿°ç¬¦ã€‚ ä»ä¸Šé¢çœ‹ï¼Œselectå’Œpolléƒ½éœ€è¦åœ¨è¿”å›å,é€šè¿‡éå†æ–‡ä»¶æè¿°ç¬¦æ¥è·å–å·²ç»å°±ç»ªçš„socketã€‚äº‹å®ä¸Š,åŒæ—¶è¿æ¥çš„å¤§é‡å®¢æˆ·ç«¯åœ¨ä¸€æ—¶åˆ»å¯èƒ½åªæœ‰å¾ˆå°‘çš„å¤„äºå°±ç»ªçŠ¶æ€ï¼Œå› æ­¤éšç€ç›‘è§†çš„æè¿°ç¬¦æ•°é‡çš„å¢é•¿ï¼Œå…¶æ•ˆç‡ä¹Ÿä¼šçº¿æ€§ä¸‹é™ ","date":"2020-11-14","objectID":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/:1:2","tags":["å¼‚æ­¥IO"],"title":"åç¨‹å’Œå¼‚æ­¥IO","uri":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/"},{"categories":["Python"],"content":"epoll epollæ˜¯åœ¨Linux2.6å†…æ ¸ä¸­æå‡ºçš„,æ˜¯ä¹‹å‰çš„selectå’Œpollçš„å¢å¼ºç‰ˆæœ¬ã€‚ç›¸å¯¹äºselectå’Œpollæ¥è¯´, epollæ›´åŠ çµæ´»,æ²¡æœ‰æè¿°ç¬¦é™åˆ¶ã€‚epollä½¿ç”¨ä¸€ ä¸ªæ–‡ä»¶æè¿°ç¬¦ç®¡ç†å¤šä¸ªæè¿°ç¬¦,å°†ç”¨æˆ·å…³ç³»çš„æ–‡ä»¶æè¿°ç¬¦çš„äº‹ä»¶å­˜æ”¾åˆ°å†…æ ¸çš„ä¸€ä¸ªäº‹ä»¶è¡¨ä¸­,è¿™æ ·åœ¨ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´çš„copyåªéœ€ä¸€æ¬¡ã€‚åœ¨å¹¶å‘é«˜ä½†æ˜¯è¿æ¥æ´»è·ƒåº¦ä¸æ˜¯å¾ˆé«˜çš„æƒ…å†µä¸‹selectæ²¡æœ‰epollå¥½ï¼Œä½†æ˜¯åœ¨å¹¶å‘æ€§ä¸é«˜ä½†æ˜¯è¿æ¥å¾ˆæ´»è·ƒæ—¶selectæ¯”epollå¥½ ","date":"2020-11-14","objectID":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/:1:3","tags":["å¼‚æ­¥IO"],"title":"åç¨‹å’Œå¼‚æ­¥IO","uri":"/posts/%E5%8D%8F%E7%A8%8B%E5%92%8C%E5%BC%82%E6%AD%A5io/"},{"categories":["Python"],"content":"Pythonä¸­çš„å¤šçº¿ç¨‹ç¼–ç¨‹å¹¶ä¸æ˜¯çœŸçš„æ…¢ ","date":"2020-11-09","objectID":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/:0:0","tags":["å¤šçº¿ç¨‹","å¤šè¿›ç¨‹"],"title":"Pythonå¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹","uri":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/"},{"categories":["Python"],"content":"Pythonä¸­çš„GIL GIL: global interpreter lockå³å…¨å±€è§£é‡Šå™¨é” Pythonä¸­çš„ä¸€ä¸ªçº¿ç¨‹å¯¹åº”äºCè¯­è¨€ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œæ— æ³•å°†å¤šä¸ªçº¿ç¨‹æ˜ å°„åˆ°å¤šä¸ªCPUä¸Š GILä½¿å¾—åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡Œåœ¨ä¸€ä¸ªCPUä¸Šæ‰§è¡Œå­—èŠ‚ç ï¼Œåªæ˜¯å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢é€Ÿåº¦éå¸¸çš„å¿«ï¼Œæ‰€ä»¥æˆ‘ä»¬æ„Ÿå—ä¸åˆ°çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢ ä½†æ˜¯å½“GILé‡Šæ”¾çš„æ—¶å€™çº¿ç¨‹å°±ä¸æ˜¯å®‰å…¨çš„äº† import threading total = 0 def add(): global total for i in range(1000000): total += 1 def desc(): global total for i in range(1000000): total -= 1 thread1 = threading.Thread(target=add) thread2 = threading.Thread(target=desc) thread1.start() thread2.start() thread1.join() thread2.join() print(total) ä¸¤æ¬¡è¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œç¬¬ä¸€æ¬¡ç»“æœæ˜¯439838ï¼Œç¬¬äºŒæ¬¡ç»“æœæ˜¯-787195ï¼Œè¯´æ˜å¼€å¯çš„ä¸¤ä¸ªçº¿ç¨‹å¹¶æ²¡æœ‰ä¸€ç›´å æœ‰CPUèµ„æºï¼Œè€Œæ˜¯è¿›è¡Œäº†åˆ‡æ¢ï¼Œæ‰€ä»¥å¾ˆæ˜æ˜¾åœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­GILè¢«é‡Šæ”¾äº† GILä¼šæ ¹æ®æ‰§è¡Œçš„å­—èŠ‚ç è¡Œæ•°ä»¥åŠæ—¶é—´ç‰‡é‡Šæ”¾GILï¼ŒGILåœ¨é‡åˆ°IOæ“ä½œçš„æ—¶å€™ä¹Ÿä¼šä¸»åŠ¨é‡Šæ”¾ï¼Œå› æ­¤Pythonåœ¨è¿›è¡ŒIOæ“ä½œçš„æ—¶å€™å¤šçº¿ç¨‹æ˜¯å¾ˆé€‚ç”¨çš„ ","date":"2020-11-09","objectID":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/:1:0","tags":["å¤šçº¿ç¨‹","å¤šè¿›ç¨‹"],"title":"Pythonå¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹","uri":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/"},{"categories":["Python"],"content":"Thread åœ¨æœ€å¼€å§‹çš„æ—¶å€™è®¡ç®—æœºèƒ½å¤Ÿè°ƒåº¦çš„æœ€å°å•å…ƒæ˜¯è¿›ç¨‹ï¼Œä½†æ˜¯è¿›ç¨‹å¯¹è®¡ç®—æœºèµ„æºæ¶ˆè€—éå¸¸å¤§ï¼Œåæ¥å°±æ¼”å˜å‡ºäº†çº¿ç¨‹ã€‚ å¯¹äºIOæ“ä½œæ¥è¯´ï¼Œå¤šçº¿ç¨‹å’Œå¤šçº¿ç¨‹çš„å·®åˆ«ä¸å¤§ Pythonä¸­æœ‰ä¸¤ç§æ–¹å¼å®ç°å¤šçº¿ç¨‹ ","date":"2020-11-09","objectID":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/:2:0","tags":["å¤šçº¿ç¨‹","å¤šè¿›ç¨‹"],"title":"Pythonå¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹","uri":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/"},{"categories":["Python"],"content":"é€šè¿‡Threadç±»å®ä¾‹åŒ– import time import threading def get_detail_html(): print(\"get detail html started\") time.sleep(2) print(\"get deatil html end\") def get_list(): print(\"get list html started\") time.sleep(2) print(\"get list html end\") if __name__ == \"__main__\": thread1 = threading.Thread(target=get_list) thread2 = threading.Thread(target=get_detail_html) start_time = time.time() thread1.start() thread2.start() print(f\"time = {time.time()-start_time}\") è¿è¡Œè¿™ä¸ªç¨‹åºçš„æ—¶å€™ç»“æœå¦‚ä¸‹ get list html startedget detail html startedtime = 0.000997304916381836 get deatil html end get list html end ä¸Šé¢çš„æ—¶é—´æ˜¯è´Ÿæ•°ï¼Œå¦‚æœæŒ‰ç…§æ­£å¸¸çš„ç†è§£é€»è¾‘ä¸¤ä¸ªçº¿ç¨‹å¹¶è¡Œçš„æ—¶å€™ä½¿ç”¨çš„æ—¶é—´åº”è¯¥æ˜¯2ç§’ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆæ—¶é—´æ¥è¿‘0å‘¢ å…¶å®åœ¨è¿™ä¸¤ä¸ªçº¿ç¨‹ä¹‹å¤–è¿˜æœ‰å¦å¤–ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶è¡Œï¼Œé‚£ä¹ˆåˆ›å»ºçš„ä¸¤ä¸ªçº¿ç¨‹åœ¨å¹¶è¡Œçš„æ—¶å€™é‚£ä¹ˆä¸»çº¿ç¨‹ä¹Ÿæ˜¯å¯ä»¥å¹¶è¡Œçš„ï¼Œå½“ä¸»çº¿ç¨‹ç»“æŸçš„æ—¶å€™ä¸¤ä¸ªçº¿ç¨‹è¿˜æ²¡ç»“æŸ æˆ‘ä»¬å¯ä»¥è®¾ç½®å®ˆæŠ¤çº¿ç¨‹ï¼Œå½“ä¸»çº¿ç¨‹ç»“æŸçš„æ—¶å€™å…¶ä»–çº¿ç¨‹éƒ½ç»“æŸ thread1.setDaemon(True) thread2.setDaemon(True) import time import threading def get_detail_html(): print(\"get detail html started\") time.sleep(4) print(\"get deatil html end\") def get_list(): print(\"get list html started\") time.sleep(2) print(\"get list html end\") if __name__ == \"__main__\": thread1 = threading.Thread(target=get_list) thread2 = threading.Thread(target=get_detail_html) # thread1.setDaemon(True) thread2.setDaemon(True) start_time = time.time() thread1.start() thread2.start() print(f\"time = {time.time()-start_time}\") è¿è¡Œä¸Šé¢çš„ç¨‹åº get list html startedget detail html started time = 0.0009975433349609375 get list html end å¯ä»¥çœ‹åˆ°å½“ä¸»çº¿ç¨‹ç»“æŸçš„æ—¶å€™thread2è¿™ä¸ªçº¿ç¨‹ä¹Ÿå¼ºåˆ¶ç»“æŸäº† ä½†æ˜¯æˆ‘ä»¬æƒ³ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹å®Œæˆä¹‹åæ‰è¾“å‡ºæ—¶é—´ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨join()æ–¹æ³• import time import threading def get_detail_html(): print(\"get detail html started\") time.sleep(4) print(\"get deatil html end\") def get_list(): print(\"get list html started\") time.sleep(2) print(\"get list html end\") if __name__ == \"__main__\": thread1 = threading.Thread(target=get_list) thread2 = threading.Thread(target=get_detail_html) start_time = time.time() thread1.start() thread2.start() thread1.join() thread2.join() print(f\"time = {time.time()-start_time}\") è¿è¡Œä¸Šé¢çš„ç¨‹åºå‘ç°æœ€åçš„æ—¶é—´è¾“å‡ºå·²ç»è¾¾åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œè€Œä¸”ç¨‹åºè¿è¡Œçš„æ—¶é—´å°±æ˜¯æˆ‘ä»¬çº¿ç¨‹çš„æœ€å¤§æ—¶é—´ï¼Œè€Œä¸æ˜¯ç´¯åŠ  get list html startedget detail html started get list html end get deatil html end time = 4.008591175079346 ","date":"2020-11-09","objectID":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/:2:1","tags":["å¤šçº¿ç¨‹","å¤šè¿›ç¨‹"],"title":"Pythonå¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹","uri":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/"},{"categories":["Python"],"content":"é€šè¿‡Threadç»§æ‰¿ç±» é€šè¿‡Threadç±»ç»§æ‰¿ï¼Œéœ€è¦é‡è½½çš„æ˜¯runæ–¹æ³•è€Œä¸æ˜¯startæ–¹æ³• import time import threading class GetList(threading.Thread): def run(self) -\u003e None: print(\"get list html started\") time.sleep(2) print(\"get list html end\") class GetDetail(threading.Thread): def run(self) -\u003e None: print(\"get detail html started\") time.sleep(4) print(\"get deatil html end\") if __name__ == \"__main__\": thread1 = GetList() thread2 = GetDetail() start_time = time.time() thread1.start() thread2.start() thread1.join() thread2.join() print(f\"time = {time.time()-start_time}\") ","date":"2020-11-09","objectID":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/:2:2","tags":["å¤šçº¿ç¨‹","å¤šè¿›ç¨‹"],"title":"Pythonå¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹","uri":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/"},{"categories":["Python"],"content":"çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ åœ¨ä¸Šé¢çš„ç¨‹åºä¸­åªæ˜¯ç®€å•çš„æ¼”ç¤ºäº†å¤šçº¿ç¨‹çš„å†™æ³•ï¼Œä½†æ˜¯ä¸Šé¢çš„ç¨‹åºä¸­å¹¶æ²¡æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œå½“æˆ‘çº¿ç¨‹ä¸çº¿ç¨‹ä¹‹é—´éœ€è¦åˆä½œå®Œæˆä¸šåŠ¡åŠŸèƒ½çš„æ—¶å€™å°±éœ€è¦åœ¨çº¿ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ ","date":"2020-11-09","objectID":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/:3:0","tags":["å¤šçº¿ç¨‹","å¤šè¿›ç¨‹"],"title":"Pythonå¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹","uri":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/"},{"categories":["Python"],"content":"å…±äº«å˜é‡ import time import threading detail_url_list = [] def get_detail_html(detail_url_list): while True: # é˜²æ­¢detail_url_listä¸ºç©º if len(detail_url_list): url = detail_url_list.pop() print(\"get detail html started\") time.sleep(4) print(\"get deatil html end\") def get_list(detail_url_list): print(\"get list html started\") time.sleep(2) for i in range(20): detail_url_list.append(f\"url{i}\") print(\"get list html end\") if __name__ == \"__main__\": thread1 = threading.Thread(target=get_list, args=(detail_url_list,)) for i in range(10): detail_thread = threading.Thread(target=get_detail_html, args=(detail_url_list,)) detail_thread.start() thread1.start() ä½†æ˜¯è¿™æ ·ç»´æŠ¤èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸“é—¨å»ºç«‹å…±äº«å˜é‡çš„åŒ…ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œä½†æ˜¯è°ƒå–çš„æ—¶å€™ä¸èƒ½ç›´æ¥è°ƒç”¨åˆ°å˜é‡è¿™ä¸€çº§ä¸Šï¼Œå¦‚æœè°ƒç”¨åˆ°å˜é‡ä¸€çº§ï¼Œå½“å…±äº«å˜é‡è¢«å…¶ä»–çº¿ç¨‹æ”¹å˜çš„æ—¶å€™å¯èƒ½å°±ä¸æ¸…æ¥šå˜é‡çš„æƒ…å†µã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å…±äº«å˜é‡ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯importåˆ°æ¨¡å—ä¸€çº§from package-name import module-nameï¼Œä¸åº”è¯¥ç›´æ¥å°†å…±äº«å˜é‡è°ƒå‡ºæ¥ ","date":"2020-11-09","objectID":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/:3:1","tags":["å¤šçº¿ç¨‹","å¤šè¿›ç¨‹"],"title":"Pythonå¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹","uri":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/"},{"categories":["Python"],"content":"Queue åœ¨ä¸Šé¢çš„å¤šçº¿ç¨‹ä¸­é€šè¿‡å…±äº«å˜é‡çš„æ–¹å¼è¿›è¡Œé€šä¿¡æ˜¯å¾ˆä¸å®‰å…¨çš„ï¼Œå°¤å…¶åƒlistè¿™æ ·çš„æ•°æ®ç»“å¤Ÿå¾ˆå®¹æ˜“è¢«ä¿®æ”¹ã€‚å°±åƒæ–‡ç« å¼€å¤´çš„ç¬¬ä¸€ä¸ªä¾‹å­ä¸€æ ·ï¼Œæœ¬æ¥æƒ³è®©ç¨‹åºä¿®æ”¹totalåæœ€åè¿˜æ˜¯ä¸º0ï¼Œä½†æ˜¯totalæœ€ç»ˆçš„ç»“æœå¹¶ä¸ä¸º0ï¼Œè¿™å°±æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„è¡¨ç°ã€‚å¯èƒ½ä¸ºäº†è¾¾åˆ°æˆ‘ä»¬é¢„æœŸçš„åŒæ­¥é¡ºåºæˆ‘ä»¬å¯ä»¥ç»™çº¿ç¨‹åŠ ä¸€æŠŠé”ï¼Œä½†æ˜¯ç¨‹åºçš„æ€§èƒ½ä»¥åŠç¼–å†™ç¨‹åºçš„æ•ˆç‡å°†ä¼šå¤§å¹…ä¸‹é™ ä½¿ç”¨Queueèƒ½ç®€åŒ–çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œè€Œä¸”ä¸éœ€è¦ä¸ºçº¿ç¨‹åŠ é” from queue import Queue è€Œåœ¨Pythonä¸­ï¼ŒQueueå¹¶ä¸æ˜¯é€šè¿‡å°è£…listå®ç°çš„ï¼Œè€Œæ˜¯é€šè¿‡å°è£…dequeå®ç°çš„ï¼Œå› ä¸ºdequeåœ¨å­—èŠ‚ç å±‚é¢å°±å·²ç»å®ç°äº†çº¿ç¨‹å®‰å…¨ï¼Œæ‰€ä»¥Queueæ˜¯çº¿ç¨‹å®‰å…¨çš„ Queueæœ‰ä¸¤ä¸ªæ–¹æ³•å¾ˆå¸¸ç”¨ putå‘é˜Ÿåˆ—ä¸­æ·»åŠ æ•°æ® é»˜è®¤æ˜¯é˜»å¡çš„ï¼Œå¦‚æœé˜Ÿåˆ—å·²ç»æ»¡äº†åˆ™éœ€è¦ç­‰å¾…é˜Ÿåˆ—å°äºæœ€å¤§é•¿åº¦æ—¶æ‰èƒ½æ·»åŠ  å¦‚æœè®¾ä¸ºéé˜»å¡ï¼Œåˆ™å¦‚æœé˜Ÿåˆ—æ»¡äº†ä¼šé©¬ä¸ŠæŠ›å‡ºå¼‚å¸¸ getå‘é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ® é»˜è®¤æ˜¯é˜»å¡çš„ï¼Œåªæœ‰é˜Ÿåˆ—ä¸­æœ‰æ•°æ®æ—¶æ‰èƒ½å–å‡º å¦‚æœè®¾ä¸ºéé˜»å¡ï¼Œåˆ™å¦‚æœé˜Ÿåˆ—ä¸­æ²¡æœ‰æ•°æ®åˆ™ä¼šé©¬ä¸ŠæŠ›å‡ºå¼‚å¸¸ from queue import Queue import time import threading def get_detail_html(queue:Queue): while True: url = queue.get() print(\"get detail html started\") time.sleep(4) print(\"get deatil html end\") def get_list(queue:Queue): print(\"get list html started\") time.sleep(2) for i in range(20): queue.put(f\"url{i}\") print(\"get list html end\") if __name__ == \"__main__\": detail_url_queue = Queue(maxsize=1000) thread1 = threading.Thread(target=get_list, args=(detail_url_queue,)) for i in range(10): detail_thread = threading.Thread(target=get_detail_html, args=(detail_url_queue,)) detail_thread.start() thread1.start() è¿™æ ·å°±å®ç°äº†é€šè¿‡Queueæ¥é€šä¿¡ ä¸Šé¢çš„ç¨‹åºä¸­æ˜æ˜¾æ˜¯ä¸»çº¿ç¨‹ä¼šæ›´å¿«çš„è¿è¡Œå®Œï¼Œå¦‚æœæƒ³è®©ä¸»çº¿ç¨‹ç­‰å¾…ï¼Œå°±éœ€è¦åœ¨detail_threadçº¿ç¨‹ä¸Šä½¿ç”¨joinæ–¹æ³•ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡Queueæ¥å‘Šè¯‰ä¸»çº¿ç¨‹æ˜¯å¦é˜»å¡ Queueä¹Ÿå¯ä»¥ä½¿ç”¨joinæ–¹æ³•ï¼Œä½†æ˜¯Queueä½¿ç”¨joinæ–¹æ³•æ—¶ä¼šä¸€ç›´é˜»å¡ï¼Œåªæœ‰ä½¿ç”¨äº†Queueçš„task_doneæ–¹æ³•æ—¶Queueæ‰ä¼šé€€å‡º ","date":"2020-11-09","objectID":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/:4:0","tags":["å¤šçº¿ç¨‹","å¤šè¿›ç¨‹"],"title":"Pythonå¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹","uri":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/"},{"categories":["Python"],"content":"çº¿ç¨‹åŒæ­¥ çº¿ç¨‹åŒæ­¥æ˜¯å¤šçº¿ç¨‹ä¸å¾—ä¸é¢å¯¹çš„ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨è§£å†³çº¿ç¨‹å¦‚ä½•åŒæ­¥ä¹‹å‰ï¼Œåº”è¯¥çŸ¥é“çº¿ç¨‹ä¸ºä»€ä¹ˆä¼šä¸åŒæ­¥ import dis def add(a): a += 1 def desc(a): a -= 1 dis.dis(add) dis.dis(desc) æŸ¥çœ‹å­—èŠ‚ç  4 0 LOAD_FAST 0 (a) 2 LOAD_CONST 1 (1) 4 INPLACE_ADD 6 STORE_FAST 0 (a) 8 LOAD_CONST 0 (None) 10 RETURN_VALUE 7 0 LOAD_FAST 0 (a) 2 LOAD_CONST 1 (1) 4 INPLACE_SUBTRACT 6 STORE_FAST 0 (a) 8 LOAD_CONST 0 (None) 10 RETURN_VALUE å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ä»£ç è™½ç„¶æ˜¯ä¸€è¡Œä¸€è¡Œçš„è¯»çš„ï¼Œä½†æ˜¯è§£é‡Šå™¨åœ¨å°†ä»£ç è½¬æ¢ä¸ºå­—èŠ‚ç åè¿è¡Œçš„è¿‡ç¨‹ä¸­å¹¶ä¸æ˜¯ä¸€ä¸‹å°±å°†aå¢åŠ æˆ–å‡å°äº†1ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¦‚æœçº¿ç¨‹åœ¨è¿™ä¸ªæ—¶é—´ç‰‡ä¸Šæ»¡äº†ï¼Œæˆ–è€…å­—èŠ‚ç è¡Œæ•°åˆ°äº†ä¸€å®šé™åº¦å°±ä¼šåˆ‡æ¢å‡ºå»ã€‚ ","date":"2020-11-09","objectID":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/:5:0","tags":["å¤šçº¿ç¨‹","å¤šè¿›ç¨‹"],"title":"Pythonå¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹","uri":"/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B/"},{"categories":["Go"],"content":"GoåŸç”ŸWebå­¦ä¹  Handlerè¯·æ±‚ Goè¯­è¨€çš„Web Serveråœ¨æ¥æ”¶åˆ°httpè¯·æ±‚çš„æ—¶å€™æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ªgoroutineå»å¤„ç†è¯·æ±‚ï¼Œè€Œå¤„ç†httpè¯·æ±‚æ˜¯ä¸ªå¾ˆå¤æ‚çš„å·¥ä½œï¼Œè€ŒGoè¯­è¨€çš„http.DefaultServeMaxä¼šå°†å¯¹åº”çš„è¯·æ±‚äº¤ç»™æˆ‘ä»¬æŒ‡å®šçš„handlerï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒå¦‚ä½•åˆ›å»ºWeb Serverä»¥åŠç¼–å†™å¯¹åº”çš„handler ","date":"2020-10-31","objectID":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/:0:0","tags":["http","Go","Web"],"title":"GoåŸç”ŸWeb-Handlerè¯·æ±‚","uri":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/"},{"categories":["Go"],"content":"http.Handle ","date":"2020-10-31","objectID":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/:1:0","tags":["http","Go","Web"],"title":"GoåŸç”ŸWeb-Handlerè¯·æ±‚","uri":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/"},{"categories":["Go"],"content":"åˆ›å»ºWeb Server http.ListenAndServer() ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç½‘ç»œåœ°å€ å¦‚æœä¸º\"\"ï¼Œé‚£ä¹ˆå°±æ˜¯æ‰€æœ‰ç½‘ç»œæ¥å£çš„80ç«¯å£ ç¬¬äºŒä¸ªå‚æ•°æ˜¯handler å¦‚æœä¸ºnilï¼Œé‚£ä¹ˆå°±æ˜¯DefaultServeMax DefaultServerMaxæ˜¯ä¸€ä¸ªmultiplexer func main() { http.ListenAndServe(\"localhost:8080\", nil) } è¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„Web Server ListenAndServeræºç å¦‚ä¸‹ func ListenAndServe(addr string, handler Handler) error { server := \u0026Server{Addr: addr, Handler: handler} return server.ListenAndServe() } å¯ä»¥çœ‹åˆ°å®ƒå…¶å®æ˜¯è°ƒç”¨çš„Serverè¿™ä¸ªç»“æ„ä½“ä¸­çš„ListenAndServe()æ–¹æ³• å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨Serverè¿™ä¸ªç»“æ„ä½“ä¸­çš„ListenAndServe()æ–¹æ³•åˆ›å»ºhttpæœåŠ¡ func (srv *Server) ListenAndServe() error { if srv.shuttingDown() { return ErrServerClosed } addr := srv.Addr if addr == \"\" { addr = \":http\" } ln, err := net.Listen(\"tcp\", addr) if err != nil { return err } return srv.Serve(ln) } http.Serveræ˜¯ä¸€ä¸ªstruct Addrå­—æ®µè¡¨ç¤ºç½‘ç»œåœ°å€ å¦‚æœä¸º\"\"ï¼Œé‚£ä¹ˆå°±æ˜¯æ‰€æœ‰ç½‘ç»œæ¥å£çš„80ç«¯å£ handlerå­—æ®µ å¦‚æœä¸ºnilï¼Œé‚£ä¹ˆå°±æ˜¯DefaultServeMax é‚£ä¹ˆåˆšæ‰çš„å†™æ³•å°±å¯ä»¥æ›´æ”¹ func main() { server := http.Server{ Addr: \"localhost:8080\", Handler: nil, } server.ListenAndServe() } ","date":"2020-10-31","objectID":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/:1:1","tags":["http","Go","Web"],"title":"GoåŸç”ŸWeb-Handlerè¯·æ±‚","uri":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/"},{"categories":["Go"],"content":"DefaultServeMax å®ƒæ˜¯ä¸€ä¸ªmultiplexerï¼ˆå¤šè·¯å¤ç”¨å™¨ï¼‰ å®ƒä¹Ÿæ˜¯ä¸€ä¸ªhandler åœ¨DefaultServeMaxæ˜¯ServerMaxè¿™ä¸ªstructçš„æŒ‡é’ˆå˜é‡ï¼ŒServerMaxä¸­ä¹Ÿæ˜¯å®ç°äº†ServeHTTPæ–¹æ³•ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯ä¸€ä¸ªhandler ","date":"2020-10-31","objectID":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/:1:2","tags":["http","Go","Web"],"title":"GoåŸç”ŸWeb-Handlerè¯·æ±‚","uri":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/"},{"categories":["Go"],"content":"Handler Handleræ˜¯ä¸€ä¸ªæ¥å£ Handlerå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ServeHTTP() ResponseWriter æŒ‡å‘Requestè¿™ä¸ªstructçš„æŒ‡é’ˆ type Handler interface { ServeHTTP(ResponseWriter, *Request) } æ‰€ä»¥åªè¦ä»»ä½•ä¸€ä¸ªç±»å‹æœ‰ServeHTTPè¿™ä¸ªæ–¹æ³•é‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªHandler è‡ªå®šä¹‰ä¸€ä¸ªHandler type myHandler struct{} func (m *myHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"Freedom And Discipline\")) } func main() { mh := myHandler{} server := http.Server{ Addr: \"localhost:8080\", Handler: \u0026mh, } server.ListenAndServe() } ä½†æ˜¯è¿è¡Œç¨‹åºåæ‰€æœ‰è¯·æ±‚éƒ½è¢«myHandlerå¤„ç†äº†ï¼Œæ‰€ä»¥è¯·æ±‚å“ªä¸ªè·¯å¾„éƒ½æ˜¯è¿”å›çš„Freedom And Discipline æœ‰æ²¡æœ‰åŠæ³•èƒ½è®©æŸä¸ªè·¯ç”±æˆ–è€…æŒ‡å®šçš„è·¯ç”±æ˜¯ç”±myHandlerå¤„ç†çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†myHandleræ³¨å†Œåˆ°DefaultServeMaxä¸Š æˆ‘ä»¬å¯ä»¥ä½¿ç”¨http.Handleå°†æŸä¸ªHandleræ³¨å†Œåˆ°DefaultServeMaxä¸Šï¼ŒServerMux structä¹Ÿæœ‰ä¸€ä¸ªHandleæ–¹æ³•ï¼Œå…¶å®æˆ‘ä»¬åœ¨è°ƒç”¨http.Handleæ–¹æ³•æ—¶å°±æ˜¯åœ¨è°ƒç”¨ServeMaxçš„Handleæ–¹æ³• func Handle(pattern string, handler Handler) { DefaultServeMux.Handle(pattern, handler) } è‡³äºHandleæ–¹æ³•æ˜¯æ€ä¹ˆæ ·å°†å¯¹åº”è·¯ç”±äº¤ç»™å¯¹åº”Handlerçš„ä¸éœ€è¦çŸ¥é“ï¼Œåªéœ€è¦çŸ¥é“ä½¿ç”¨Handleæ–¹æ³•åDefaultServeMuxä¼šå°†å¯¹åº”è·¯ç”±ä¸å¯¹åº”Handlerç»‘å®š type myHandler struct{} func (m *myHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"Freedom And Discipline\")) } func main() { mh := myHandler{} server := http.Server{ Addr: \"localhost:8080\", Handler: nil, } http.Handle(\"/hello\", \u0026mh) server.ListenAndServe() } å› æ­¤å°±å¯ä»¥é€šè¿‡http.Handleè¿›è¡Œè·¯ç”±ç»‘å®šï¼Œå°†å¯¹åº”è·¯ç”±äº¤ç»™å¯¹åº”çš„Handlerå¤„ç† ","date":"2020-10-31","objectID":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/:1:3","tags":["http","Go","Web"],"title":"GoåŸç”ŸWeb-Handlerè¯·æ±‚","uri":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/"},{"categories":["Go"],"content":"http.HandleFunc åœ¨å‰é¢åˆ›å»ºçš„æœåŠ¡éƒ½æ˜¯é€šè¿‡Handleræ¥å¤„ç†çš„ï¼Œä½†æ˜¯å¦‚æœæ¯æ¬¡éƒ½è¦å®šä¹‰structå’Œå®ƒçš„æ–¹æ³•å°±ä¼šå¾ˆéº»çƒ¦ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½éœ€è¦å»å®šä¹‰structï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Handlerå‡½æ•°ï¼ŒHandlerå‡½æ•°çš„è¡Œä¸ºä¸Handlerçš„è¡Œä¸ºç±»ä¼¼ï¼Œç­¾åä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯http.ResponseWriterï¼Œä¸€ä¸ªæ˜¯http.Requestçš„æŒ‡é’ˆã€‚ HandlerFuncæ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œå®ƒæœ‰ServeHTTPæ–¹æ³•æ‰€ä»¥å®ƒä¹Ÿæ˜¯ä¸€ä¸ªHandlerç±»å‹ type HandlerFunc func(ResponseWriter, *Request) // ServeHTTP calls f(w, r). func (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) { f(w, r) } é€šè¿‡HandleFuncå¯ä»¥æ›´å¿«çš„çš„ç¼–å†™å¤„ç†é€»è¾‘ï¼ŒHandleFuncå®ƒè°ƒç”¨çš„æ˜¯DefaultServeMuxä¸Šçš„HandleFuncæ–¹æ³• func HandleFunc(pattern string, handler func(ResponseWriter, *Request)) { DefaultServeMux.HandleFunc(pattern, handler) } func (mux *ServeMux) HandleFunc(pattern string, handler func(ResponseWriter, *Request)) { if handler == nil { panic(\"http: nil handler\") } mux.Handle(pattern, HandlerFunc(handler)) } å¯ä»¥çœ‹åˆ°DefaultServeMuxä¸Šçš„HandleFuncæ–¹æ³•å…¶å®è¿˜æ˜¯è°ƒç”¨çš„è‡ªèº«çš„Handleæ–¹æ³•ï¼Œä½†æ˜¯è°ƒç”¨Handleæ–¹æ³•ä¹‹å‰å…ˆå°†handlerå‚æ•°ä¼ é€’ç»™äº†HandlerFuncï¼Œæ‰€ä»¥HandlerFuncç›¸å½“äºä¸€ä¸ªé€‚é…å™¨ï¼Œå°†å…·æœ‰ResponseWriterã€ *Requestä¸¤ä¸ªå‚æ•°çš„å‡½æ•°è½¬æ¢ä¸ºHandlerFuncï¼Œç„¶ååœ¨ServeHTTPæ–¹æ³•ä¸­ä¸­å®ç°ç›¸åº”çš„é€»è¾‘ï¼Œè¿™é‡Œå°±ç›¸å½“äºç±»å‹è½¬æ¢ï¼Œå› ä¸ºå‡½æ•°ä¼ é€’è¿›æ¥ä¹‹å‰è¿™ä¸ªå‡½æ•°å¹¶ä¸æ˜¯ä¸€ä¸ªHandlerç±»å‹ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ²¡æœ‰ServeHTTPæ–¹æ³•ã€‚ func List(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"list\")) } func main() { server := http.Server{ Addr: \"localhost:8080\", Handler: nil, } http.HandleFunc(\"/home\", func(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"home\")) }) http.HandleFunc(\"/list\", List) server.ListenAndServe() } é‚£ä¹ˆä¹‹å‰å®šä¹‰çš„Handlerç±»å‹å°±å¯ä»¥ç®€åŒ–ï¼Œå°†è¿™ä¸ªå‡½æ•°äº¤ç»™HandlerFuncå³å¯ï¼Œå°†ä¼šæå¤§çš„ç®€åŒ–http.Handleå‡½æ•°çš„å†™æ³•ï¼Œé€šè¿‡http.HandlerFuncå°†å‡½æ•°è½¬æ¢ä¸ºHandlerç±»å‹ func Map(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"map\")) } func main() { server := http.Server{ Addr: \"localhost:8080\", Handler: nil, } http.Handle(\"/map\", http.HandlerFunc(Map)) server.ListenAndServe() } ","date":"2020-10-31","objectID":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/:2:0","tags":["http","Go","Web"],"title":"GoåŸç”ŸWeb-Handlerè¯·æ±‚","uri":"/posts/go%E5%8E%9F%E7%94%9Fweb-handler%E8%AF%B7%E6%B1%82/"},{"categories":["Python","ç½‘ç»œçˆ¬è™«"],"content":"å¼‚æ­¥é«˜å¹¶å‘çˆ¬å–å¿…åº”å£çº¸ä¸‹è½½é“¾æ¥ï¼Œå†™å…¥æ•°æ®åº“åå†å¼‚æ­¥ä¸‹è½½å­˜å‚¨å›¾ç‰‡ URLï¼šhttps://bing.ioliu.cn/?p=1 å¿…åº”å£çº¸åªæœ‰ä¸€ä¸ªUser-Agentåçˆ¬è™« é¦–å…ˆçœ‹ä¸€ä¸‹åŒæ­¥ç¨‹åºï¼Œé€»è¾‘å¾ˆç®€å• import requests from lxml import etree class BingCrawler(): def __init__(self): self.BASE_URL = \"https://bing.ioliu.cn\" self.TOTAL_PAGE = 100 self.headers = { \"user-agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36\" } def spider(self): session = requests.Session() for index in range(1 ,self.TOTAL_PAGE+1): url = self.BASE_URL + f\"/?p={index}\" response = session.get(url=url, headers=self.headers) yield response.content.decode(\"utf8\") @staticmethod def parser(html): selector = etree.HTML(html) url_list = selector.xpath(\"//div[@class='item']//div[@class='options']/a[2]/@href\") return url_list def save_picture(self, url_list): session = requests.Session() for url in url_list: file_name = url.split(\"/\")[2][:-15] + \".jpg\" picture_url = self.BASE_URL + url response = session.get(picture_url, headers=self.headers) with open(file_name, \"wb\") as file: file.write(response.content) def run(self): html_gen = self.spider() for html in html_gen: url_list = self.parser(html) self.save_picture(url_list) if __name__ == '__main__': bing_spider = BingCrawler() bing_spider.run() è¿™é‡Œå¹¶æ²¡æœ‰ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ä¸‹è½½é“¾æ¥ å…ˆå®šä¹‰ä¸¤ä¸ªå¸¸é‡ï¼Œè¿™é‡Œåªä¸‹è½½ä¸€ç™¾é¡µçš„å›¾ç‰‡ï¼Œå¯¼å…¥aiohttp import aiohttp from aiohttp import ClientSession TOTAL_PAGE = 100 BASE_URL = \"https://bing.ioliu.cn\" é¦–å…ˆæ˜¯ä¸‹è½½html async def fetch(url: str, session: ClientSession): async with session.get(url=url, headers=self.headers) as response: if response.status == 200: html = await response.read() ä¸‹è½½htmlçš„ç¨‹åºé€»è¾‘ååˆ†ç®€å•ï¼Œå‘èµ·è¿™ä¸ªè¯·æ±‚æ˜¯ä¸€ä¸ªéœ€è¦ç­‰å¾…çš„è¿‡ç¨‹ï¼Œç„¶åè¯»å–æ•°æ®ä¹Ÿæ˜¯ä¸€ä¸ªéœ€è¦ç­‰å¾…çš„è¿‡ç¨‹ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆä¸éƒ½æ˜¯asyncå‘¢ï¼Ÿ å› ä¸ºæˆ‘ä»¬å‘èµ·ä¸€ä¸ªè¯·æ±‚ç»“æŸä¹‹åéœ€è¦æ–­æ‰è¿æ¥ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯å¼‚æ­¥çš„è¯·æ±‚ï¼Œåç¨‹åœ¨ä¸åœçš„åˆ‡æ¢ï¼Œæˆ‘ä»¬ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥æ–­æ‰è¿™ä¸ªè¿æ¥ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥åˆ›å»ºè¿™ä¸ªåç¨‹ï¼Œå› ä¸ºè¿™ä¸ªè¯·æ±‚æ˜¯ä¸€ä¸ªåç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨é˜»å¡çš„æ—¶å€™å°†è¿™ä¸ªè¯·æ±‚æŒ‚èµ·ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åŠ ä¸€ä¸ªasyncå…³é”®å­—æ¥æ ‡æ³¨è¿™æ˜¯ä¸€ä¸ªåç¨‹ï¼Œå¦‚æœä¸æ ‡æ³¨é‚£ä¹ˆè§£é‡Šå™¨æ˜¯ä¸çŸ¥é“è¿™æ˜¯åç¨‹çš„ï¼Œå½“æˆ‘ä»¬éœ€è¦ç­‰å¾…çš„è¿”å›ç»“æœå°±æ˜¯ä¸€ä¸ªåç¨‹ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨awaitå…³é”®å­—è¿›è¡Œæ ‡æ³¨ã€‚ ç„¶åæ˜¯è§£ææ•°æ®ï¼Œè§£ææ•°æ®åœ¨Pythonä¸­ä½¿ç”¨lxmlé€Ÿåº¦è¿˜æ˜¯å¾ˆå¿«çš„ï¼Œè€Œä¸”ç°åœ¨ä¹Ÿå¹¶æ²¡æœ‰å¼‚æ­¥è§£æåº“ï¼Œé‚£ä¹ˆåªèƒ½ä½¿ç”¨åŒæ­¥è§£æ è¿™é‡Œæˆ‘è®¾ç½®äº†ä¸€ä¸ªstatus_code async def parser(html: bytes): element = etree.HTML(html.decode(\"utf-8\")) href_list = element.xpath('//div[@class=\"item\"]//div[@class=\"options\"]/a[2]/@href') items = [{\"url\": BASE_URL + href, \"status_code\": 0, \"url_id\": md5(href)} for href in href_list] ä¸‹é¢æ˜¯MD5ç¼–ç çš„ç¨‹åº import hashlib def md5(string: str) -\u003e str: m = hashlib.md5() m.update(string.encode()) return m.hexdigest() ","date":"2020-10-28","objectID":"/posts/%E5%BC%82%E6%AD%A5%E7%88%AC%E5%8F%96%E5%BF%85%E5%BA%94%E5%A3%81%E7%BA%B8/:0:0","tags":["åç¨‹","Python","ç½‘ç»œçˆ¬è™«"],"title":"å¼‚æ­¥çˆ¬å–å¿…åº”å£çº¸","uri":"/posts/%E5%BC%82%E6%AD%A5%E7%88%AC%E5%8F%96%E5%BF%85%E5%BA%94%E5%A3%81%E7%BA%B8/"},{"categories":["Python"],"content":"ç¼–å†™å¤šçº¿ç¨‹çš„ç¨‹åºæ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œè€Œä¸”åœ¨å¤šçº¿ç¨‹ä¸­è°ƒåº¦ç¨‹åºä»»ä½•æ—¶å€™éƒ½èƒ½ä¸­æ–­çº¿ç¨‹ï¼Œå¿…é¡»è¦ä½¿ç”¨ä¿ç•™é”åŒºä¿æŠ¤ä¸»çº¿ç¨‹ï¼Œé˜²æ­¢å¤šæ­¥æ“ä½œåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¸­æ–­ï¼Œé˜²æ­¢æ•°æ®å¤„äºæ— æ•ˆçš„çŠ¶æ€ã€‚ è€Œåç¨‹é»˜è®¤ä¼šåšå¥½å…¨æ–¹ä½çš„ä¿æŠ¤ï¼Œä»¥é˜²æ­¢ä¸­æ–­ã€‚ å¯¹äºåç¨‹æ¥è¯´ï¼Œæ— éœ€ä¿ç•™é”ï¼Œå¤šä¸ªçº¿ç¨‹ä¹‹é—´åŒæ­¥æ“ä½œï¼Œåç¨‹è‡ªç”Ÿå°±ä¼šåŒæ­¥ï¼Œè¿™æ˜¯åç¨‹æœ¬èº«çš„ç‰¹æ€§å†³å®šçš„ã€‚ ","date":"2020-10-27","objectID":"/posts/python%E5%8D%8F%E7%A8%8B/:0:0","tags":["Python","è¿›é˜¶","åç¨‹","aiohttp"],"title":"Pythonåç¨‹","uri":"/posts/python%E5%8D%8F%E7%A8%8B/"},{"categories":["Python"],"content":"åˆ‡æ¢ä»»åŠ¡ def foo(): print(\"run foo\") time.sleep(1) def bar(): print(\"run bar\") time.sleep(1) while True: foo() bar() ç°åœ¨æœ‰ä¸¤ä¸ªå‡½æ•°fooå’Œbarè®©ä»–ä»¬å¤„äºä¸€ç›´è¿è¡Œçš„çŠ¶æ€ è¿™æ—¶å€™æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨è¿™ä¸ªåŒæ­¥ç¨‹åºä¸­å®ƒä»¬éƒ½ç­‰å¾…äº†1ç§’ï¼Œåœ¨IOä»»åŠ¡ä¸­ç­‰å¾…çš„æ—¶é—´å¯èƒ½æ›´é•¿ï¼Œä¸ºäº†èŠ‚çœæ—¶é—´æˆ‘æƒ³è®©ç¨‹åºæ‰§è¡Œfooå‡½æ•°å¼€å§‹ç­‰å¾…çš„æ—¶å€™é©¬ä¸Šåˆ‡æ¢åˆ°baræ‰§è¡Œï¼Œprintè¯­å¥è‚¯å®šä¹Ÿæ˜¯éœ€è¦èŠ±è´¹ä¸€ç‚¹ç‚¹æ—¶é—´çš„ï¼Œå°½ç®¡è¿™ç‚¹æ—¶é—´çœ‹èµ·æ¥å¾®ä¸è¶³é“ï¼Œä½†æ˜¯åœ¨barç­‰å¾…ç»“æŸä¹‹å‰fooè‚¯å®šç­‰å¾…ç»“æŸäº†ï¼Œè¿™æ—¶å€™æˆ‘æƒ³è®©ç¨‹åºé©¬ä¸Šåˆ‡æ¢åˆ°foo æ˜¾ç„¶å¤šçº¿ç¨‹å·²ç»ä¸èƒ½å¸®æˆ‘ä»¬å®Œæˆè¿™æ ·çš„ä»»åŠ¡äº†ï¼Œå› ä¸ºå¤šçº¿ç¨‹æ˜¯å¼€å¯å¤šä¸ªçº¿ç¨‹æ¥æ‰§è¡ŒåŒä¸€ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯éœ€è¦åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¹‹é—´åˆ‡æ¢ä¸¤ä¸ªä»»åŠ¡ã€‚ åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°å¤šçº¿ç¨‹å¯¹æ€§èƒ½çš„å¼€é”€æ˜¯æ›´å¤§çš„ï¼Œå› ä¸ºåŒæ—¶å¯åŠ¨äº†å¾ˆå¤šä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯ç»å¤§éƒ¨åˆ†çº¿ç¨‹å¯èƒ½éƒ½å¤„äºç­‰å¾…çš„çŠ¶æ€ï¼Œè¿™ä¸ªç­‰å¾…å½“å¤„äºç½‘ç»œIOæˆ–è€…æ˜¯æ–‡ä»¶IOçš„æ—¶å€™æ˜¯å¾ˆæ…¢çš„ï¼Œå°½ç®¡åšä¸€ä¸ªæ•°æ®æŸ¥è¯¢æ—¶èƒ½åŒæ—¶å¹¶å‘1000ä¸ªç”šè‡³æ˜¯10000ä¸ªçº¿ç¨‹å»è®¿é—®æ•°æ®åº“æŸ¥è¯¢æ•°æ®ï¼Œä½†æ˜¯æ•°æ®åº“åœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­çº¿ç¨‹ä¼šä¸€ç›´é™·å…¥ç­‰å¾…çš„çŠ¶æ€ï¼Œä¸ç®¡å¯¹æ€§èƒ½å’Œå†…å­˜çš„å¼€é”€éƒ½æ˜¯ååˆ†å·¨å¤§çš„ã€‚ è¿™æ—¶å€™æˆ‘ä»¬å°±åº”è¯¥ä½¿ç”¨åç¨‹æ¥å¹¶å‘æ‰§è¡Œä»»åŠ¡ï¼Œå½“ä»»åŠ¡å‡ºç°é˜»å¡çš„æ—¶å€™å°±åˆ‡æ¢ä»»åŠ¡ã€‚ import asyncio async def foo(): while True: print(\"run foo\") await asyncio.sleep(1) async def bar(): while True: print(\"run bar\") await asyncio.sleep(1) loop = asyncio.get_event_loop() loop.run_until_complete(asyncio.gather(foo(), bar())) loop.close() é€šè¿‡ä½¿ç”¨asyncioåˆ›å»ºæ—¶é—´å¾ªç¯ä¹‹åè¿è¡Œç¨‹åºå‘ç°ç¨‹åºåœ¨æ‰§è¡Œçš„æ—¶å€™åœ¨fooä¸barä¹‹é—´è¿›è¡Œäº†åˆ‡æ¢ï¼Œå¹¶æ²¡æœ‰é‡å¤ç­‰å¾… åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œå¦‚éœ€è¦ä¸‹è½½ä¸€ä¸ªç½‘é¡µï¼Œé‚£ä¹ˆåœ¨ç­‰å¾…æ•°æ®è¿”å›çš„æ—¶å€™ç¨‹åºå°±ä¼šé™·å…¥ç­‰å¾…ä¸­ï¼Œå¹¶ä¸”å¦‚æœæ˜¯å¤šä¸ªURLï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ›å»ºå¤šä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆåœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­å°±éœ€è¦è¿›è¡Œå¤šä¸ªä»»åŠ¡ä¹‹é—´çš„åˆ‡æ¢ import requests urls = [ \"https://game.gtimg.cn/images/lol/act/img/skin/big81000.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81001.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81002.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81003.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81004.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81005.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81006.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81007.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81008.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81009.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81018.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81019.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81020.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81021.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81022.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81023.jpg\", ] def fetch(filename:str, url:str) -\u003e bytes: response = requests.get(url=url) if response.status_code == 200: print(f\"{filename}ä¸‹è½½å®Œæˆ\") return response.content print(f\"{filename}çš„çŠ¶æ€ç æ˜¯: {response.status_code}\") return b'' def save_to_file(filename:str, source:bytes): with open(file=filename, mode=\"wb\") as f: f.write(source) print(f\"{filename}å­˜å‚¨å®Œæˆ\") def main(): for url in urls: filename=url.split(\"/\")[-1] source = fetch(filename=filename, url=url) save_to_file(filename=filename, source=source) if __name__ == \"__main__\": main() ä¸Šé¢æ˜¯ä¸€ä¸ªä¸‹è½½å›¾ç‰‡çš„åŒæ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å°†ä»–æ”¹ä¸ºå¼‚æ­¥å¹¶å‘æ‰§è¡Œï¼Œä½†æ˜¯å› ä¸ºrequestså¹¶ä¸æ˜¯ä¸€ä¸ªå¼‚æ­¥ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨aiohttpï¼Œå­˜å‚¨æ–‡ä»¶ä¹Ÿéœ€è¦ä½¿ç”¨å¼‚æ­¥æ–‡ä»¶å­˜å‚¨æ¨¡å— pip install aiohttp pip install aiofiles é¦–å…ˆåˆ›å»ºä¸€ä¸ªClientSessionå¯¹è±¡ï¼Œç”¨æ¥å‘é€è¯·æ±‚ï¼Œå› ä¸ºè¿™ä¸ªåˆ›å»ºè¿‡ç¨‹ä¹Ÿæ˜¯ä¸€ä¸ªåç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨asyncå…³é”®å­—æ ‡æ³¨ï¼Œç„¶åå°±æ˜¯è®²ä»»åŠ¡æŒ‚è½½åˆ°äº‹ä»¶å¾ªç¯ä¸­ï¼Œå› ä¸ºåœ¨è¿™é‡Œæˆ‘æƒ³è¦ä½¿ç”¨å›è°ƒå‡½æ•°çš„çš„æ–¹å¼æ‰§è¡Œç¨‹åºï¼Œæ‰€ä»¥ä½¿ç”¨äº†ensure_futureï¼Œæœ€åå°±æ˜¯ç­‰å¾…ä»»åŠ¡æ‰§è¡Œç»“æŸã€‚ async def main(): async with aiohttp.ClientSession() as session: task = [asyncio.ensure_future(fetch(url=url, session=session)) for url in urls] await asyncio.wait(task) ç„¶åæ˜¯ä¿®æ”¹fetchå‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡sessionå»åšè¯·æ±‚ï¼Œè¿™ä¸ªè¯·æ±‚è¿‡ç¨‹ä¹Ÿæ˜¯ä¸€ä¸ªåç¨‹ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦asyncå…³é”®å­—æ ‡æ³¨ ä»è¯·æ±‚è¿”å›çš„ç›¸åº”ä¸­è¯»å–å†…å®¹éœ€è¦æˆ‘ä»¬ç­‰å¾…ï¼Œæ‰€ä»¥è¦ä½¿ç”¨awaitå…³é”®å­—æ ‡æ³¨ï¼Œå†…å®¹è¯»å–å‡ºæ¥ä¹‹åæˆ‘ä»¬ä¸éœ€è¦è®²å†…å®¹è¿”å›ï¼Œç›´æ¥è°ƒç”¨save_to_fileå°±è¡Œï¼Œä½†æ˜¯å­˜å‚¨æ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªéœ€è¦ç­‰å¾…çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦åœ¨å‰é¢åŠ ä¸Šawaitå…³é”®å­—æ ‡æ³¨ async def save_to_file(filename:str, source:bytes): async with aiofiles.open(file=filename, mode=\"wb\") as picture: await picture.write(source) print(f\"{filename}å­˜å‚¨å®Œæˆ\") æœ€åæ˜¯å†™å…¥æ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½éœ€è¦åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦ä½¿ç”¨asyncå…³é”®å­—å¯¹æ‰“å¼€æ–‡ä»¶çš„è¿‡ç¨‹è¿›è¡Œæ ‡æ³¨ï¼Œå†™å…¥æ–‡ä»¶éœ€è¦ç­‰å¾…æ‰€ä»¥éœ€è¦åŠ ä¸Šawaitå…³é”®å­—è¿›è¡Œæ ‡æ³¨ async def save_to_file(filename:str, source:bytes): async with aiofiles.open(file=filename, mode=\"wb\") as picture: await picture.write(source) print(f\"{filename}å­˜å‚¨å®Œæˆ\") ä¸‹é¢æ˜¯å®Œæ•´çš„ç¨‹åº import aiohttp import asyncio from aiohttp.client import ClientSession import aiofiles urls = [ \"https://game.gtimg.cn/images/lol/act/img/skin/big81000.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81001.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81002.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81003.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81004.jpg\", \"https://game.gtimg.cn/images/lol/act/img/skin/big81005.j","date":"2020-10-27","objectID":"/posts/python%E5%8D%8F%E7%A8%8B/:1:0","tags":["Python","è¿›é˜¶","åç¨‹","aiohttp"],"title":"Pythonåç¨‹","uri":"/posts/python%E5%8D%8F%E7%A8%8B/"},{"categories":["Go"],"content":"ç¨‹åºåšè°ƒè¯•å…¶å®æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œä½†æ˜¯å¾—ç›Šäºjet brainsçš„IDEè®©æˆ‘ä»¬è°ƒè¯•èµ·æ¥ååˆ†æ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœç¨‹åºæ¯”è¾ƒå¤æ‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬è°ƒè¯•èµ·æ¥è¿˜æ˜¯å¾ˆéº»çƒ¦ï¼Œå…¶å®æˆ‘åšè°ƒè¯•æ›´å¤šçš„æ˜¯å»çœ‹è¿™ä¸ªå˜é‡ä¸­å­˜äº†å“ªäº›å€¼æ˜¯ä»€ä¹ˆè€Œä¸æ˜¯ä¸ºäº†å› ä¸ºç¨‹åºæœ‰bugè€Œå»æ‰¾bugï¼Œå½“ç¨‹åºå‡ºé”™çš„æ—¶å€™æˆ‘æ›´æƒ³å¿«é€Ÿçš„çŸ¥é“åˆ°åº•æ˜¯å“ªé‡Œå‡ºé”™äº†ï¼Œè€Œä¸æ˜¯æ…¢æ…¢çš„å»è°ƒè¯• ","date":"2020-10-26","objectID":"/posts/python-go%E6%B5%8B%E8%AF%95/:0:0","tags":["Go","Python","æµ‹è¯•"],"title":"Python and Goæµ‹è¯•","uri":"/posts/python-go%E6%B5%8B%E8%AF%95/"},{"categories":["Go"],"content":"ä¼ ç»Ÿæµ‹è¯• ä¼ ç»Ÿçš„æµ‹è¯•ä¸­æµ‹è¯•æ•°æ®å’Œæµ‹è¯•é€»è¾‘æ··åœ¨ä¸€èµ·ï¼Œå‡ºé”™ä¿¡æ¯ä¹Ÿæ˜ç¡®ï¼Œä¸‹é¢æœ‰ä¸€æ®µç½‘ä¸Šéšä¾¿æ‰¾çš„ä¸€ä¸ªPythonç»ƒä¹ é¢˜çš„æµ‹è¯•ä»£ç ï¼Œè¿™ä¸ªé¢˜çš„æ„æ€æ˜¯ï¼šä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœé•¿åº¦å°äº3å°±ç›´æ¥è¿”å›ã€‚å¦‚æœé•¿åº¦å¤§äº3å¹¶ä¸”æ˜¯ingç»“å°¾é‚£ä¹ˆå°±åŠ ä¸Šlyï¼Œå¦‚æœç»“å°¾æ²¡æœ‰ingé‚£ä¹ˆå°±åŠ ä¸Šing def verbing(s): length = len(s) if length \u003e 3: if s[-3:] == \"ing\": return s + \"ly\" return s + \"ing\" return s def test(a, b: Any): if a == b: prefix = ' OK ' else: prefix = ' X ' print('%s got: %s expected: %s' % (prefix, repr(a), repr(b))) def main(): test(verbing('hail'), 'hailing') test(verbing('swiming'), 'swimingly') test(verbing('do'), 'do') è¿™ä¸ªæµ‹è¯•å‘¢æ˜¯ä¼ ç»Ÿæµ‹è¯•æ–¹å¼ï¼Œæµ‹è¯•é€»è¾‘ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯è¿™ä¸ªæµ‹è¯•ç¨‹åºä¸ä¼šéšä¾¿æŒ‚æ‰ ","date":"2020-10-26","objectID":"/posts/python-go%E6%B5%8B%E8%AF%95/:1:0","tags":["Go","Python","æµ‹è¯•"],"title":"Python and Goæµ‹è¯•","uri":"/posts/python-go%E6%B5%8B%E8%AF%95/"},{"categories":["Go"],"content":"è¡¨æ ¼é©±åŠ¨æµ‹è¯• ","date":"2020-10-26","objectID":"/posts/python-go%E6%B5%8B%E8%AF%95/:2:0","tags":["Go","Python","æµ‹è¯•"],"title":"Python and Goæµ‹è¯•","uri":"/posts/python-go%E6%B5%8B%E8%AF%95/"},{"categories":["Go"],"content":"Python ä½¿ç”¨è¡¨æ ¼é©±åŠ¨æµ‹è¯•èƒ½è®©æˆ‘ä»¬å°†æµ‹è¯•ä¸æ•°æ®åˆ†å¼€ï¼Œå¹¶ä¸”ä¸“æ³¨äºæ•°æ®è€Œä¸æ˜¯æµ‹è¯•é€»è¾‘ï¼ŒPythonçš„è¡¨æ ¼é©±åŠ¨æµ‹è¯•é€»è¾‘å†™è¿˜ç®—ç®€å•ï¼Œä½†æ˜¯åœ¨åˆ¤æ–­ä¸Šå°±æˆ³ä¸­äº†ä¸€å¤§ç—›ç‚¹ï¼Œæµ·è±¡è¿ç®—ç¬¦åœ¨è¿™é‡Œä½¿ç”¨åªä¼šè®©ç¨‹åºå˜å¾—æ›´å¤æ‚ from typing import Dict, Iterable def verbing(s: str) -\u003e str: length = len(s) if length \u003e 3: if s[-3:] == \"ing\": return s + \"ly\" return s + \"ing\" return s def test(test_data: Iterable[Dict]): for data in test_data: if verbing(data[\"a\"]) != data[\"b\"]: print(f\"X got: {data['a']} expected: {data['b']}\") if __name__ == \"__main__\": test_data = [ { \"a\": \"hail\", \"b\": \"hailing\", }, { \"a\": \"swiming\", \"b\": \"swimingly\" }, { \"a\": \"do\", \"b\": \"do\" } ] test(test_data=test_data) ä¸Šé¢çš„ç¨‹åºä¸­ä½¿ç”¨äº†liståµŒå¥—dictçš„æ–¹å¼ï¼Œç„¶åé€šè¿‡æ•°æ®è¿­ä»£æ¥å®Œæˆæ•´ä¸ªæµ‹è¯•ï¼Œå°†æˆ‘ä»¬éœ€è¦æµ‹è¯•çš„æ•°æ®å’Œæˆ‘ä»¬çš„æµ‹è¯•é€»è¾‘å®Œæˆäº†åˆ†ç¦»ï¼Œå› æ­¤å½“æµ‹è¯•ä¸é€šè¿‡çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥æŸ¥çœ‹åˆ°é”™è¯¯æ•°æ®æ˜¯å“ªï¼Œè€Œä¸éœ€è¦å»ä¸€ä¸ªä¸€ä¸ªæ‰¾ã€‚ ","date":"2020-10-26","objectID":"/posts/python-go%E6%B5%8B%E8%AF%95/:2:1","tags":["Go","Python","æµ‹è¯•"],"title":"Python and Goæµ‹è¯•","uri":"/posts/python-go%E6%B5%8B%E8%AF%95/"},{"categories":["Go"],"content":"Go Goçš„è¡¨æ ¼é©±åŠ¨æµ‹è¯•å†™èµ·æ¥å°±ååˆ†ç®€å•äº†ï¼Œä½†æ˜¯æœ‰ä¸€äº›æ ¼å¼ä¸Šçš„è¦æ±‚ï¼Œä¸è¿‡è¿™äº›æ ¼å¼åªä¼šç®€åŒ–æ•´ä¸ªæµ‹è¯•è¿‡ç¨‹ æµ‹è¯•ç¨‹åºå’Œè¢«æµ‹è¯•ç¨‹åºéœ€è¦åœ¨ä¸€ä¸ªåŒ…ä¸‹ï¼Œè€Œä¸”åŒ…çš„å£°æ˜éƒ½éœ€è¦æ˜¯main åˆ›å»ºçš„æµ‹è¯•ç¨‹åºéœ€è¦å•ç‹¬æˆæ–‡ä»¶ï¼Œæ–‡ä»¶åç§°éœ€è¦æ˜¯_testç»“å°¾çš„ æµ‹è¯•å‡½æ•°éœ€è¦ä¼ é€’ä¸€ä¸ªtesting.Tçš„æŒ‡é’ˆ ä¸‹é¢æ˜¯ä¸€ä¸ªè®¡ç®—ä¸‰è§’å½¢çš„ç¬¬ä¸‰è¾¹çš„ç¨‹åºè¿™ä¸ªç¨‹åºçš„åç§°å«åštriangle.goï¼Œéœ€è¦ä½¿ç”¨calcTriangleæ¥ç®—å‡ºç¬¬ä¸‰è¾¹çš„é•¿åº¦ package main import ( \"fmt\" \"math\" ) func Triangle() { var a, b int a, b = 3, 4 fmt.Println(calcTriangle(a, b)) } func calcTriangle(a, b int) int { var c int c = int(math.Sqrt(float64(a*a + b*b))) return c } ä¸‹é¢æ˜¯æµ‹è¯•ç¨‹åºï¼Œæµ‹è¯•ç¨‹åºçš„åç§°å«åštriangle_test.go package main import \"testing\" func TestTriangle(t *testing.T) { tests := []struct{ a, b, c int }{ {3, 4, 5}, {5, 12, 13}, {8, 15, 17}, {30000, 40000, 50000}, } for _, tt := range tests { if actual := calcTriangle(tt.a, tt.b); actual != tt.c { t.Errorf(\"calcTriangle(%d, %d); got %d; expected %d\", tt.a, tt.b, actual, tt.c) } } } åœ¨Goä¸­åšè¡¨æ ¼é©±åŠ¨æµ‹è¯•æ¯”Pythonè¿˜ç®€å•ï¼Œåªéœ€è¦å£°æ˜ä¸€ä¸ª[]struct{}å°±è¡Œï¼Œåˆ‡ç‰‡ä¸­çš„æ¯ä¸ªå…ƒç´ å°±æ˜¯æˆ‘ä»¬éœ€è¦æµ‹è¯•çš„æ•°æ®é›†åˆï¼Œæˆ‘ä»¬åœ¨æµ‹è¯•å–å€¼çš„æ—¶å€™å°±èƒ½å¾ˆç®€å•çš„æ‹¿åˆ°å€¼å»åšéªŒè¯ï¼Œè€Œä¸”Goä¸­çš„ä¸‰å…ƒè¡¨è¾¾å¼è¿›ä¸€æ­¥çš„è®©è¿™ä¸ªæµ‹è¯•é€»è¾‘å†™èµ·æ¥å˜å¾—ç®€å•ã€‚ é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨IDEï¼Œç¨‹åºæ˜¯åœ¨æœåŠ¡å™¨ä¸Šå¼€å‘çš„ï¼Œé‚£ä¹ˆGoè¯­è¨€åœ¨æµ‹è¯•ä¸Šçš„å¼ºå¤§å°±æ›´èƒ½ä½“ç°å‡ºæ¥äº†ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›å…¥åˆ°ç¨‹åºç›®å½•ï¼Œç„¶åä½¿ç”¨å‘½ä»¤å°±è¡Œ $ go test . åªéœ€è¦è¿™æ ·ä¸€ä¸ªç®€å•çš„å‘½ä»¤ï¼Œç»ˆç«¯å°±ä¼šè¾“å‡ºæµ‹è¯•çš„ç»“æœä»¥åŠæµ‹è¯•çš„æ—¶é—´ ok pujichun.com/learngo/test/triangle 0.292s ","date":"2020-10-26","objectID":"/posts/python-go%E6%B5%8B%E8%AF%95/:2:2","tags":["Go","Python","æµ‹è¯•"],"title":"Python and Goæµ‹è¯•","uri":"/posts/python-go%E6%B5%8B%E8%AF%95/"},{"categories":["Go"],"content":"ä»£ç è¦†ç›–ç‡ æˆ‘ä»¬åœ¨IDEä¸­å†™å®Œæµ‹è¯•æ–‡ä»¶ä¹‹ååœ¨ç‚¹å‡»è¿è¡Œçš„æ—¶å€™æœ‰ä¸€ä¸ªRun â€¦â€¦with Coverageï¼Œå¯ä»¥é€šè¿‡è¿™æ ·è¿è¡Œç¨‹åºæ¥çœ‹æˆ‘ä»¬æµ‹è¯•çš„ä»£ç è¦†ç›–ç‡ è¿è¡Œä¹‹åçº¢çš„å°±æ˜¯æ²¡æœ‰è¦†ç›–åˆ°çš„ï¼Œç»¿è‰²çš„å°±æ˜¯è¦†ç›–åˆ°äº†çš„ ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¥å®Œæˆ go test -coverprofile=t.out ç„¶åè¿™ä¸ªè¦†ç›–ç»“æœå°±ä¼šè¾“å‡ºåˆ°t.outè¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œä½†æ˜¯è¿™ä¸ªæ–‡ä»¶çœ‹èµ·æ¥å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è½¬æ¢ä¸€ä¸‹ go tool cover -html=t.out ç„¶åå°±ä¼šå°†è¿™ä¸ªä»£ç è¦†ç›–ç‡è½¬æˆhtmlå¹¶æ‰“å¼€ ","date":"2020-10-26","objectID":"/posts/python-go%E6%B5%8B%E8%AF%95/:2:3","tags":["Go","Python","æµ‹è¯•"],"title":"Python and Goæµ‹è¯•","uri":"/posts/python-go%E6%B5%8B%E8%AF%95/"},{"categories":["Go"],"content":"æ€§èƒ½æµ‹è¯• ","date":"2020-10-26","objectID":"/posts/python-go%E6%B5%8B%E8%AF%95/:3:0","tags":["Go","Python","æµ‹è¯•"],"title":"Python and Goæµ‹è¯•","uri":"/posts/python-go%E6%B5%8B%E8%AF%95/"},{"categories":["Go"],"content":"Python Pythonçš„æ€§èƒ½æµ‹è¯•å·¥å…·å¾ˆå¤šï¼Œæˆ‘æ¯”è¾ƒæ¨èçš„æ˜¯cProfileå› ä¸ºæ¨¡å—æ˜¯Cè¯­è¨€å†™çš„ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å• æˆ‘å°†ä¸Šé¢çš„æµ‹è¯•ç¨‹åºä¸­æµ‹è¯•éƒ¨åˆ†å°è£…åˆ°mainå‡½æ•°ä¸­ï¼Œç„¶ååªéœ€è¦æ·»åŠ ä¸€è¡Œ cProfile.run(\"main()\") è¿è¡Œè¿™ä¸ªç¨‹åºå°±ä¼šè¾“å‡ºæ€§èƒ½æµ‹è¯•ç»“æœäº† å¦å¤–ä¸€ä¸ªæ¨¡å—å°±æ˜¯line_profilerè¿™ä¸ªæ¨¡å—ä½¿ç”¨èµ·æ¥æå…¶ç®€å• pip install line_profiler å®‰è£…ä¹‹åkernprof.pyå°±ä¼šè¢«æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ ä½¿ç”¨çš„æ—¶å€™åªéœ€è¦åœ¨éœ€è¦æµ‹è¯•çš„å‡½æ•°ä¸ŠåŠ ä¸€ä¸ª@profileè£…é¥°å™¨å°±è¡Œ ä½†æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™éœ€è¦ä½¿ç”¨ kernprof -l -v testing.py å‘½ä»¤å†™èµ·æ¥è™½ç„¶æœ‰ä¸€ç‚¹éº»çƒ¦ï¼Œä½†æ˜¯è‡³å°‘åœ¨æˆ‘ä»¬ä¸éœ€è¦æµ‹è¯•çš„æ—¶å€™ä¹Ÿä¸è¦å»æ”¹ä»£ç  å½“ç„¶äº†ï¼ŒPycharmä¹Ÿæ˜¯å¯ä»¥åšçš„ï¼Œè€Œä¸”çœ‹èµ·æ¥æ›´ç¾è§‚ä¸€ç‚¹ï¼Œç”šè‡³ç›´æ¥æŠŠè°ƒç”¨æ ˆç»™å¯è§†åŒ–äº†å‡ºæ¥ï¼Œåœ¨è°ƒç”¨æ ˆä¸­å¯ä»¥çœ‹åˆ°æ¶ˆè€—æ—¶é—´çš„å¤§å°ï¼Œåªéœ€è¦åœ¨è¿è¡Œçš„æ—¶å€™é€‰æ‹©Profile ç¨‹åºæ–‡ä»¶åå³å¯ ","date":"2020-10-26","objectID":"/posts/python-go%E6%B5%8B%E8%AF%95/:3:1","tags":["Go","Python","æµ‹è¯•"],"title":"Python and Goæµ‹è¯•","uri":"/posts/python-go%E6%B5%8B%E8%AF%95/"},{"categories":["Go"],"content":"Go é‚£ä¹ˆåœ¨Goä¸­åªéœ€è¦åˆ›å»ºæµ‹è¯•æ–‡ä»¶å³å¯ï¼Œå°±åƒä¸Šé¢çš„è¡¨æ ¼é©±åŠ¨æµ‹è¯•ä¸€æ ·ï¼Œè€Œä¸”ä¸¤ä¸ªé€»è¾‘æ˜¯å¯ä»¥åŒæ—¶å­˜åœ¨é‡Œé¢çš„ï¼Œéœ€è¦ä½¿ç”¨å“ªä¸ªå°±ç”¨å“ªä¸ªå°±è¡Œï¼Œè¿™é‡Œåœ¨triangle_test.goä¸­æ·»åŠ è¿™ä¸ªæ€§èƒ½æµ‹è¯•å‡½æ•° func BenchmarkTriangle(b *testing.B) { x, y, z := 30000, 40000, 50000 for i := 0; i \u003c b.N; i++ { if actual := calcTriangle(x, y); actual != z { b.Errorf(\"calcTriangle(%d, %d); got %d; expected %d\", x, y, actual, z) } } } ç„¶åè¿è¡Œè¿™ä¸ªå‡½æ•°å°±èƒ½å¾—åˆ°ç»“æœï¼Œä¸Šé¢çš„b.Nå°±æ˜¯Goè¯­è¨€è‡ªåŠ¨åˆ†é…çš„æµ‹è¯•æ¬¡æ•° å‘½ä»¤è¡Œä¹Ÿå¯ä»¥æ‰§è¡Œ go test -bench . ","date":"2020-10-26","objectID":"/posts/python-go%E6%B5%8B%E8%AF%95/:3:2","tags":["Go","Python","æµ‹è¯•"],"title":"Python and Goæµ‹è¯•","uri":"/posts/python-go%E6%B5%8B%E8%AF%95/"},{"categories":["Go"],"content":"åœ¨è®¡ç®—æœºæ€§èƒ½è°ƒè¯•é¢†åŸŸé‡Œï¼Œprofiling æ˜¯æŒ‡å¯¹åº”ç”¨ç¨‹åºçš„ç”»åƒï¼Œç”»åƒå°±æ˜¯åº”ç”¨ç¨‹åºä½¿ç”¨ CPU å’Œå†…å­˜çš„æƒ…å†µã€‚ Goè¯­è¨€æ˜¯ä¸€ä¸ªå¯¹æ€§èƒ½ç‰¹åˆ«çœ‹é‡çš„è¯­è¨€ï¼Œå› æ­¤è¯­è¨€ä¸­è‡ªå¸¦äº† profiling çš„åº“ï¼Œè¿™ç¯‡æ–‡ç« å°±è¦è®²è§£æ€ä¹ˆåœ¨ golang ä¸­åš profilingã€‚ ","date":"2020-10-26","objectID":"/posts/go%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/:0:0","tags":["Go","æ€§èƒ½è°ƒä¼˜"],"title":"Goæ€§èƒ½è°ƒä¼˜","uri":"/posts/go%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/"},{"categories":["Go"],"content":"å¸¸è§çš„æ€§èƒ½ä¼˜åŒ–ç‚¹ ã€CPUã€‘å»é™¤ä¸å¿…è¦çš„åºåˆ—åŒ–/ååºåˆ—åŒ– ï¼šæ ‡å‡†çš„jsonåº“éå¸¸è€—æ€§èƒ½ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å…¶ä»–åº“ï¼Œæ›´å¥½çš„æ˜¯ä½¿ç”¨grpcã€‚ ã€CPUã€‘çº¿ç¨‹æ³„éœ²ï¼šgoroutineé£å‡ºå»ä»¥åå¿˜äº†stop/closeï¼Œå°¤å…¶æ˜¯time.tickerä¹‹ç±»çš„å®šæ—¶å™¨ã€‚ ã€CPUã€‘ç›²ç›®å¼€å¯è¿‡å¤šgoroutineï¼šgoroutineèƒ½æ§åˆ¶å°±æ§åˆ¶ä¸€ä¸‹ï¼Œå¼€å‡ ç™¾ä¸ªéé˜»å¡çš„goroutineä¼šå¯¼è‡´è°ƒåº¦æ¶ˆè€—è¿‡å¤šCPUã€‚ ã€MEMã€‘å‡å°‘GCï¼šä¸¾ä¾‹æ¥è¯´ï¼Œå­—ç¬¦ä¸²(string)ä¼ é€’éƒ½æ˜¯å€¼æ‹·è´ï¼Œå¦‚æœæ•°æ®é‡å¤§ï¼Œä¼šäº§ç”Ÿå¤§é‡gcï¼Œæ­¤æ—¶å®Œå…¨å¯ä»¥ç”¨byteæ•°ç»„æ¥ä»£æ›¿ã€‚é«˜é˜¶ä¸€ç‚¹å°±æ˜¯ä½¿ç”¨sync.Poolæ¥åšä¸€ä¸ªæ± å­ï¼Œè‡ªå·±å¤„ç†å†…å­˜å¤ç”¨å’Œå›æ”¶çš„å·¥ä½œï¼Œé¿å…GCã€‚Javaåœ¨è¿™ä¸€å—åšçš„å¾ˆæˆç†Ÿï¼Œæœ‰æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„æ¦‚å¿µï¼Œgolangè¿˜æ²¡æœ‰é‚£ä¹ˆå®Œå–„ã€‚ ã€MEMã€‘å†…å­˜é¢„åˆ†é…ï¼šgolangçš„sliceå¾ˆå¥½ç”¨ï¼Œä½†æ˜¯åº•å±‚æ˜¯æ•°ç»„ï¼Œå¦‚æœç©ºé—´èƒ½ç¡®å®šå°±å…ˆç¡®å®šä¸‹æ¥ï¼Œä»¥å…appendçš„æ—¶å€™ç©ºé—´ä¸å¤Ÿå¯¼è‡´ä¸åœçš„copyæ•°æ®æ¥æ‰©å¤§æ•°ç»„å¤§å°ã€‚ ã€DISKã€‘å‡å°‘ç£ç›˜éšæœºè¯»å†™IOï¼šSATAç›˜çš„ç†è®ºæœ€å¤§è¯»å†™åœ¨300MB/sï¼Œç£ç›˜å¯»é“å°±è¦10msï¼Œå¦‚æœå¤§é‡éšæœºè¯»å†™ï¼Œå“ªæ€•1kbæ•°æ®è¯»å†™ï¼Œä¹Ÿè¦10msï¼Œæ—¶é—´å°±ä¸»è¦èŠ±åœ¨å¯»é“ä¸Šã€‚ ã€NETã€‘æ–°æœåŠ¡çš„è¯ï¼Œå°½é‡ä½¿ç”¨grpcä»£æ›¿httpã€‚ ","date":"2020-10-26","objectID":"/posts/go%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/:1:0","tags":["Go","æ€§èƒ½è°ƒä¼˜"],"title":"Goæ€§èƒ½è°ƒä¼˜","uri":"/posts/go%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/"},{"categories":["Go"],"content":"Goè¯­è¨€é¡¹ç›®ä¸­çš„æ€§èƒ½ä¼˜åŒ–ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š CPU profileï¼šæŠ¥å‘Šç¨‹åºçš„ CPU ä½¿ç”¨æƒ…å†µï¼ŒæŒ‰ç…§ä¸€å®šé¢‘ç‡å»é‡‡é›†åº”ç”¨ç¨‹åºåœ¨ CPU å’Œå¯„å­˜å™¨ä¸Šé¢çš„æ•°æ® Memory Profileï¼ˆHeap Profileï¼‰ï¼šæŠ¥å‘Šç¨‹åºçš„å†…å­˜ä½¿ç”¨æƒ…å†µ Block Profilingï¼šæŠ¥å‘Š goroutines ä¸åœ¨è¿è¡ŒçŠ¶æ€çš„æƒ…å†µï¼Œå¯ä»¥ç”¨æ¥åˆ†æå’ŒæŸ¥æ‰¾æ­»é”ç­‰æ€§èƒ½ç“¶é¢ˆ Goroutine Profilingï¼šæŠ¥å‘Š goroutines çš„ä½¿ç”¨æƒ…å†µï¼Œæœ‰å“ªäº› goroutineï¼Œå®ƒä»¬çš„è°ƒç”¨å…³ç³»æ˜¯æ€æ ·çš„ ","date":"2020-10-26","objectID":"/posts/go%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/:2:0","tags":["Go","æ€§èƒ½è°ƒä¼˜"],"title":"Goæ€§èƒ½è°ƒä¼˜","uri":"/posts/go%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/"},{"categories":["Go"],"content":"cpuprofile åœ¨æ€§èƒ½æµ‹è¯•çš„ç¨‹åºä¸­ï¼Œåªéœ€è¦åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å‘½ä»¤å³å¯ go test -bench . -cpuprofile cpu.out å½“ç¨‹åºæ€§èƒ½æµ‹è¯•å®Œæˆä¹‹åå°±ä¼šåœ¨å½“å‰è·¯å¾„ä¸‹ç”Ÿæˆä¸€ä¸ªcpu.outçš„äºŒè¿›åˆ¶æ–‡ä»¶ é‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä¿¡æ¯ï¼Œéœ€è¦ä½¿ç”¨åˆ°Goä¸­çš„pprof go tool pprof cpu.out è¿™æ—¶å€™ä¼šè¿›å…¥ä¸€ä¸ªäº¤äº’å¼çš„å‘½ä»¤ç¯å¢ƒä¸­ ä½¿ç”¨helpå‘½ä»¤èƒ½å¤ŸæŸ¥çœ‹åœ¨è¿™ä¸ªç¯å¢ƒä¸­èƒ½åšçš„äº‹æƒ…ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥webå°±èƒ½çœ‹åˆ°æ€§èƒ½æ¶ˆè€—çš„å¯è§†åŒ–å›¾åƒ æˆ‘è¾“å…¥webä»¥åæŠ¥é”™äº†failed to execute dot. Is Graphviz installed? Error: exec: \"dot\": executable file not found in %PATH% è¿™æ˜¯å› ä¸ºç”µè„‘æ²¡æœ‰å®‰è£…gveditå¯¼è‡´çš„ https://graphviz.gitlab.io/_pages/Download/windows/graphviz-2.38.msi ä¸‹è½½åå®‰è£…ï¼Œå°†binç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡å³å¯ è¿›å…¥pprofçš„äº¤äº’ç¯å¢ƒåæ‰§è¡Œwebå‘½ä»¤å°±èƒ½å¼¹å‡ºä¸€ä¸ªç¨‹åºæ‰§è¡Œæ—¶é—´æ¶ˆè€—å›¾ï¼Œç„¶åå°±èƒ½æ ¹æ®å ç”¨æ—¶é—´å¯¹ç¨‹åºè¿›è¡Œä¼˜åŒ–äº†ã€‚ ","date":"2020-10-26","objectID":"/posts/go%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/:3:0","tags":["Go","æ€§èƒ½è°ƒä¼˜"],"title":"Goæ€§èƒ½è°ƒä¼˜","uri":"/posts/go%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/"},{"categories":["Go"],"content":"Viperæ˜¯é€‚ç”¨äºGoåº”ç”¨ç¨‹åºçš„å®Œæ•´é…ç½®è§£å†³æ–¹æ¡ˆã€‚å®ƒè¢«è®¾è®¡ç”¨äºåœ¨åº”ç”¨ç¨‹åºä¸­å·¥ä½œï¼Œå¹¶ä¸”å¯ä»¥å¤„ç†æ‰€æœ‰ç±»å‹çš„é…ç½®éœ€æ±‚å’Œæ ¼å¼ å®ƒæ”¯æŒï¼š è®¾ç½®é»˜è®¤å€¼ ä»JSONï¼ŒTOMLï¼ŒYAMLï¼ŒHCLï¼Œenvfileå’ŒJavaå±æ€§é…ç½®æ–‡ä»¶ä¸­è¯»å– å®æ—¶è§‚çœ‹å’Œé‡æ–°è¯»å–é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰ ä»ç¯å¢ƒå˜é‡ä¸­è¯»å– ä»è¿œç¨‹é…ç½®ç³»ç»Ÿï¼ˆetcdæˆ–Consulï¼‰ä¸­è¯»å–ï¼Œå¹¶è§‚å¯Ÿæ›´æ”¹ ä»å‘½ä»¤è¡Œæ ‡å¿—è¯»å– ä»ç¼“å†²åŒºè¯»å– è®¾ç½®æ˜¾å¼å€¼ å¯ä»¥å°†Viperè§†ä¸ºæ»¡è¶³æˆ‘ä»¬æ‰€æœ‰åº”ç”¨ç¨‹åºé…ç½®éœ€æ±‚çš„æ³¨å†Œè¡¨ã€‚ å…³äºViperè¯¦ç»†çš„å†…å®¹å¯ä»¥å»çœ‹è¿™ä¸ªé¡¹ç›®çš„README ","date":"2020-10-25","objectID":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/:0:0","tags":["Go"],"title":"Goé¡¹ç›®é…ç½®ç®¡ç†Viper","uri":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/"},{"categories":["Go"],"content":"å®‰è£… go get -u -v github.com/spf13/viper ","date":"2020-10-25","objectID":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/:1:0","tags":["Go"],"title":"Goé¡¹ç›®é…ç½®ç®¡ç†Viper","uri":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/"},{"categories":["Go"],"content":"æŒ‡å®šé…ç½®æ–‡ä»¶ å¯ä»¥ç›´æ¥æŒ‡å®šæ–‡ä»¶è·¯å¾„ viper.SetConfigFile(\"./conf/config.yaml\") æŒ‡å®šæ–‡ä»¶åï¼Œç„¶åæŒ‡å®šè·¯å¾„ viper.SetConfigFile(\"config.yaml\") viper.AddConfigPath(\"./conf\") ","date":"2020-10-25","objectID":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/:2:0","tags":["Go"],"title":"Goé¡¹ç›®é…ç½®ç®¡ç†Viper","uri":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/"},{"categories":["Go"],"content":"æŸ¥æ‰¾å¹¶è¯»å–é…ç½®æ–‡ä»¶ ç›´æ¥è¯»å– err := viper.ReadInConfig() if err != nil { panic(err) } è¯»å–io.Reader func ReadConfig(in io.Reader) error { return v.ReadConfig(in) } ","date":"2020-10-25","objectID":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/:3:0","tags":["Go"],"title":"Goé¡¹ç›®é…ç½®ç®¡ç†Viper","uri":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/"},{"categories":["Go"],"content":"è·å–å€¼ Viperè·å–å€¼çš„æ–¹æ³•æœ‰ä¸‹é¢å‡ ç§ Get(key string) : interface{} GetBool(key string) : bool GetFloat64(key string) : float64 GetInt(key string) : int GetIntSlice(key string) : []int GetString(key string) : string GetStringMap(key string) : map[string]interface{} GetStringMapString(key string) : map[string]string GetStringSlice(key string) : []string GetTime(key string) : time.Time GetDuration(key string) : time.Duration IsSet(key string) : bool AllSettings() : map[string]interface{} ","date":"2020-10-25","objectID":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/:4:0","tags":["Go"],"title":"Goé¡¹ç›®é…ç½®ç®¡ç†Viper","uri":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/"},{"categories":["Go"],"content":"åµŒå¥—è®¿é—®å€¼ Viperå¯ä»¥é€šè¿‡ä¼ å…¥.åˆ†éš”çš„è·¯å¾„æ¥è®¿é—®åµŒå¥—çš„å­—æ®µï¼Œä¾‹å¦‚ï¼Œé…ç½®æ–‡ä»¶çš„å†…å®¹æ˜¯ä¸‹é¢çš„ä¸€æ®µJSON { \"host\": { \"address\": \"localhost\", \"port\": 5799 }, \"datastore\": { \"metric\": { \"host\": \"127.0.0.1\", \"port\": 3099 }, \"warehouse\": { \"host\": \"198.0.0.1\", \"port\": 2112 } } } viper.GetInt(\"datastore.warehouse.port\") //è¿”å›2112 ","date":"2020-10-25","objectID":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/:4:1","tags":["Go"],"title":"Goé¡¹ç›®é…ç½®ç®¡ç†Viper","uri":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/"},{"categories":["Go"],"content":"ååºåˆ—åŒ– å¯ä»¥å°†æ‰€æœ‰æˆ–ç‰¹å®šçš„å€¼è§£æåˆ°ç»“æ„ä½“ã€mapç­‰ ä¾‹å¦‚ä¸‹é¢çš„ä¸€æ®µyamlæ ¼å¼çš„é…ç½®å†…å®¹ database: school port: 3306 user: root password: 123456 éœ€è¦å…ˆå®šä¹‰å¥½ç»“æ„ä½“ type Config struct { User string Password string Database string Port int } ç„¶åç›´æ¥ååºåˆ—åŒ–ç»‘å®š viper.SetConfigFile(\"./conf/config.yaml\") if err := viper.ReadInConfig(); err != nil { panic(err) } var C Config if err := viper.Unmarshal(\u0026C); err != nil { panic(err) } fmt.Println(C.User) å¦‚æœæ˜¯ä¸Šé¢çš„é‚£æ®µJSONé‚£ç§åµŒå¥—å­—æ®µå°±éœ€è¦å®šä¹‰åµŒå¥—ç»“æ„ä½“ é¦–å…ˆè¿˜æ˜¯éœ€è¦å…ˆå®šä¹‰å¥½ç»“æ„ä½“ type Config struct { Host DataStore WareHouse } type Host struct { Address string Port int } type DataStore struct { Host string Metric } type Metric struct { Host string Port int } type WareHouse struct { Host string Port int } ç„¶åååºåˆ—åŒ–ç»‘å®š viper.SetConfigFile(\"./conf/config.json\") if err := viper.ReadInConfig(); err != nil { panic(err) } var C Config if err := viper.Unmarshal(\u0026C); err != nil { panic(err) } fmt.Println(C.DataStore.Port) ","date":"2020-10-25","objectID":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/:5:0","tags":["Go"],"title":"Goé¡¹ç›®é…ç½®ç®¡ç†Viper","uri":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/"},{"categories":["Go"],"content":"å…¨å±€åŒ– ä¸Šé¢çš„è¯»å–é…ç½®ï¼Œè®¿é—®å­—æ®µï¼Œä»¥åŠååºåˆ—åŒ–ä¸ºçš„éƒ½æ˜¯æˆ‘ä»¬åœ¨åº”ç”¨ç¨‹åºä¸­èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ï¼Œä¸€ä¸ªç¨‹åºæˆ‘ä»¬ä¸å¯èƒ½åªå†™ä¸€ä¸ªæ–‡ä»¶ï¼Œå°±ç®—åªå†™ä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ€ä¹ˆä¹Ÿä¼šå°†æ–‡ä»¶ä¸­çš„ç¨‹åºæ¨¡å—åŒ–ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±è¯¥è®©é…ç½®å…¨å±€åŒ– ä¸å°†é…ç½®ååºåˆ—åŒ–ï¼Œè¯»å–é…ç½®åç›´æ¥åœ¨åˆ«çš„æ¨¡å—ä¸­è·å–å­—æ®µï¼Œå¦‚æœæ–‡ä»¶æ‹†åˆ†ä¸ºäº†ä¸åŒçš„æ–‡ä»¶æ¨¡å—ï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨ç¨‹åºå¼€å§‹æ—¶è¯»å…¥é…ç½®ï¼Œç„¶åç›´æ¥ä½¿ç”¨viper.GetString(\"å­—æ®µåç§°\")å³å¯ï¼Œè¿˜æ˜¯åˆšæ‰çš„é‚£æ®µJSONé…ç½®ï¼Œæ–°å»ºäº†ä¸€ä¸ªutilsåŒ…ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªGoæ–‡ä»¶å†™å…¥ä¸‹é¢çš„ç¨‹åº package utils import ( \"fmt\" \"github.com/spf13/viper\" ) func PrintConfig() { fmt.Printf(\"host: %s, port: %d\", viper.GetString(\"datastore.metric.host\"), viper.GetInt(\"datastore.metric.port\")) } ç„¶ååœ¨mainåŒ…ä¸­è°ƒç”¨ func main() { viper.SetConfigFile(\"./conf/config.json\") if err := viper.ReadInConfig(); err != nil { panic(err) } utils.PrintConfig() } ç¼–è¯‘åè¿è¡Œç¨‹åºå°±èƒ½çœ‹åˆ°è¾“å‡ºäº†ç»“æœï¼Œè¿™æ ·æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ å¦‚æœå°†è¯»å–çš„é…ç½®æ–‡ä»¶ååºåˆ—åŒ–äº†ï¼Œé‚£ä¹ˆåˆ™éœ€è¦å°†è¿™ä¸ªç»“æ„ä½“åç§°é¦–å­—æ¯å¤§å†™å˜ä¸ºå¯è®¿é—®çš„ï¼Œåœ¨confåŒ…ä¸­æ–°å»ºä¸€ä¸ªGoæ–‡ä»¶ï¼Œå°†åˆšæ‰çš„ç¨‹åºåšä¸€ä¸‹ä¿®æ”¹ package conf import \"github.com/spf13/viper\" type Config struct { Host DataStore WareHouse } type Host struct { Address string Port int } type DataStore struct { Host string Metric } type Metric struct { Host string Port int } type WareHouse struct { Host string Port int } var C Config func ReadConfig() { viper.SetConfigFile(\"./conf/config.json\") if err := viper.ReadInConfig(); err != nil { panic(err) } if err := viper.Unmarshal(\u0026C); err != nil { panic(err) } } ç„¶åè¯»å–é…ç½® func main() { conf.ReadConfig() fmt.Printf(\"host: %s, port: %d\", conf.C.DataStore.Host, conf.C.DataStore.Port) } ä½†æ˜¯åœ¨è¿™é‡Œä½¿ç”¨viper.GetString(\"datastore.metric.host\")ä¾æ—§èƒ½è®¿é—®åˆ°å­—æ®µï¼Œè¯´æ˜ç»‘å®šä»¥åè¯»å–çš„é…ç½®å†…å®¹å¹¶æ²¡æœ‰è¢«é”€æ¯ï¼Œæ‰€ä»¥æœ€å¥½ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œè¿™æ ·æ€§èƒ½å¯èƒ½ä¼šç¨å¾®æé«˜ä¸€ç‚¹ ","date":"2020-10-25","objectID":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/:6:0","tags":["Go"],"title":"Goé¡¹ç›®é…ç½®ç®¡ç†Viper","uri":"/posts/go%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86--viper/"},{"categories":["Go"],"content":"åœ¨Goä¸­æœåŠ¡å™¨å¼‚å¸¸ç»Ÿä¸€å¤„ç†æ–¹å¼ é¦–å…ˆåˆ›å»ºä¸€ä¸ªServeræ¥æŸ¥çœ‹æœ¬åœ°æ–‡ä»¶ func main() { http.HandleFunc(\"/list/\", func(writer http.ResponseWriter, request *http.Request) { path := request.URL.Path[len(\"/list/\"):] file, err := os.Open(path) if err != nil { panic(err) } all, err := ioutil.ReadAll(file) if err != nil { panic(err) } writer.Write(all) }) err := http.ListenAndServe(\"9090\", nil) if err != nil { panic(err) } } è¿™æ—¶å€™è®¿é—®localhost:9090/list/{file-path}è¿™ä¸ªåœ°å€ï¼Œå¦‚æœè¿™ä¸ªæ–‡ä»¶æ˜¯æ™®é€šæ–‡ä»¶ï¼Œè€Œä¸”å­˜åœ¨ï¼Œé‚£ä¹ˆåœ¨æµè§ˆå™¨ä¸Šå°±èƒ½çœ‹åˆ°æ–‡ä»¶å†…å®¹äº† ä½†æ˜¯å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™æ—¶å€™æµè§ˆå™¨å°±ä¸èƒ½æ­£å¸¸è®¿é—®ï¼Œè€Œä¸”æœ¬åœ°å°†ä¼šæŠ¥é”™ï¼ŒGoè¯­è¨€ä¸åƒå…¶ä»–è¯­è¨€ä¸€æ ·æ‹¥æœ‰try-catchæˆ–è€…try-exceptè¯­å¥ï¼Œè€Œä¸”è¿™æ ·çš„é”™è¯¯å¤„ç†è¯­å¥å¤šäº†ä»¥åç¨‹åºçš„å¥å£®æ€§å°†ä¼šä¸‹é™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å°†é”™è¯¯è¿›è¡Œå°è£…å¤„ç† è¿™é‡Œå…ˆå°†/list/çš„å¤„ç†å‡½æ•°æ‹†åˆ†å‡ºå» func handlerList(writer http.ResponseWriter, request *http.Request) { path := request.URL.Path[len(\"/list/\"):] file, err := os.Open(path) if err != nil { panic(err) } all, err := ioutil.ReadAll(file) if err != nil { panic(err) } writer.Write(all) } func main() { http.HandleFunc(\"/list/\", handlerList) err := http.ListenAndServe(\"9090\", nil) if err != nil { panic(err) } } è™½ç„¶è¿™æ—¶å€™ç¨‹åºå¹¶æ²¡æœ‰å¾ˆå¤§çš„æ”¹å˜ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬å¯ä»¥å°†erroräº¤ç»™ä¸“é—¨å¤„ç†å¼‚å¸¸çš„å‡½æ•°è¿›è¡Œå¤„ç† é¦–å…ˆå®šä¹‰ä¸€ä¸ªç±»å‹appHandlerï¼Œè¿™ä¸ªç±»å‹çš„å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°http.ResponseWriter, *http.Requestè¿”å›ä¸€ä¸ªerror type appHandler func(writer http.ResponseWriter, request *http.Request) error ç„¶ååˆ©ç”¨Goä¸­é—­åŒ…çš„ç‰¹æ€§å°†é”™è¯¯é€»è¾‘è¿›è¡Œå°è£…ï¼Œå®šä¹‰ä¸€ä¸ªerrWrapperå‡½æ•°ï¼Œå°†ä¸šåŠ¡å¤„ç†çš„é€»è¾‘å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’è¿›å»ï¼Œè¿”å›ä¸€ä¸ªèƒ½å¤„ç†å¼‚å¸¸çš„å‡½æ•°ï¼Œå°†http.ResponseWriter, *http.Requestä¸¤ä¸ªå¯¹è±¡å…ˆäº¤ç»™appHandlerç±»å‹çš„å‡½æ•°å»å¤„ç†ï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªerrorå¯¹è±¡ï¼Œå¦‚æœè¿™ä¸ªerrorå¯¹è±¡ä¸æ˜¯nilï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œå¼‚å¸¸å¤„ç†äº† func errWrapper(handler appHandler) func(writer http.ResponseWriter, request *http.Request) { return func(writer http.ResponseWriter, request *http.Request) { err := handler(writer, request) code := http.StatusOK if err != nil { log.Printf(\"Error handling request: %s\", err.Error()) switch { case os.IsNotExist(err): code = http.StatusNotFound default: code = http.StatusInternalServerError } http.Error(writer, http.StatusText(code), code) } } } è¿™æ—¶å€™éœ€è¦æ›´æ”¹ä¸€ä¸‹handlerå‡½æ•°ï¼Œå°†errorè¿›è¡Œè¿”å›ï¼Œç„¶åhttp.HandleFuncçš„å¤„ç†å‡½æ•°å°±è¦æ”¹ä¸ºerrWrapper(handlerList) func handlerList(writer http.ResponseWriter, request *http.Request) { path := request.URL.Path[len(\"/list/\"):] file, err := os.Open(path) if err != nil { return err } all, err := ioutil.ReadAll(file) if err != nil { return err } writer.Write(all) return nil } type appHandler func(writer http.ResponseWriter, request *http.Request) error func errWrapper(handler appHandler) func(writer http.ResponseWriter, request *http.Request) { return func(writer http.ResponseWriter, request *http.Request) { err := handler(writer, request) code := http.StatusOK if err != nil { log.Printf(\"Error handling request: %s\", err.Error()) switch { case os.IsNotExist(err): code = http.StatusNotFound default: code = http.StatusInternalServerError } http.Error(writer, http.StatusText(code), code) } } } func main() { http.HandleFunc(\"/list/\", errWrapper(handlerList)) err := http.ListenAndServe(\"9090\", nil) if err != nil { panic(err) } } ","date":"2020-08-19","objectID":"/posts/go%E4%B8%ADweb%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F/:0:0","tags":["Go","Web","error"],"title":"Goä¸­Webå¼‚å¸¸å¤„ç†æ–¹å¼","uri":"/posts/go%E4%B8%ADweb%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"ç½‘ç«™url: http://fanyi.youdao.com/ è¯·æ±‚è¿™ä¸ªç½‘ç«™çš„api: http://fanyi.youdao.com/translate_o?smartresult=dict\u0026smartresult=rule éœ€è¦çš„å‚æ•°å¾ˆå¤šï¼Œå¦‚æœå°†translate_oä¸­çš„_oå»æ‰ï¼Œé‚£ä¹ˆè¯·æ±‚éœ€è¦çš„éªŒè¯æ€§å‚æ•°éƒ½ä¸ä¼šå»éªŒè¯ï¼Œå»æ‰åçš„apiä¼¼ä¹æ˜¯è€çš„api ","date":"2020-08-01","objectID":"/posts/%E6%9C%89%E9%81%93%E7%BF%BB%E8%AF%91web%E7%AB%AFjs%E9%80%86%E5%90%91/:0:0","tags":["ç½‘ç»œçˆ¬è™«","Python","jsé€†å‘","å‚æ•°æ··æ·†"],"title":"æœ‰é“ç¿»è¯‘webç«¯jsé€†å‘","uri":"/posts/%E6%9C%89%E9%81%93%E7%BF%BB%E8%AF%91web%E7%AB%AFjs%E9%80%86%E5%90%91/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"Cookie é€šè¿‡å¤šæ¬¡è¯·æ±‚å‘ç°è¯·æ±‚ä¸­çš„Cookieæ˜¯å˜åŒ–çš„ å¹¶ä¸”å¤šæ¬¡è¯·æ±‚ä¹‹åè¿˜äº§ç”Ÿäº†ä¸€ä¸ªJSESSIONDçš„å­—æ®µï¼Œåœ¨Applicationé¢æ¿ä¸­å°†è¿™ä¸ªå­—æ®µåˆ é™¤åä¹Ÿèƒ½æˆåŠŸè¯·æ±‚ï¼Œä½†æ˜¯å°†___rl__test__cookiesåˆ é™¤ååˆä¼šé‡æ–°ç”Ÿæˆï¼Œå…¨å±€æœç´¢è¿™ä¸ªå­—æ®µå‘ç°æ˜¯æ—¶é—´æˆ³ é‚£ä¹ˆCookieå°±è§£å†³äº† ","date":"2020-08-01","objectID":"/posts/%E6%9C%89%E9%81%93%E7%BF%BB%E8%AF%91web%E7%AB%AFjs%E9%80%86%E5%90%91/:0:1","tags":["ç½‘ç»œçˆ¬è™«","Python","jsé€†å‘","å‚æ•°æ··æ·†"],"title":"æœ‰é“ç¿»è¯‘webç«¯jsé€†å‘","uri":"/posts/%E6%9C%89%E9%81%93%E7%BF%BB%E8%AF%91web%E7%AB%AFjs%E9%80%86%E5%90%91/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"Form Data å¤šæ¬¡è¯·æ±‚å‘ç°å‘ç”Ÿå˜åŒ–çš„å­—æ®µåªæœ‰iã€saltã€signã€ts iæ˜¯éœ€è¦ç¿»è¯‘çš„å†…å®¹ saltå’Œtséƒ½å¾ˆåƒæ—¶é—´æˆ³ï¼Œsaltæ¯”tså°‘ä¸€ä½ signåº”è¯¥æ˜¯ä¸€ä¸ªæ··æ·†ç¼–ç åçš„å‚æ•° å…¨å±€æœç´¢sign é€šè¿‡æ–­ç‚¹è°ƒè¯•å°±èƒ½å‘ç°tsæ˜¯æ—¶é—´æˆ³ï¼Œsaltæ˜¯tså­—ç¬¦ä¸²åŠ ä¸€ä¸ªéšæœºæ•°å­—ç¬¦ç»„æˆçš„æ–°å­—ç¬¦ä¸²ï¼Œbvæ˜¯æµè§ˆå™¨ç‰ˆæœ¬ä¿¡æ¯é€šè¿‡MD5åŠ å¯†ç”Ÿæˆçš„ï¼Œsignæ˜¯ä¸€ä¸ªå¤åˆå­—ç¬¦ä¸²é€šè¿‡MD5åŠ å¯†ç”Ÿæˆçš„ é‚£ä¹ˆForm Dataä¹Ÿå°±è§£å†³äº† ","date":"2020-08-01","objectID":"/posts/%E6%9C%89%E9%81%93%E7%BF%BB%E8%AF%91web%E7%AB%AFjs%E9%80%86%E5%90%91/:0:2","tags":["ç½‘ç»œçˆ¬è™«","Python","jsé€†å‘","å‚æ•°æ··æ·†"],"title":"æœ‰é“ç¿»è¯‘webç«¯jsé€†å‘","uri":"/posts/%E6%9C%89%E9%81%93%E7%BF%BB%E8%AF%91web%E7%AB%AFjs%E9%80%86%E5%90%91/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"ä»£ç  https://gitee.com/pujichun/spider/tree/master/fanyi.youdao ","date":"2020-08-01","objectID":"/posts/%E6%9C%89%E9%81%93%E7%BF%BB%E8%AF%91web%E7%AB%AFjs%E9%80%86%E5%90%91/:0:3","tags":["ç½‘ç»œçˆ¬è™«","Python","jsé€†å‘","å‚æ•°æ··æ·†"],"title":"æœ‰é“ç¿»è¯‘webç«¯jsé€†å‘","uri":"/posts/%E6%9C%89%E9%81%93%E7%BF%BB%E8%AF%91web%E7%AB%AFjs%E9%80%86%E5%90%91/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"ç½‘ç«™url: https://piaofang.maoyan.com/rankings/year?year=2020\u0026limit=100\u0026tab=1 åˆçœ‹ç½‘ç«™çš„htmlå‘ç°æœ‰å­—ä½“åçˆ¬è™«ï¼Œä½†æ˜¯ç»è¿‡å¤šæ¬¡æŠ“åŒ…ä¹‹åå‘ç°é™¤äº†ç¬¬ä¸€æ¬¡è¯·æ±‚é¡µé¢æœ‰å­—ä½“åçˆ¬è™«ä¹‹å¤–ï¼Œå…¶å®ƒå‡ ä¸ªå¹´ä»½å¹¶æ²¡æœ‰ è€Œä¸”ç¬¬ä¸€æ¬¡è¯·æ±‚çš„å¹´åˆ†çš„æ•°æ®ä¹Ÿå¯ä»¥é€šè¿‡apiè¯·æ±‚åˆ° ç®€å•åˆ†æå­—ä½“æ–‡ä»¶åå‘ç°å­—ä½“å’Œåé¢è¯·æ±‚åˆ°çš„é¡µé¢å¯¹ä¸ä¸Šï¼Œè€Œä¸”æ¯æ¬¡è¯·æ±‚å­—ä½“çš„urléƒ½ä¸ä¸€æ ·ï¼Œå› æ­¤åˆ¤æ–­å­—ä½“ï¼Œå…¨å±€æœç´¢å­—ä½“urlå‘ç°urlåœ¨è¯·æ±‚å¾—åˆ°çš„htmlä¸­é‚£ä¹ˆå­—ä½“å¯¹åº”é—®é¢˜å°±è§£å†³äº† è¯·æ±‚æ•°æ®çš„æ—¶å€™å‘ç°æœ‰ä¸€ä¸ªUidå‚æ•°æ¯”è¾ƒç‰¹æ®Š ç½‘é¡µè¿›è¡Œå¼‚æ­¥è¯·æ±‚çš„æ—¶å€™è¿™ä¸ªUidå¹¶ä¸ä¼šå˜ï¼Œä½†æ˜¯åˆ·æ–°ç½‘é¡µä¹‹åè¿™ä¸ªUidå°±æ”¹å˜äº† å…¨å±€æœç´¢Uidï¼Œåœ¨nAjax.jsä¸­æ‰¾åˆ°äº†è¿™ä¸ªUid é€šè¿‡ä¸Šé¢çš„ç¨‹åºå¯ä»¥å‘ç°Uidæ˜¯é€šè¿‡è§£æhtmlä¸­çš„meatæ ‡ç­¾ä¸­nameå±æ€§ä¸ºcsrfçš„é‚£ä¸ªæ ‡ç­¾ï¼Œç„¶åè·å–åˆ°ä»–çš„contentå±æ€§å€¼ é‚£ä¹ˆUidä¹Ÿè§£å†³äº† æœ€ååªéœ€è¦è§£ææ•°æ®å³å¯ ","date":"2020-07-31","objectID":"/posts/%E7%88%AC%E5%8F%96%E7%8C%AB%E7%9C%BC%E7%94%B5%E5%BD%B1%E7%A5%A8%E6%88%BF/:0:0","tags":["Go","ç½‘ç»œçˆ¬è™«","å­—ä½“åçˆ¬"],"title":"çˆ¬å–çŒ«çœ¼ç”µå½±ç¥¨æˆ¿","uri":"/posts/%E7%88%AC%E5%8F%96%E7%8C%AB%E7%9C%BC%E7%94%B5%E5%BD%B1%E7%A5%A8%E6%88%BF/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"å®Œæ•´ä»£ç  https://gitee.com/pujichun/spider/tree/master/piaofang.maoyan ","date":"2020-07-31","objectID":"/posts/%E7%88%AC%E5%8F%96%E7%8C%AB%E7%9C%BC%E7%94%B5%E5%BD%B1%E7%A5%A8%E6%88%BF/:0:1","tags":["Go","ç½‘ç»œçˆ¬è™«","å­—ä½“åçˆ¬"],"title":"çˆ¬å–çŒ«çœ¼ç”µå½±ç¥¨æˆ¿","uri":"/posts/%E7%88%AC%E5%8F%96%E7%8C%AB%E7%9C%BC%E7%94%B5%E5%BD%B1%E7%A5%A8%E6%88%BF/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"AESè§£å¯† Pythonåœ¨Windowsç¯å¢ƒä¸‹ä½¿ç”¨AESå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“pycryptodome pip install pycryptodome Pythonåœ¨Linuxç¯å¢ƒä¸‹ä½¿ç”¨AESå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“pycrypto pip install pycrtpto å®‰è£…å¥½ä¹‹åå°±å¯ä»¥ç›´æ¥è°ƒç”¨Crypto.Cipherä¸‹çš„AESæ¨¡å—äº† AESåŠ å¯† AESä¼šå¯¹éœ€è¦åŠ å¯†çš„æ˜æ–‡è¿›è¡Œåˆ†ç»„ï¼Œå°†å…¨é‡æ˜æ–‡åˆ†ç»„ä¸ºä¸€ä¸ªä¸ª16ä¸ªå­—èŠ‚ï¼ˆ128bitï¼‰çš„æ˜æ–‡å—ï¼Œæ‰€ä»¥éœ€è¦åŠ å¯†çš„æ˜æ–‡å­—èŠ‚æ•°é‡å¿…é¡»æ˜¯16ä¸ªå­—èŠ‚çš„å€æ•°ï¼Œä½†æ˜¯ç½‘ç»œä¼ è¾“çš„æ–‡æœ¬å†…å®¹é•¿åº¦æ˜¯å˜åŒ–æ— å¸¸çš„ï¼Œé•¿åº¦å¾ˆéš¾ä¸¥æ ¼æ§åˆ¶åœ¨16ä¸ªå­—èŠ‚çš„å€æ•°ï¼Œå› æ­¤å¾€å¾€ä¼šåœ¨å­—èŠ‚ç±»å‹çš„æ–‡æœ¬æœ€åç©ºæ ¼æ¥è¡¥è¶³ï¼Œå› ä¸ºç©ºæ ¼å®¹æ˜“å¤„ç† ","date":"2020-07-22","objectID":"/posts/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-aes%E5%8A%A0%E5%AF%86/:0:0","tags":["jsé€†å‘","ç½‘ç»œçˆ¬è™«"],"title":"å¯¹ç§°åŠ å¯†-AESåŠ å¯†","uri":"/posts/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-aes%E5%8A%A0%E5%AF%86/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"CBCåŠ å¯† CBCåŠ å¯†éœ€è¦ä¸€ä¸ª16ä¸ªå­—èŠ‚çš„keyï¼ˆå¯†é’¥ï¼‰å’Œä¸€ä¸ª16ä½çš„ivï¼ˆåç§»é‡ï¼‰ ä½¿ç”¨AESåŠ å¯†éœ€è¦è°ƒç”¨AESæ¨¡å—ä¸­çš„newæ–¹æ³•æ¥ç”Ÿæˆä¸€ä¸ªAESå¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»è¦éœ€è¦ä¸‰ä¸ªå‚æ•° AES.new(key: bytes, mode: AESMode, iv: bytes) ç„¶åä½¿ç”¨AESå¯¹è±¡æ¥å°†æ˜æ–‡è½¬æ¢ä¸ºå¯†æ–‡ï¼ˆåŠ å¯†çš„æ˜æ–‡éœ€è¦æ˜¯å­—èŠ‚ç±»å‹ï¼‰ from Crypto.Cipher import AES def add_space(text:str) -\u003e bytes: if length := len(encode_text := text.encode(\"utf8\")) % 16: encode_text += b\" \" * (16 - length) return encode_text def encrypt(text:str) -\u003e bytes: key = b\"1234567812345678\" iv = b\"abcdefghabcdefgh\" mode = AES.MODE_CBC # ç”ŸæˆåŠ å¯†å™¨ cryptor = AES.new(key=key, mode=mode, iv=iv) encode_text = add_space(text) # å¯¹æ˜æ–‡è¿›è¡ŒåŠ å¯† cipher = cryptor.encrypt(encode_text) return cipher ","date":"2020-07-22","objectID":"/posts/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-aes%E5%8A%A0%E5%AF%86/:1:0","tags":["jsé€†å‘","ç½‘ç»œçˆ¬è™«"],"title":"å¯¹ç§°åŠ å¯†-AESåŠ å¯†","uri":"/posts/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-aes%E5%8A%A0%E5%AF%86/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"CBCè§£å¯† è§£å¯†çš„æ—¶å€™ä¹Ÿéœ€è¦åˆ›å»ºä¸€ä¸ªAESå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å’ŒåŠ å¯†æ—¶çš„å¯¹è±¡ä¸€æ ·ï¼Œä½†æ˜¯è°ƒç”¨çš„æ˜¯decryptæ–¹æ³•ã€‚ def decrypt(cipher: bytes) -\u003e str: key = b\"1234567812345678\" iv = b\"abcdefghabcdefgh\" mode = AES.MODE_CBC cryptor = AES.new(key=key, mode=mode, iv=iv) text = cryptor.decrypt(cipher) return text.decode(\"utf8\").strip() å…¶ä»–çš„åŠ å¯†å’Œè§£å¯†æ–¹æ³•ä¹Ÿéƒ½ç±»ä¼¼ï¼Œåªæ˜¯å‚æ•°ä¸åŒï¼Œå¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯ä½¿ç”¨CBCåŠ å¯†ï¼Œå› ä¸ºæœ‰ä¸€ä¸ªåç§»é‡èƒ½è®©ç¨‹åºå¯†æ–‡æ›´åŠ ä¸å®¹æ˜“è¢«ç ´è§£ ","date":"2020-07-22","objectID":"/posts/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-aes%E5%8A%A0%E5%AF%86/:2:0","tags":["jsé€†å‘","ç½‘ç»œçˆ¬è™«"],"title":"å¯¹ç§°åŠ å¯†-AESåŠ å¯†","uri":"/posts/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-aes%E5%8A%A0%E5%AF%86/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"æ¡ˆä¾‹ URL:https://www.in985.com/dataCenter/explan?tdsourcetag=s_pcqq_aiomsg è¿™ä¸ªé¡µé¢çš„æ•°æ®é‡‡ç”¨çš„Ajaxè¯·æ±‚ï¼Œéœ€è¦ç™»é™† è¿™é‡Œçš„æ•°æ®æ˜¯åŠ å¯†çš„ï¼Œè€Œä¸”æœ‰ä¸€ä¸ªencry:trueçš„å­—æ®µ è¿™é‡Œè™½ç„¶æ²¡æŒ‡å‡ºæ˜¯AESåŠ å¯†ï¼Œä½†æ˜¯å¯ä»¥çŒœåˆ°ï¼Œå¯ä»¥ç›´æ¥å…¨å±€æœç´¢decryptï¼Œå½“ç„¶å¦‚æœä¸ç¡®å®šä¹Ÿå¯ä»¥å…¨å±€æœç´¢JSON.parseï¼Œå› ä¸ºè¿™æ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œè§£å¯†åè‚¯å®šæ˜¯è¦è½¬ä¸ºjsonæ•°æ®çš„ï¼Œåœ¨ç›¸å…³çš„åœ°æ–¹æ‰“ä¸Šæ–­ç‚¹ï¼Œç„¶åç‚¹å‡»ä¸‹ä¸€é¡µè¿›è¡Œæ•°æ®è¯·æ±‚ è¿™é‡Œå°±æ˜¯æ•´ä¸ªAESçš„CBCè§£å¯†å‡½æ•°ï¼Œé€šè¿‡è°ƒè¯•å¯ä»¥çŸ¥é“è¿™ä¸ªtå°±æ˜¯è¯·æ±‚å¾—åˆ°çš„åŠ å¯†åçš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œå…¶å®è¿˜å¯¹æ•°æ®è¿›è¡Œäº†Hexè§£ç ï¼Œç„¶åè¿›è¡Œbase64ç¼–ç ï¼Œä½†æ˜¯è¿™é‡ŒJavaScriptç”¨çš„AESåº“è§£ç æ—¶éœ€è¦ä¼ base54ç¼–ç ï¼Œæ‰€ä»¥ç”¨Pythonæ¥è§£ç çš„æ—¶å€™ä¸éœ€è¦è¿›è¡Œbase64ç¼–ç  åŠ å¯†æ–¹å¼æ—¶CBCï¼Œå¯†é’¥keyå°±æ˜¯eï¼Œåç§»é‡ivå°±æ˜¯n ","date":"2020-07-22","objectID":"/posts/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-aes%E5%8A%A0%E5%AF%86/:3:0","tags":["jsé€†å‘","ç½‘ç»œçˆ¬è™«"],"title":"å¯¹ç§°åŠ å¯†-AESåŠ å¯†","uri":"/posts/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-aes%E5%8A%A0%E5%AF%86/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"Pythonè§£å¯†ç¨‹åº from Crypto.Cipher import AES from binascii import a2b_hex def decrypt(text: str) -\u003e str: cipher = a2b_hex(text) key = \"m1x2!3p4$567890000000123456789@$\".encode(\"utf8\") iv = b\"1234567890000000\" mode = AES.MODE_CBC cryptor = AES.new(key=key, mode=mode, iv=iv) original_text = cryptor.decrypt(cipher) return original_text.decode(\"utf8\") å°†è¯·æ±‚å¾—åˆ°çš„æ•°æ®ç›´æ¥ç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œè§£ç å°±èƒ½å¾—åˆ°jsonå­—ç¬¦ä¸²äº†ï¼Œä½†æ˜¯è¿˜éœ€è¦å»é™¤å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºæ ¼å’Œjsonåºåˆ—åŒ– ","date":"2020-07-22","objectID":"/posts/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-aes%E5%8A%A0%E5%AF%86/:3:1","tags":["jsé€†å‘","ç½‘ç»œçˆ¬è™«"],"title":"å¯¹ç§°åŠ å¯†-AESåŠ å¯†","uri":"/posts/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-aes%E5%8A%A0%E5%AF%86/"},{"categories":["Go"],"content":"åœ¨Goè¯­è¨€ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨åˆ‡ç‰‡è€Œä¸æ˜¯æ•°ç»„ ","date":"2020-07-19","objectID":"/posts/go-slice%E5%8E%9F%E7%90%86/:0:0","tags":["Slice","Go"],"title":"Go SliceåŸç†","uri":"/posts/go-slice%E5%8E%9F%E7%90%86/"},{"categories":["Go"],"content":"Sliceæ‰©å±• Goè¯­è¨€ä¸­Sliceæ˜¯æ•°ç»„çš„ä¸€æ®µviewã€‚ä¸€ä¸ªåˆ‡ç‰‡ä¸­è®°å½•äº†ä¸€ä¸ªptrï¼ˆæŒ‡é’ˆï¼‰ï¼Œç”¨äºä¿å­˜è¿™ä¸ªSliceä¸­ç¬¬0ä¸ªå…ƒç´ æŒ‡å‘æ•°ç»„çš„ä¸­çš„ä½ç½®ï¼Œæœ‰ä¸€ä¸ªå€¼è®°å½•äº†è¿™ä¸ªSliceçš„lenï¼ˆé•¿åº¦ï¼‰ï¼Œè¿˜æœ‰æœ‰ä¸€ä¸ªå€¼è®°å½•äº†è¿™ä¸ªSliceåœ¨è¿™ä¸ªæ•°ç»„ä¸­åŠä»¥åçš„é•¿åº¦capï¼ˆå®¹é‡ï¼‰ arr := [...]int{0, 1, 2, 3, 4, 5, 6, 7} s1 := arr[2:6] s2 := s1[3:5] åœ¨ä¸Šé¢çš„ç¨‹åºä¸­å¯ä»¥å¾ˆå®¹æ˜“å¾—å‡ºs1çš„å€¼ä¸º[2 3 4 5]ï¼Œä½†æ˜¯s1çš„é•¿åº¦ä»…ä¸º4ï¼Œè€Œs2æ˜¯ä»s1ä¸­ç´¢å¼•ä¸º3ï¼Œä¹Ÿå°±æ˜¯ç¬¬4ä¸ªå…ƒç´ å¼€å§‹å–ï¼Œå–åˆ°ç´¢å¼•ä¸º4ï¼ˆç¬¬äº”ä¸ªï¼‰çš„å…ƒç´ ï¼Œè¿™æ ·çš„è¯s1çš„é•¿åº¦å¹¶ä¸å¤Ÿï¼Œä½†æ˜¯è¿è¡Œè¿™ä¸ªç¨‹åºs2çš„å€¼å´ä¸º[5 6]ï¼Œä½†æ˜¯è¿è¡Œs1[4]ç¨‹åºå´ä¼šæŠ¥é”™ã€‚ è¿™ä¸ªè¿‡ç¨‹å›¾è§£å¦‚ä¸‹ å› ä¸ºSliceåœ¨å†…éƒ¨å®ç°çš„æ—¶å€™æœ‰ä¸€ä¸ªé•¿åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•é€šè¿‡ç´¢å¼•è¶Šç•Œå–åˆ°arrä¸­çš„å€¼ï¼Œä½†æ˜¯é€šè¿‡å¯¹s1è¿›è¡Œåˆ‡ç‰‡æ“ä½œçš„æ—¶å€™è¿™ä¸ªåªè¦åœ¨capå†…é‚£ä¹ˆå°±èƒ½é€šè¿‡æ˜ å°„å–åˆ°arrä¸­çš„å€¼ã€‚ Sliceçš„ç»“æ„å†³å®šäº†å®ƒèƒ½å‘åæ‰©å±•ï¼Œä½†æ˜¯ä¸èƒ½å‘å‰æ‰©å±•ï¼Œå‘åæ‰©å±•çš„æ—¶å€™ä¸èƒ½è¶…è¿‡capçš„é•¿åº¦ fmt.Printf(\"%v, %d, %d\", s1, len(s1), cap(s1)) ","date":"2020-07-19","objectID":"/posts/go-slice%E5%8E%9F%E7%90%86/:1:0","tags":["Slice","Go"],"title":"Go SliceåŸç†","uri":"/posts/go-slice%E5%8E%9F%E7%90%86/"},{"categories":["Go"],"content":"Sliceæ‰©å®¹ ä¸Šé¢çš„å†…å®¹è¯´çš„éƒ½æ˜¯Sliceæ‰©å±•çš„æ—¶å€™ï¼Œå½“ç„¶äº†ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨Sliceå­˜å‚¨æ•°æ®çš„æ—¶å€™å¦‚æœSliceçš„é•¿åº¦ä¸å¤ŸSliceæ˜¯ä¼šåŠ¨æ€æ‰©å®¹çš„ï¼Œä½†æ˜¯SliceåŠ¨æ€æ‰©å®¹å¯¹æ€§èƒ½æ¶ˆè€—è¿˜æ˜¯ä¸å°ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯å¼€å§‹çš„æ—¶å€™å°±æŒ‡å®šå¥½cap ","date":"2020-07-19","objectID":"/posts/go-slice%E5%8E%9F%E7%90%86/:2:0","tags":["Slice","Go"],"title":"Go SliceåŸç†","uri":"/posts/go-slice%E5%8E%9F%E7%90%86/"},{"categories":["Python"],"content":"è£…é¥°å™¨çš„åŸç†å’Œæ‰§è¡Œé€»è¾‘ è£…é¥°å™¨æ˜¯å¯è°ƒç”¨çš„å¯¹è±¡ï¼Œè£…é¥°å™¨çš„å‚æ•°æ˜¯å‡½æ•°ï¼Œå‡½æ•°åœ¨Pythonä¸­ä¹Ÿæ˜¯å¯¹è±¡ã€‚ç®€å•ç†è§£ï¼Œè£…é¥°å™¨å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œå®ƒçš„å‚æ•°æ˜¯å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œè£…é¥°å™¨æ—¶å¯ä»¥ä½¿ç”¨Pythonä¸­çš„è¯­æ³•ç³–@decorateï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°æ‰§è¡Œçš„æ–¹å¼è¿è¡Œdecorate(func) # å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªåä¸ºdecoratorçš„è£…é¥°å™¨ @decorator def target(): print(\"this target()\") target = decorator(target) ä¸Šé¢ç¨‹åºä¸­ä¸¤ç§æ‰§è¡Œæ–¹å¼ä¸åŒï¼Œä½†æ˜¯ç»“æœæ˜¯ç›¸åŒçš„ ","date":"2020-07-11","objectID":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/:0:0","tags":["è£…é¥°å™¨","Python"],"title":"Pythonè£…é¥°å™¨","uri":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/"},{"categories":["Python"],"content":"Pythonä½•æ—¶æ‰§è¡Œè£…é¥°å™¨ Pythonä¸­è£…é¥°å™¨çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯ï¼Œå®ƒä»¬åœ¨è¢«è£…é¥°çš„å‡½æ•°å®šä¹‰ä¹‹åç«‹å³æ‰§è¡Œ Pythonä½•æ—¶æ‰§è¡Œè£…é¥°å™¨æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„ç‚¹ï¼Œå¹¶ä¸æ˜¯è¯´å®ƒæœ‰å¤šå¤æ‚ï¼Œè€Œæ˜¯å†³å®šäº†æˆ‘ä»¬å¦‚ä½•ç¼–å†™è£…é¥°å™¨ å½“è¿è¡Œä¸‹é¢ç¨‹åºæ—¶å°†ä¼šæŠ¥é”™ã€‚ import time def time_diff(func): start_time = time.time() func() print(\"ç¨‹åºè¿è¡Œæ—¶é—´ä¸º: \", time.time() - start_time) @time_diff def target(): for i in range(10000): print(i) target() å› ä¸ºtargetå‡½æ•°ä¸­çš„ç¨‹åºåœ¨è¢«å®šä¹‰ä¹‹åå°±æ‰§è¡Œäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨targetå°†ä¼šæ˜¯ä¸€ä¸ªNoneTypeï¼Œé‚£ä¹ˆè¿™æ ·æˆ‘ä»¬å°±ä¸èƒ½åœ¨æƒ³æ‰§è¡Œçš„æ—¶å€™æ‰§è¡Œå®ƒ å› æ­¤æˆ‘ä»¬æƒ³è¦èƒ½å¤Ÿåƒå‡½æ•°ä¸€æ ·æ‰§è¡Œå°±éœ€è¦ç»™è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå°†è¿™ä¸ªå‡½æ•°ä½œä¸ºå¯¹è±¡è¿”å› import time def time_diff(func): def inner(): start_time = time.time() func() print(time.time() - start_time) return inner @time_diff def target(): for i in range(10000): print(i) target() æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åƒå‡½æ•°ä¸€æ ·è°ƒç”¨è¿™ä¸ªè¢«è£…é¥°çš„å‡½æ•°ï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡è£…é¥°å™¨çš„æ‰§è¡Œç‰¹æ€§æƒ³åˆ°ï¼Œå½“æˆ‘ä»¬ç”¨è£…é¥°å™¨è£…é¥°è¿™ä¸ªå‡½æ•° çš„æ—¶å€™å…¶å®å°±æ˜¯å°†è¿™ä¸ªå‡½æ•°å½“ä½œå‚æ•°ä¼ ç»™äº†è¿™ä¸ªè£…é¥°å™¨èƒŒåçš„å‡½æ•°ï¼Œå¦‚æœè£…é¥°å™¨å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªè¢«è£…é¥°çš„å‡½æ•°å°†æ˜¯NoneTypeï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä¸Šé¢ç¬¬ä¸€ä¸ªç¨‹åºå®ä¾‹ä¸­çš„è¿‡ç¨‹ï¼Œåªæ˜¯ä¸Šé¢çš„ç¨‹åºä¸­å¹¶æ²¡æœ‰å°†è£…é¥°å™¨å‡½æ•°å†™å‡ºæ¥ import time def time_diff(func): def inner(): start_time = time.time() func() print(time.time() - start_time) return inner @time_diff def target(): for i in range(10000): print(i) target = time_diff(target) ä¸Šé¢çš„ç¨‹åºå°†è£…é¥°å™¨çš„è£…é¥°è¿‡ç¨‹è¿˜åŸä¸ºäº†å‡½æ•°é—­åŒ…çš„å†™æ³• ","date":"2020-07-11","objectID":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/:1:0","tags":["è£…é¥°å™¨","Python"],"title":"Pythonè£…é¥°å™¨","uri":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/"},{"categories":["Python"],"content":"ç»´æŒåŸå‡½æ•°å±æ€§ æˆ‘ä»¬ä½¿ç”¨è£…é¥°å™¨æ˜¯æœ‰ä¸€äº›éšæ‚£çš„ï¼Œæˆ‘ä»¬é€šè¿‡ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°targetè¿™ä¸ªå‡½æ•°æœ€ç»ˆæ˜¯è¢«æŒ‡å‘innerè¿™ä¸ªå‡½æ•°çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹å‡½æ•°çš„å±æ€§éªŒè¯ import time def time_diff(func): def inner(): start_time = time.time() func() print(time.time() - start_time) return inner @time_diff def target(): for i in range(10000): print(i) print(target.__name__) æ­¤æ—¶çš„targetæŒ‡å‘çš„å°±æ˜¯innerè¿™ä¸ªå‡½æ•°ï¼Œç¼–å†™è£…é¥°å™¨æ—¶å¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯é‡æ–°è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°æ•°å­¦è¿›è¡ŒæŸ¥çœ‹ print(target.__name__) è¾“å‡ºç»“æœå°†ä¼šæ˜¯inner æ­¤æ—¶å¦‚æœæˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ªå‡½æ•° import time def time_diff(func): def inner(): start_time = time.time() func() print(time.time() - start_time) return inner @time_diff def target(): for i in range(10000): print(i) @time_diff def foo(): for i in range(100): print(i) print(target.__name__) print(foo.__name__) æ­¤æ—¶æˆ‘ä»¬ä¼šçœ‹åˆ°è¾“å‡ºç»“æœéƒ½æ˜¯innerã€‚æ³¨æ„ï¼šprintå‡½æ•°ä¸­è°ƒç”¨çš„æ˜¯å‡½æ•°å±æ€§ï¼Œå¹¶æ²¡æœ‰æ‰§è¡Œå‡½æ•°ã€‚ è™½ç„¶å‡½æ•°çš„çœŸå®åå­—å¯¹æˆ‘ä»¬ç›®å‰çš„ç¨‹åºæ²¡æœ‰é€ æˆå½±å“ï¼Œä½†æ˜¯ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹å‡½æ•°çš„åç§°å¯èƒ½ä¼šå¯¹ç¨‹åºäº§ç”Ÿå½±å“ï¼Œä¸ºäº†æ¶ˆé™¤è£…é¥°å™¨å¸¦æ¥çš„è´Ÿé¢å½±å“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨functoolä¸­çš„wrapsè£…é¥°å™¨ï¼Œè¿™ä¸ªè£…é¥°å™¨èƒ½ä¿ç•™å‡½æ•°åŸæ¥çš„åç§°å’Œdocstring import functools import time def time_diff(func): @functools.wraps(func) def inner(*args, **kwargs): start_time = time.time() func(*args, **kwargs) print(time.time() - start_time) return inner @time_diff def target(): for i in range(10000): print(i) @time_diff def foo(): for i in range(100): print(i) print(target.__name__) print(foo.__name__) å½“ç„¶å¦‚æœåªåœ¨æ„å‡½æ•°çš„åå­—å’Œdocstringï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨èµ‹å€¼ import functools import time def time_diff(func): # @functools.wraps(func) def inner(*args, **kwargs): \"\"\"innerå‡½æ•°\"\"\" start_time = time.time() func(*args, **kwargs) print(time.time() - start_time) inner.__name__ = func.__name__ inner.__doc__ = func.__doc__ return inner @time_diff def target(): \"\"\"targetå‡½æ•°\"\"\" for i in range(10000): print(i) @time_diff def foo(): \"\"\"fooå‡½æ•°\"\"\" for i in range(100): print(i) print(target.__name__) print(foo.__name__) print(target.__doc__) print(foo.__doc__) ä¸Šé¢çš„ç¨‹åºä¸­ç¬”è€…å·²ç»å°†functools.wraps()è¿™ä¸ªè£…é¥°å™¨æ³¨é‡Šæ‰äº†ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œæ³¨é‡Šinner.__name__ = func.__name__å’Œinner.__doc__ = func.__doc__æŸ¥çœ‹è¾“å‡ºç»“æœå˜åŒ–æƒ…å†µ ","date":"2020-07-11","objectID":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/:2:0","tags":["è£…é¥°å™¨","Python"],"title":"Pythonè£…é¥°å™¨","uri":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/"},{"categories":["Python"],"content":"è£…é¥°å¸¦å‚çš„å‡½æ•° åœ¨å¤§éƒ¨åˆ†åº”ç”¨åœºæ™¯ä¸­æˆ‘ä»¬å‡ ä¹éƒ½éœ€è¦ç»™å‡½æ•°ä¼ é€’å‚æ•°ï¼ŒåŸå‡½æ•°çš„å†™æ³•æˆ‘ä»¬è‚¯å®šæ˜¯å›ºå®šä¸å˜çš„ï¼Œé‚£ä¹ˆè¦å¦‚ä½•åœ¨è£…é¥°å™¨å‡½æ•°ä¸­ç»™è¢«è£…é¥°çš„å‡½æ•°ä¼ å…¥å‚æ•°å‘¢ï¼Ÿ ä»¥ä¸Šé¢çš„è£…é¥°å™¨ä¸ºä¾‹ï¼Œå½“è£…é¥°æ‰§è¡Œä¹‹åtargetæŒ‡å‘çš„æ˜¯innerè¿™ä¸ªå‡½æ•°ï¼Œå½“æˆ‘ä»¬åœ¨è°ƒç”¨targetå‡½æ•°æ—¶å…¶å®è°ƒç”¨çš„æ˜¯innerå‡½æ•°ï¼Œå› æ­¤è¿™ä¸ªå‚æ•°éœ€è¦ä¼ ç»™innerå‡½æ•°ï¼Œç„¶åå°†æ¥æ”¶åˆ°çš„å‚æ•°ä¼ é€’ç»™åŸå‡½æ•°å°±è¡Œäº†ã€‚ import time def time_diff(func): def inner(*args, **kwargs): start_time = time.time() func(*args, **kwargs) print(time.time() - start_time) return inner @time_diff def target(n): for i in range(n): print(i) target(20) é€šè¿‡ç”¨ä¸å®šé•¿å‚æ•°çš„æ¥æ”¶æ–¹æ³•è¾¾åˆ°è®©è£…é¥°å™¨æ›´é€šç”¨çš„æ•ˆæœ ","date":"2020-07-11","objectID":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/:3:0","tags":["è£…é¥°å™¨","Python"],"title":"Pythonè£…é¥°å™¨","uri":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/"},{"categories":["Python"],"content":"ç»™è£…é¥°å™¨ä¼ å…¥å‚æ•° åœ¨Flaskã€FastApiä¸­è·¯ç”±å‡½æ•°éƒ½æ˜¯è¢«è£…é¥°å™¨è£…é¥°çš„ï¼Œåœ¨è¢«è£…é¥°çš„æ—¶å€™ä¼šç»™è£…é¥°å™¨ä¼ å…¥ä¸€ä¸ªè·¯ç”±å‚æ•° from flask import Flask app = Flask(__name__) @app.route(\"/index\") def index(): return \"\u003ch1\u003eHello Decorate!\u003c/h1\u003e\" if __name__ == \"__main__\": app.run(debug=True) ä¸å¦¨çœ‹çœ‹routeè¿™ä¸ªè£…é¥°å™¨çš„æºç  def route(self, rule, **options): \"\"\"A decorator that is used to register a view function for a given URL rule. This does the same thing as :meth:`add_url_rule` but is intended for decorator usage:: @app.route('/') def index(): return 'Hello World' For more information refer to :ref:`url-route-registrations`. :param rule: the URL rule as string :param endpoint: the endpoint for the registered URL rule. Flask itself assumes the name of the view function as endpoint :param options: the options to be forwarded to the underlying :class:`~werkzeug.routing.Rule` object. A change to Werkzeug is handling of method options. methods is a list of methods this rule should be limited to (``GET``, ``POST`` etc.). By default a rule just listens for ``GET`` (and implicitly ``HEAD``). Starting with Flask 0.6, ``OPTIONS`` is implicitly added and handled by the standard request handling. \"\"\" def decorator(f): endpoint = options.pop(\"endpoint\", None) self.add_url_rule(rule, endpoint, f, **options) return f return decorator ä»ä¸Šé¢çš„æºç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœæˆ‘ä»¬è¦ç»™è£…é¥°å™¨å‡½æ•°ä¼ é€’å‚æ•°ï¼Œé‚£ä¹ˆè¢«è£…é¥°çš„å‡½æ•°ä½œä¸ºå‚æ•°è¢«æ¥æ”¶çš„é€»è¾‘å°±æ”¾åˆ°äº†å†…éƒ¨çœŸæ­£è¦å»ä¿®é¥°çš„å‡½æ•°å‚æ•°å½“ä¸­ï¼Œå› æ­¤æƒ³è¦ç»™è£…é¥°å™¨å‡½æ•°ä¼ å…¥å‚æ•°æ˜¯éœ€è¦å°†å‡½æ•°ä¼ å…¥çš„ä½ç½®å†™åˆ°çœŸæ­£çš„è£…é¥°é€»è¾‘å½“ä¸­ï¼ŒäºŒå‚æ•°å†™åˆ°æœ€å¤–å±‚çš„å‡½æ•°ä¸­ã€‚ import time def time_diff(*args, **kwargs): print(args, kwargs) def inner(func): start_time = time.time() func() print(time.time() - start_time) return inner @time_diff(\"Hello Decorate\") def target(): for i in range(10): print(i) target() è¿è¡Œç¨‹åºä¹‹åå°†ä¼šå‘ç”ŸNoneTypeçš„errorï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ˜æ˜å·²ç»è¿”å›äº†å‡½æ•°ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆåœ¨æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªå‡½æ•°ä¹‹å‰å‡½æ•°åˆè¢«æå‰è°ƒç”¨äº†ã€‚è¿™æ—¶å€™éœ€è¦ä»è£…é¥°å™¨çš„æ‰§è¡Œå¼€å§‹åˆ†æï¼Œ**Pythonä¸­è£…é¥°å™¨çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯ï¼Œå®ƒä»¬åœ¨è¢«è£…é¥°çš„å‡½æ•°å®šä¹‰ä¹‹åç«‹å³æ‰§è¡Œã€‚**å½“ä½¿ç”¨time_diff(\"Hello Decorate\")çš„æ—¶å€™å®ƒæ˜¯è¢«ä½œä¸ºä¸€ä¸ªæ™®é€šçš„é—­åŒ…å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼ŒçœŸæ­£çš„è£…é¥°å™¨åœ¨å†…éƒ¨ï¼Œè€Œtime_diffè¿”å›çš„innerå‡½æ•°æ‰æ˜¯è£…é¥°å™¨å‡½æ•°ï¼Œè¿”å›çš„innerå‡½æ•°å°†targetå‡½æ•°ä½œä¸ºå‚æ•°ç«‹åˆ»å½¢æˆè£…é¥°å™¨çš„è¯­æ³•ç³–ï¼Œç„¶åè£…é¥°å™¨è¢«æ‰§è¡Œäº†ï¼Œä½†æ˜¯innerå‡½æ•°ä¸­æ˜¯ç›´æ¥æ‰§è¡Œçš„funcå‡½æ•°ï¼Œæ‰€ä»¥åœ¨å¤–éƒ¨è°ƒç”¨targetå‡½æ•°çš„æ—¶å€™ä¼šå‘ç”ŸNoneTypeçš„errorã€‚ è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ç»§ç»­ä½¿ç”¨å‡½æ•°çš„é—­åŒ…ç‰¹æ€§å°±å¯ä»¥ import time def time_diff(*args, **kwargs): def wrapper(func): def inner(): print(args, kwargs) start_time = time.time() func() print(time.time() - start_time) return inner return wrapper @time_diff(\"Hello Decorate\") def target(): for i in range(10): print(i) target() æ­¤æ—¶ä¸€ä¸ªå¤æ‚çš„è£…é¥°å™¨å°±å¿«å®ç°äº†ï¼Œè£…é¥°å™¨éš¾ç‚¹å°±åœ¨äºä½•æ—¶è£…é¥°ï¼Œå› æ­¤æˆ‘ä»¬è¦ç»™è¢«è£…é¥°çš„å‡½æ•°ä¼ é€’å‚æ•°çš„æ—¶å€™ï¼Œè¿™ä¸ªå‚æ•°å†™åœ¨innerå‡½æ•°å½“ä¸­å°±è¡Œã€‚ import time def time_diff(msg): print(msg) def wrapper(func): def inner(*args, **kwargs): start_time = time.time() func(*args, **kwargs) print(time.time() - start_time) return inner return wrapper @time_diff(\"Hello Decorate\") def target(n): for i in range(n): print(i) target(11) ","date":"2020-07-11","objectID":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/:4:0","tags":["è£…é¥°å™¨","Python"],"title":"Pythonè£…é¥°å™¨","uri":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/"},{"categories":["Python"],"content":"æ§åˆ¶è£…é¥°å™¨æ˜¯å¦è£…é¥°å‡½æ•° å½“æˆ‘ä»¬ä¸æƒ³è¿™ä¸ªå‡½æ•°è¢«è£…é¥°å™¨è£…é¥°çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å°†è£…é¥°å™¨çš„è¯­æ³•ç³–æ³¨é‡Šæ‰ï¼Œä½†æ˜¯å¦‚æœè¢«è£…é¥°çš„å‡½æ•°å¾ˆå¤šï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ä¸ªä¸€ä¸ªçš„å»æ³¨é‡Šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¼€å…³æ§åˆ¶è£…é¥°å™¨æ˜¯å¦è¢«è£…é¥° import time ok = True def time_diff(switch): def wrapper(func): def inner(*args, **kwargs): if switch: start_time = time.time() func(*args, **kwargs) print(time.time() - start_time) else: func(*args, **kwargs) return inner return wrapper @time_diff(switch=ok) def target(n): for i in range(n): print(i) target(11) è¿™æ ·æˆ‘ä»¬å°±èƒ½å…¨å±€å†³å®šæ˜¯å¦å¯ç”¨è£…é¥°å™¨ ","date":"2020-07-11","objectID":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/:5:0","tags":["è£…é¥°å™¨","Python"],"title":"Pythonè£…é¥°å™¨","uri":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/"},{"categories":["Python"],"content":"å¤šä¸ªè£…é¥°å™¨è£…é¥°å‡½æ•° åœ¨å®é™…çš„å¼€å‘è¿‡ç¨‹ä¸­å¦‚æœæ¡†æ¶çš„åŠŸèƒ½å®Œå¤‡ï¼Œé‚£ä¹ˆè‚¯å®šä¼šæœ‰logåŠŸèƒ½ã€‚ä½†æ˜¯å¦‚æœè½®å­éœ€è¦æˆ‘ä»¬è‡ªå·±é€ ï¼Œé‚£ä¹ˆéœ€è¦æ‰“logçš„åœ°æ–¹å¯èƒ½ç¨å¾®ä¼šæœ‰ç‚¹å¤šã€‚æ›¾ç»å†™è¿‡åŠŸèƒ½ç›¸å¯¹è¾ƒä¸ºå®Œå–„çš„ä¸€ä¸ªç®€å•çš„å°è„šæœ¬ä¸­ï¼Œæˆ‘å®ä¾‹åŒ–äº†ä¸€ä¸ªloggerå¯¹è±¡ï¼Œç„¶ååœ¨å¤šä¸ªæ–‡ä»¶é—´è°ƒç”¨ï¼Œæ•´ä¸ªlogè°ƒç”¨è¿‡ç¨‹ç®€ç›´æ˜¯æˆ‘çš„å™©æ¢¦ï¼Œå¯¼è‡´æœ€åè¿™ä¸ªloggeråªæ˜¯ä¸€ä¸ªé”¦ä¸Šæ·»èŠ±çš„ä¸œè¥¿ï¼Œå…¶å®æˆ‘ä»…ä»…æ˜¯æƒ³é€šè¿‡è¿™ä¸ªlogç›‘æ§æˆ‘çš„ç¨‹åºè°ƒç”¨æ ˆã€‚åæ¥çš„ä¼˜åŒ–æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨è£…é¥°å™¨ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨è£…é¥°å™¨çš„æ—¶å€™æˆ‘å‘ç°äº†ä¸€ä¸ªæˆ‘ä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ï¼Œå°±æ˜¯åŸæœ‰çš„ç¨‹åºçš„æŸäº›æ–¹æ³•ä¸Šå·²ç»æœ‰ä¸€ä¸ªè£…é¥°å™¨äº†ï¼Œå¦‚æœæˆ‘è¦åœ¨æ·»åŠ ä¸€ä¸ªè£…é¥°å™¨è¯¥æ€ä¹ˆåŠ ï¼Ÿ å…¶å®è¿™ä¸ªé—®é¢˜è¿˜æ˜¯éœ€è¦å›åˆ°å‡½æ•°çš„è°ƒç”¨ï¼Œéœ€è¦è£…é¥°çš„å‡½æ•°å°†è¢«ä½œä¸ºå‚æ•°ä¼ é€’ç»™è£…é¥°å™¨ï¼Œç„¶åå¯¹è¿™ä¸ªå‡½æ•°è¿›è¡ŒåŠ å·¥ï¼Œå¦‚æœæœ‰ç¬¬äºŒä¸ªè£…é¥°å™¨ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªè£…é¥°å™¨è£…é¥°çš„å°±æ˜¯åŠ å·¥åè¿”å›çš„å‡½æ•°ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥æ‹†è§£ä¸ºå‡½æ•°çš„å‚æ•°çš„ä¼ é€’ def decorator1(f): def wrapper1(): print(\"wrapper1\") f() return wrapper1 def decorator2(f): def wrapper2(): print(\"wrapper2\") f() return wrapper2 def a(): print(\"hello\") a = decorator1(a) a = decorator2(a) å°†æœ€åä¸¤å¥ä»£ç ç®€åŒ– a = decorator2(decorator1(a)) å¦‚æœå†™ä¸ºè£…é¥°å™¨çš„è¯­æ³•ç³– def decorator1(f): def wrapper1(): print(\"wrapper1\") f() return wrapper1 def decorator2(f): def wrapper2(): print(\"wrapper2\") f() return wrapper2 @decorator2 @decorator1 def a(): print(\"hello\") è£…é¥°å™¨è¯­æ³•ç³–ä¸‹æ–¹çš„ç¨‹åºéƒ½å°†æ˜¯è¯¥è£…é¥°å™¨çš„å‡½æ•°å‚æ•°ï¼Œå½“ç„¶å‰æéœ€è¦ä¸‹æ–¹çš„ç»“æœæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œ@decorator2ä¸‹æ–¹è¿˜æ˜¯ä¸€ä¸ªè£…é¥°å™¨è¯­æ³•ç³–ï¼Œé‚£ä¹ˆå°±è¿™æ ·ä¸€å±‚ä¸€å±‚çš„å¥—ä¸‹å»ã€‚å…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥ç®€å•çš„ç†è§£ä¸ºå“ªä¸ªè£…é¥°å™¨å…ˆç¢°åˆ°éœ€è¦è¢«è£…é¥°çš„å‡½æ•°ï¼Œé‚£ä¹ˆå°±å…ˆæ‰§è¡Œå“ªä¸ªè£…é¥°å™¨ã€‚ ","date":"2020-07-11","objectID":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/:6:0","tags":["è£…é¥°å™¨","Python"],"title":"Pythonè£…é¥°å™¨","uri":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/"},{"categories":["Python"],"content":"æ€»ç»“ è¦åœ¨é¢è¯•çš„æ—¶å€™ç ´è£…é¥°å™¨çš„é¢˜ï¼Œæˆ–è€…æƒ³å†™å¥½è£…é¥°å™¨ï¼Œç¬”è€…è®¤ä¸ºæœ€å…³é”®çš„å°±æ˜¯ä¸¤ç‚¹ è£…é¥°å™¨çš„å‚æ•°æ˜¯å‡½æ•° è£…é¥°å™¨åœ¨è¢«è£…é¥°çš„å‡½æ•°å®šä¹‰ä¹‹åç«‹å³æ‰§è¡Œ è¿™ä¸¤ç‚¹åœ¨ç¬”è€…å­¦ä¹ è£…é¥°å™¨çš„æ—¶å€™å‡ ä¹è§£å†³äº†æ‰€æœ‰é—®é¢˜ ","date":"2020-07-11","objectID":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/:7:0","tags":["è£…é¥°å™¨","Python"],"title":"Pythonè£…é¥°å™¨","uri":"/posts/python%E8%A3%85%E9%A5%B0%E5%99%A8/"},{"categories":["Go"],"content":" Gin æ˜¯ä¸€ä¸ªç”¨ Go (Golang) ç¼–å†™çš„ web æ¡†æ¶ã€‚ å®ƒæ˜¯ä¸€ä¸ªç±»ä¼¼äº martini ä½†æ‹¥æœ‰æ›´å¥½æ€§èƒ½çš„ API æ¡†æ¶, ç”±äº httprouterï¼Œé€Ÿåº¦æé«˜äº†è¿‘ 40 å€ã€‚ å¦‚æœä½ æ˜¯æ€§èƒ½å’Œé«˜æ•ˆçš„è¿½æ±‚è€…, ä½ ä¼šçˆ±ä¸Š Gin Ginæ¡†æ¶ä¸­æ–‡æ–‡æ¡£ æ‹‰å–ä»“åº“ï¼Œè¿›å…¥åˆ°github.comç›®å½•ä¸‹ï¼Œåˆ›å»ºgin-gonicæ–‡ä»¶å¤¹ï¼Œç„¶åæ‰§è¡Œæ‹‰å–å‘½ä»¤ git clone https://github.com/gin-gonic/gin.git ä¸‹è½½ä»“åº“æºç ï¼Œä¸‹è½½ä»“åº“æºç å’Œä½¿ç”¨å…‹éš†å‘½ä»¤ä¸€æ ·ï¼Œéƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªgin-gonicç›®å½• ä½¿ç”¨go getå‘½ä»¤å®‰è£… go get -u github.com/gin-gonic/gin ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:0:0","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"åˆ›å»ºä¸€ä¸ªç®€å•çš„WebæœåŠ¡ ä½¿ç”¨Ginæ¡†æ¶å¯ä»¥å¾ˆå¿«çš„æ„å»ºä¸€ä¸ªwebæœåŠ¡ package main import ( \"github.com/gin-gonic/gin\" \"net/http\" ) func hello(c *gin.Context) { c.String(http.StatusOK, \"hello, world\") } func main() { r := gin.Default() r.GET(\"/hello\", hello) r.Run(\":9090\") } ä½¿ç”¨gin.Default()æ–¹æ³•åˆ›å»ºçš„æ˜¯ä¸€ä¸ªé»˜è®¤çš„httpåç«¯å¼•æ“ æ³¨å†Œè·¯ç”±çš„æ—¶å€™å¯ä»¥ç›´æ¥ç»‘å®šè¯¥è·¯ç”±çš„è¯·æ±‚æ–¹æ³• è·¯ç”±å¤„ç†å‡½æ•°ä¸­éœ€è¦ä¼ é€’ä¸€ä¸ª*gin.ContextæŒ‡é’ˆï¼Œæ‰€æœ‰æœ¬æ¬¡è¯·æ±‚ç›¸å…³çš„æ–¹æ³•éƒ½åœ¨è¿™ä¸ªContextä¸­ å“åº”éœ€è¦ä¸€ä¸ªçŠ¶æ€ç ï¼ŒGoè¯­è¨€çš„httpåº“ä¸­å·²ç»å®šä¹‰å¥½äº†å…¨éƒ¨çš„å“åº”çŠ¶æ€ç å¸¸é‡ï¼Œç›´æ¥è°ƒç”¨å³å¯ å¼•æ“å¯åŠ¨çš„æ—¶å€™å¦‚æœä¸ç»‘å®šç«¯å£ï¼Œé‚£ä¹ˆé»˜è®¤å°±æ˜¯8080ç«¯å£ æ³¨å†Œè·¯ç”±çš„æ–¹æ³•è¿˜æä¾›äº†ä¸€ç§Anyæ–¹æ³•ï¼Œé€šè¿‡GET, POST, PUT, PATCH, HEAD, OPTIONS, DELETE, CONNECT, TRACEå…¶ä¸­ä»»ä½•ä¸€ç§æ–¹æ³•éƒ½èƒ½è¯·æ±‚åˆ° func (group *RouterGroup) Any(relativePath string, handlers ...HandlerFunc) IRoutes { group.handle(http.MethodGet, relativePath, handlers) group.handle(http.MethodPost, relativePath, handlers) group.handle(http.MethodPut, relativePath, handlers) group.handle(http.MethodPatch, relativePath, handlers) group.handle(http.MethodHead, relativePath, handlers) group.handle(http.MethodOptions, relativePath, handlers) group.handle(http.MethodDelete, relativePath, handlers) group.handle(http.MethodConnect, relativePath, handlers) group.handle(http.MethodTrace, relativePath, handlers) return group.returnObj() } ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:1:0","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"Restful Api å› ä¸ºGinæ¡†æ¶çš„æ˜“ç”¨æ€§å¯ä»¥å¾ˆç®€å•çš„å®šä¹‰Restful Apiåˆ†é£æ ¼çš„è·¯ç”±ï¼Œå¹¶ä¸éœ€è¦ä¸ºæ¯ç§æ–¹æ³•éƒ½æ³¨å†Œä¸€ä¸ªä¸åŒçš„è·¯ç”±ï¼Œåªéœ€è¦ä½¿ç”¨åŒä¸€ä¸ªè·¯ç”±æ¥ç»‘å®šä¸åŒçš„è¯·æ±‚æ–¹æ³•å°±å¯ä»¥æ‰§è¡Œä¸åŒçš„åŠŸèƒ½ï¼Œæ¯”å¦‚çº¦å®šï¼š GETç”¨æ¥è·å–èµ„æº POSTç”¨æ¥æ–°å»ºèµ„æº PUTç”¨æ¥æ›´æ–°èµ„æº DELETEç”¨æ¥åˆ é™¤èµ„æº è¿™æ ·æ³¨å†Œè·¯ç”±ä¼šä½¿ç¨‹åºæ•´ä½“æ›´åŠ çš„æ¸…æ™°ï¼Œå¯è¯»æ€§å’Œç»´æŠ¤æ€§æ›´é«˜ func main() { r := gin.Default() r.GET(\"/user\", getting) r.POST(\"/user\", posting) r.PUT(\"/user\", putting) r.DELETE(\"/user\", deleting) r.PATCH(\"/user\", patching) r.HEAD(\"/user\", head) r.OPTIONS(\"/user\", options) r.Run() } ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:1:1","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"è·å–å‚æ•° ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:2:0","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"è·å–Querystringå‚æ•° querystringæŒ‡çš„æ˜¯URLä¸­?åé¢æºå¸¦çš„å‚æ•°ï¼Œä¾‹å¦‚https://www.google.com/search?q=golang\u0026oq=golangï¼Œä¸åŒå‚æ•°ä¹‹é—´ç”¨\u0026ç¬¦å·è¿æ¥ func main() { r := gin.Default() r.GET(\"/user\", func(c *gin.Context){ name := c.DefaultQuery(\"name\", \"user\") age := c.Query(\"age\") name2, ok := c.GetQuery(\"name\") c.String(http.StatusOK, \"Hello! %s %s\", name, age) }) r.Run(\":9090\") } DefaultQueryç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è§£æçš„å­—æ®µçš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯åœ¨æ‰¾ä¸åˆ°nameè¿™ä¸ªå‚æ•°çš„æ—¶å€™ä¼šä½¿ç”¨åé¢çš„é»˜è®¤å€¼ Queryå°±æ˜¯æ¯”è¾ƒå¸¸è§„çš„è§£æï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå­—æ®µï¼Œé‚£ä¹ˆè§£æç»“æœå°±æ˜¯ç©ºå­—ç¬¦ä¸² GetQueryæ˜¯å°è¯•å»å–å€¼ï¼Œå¦‚æœå–åˆ°é‚£ä¹ˆå°±ä¼šè¿”å›è¯¥å­—æ®µçš„å€¼å’Œå¸ƒå°”å€¼trueï¼Œå¦‚æœå–ä¸åˆ°é‚£ä¹ˆè¿˜æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä¼šè¿”å›false ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:2:1","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"è·å–Data Formå‚æ•° func main() { r := gin.Default() r.POST(\"post_form\", func(c *gin.Context) { name := c.DefaultPostForm(\"name\", \"user\") age := c.PostForm(\"age\") name2, ok := GetPostForm(\"name\") c.JSON(http.StatusOK, gin.H{ \"name\": name, \"age\": age, }) r.Run(\":9090\") } è¿™é‡Œè§£ææ–¹æ³•å’ŒQuerystringå·®ä¸å¤š ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:2:2","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"è¿”å›Jsonæ•°æ® ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:3:0","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"ä½¿ç”¨map func main() { r := gin.Default() r.GET(\"/json\", func(c *gin.Context) { //ä½¿ç”¨map data := map[string]interface{}{ \"name\": \"pujic\", \"age\":18, } c.JSON(http.StatusOK, data) }) r.Run(\":9090\") } ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:3:1","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"ä½¿ç”¨gin.H gin.Hæ˜¯Ginæ¡†æ¶ä¸­å®šä¹‰å¥½çš„map[string]interface{}çš„ç±»å‹åˆ«åï¼Œå‡†ç¡®çš„è¯´åº”è¯¥æ˜¯è¿™ä¸ªHï¼Œä½†æ˜¯è°ƒç”¨çš„æ—¶å€™è¦ä½¿ç”¨gin.H func main() { r := gin.Default() r.GET(\"/json\", func(c *gin.Context) { data := gin.H{\"name\": \"pujic\", \"age\": 18} c.JSON(http.StatusOK, data) }) r.Run(\":9090\") } ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:3:2","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"ä½¿ç”¨ç»“æ„ä½“ func main() { r := gin.Default() r.GET(\"/json\", func(c *gin.Context) { var data struct { Name string Age uint8 } data.Name = \"pujic\" data.Age = 18 c.JSON(http.StatusOK, data) }) r.Run(\":9090\") } c.JSON()å‡½æ•°åœ¨æ‹¿åˆ°æ•°æ®ä¹‹åä¼šå¯¹æ•°æ®è¿›è¡Œä¸€ä¸ªJson.Marshalï¼ŒGoè¯­è¨€ä¸­Jsonåºåˆ—åŒ–æ˜¯é€šè¿‡åå°„å–å€¼çš„ï¼Œå¦‚æœç»“æ„ä½“çš„é¦–å­—æ¯ä¸æ˜¯å¤§å†™ï¼Œé‚£ä¹ˆå°±å–ä¸åˆ°è¿™ä¸ªå­—æ®µ ä½†æ˜¯å¦‚æœå‰ç«¯è¯·æ±‚çš„Jsonæ•°æ®å­—æ®µéœ€è¦æ˜¯é¦–å­—æ¯å°å†™çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ç»™ç»“æ„ä½“æ·»åŠ Tagï¼ŒæŒ‡å®šJson Marshalçš„æ—¶å€™è¯¥å­—æ®µçš„key func main() { r := gin.Default() r.GET(\"/json\", func(c *gin.Context) { var data struct { Name string `json:\"name\"` Age uint8 `json:\"age\"` } data.Name = \"pujic\" data.Age = 18 c.JSON(http.StatusOK, data) }) r.Run(\":9090\") } ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:3:3","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"è·å–URLè·¯å¾„å‚æ•° æƒ³è¦è·å–åˆ°è·¯å¾„å‚æ•°éœ€è¦è¿›è¡Œè§„åˆ™åŒ¹é… func main() { r := gin.Default() r.GET(\"/:name/:age\", func(c *gin.Context) { name :=c.Param(\"name\") age := c.Param(\"age\") c.JSON(http.StatusOK, gin.H{ \"name\": name, \"age\" : age, }) }) r.Run(\":9090\") } è¿™æ—¶å€™è®¿é—®æœ¬æœº9090ç«¯å£åçš„ä»»æ„ç¬¦åˆ/name/ageè¿™æ ·çš„è·¯å¾„ï¼Œé‚£ä¹ˆå‚æ•°éƒ½å°†è¢«è·å–åˆ° ä½†æ˜¯è¿™æ—¶å€™å¦‚æœè®¿é—®ä»»ä½•è·¯å¾„éƒ½å°†è¢«åŒ¹é…ï¼Œå› ä¸ºåŒ¹é…æ˜¯ä»å¤´å¼€å§‹çš„ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸æƒ³è®¿é—®è¿™ä¸ªå±‚çº§çš„è·¯å¾„ï¼Œé‚£ä¹ˆå°±å¯èƒ½ä¼šè¢«é”™è¯¯åŒ¹é…åˆ° è¿™æ—¶å€™å°±éœ€è¦é‡å†™åŒ¹é…è§„åˆ™ func main() { r := gin.Default() r.GET(\"/user/:name/:age\", func(c *gin.Context) { name :=c.Param(\"name\") age := c.Param(\"age\") c.JSON(http.StatusOK, gin.H{ \"name\": name, \"age\" : age, }) }) r.GET(\"/province/:city/:area\", func(c *gin.Context) { city:=c.Param(\"city\") area := c.Param(\"area\") c.JSON(http.StatusOK, gin.H{ \"city\": city, \"area\": area, }) }) r.Run(\":9090\") } ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:4:0","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"å‚æ•°ç»‘å®š æœ‰æ—¶å€™æˆ‘ä»¬ä»å‰ç«¯è·å–åˆ°çš„æ•°æ®é€šå¸¸æ˜¯å¤šæ¡ï¼Œå¹¶ä¸”éœ€è¦åœ¨ç¨‹åºä¸­ä½¿ç”¨åˆ°è¿™äº›æ•°æ®ï¼Œæ¯”å¦‚å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œé‚£ä¹ˆé€šå¸¸ä¼šä½¿ç”¨ç»“æ„ä½“æ¥æ“ä½œæ•°æ®ï¼Œä½†æ˜¯å¦‚æœè¦è·å–çš„å­—æ®µå¾ˆå¤šçš„è¯ï¼Œä»è·å–åˆ°èµ‹å€¼éƒ½æ˜¯ä¸€ä¸ªå¾ˆç¹ççš„è¿‡ç¨‹ï¼Œä½¿ç”¨Ginæ¡†æ¶è¿›è¡Œå‚æ•°ç»‘å®šå°±ä¼šæ–¹ä¾¿å¾ˆå¤š json å‚æ•° type UserInfo struct { Name string `json:\"name\"` Age int `json:\"age\"` Sex string `json:\"sex\"` } func main() { r := gin.Default() r.POST(\"/\", func(c *gin.Context) { var userInfo UserInfo err := c.ShouldBindJSON(\u0026userInfo) if err != nil { c.JSON(200, gin.H{\"msg\": err}) return } c.JSON(200, userInfo) }) r.Run(\":9090\") } URLæŸ¥è¯¢å‚æ•° type UserInfo struct { Name string `json:\"name\" form:\"name\"` Age int `json:\"age\" form:\"age\"` Sex string `json:\"sex\" form:\"sex\"` } func main() { r := gin.Default() r.POST(\"/query\", func(c *gin.Context) { var userInfo UserInfo err := c.ShouldBindQuery(\u0026userInfo) if err != nil { fmt.Println(err) c.JSON(200, gin.H{\"msg\": err}) return } c.JSON(200, userInfo) }) r.Run(\":9090\") } form å‚æ•° type UserInfo struct { Name string `form:\"name\"` Age int `form:\"age\"` Sex string `form:\"sex\"` } func main() { r := gin.Default() r.POST(\"/form\", func(c *gin.Context) { var userInfo UserInfo err := c.ShouldBind(\u0026userInfo) if err != nil { fmt.Println(err) c.JSON(200, gin.H{\"msg\": \"ä½ é”™äº†\"}) return } c.JSON(200, userInfo) }) r.Run(\":9090\") } ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:5:0","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"è·¯ç”±ç»„ ä¸€äº›æƒ…å†µä¸‹å¯èƒ½éœ€è¦ç»Ÿä¸€å‰ç¼€çš„URLéœ€æ±‚ï¼Œæ¯”å¦‚è§†é¢‘ç½‘ç«™çš„å–œå‰§é¢‘é“ç­‰ç­‰ï¼Œé€šå¸¸æ¶‰åŠåˆ°åˆ†ç±»çš„ï¼ŒæŸä¸€ä¸ªç±»åˆ«ä¸‹åŸºæœ¬éƒ½ä¼šæœ‰ç»Ÿä¸€çš„URLå‰ç¼€ï¼Œè¿™ç§æƒ…å†µä¸‹ä½¿ç”¨è·¯ç”±ç»„å°†ä¼šæ–¹ä¾¿å¾ˆå¤šï¼ŒGin å¯ä»¥ä½¿ç”¨ Group æ–¹æ³•ç»Ÿä¸€å½’ç±»åˆ°è·¯ç”±ç»„ä¸­ func main() { r := gin.Default() group1 := r.Group(\"/user\") { group1.GET(\"/name\", func(c *gin.Context) { c.String(http.StatusOK, \"pujic\") }) group1.GET(\"/age\", func(c *gin.Context) { c.String(http.StatusOK, \"18\") }) } group2 := r.Group(\"/product\") { group2.GET(\"/datetime\", func(c *gin.Context) { c.String(http.StatusOK, \"2020\") }) group2.GET(\"/weight\", func(c *gin.Context) { c.String(http.StatusOK, \"1kg\") }) } r.Run(\":9090\") } ","date":"2020-06-12","objectID":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/:6:0","tags":["gin","Go"],"title":"åˆè¯†Ginæ¡†æ¶","uri":"/posts/%E5%88%9D%E8%AF%86gin%E6%A1%86%E6%9E%B6/"},{"categories":["Go"],"content":"åœ¨ä½¿ç”¨Goè¯­è¨€å®ç°å®¢æœç«¯å’ŒæœåŠ¡ç«¯çš„æ—¶å€™åŸºæœ¬ä¸éœ€è¦ç¬¬ä¸‰æ–¹åº“æ¥å®Œæˆï¼Œä½¿ç”¨æ ‡å‡†åº“ä¸­çš„net/httpå°±èƒ½å¤Ÿèƒœä»»ç»å¤§å¤šæ•°çš„éœ€æ±‚ï¼ŒåŸºæœ¬ä¸éœ€è¦è‡ªå·±é€ è½®å­ï¼ŒGoè¯­è¨€çš„æ ‡å‡†åº“å¤Ÿå¼ºå¤§ï¼Œä¸”å¤Ÿçµæ´»ã€‚ ","date":"2020-06-11","objectID":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/:0:0","tags":["http","Go"],"title":"Goæ ‡å‡†åº“-net/http","uri":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/"},{"categories":["Go"],"content":"é»˜è®¤Server ä½¿ç”¨Goè¯­è¨€çš„æ ‡å‡†åº“net/httpè¿›è¡ŒæœåŠ¡ç«¯çš„å¼€å‘ package main import ( \"fmt\" \"net/http\" ) func sayHello(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"Hello\")) } func main() { http.HandleFunc(\"/hello\", sayHello) err := http.ListenAndServe(\":9090\", nil) if err != nil { fmt.Println(\"http serve failed, error:\", err) } } é¦–å…ˆè°ƒç”¨http.HandleFuncï¼ŒæŒ‰é¡ºåºåšäº†å‡ ä»¶äº‹ï¼š è°ƒç”¨äº†DefaultServerMuxçš„HandleFunc è°ƒç”¨äº†DefaultServerMuxçš„Handle å¾€DefaultServeMuxçš„map[string]muxEntryä¸­å¢åŠ å¯¹åº”çš„handlerå’Œè·¯ç”±è§„åˆ™ å…¶æ¬¡è°ƒç”¨http.ListenAndServe(â€œ:9090â€, nil)ï¼ŒæŒ‰é¡ºåºåšäº†å‡ ä»¶äº‹æƒ…ï¼š å®ä¾‹åŒ–Server è°ƒç”¨Serverçš„ListenAndServe() è°ƒç”¨net.Listen(â€œtcpâ€, addr)ç›‘å¬ç«¯å£ å¯åŠ¨ä¸€ä¸ªforå¾ªç¯ï¼Œåœ¨å¾ªç¯ä½“ä¸­Acceptè¯·æ±‚ å¯¹æ¯ä¸ªè¯·æ±‚å®ä¾‹åŒ–ä¸€ä¸ªConnï¼Œå¹¶ä¸”å¼€å¯ä¸€ä¸ªgoroutineä¸ºè¿™ä¸ªè¯·æ±‚è¿›è¡ŒæœåŠ¡go c.serve() è¯»å–æ¯ä¸ªè¯·æ±‚çš„å†…å®¹w, err := c.readRequest() åˆ¤æ–­headeræ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®handlerï¼ˆè¿™ä¸ªä¾‹å­å°±æ²¡æœ‰è®¾ç½®handlerï¼‰ï¼Œhandlerå°±è®¾ç½®ä¸ºDefaultServeMux è°ƒç”¨handlerçš„ServeHttp åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸‹é¢å°±è¿›å…¥åˆ°DefaultServerMux.ServeHttp æ ¹æ®requesté€‰æ‹©handlerï¼Œå¹¶ä¸”è¿›å…¥åˆ°è¿™ä¸ªhandlerçš„ServeHTTP mux.handler(r).ServeHTTP(w, r) é€‰æ‹©handlerï¼š A åˆ¤æ–­æ˜¯å¦æœ‰è·¯ç”±èƒ½æ»¡è¶³è¿™ä¸ªrequestï¼ˆå¾ªç¯éå†ServerMuxçš„muxEntryï¼‰ B å¦‚æœæœ‰è·¯ç”±æ»¡è¶³ï¼Œè°ƒç”¨è¿™ä¸ªè·¯ç”±handlerçš„ServeHttp C å¦‚æœæ²¡æœ‰è·¯ç”±æ»¡è¶³ï¼Œè°ƒç”¨NotFoundHandlerçš„ServeHttp æŒ‡å®šè·¯ç”±æ‰§è¡Œçš„æ–¹æ³•ä¸­éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œwå’Œrï¼Œwæ˜¯http.ResponseWriterç±»å‹ï¼Œéœ€è¦ä¼ é€’å›å»çš„æ•°æ®éœ€è¦ä½¿ç”¨å¾€wä¸­å†™å…¥ã€‚ræ˜¯http.Requestç±»å‹çš„æŒ‡é’ˆï¼Œä»å‰ç«¯ä¼ é€’è¿‡æ¥çš„æ•°æ®éœ€è¦é€šè¿‡ræ¥è¯»å–ã€‚ ","date":"2020-06-11","objectID":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/:1:0","tags":["http","Go"],"title":"Goæ ‡å‡†åº“-net/http","uri":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/"},{"categories":["Go"],"content":"è‡ªå®šä¹‰Server è¦ç®¡ç†æœåŠ¡ç«¯çš„è¡Œä¸ºï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„Serverï¼šã€ s := \u0026http.Server{ Addr: \":9090\", Handler: myHandler, ReadTimeout: 10 * time.Second, WriteTimeout: 10 * time.Second, MaxHeaderBytes: 1 \u003c\u003c 20, } log.Fatal(s.ListenAndServe()) ","date":"2020-06-11","objectID":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/:2:0","tags":["http","Go"],"title":"Goæ ‡å‡†åº“-net/http","uri":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/"},{"categories":["Go"],"content":"å®¢æˆ·ç«¯ å®¢æˆ·ç«¯ä¹Ÿå°±æ˜¯httpè¯·æ±‚ ","date":"2020-06-11","objectID":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/:3:0","tags":["http","Go"],"title":"Goæ ‡å‡†åº“-net/http","uri":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/"},{"categories":["Go"],"content":"GETè¯·æ±‚ package main import ( \"fmt\" \"io/ioutil\" \"net/http\" ) func main() { response, err := http.Get(\"http://www.baidu.com\") if err != nil { } defer response.Body.Close() body, _ := ioutil.ReadAll(response.Body) fmt.Println(string(body)) } responseæ˜¯ä¸€ä¸ªhttp.Responseå¯¹è±¡ï¼Œä½¿ç”¨Bodyæ–¹æ³•å¯ä»¥å°†å“åº”å†…å®¹è¯»å–å‡ºæ¥ï¼Œä½†æ˜¯è¯»å–å‡ºæ¥çš„æ•°æ®æ˜¯byteç±»å‹ï¼Œéœ€è¦è½¬æ¢ã€‚ ","date":"2020-06-11","objectID":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/:3:1","tags":["http","Go"],"title":"Goæ ‡å‡†åº“-net/http","uri":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/"},{"categories":["Go"],"content":"POSTè¯·æ±‚ package main import ( \"bytes\" \"encoding/json\" \"fmt\" \"io/ioutil\" \"net/http\" ) func main() { formData := make(map[string]string) formData[\"username\"] = \"pujic\" formData[\"password\"] = \"123456\" bytesData, _ := json.Marshal(formData) response, err := http.Post(\"http://xxxxxx.com\", \"application/json;charset=utf-8\", bytes.NewBuffer([]byte(bytesData))) if err != nil { fmt.Println(\"http error \", err) } defer response.Body.Close() content, err := ioutil.ReadAll(response.Body) if err != nil { fmt.Println(\"read response error \", err) } str := (*string)(unsafe.Pointer(\u0026content)) fmt.Println(*str) } ä¸Šé¢çš„è¯·æ±‚ä¸­æ·»åŠ äº†è¯·æ±‚å¤´ï¼Œæ˜¯ä¸ºäº†å‘Šè¯‰æœåŠ¡ç«¯æˆ‘ä»¬ä¼ è¿‡å»çš„æ•°æ®æ˜¯ä»€ä¹ˆæ•°æ®ï¼Œè¿™ä¸ªæ˜¯å¿…é¡»è¦è®¾ç½®çš„ï¼Œè¿™æ ·POSTè¯·æ±‚çš„å‚æ•°æ‰èƒ½æ­£å¸¸çš„æäº¤ã€‚ ","date":"2020-06-11","objectID":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/:3:2","tags":["http","Go"],"title":"Goæ ‡å‡†åº“-net/http","uri":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/"},{"categories":["Go"],"content":"ä½¿ç”¨http.NewRequestå‘èµ·è¯·æ±‚ ä½¿ç”¨NewRequestå‘é€è¯·æ±‚éœ€è¦å…ˆå®ä¾‹åŒ–ä¸€ä¸ªè¯·æ±‚å¯¹è±¡ package main import ( \"net/http\" ) func main() { request, err := http.NewRequest(\"GET\", \"http://www.baidu.com\", nil) request.Header.Set(\"User-agent\", \"Mozilla/5.0\") response, err := http.DefaultClient.Do(request) } ä½¿ç”¨NewRequestå®ä¾‹åŒ–å¾—åˆ°çš„æ˜¯ä¸€ä¸ªRequestç»“æ„ä½“å¯¹è±¡ï¼Œå¯ä»¥ç»™è¿™ä¸ªRequestå¯¹è±¡æ·»åŠ è¯·æ±‚å¤´ç­‰ä¿¡æ¯ï¼Œè¦å‘é€è¿™ä¸ªè¯·æ±‚éœ€è¦ä½¿ç”¨http.DefaultClient.Doå»å®Œæˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨http.client.Doå®Œæˆ å¦‚æœæ˜¯POSTè¯·æ±‚é‚£ä¹ˆè¦æäº¤çš„è¡¨å•å¯ä»¥åœ¨æ„é€ è¯·æ±‚å¯¹è±¡çš„æ—¶å€™ä¼ é€’ï¼Œæˆ–è€…ä½¿ç”¨è¯·æ±‚å¯¹è±¡çš„Bodyå­—æ®µæ¥æ·»åŠ ï¼ˆè¯¦ç»†æ–¹æ³•çœ‹æºç ï¼‰ req := \u0026Request{ ctx: ctx, Method: method, URL: u, Proto: \"HTTP/1.1\", ProtoMajor: 1, ProtoMinor: 1, Header: make(Header), Body: rc, Host: u.Host, } ","date":"2020-06-11","objectID":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/:3:3","tags":["http","Go"],"title":"Goæ ‡å‡†åº“-net/http","uri":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/"},{"categories":["Go"],"content":"ä½¿ç”¨http.Clientæ¥è¯·æ±‚ import \"net/http\" func main(){ client := http.Client{} response, err := client.Get(\"http://wwww.baidu.com\") } http.Clientå…¶å®ä¹Ÿå°±æ˜¯åœ¨http.NewRequestä¸Šè¿›è¡Œå°è£… func (c *Client) Get(url string) (resp *Response, err error) { req, err := NewRequest(\"GET\", url, nil) if err != nil { return nil, err } return c.Do(req) } ","date":"2020-06-11","objectID":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/:3:4","tags":["http","Go"],"title":"Goæ ‡å‡†åº“-net/http","uri":"/posts/go%E6%A0%87%E5%87%86%E5%BA%93-net-http/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"XPathå³ä¸ºXMLè·¯å¾„è¯­è¨€ï¼ˆXML Path Languageï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨æ¥ç¡®å®šXMLæ–‡æ¡£ä¸­æŸéƒ¨åˆ†ä½ç½®çš„è¯­è¨€ã€‚ XPathåŸºäºXMLçš„æ ‘çŠ¶ç»“æ„ï¼Œæä¾›åœ¨æ•°æ®ç»“æ„æ ‘ä¸­æ‰¾å¯»èŠ‚ç‚¹çš„èƒ½åŠ›ã€‚ ","date":"2020-03-26","objectID":"/posts/xpath%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/:0:0","tags":["xpath","ç½‘ç»œçˆ¬è™«"],"title":"xpathåŸºæœ¬è¯­æ³•","uri":"/posts/xpath%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"é€‰æ‹©ç»“ç‚¹ è¯­æ³• æè¿° ç¤ºä¾‹ ç¤ºä¾‹è§£é‡Š / ä»æ ¹èŠ‚ç‚¹å¼€å§‹é€‰å– /html åªä¼šä»å¤´å¼€å§‹åŒ¹é…ï¼Œé€‰æ‹©åˆ°ä¸€ä¸ªç»“æœï¼Œä¸ºhtmlèŠ‚ç‚¹ // ä¸è€ƒè™‘ä½ç½®ï¼Œé€‰å–æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»“ç‚¹ //div ä¸ç”¨ä»å¤´å¼€å§‹åŒ¹é…ï¼Œé€‰æ‹©æ‰€æœ‰divç»“ç‚¹ . é€‰å–å½“å‰ç»“ç‚¹ ./div é€‰æ‹©å½“å‰ç»“ç‚¹ä¸‹çš„divç»“ç‚¹ï¼ˆå­èŠ‚ç‚¹ä¸­çš„divç»“ç‚¹ï¼‰ .. é€‰å–å½“å‰ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹ ../div é€‰æ‹©å½“å‰ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹ ","date":"2020-03-26","objectID":"/posts/xpath%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/:0:1","tags":["xpath","ç½‘ç»œçˆ¬è™«"],"title":"xpathåŸºæœ¬è¯­æ³•","uri":"/posts/xpath%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"é€‰æ‹©å±æ€§ ä½¿ç”¨@ç¬¦å·æ¥é€‰æ‹©å±æ€§ ç¤ºä¾‹ ç¤ºä¾‹è§£é‡Š //div[@id] é€‰æ‹©æ‰€æœ‰å±æ€§ä¸ºidçš„æ‰€æœ‰divç»“ç‚¹ //@class é€‰æ‹©å±æ€§ä¸ºclassçš„æ‰€æœ‰ç»“ç‚¹ //div[@class=â€œnameâ€] é€‰æ‹©classå±æ€§ä¸ºnameçš„æ‰€æœ‰divç»“ç‚¹ ","date":"2020-03-26","objectID":"/posts/xpath%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/:0:2","tags":["xpath","ç½‘ç»œçˆ¬è™«"],"title":"xpathåŸºæœ¬è¯­æ³•","uri":"/posts/xpath%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"æŒ‡å®šç»“ç‚¹ ä½¿ç”¨[]æ¥æŒ‡å®šæ˜¯ç¬¬å‡ ä¸ªç»“ç‚¹ ç¤ºä¾‹ ç¤ºä¾‹è§£é‡Š //tbody/tr[3] é€‰æ‹©æ‰€æœ‰tbodyç»“ç‚¹ä¸‹çš„ç¬¬3ä¸ªtrç»“ç‚¹ //tbody/tr[last()] é€‰æ‹©æ‰€æœ‰tbodyç»“ç‚¹ä¸‹çš„æœ€åä¸€ä¸ªtrç»“ç‚¹ //tbody/tr[position()\u003c3] é€‰æ‹©æ‰€æœ‰tbodyç»“ç‚¹ä¸‹ä½ç½®å°äº3çš„trç»“ç‚¹ ","date":"2020-03-26","objectID":"/posts/xpath%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/:0:3","tags":["xpath","ç½‘ç»œçˆ¬è™«"],"title":"xpathåŸºæœ¬è¯­æ³•","uri":"/posts/xpath%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"å†…å®¹é€‰å– ç¤ºä¾‹ ç¤ºä¾‹è§£é‡Š //img/@src å–å‡ºæ‰€æœ‰imgæ ‡ç­¾çš„srcå±æ€§å€¼ //p/text() å–å‡ºæ‰€æœ‰pæ ‡ç­¾åŒ…è£¹çš„æ‰€æœ‰æ–‡æœ¬å†…å®¹ ","date":"2020-03-26","objectID":"/posts/xpath%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/:0:4","tags":["xpath","ç½‘ç»œçˆ¬è™«"],"title":"xpathåŸºæœ¬è¯­æ³•","uri":"/posts/xpath%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"é‡‡ç”¨è§£å‹å‹ç¼©æ–‡ä»¶çš„å®‰è£…æ–¹å¼å®‰è£…Windowsç‰ˆæœ¬çš„MySQLï¼ ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:0:0","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"ä¸‹è½½MySQL ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:1:0","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"å®˜ç½‘ä¸‹è½½ MySQLå®˜æ–¹ç½‘ç«™ä¸»é¡µï¼šhttps://www.mysql.com/ å°†é¡µé¢æ‹‰åˆ°æœ€ä¸‹æ–¹ï¼Œé€‰æ‹©**DOWNLOADS**è¿™ä¸€æ ä¸‹çš„MySQL Community Server å°±è¿›å…¥åˆ°ä¸‹è½½é¡µé¢ é€‰æ‹©ç®­å¤´æ‰€æŒ‡çš„ä¸€è§ˆä¸‹è½½çš„æ˜¯ZIPæ–‡ä»¶ï¼Œé€‰æ‹©MySQL logoä¸‹çš„Go to Download Pageä¸‹è½½çš„æ˜¯exeçš„å®‰è£…åŒ…ï¼Œç‚¹å‡»åä¼šè·³è½¬åˆ°Oracleè´¦å·ç™»å½•/æ³¨å†Œé¡µé¢ï¼Œä¹Ÿå¯ä»¥ç‚¹å‡»No thanks,just start my downloadè·³è¿‡ç™»å½•ç›´æ¥ä¸‹è½½ã€‚ åœ¨å®˜ç½‘ä¸‹è½½MySQLçš„é€Ÿåº¦ä¸æ˜¯å¾ˆç†æƒ³ï¼Œå»ºè®®ä½¿ç”¨å›½å†…é•œåƒã€‚ ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:1:1","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ MySQL-8.0ç‰ˆæœ¬ç›®å½•é“¾æ¥ï¼šhttps://mirrors.tuna.tsinghua.edu.cn/mysql/downloads/MySQL-8.0/ å¯ä»¥ç›´æ¥ç‚¹å‡»ä¸Šé¢çš„é“¾æ¥è¿›è¡Œä¸‹è½½ï¼Œä¹Ÿå¯ä»¥ä¸€æ­¥ä¸€æ­¥æ¥ è¿›å…¥æ¸…åå¤§å­¦å¼€æºé•œåƒç«™é¦–é¡µhttps://mirrors.tuna.tsinghua.edu.cn/ï¼Œåœ¨é•œåƒåˆ—è¡¨ä¸­æ‰¾åˆ°mysqlè¿™ä¸€é¡¹ï¼Œç‚¹å‡»è¿›å…¥ ç„¶åé€‰æ‹©downloadsè¿™ä¸€çº§ è¿›å…¥ç›®å½•åé€‰æ‹©MySQL-8.0ï¼Œæœ‰æ›´æ–°çš„ä¹Ÿå¯ä»¥é€‰æ›´æ–°çš„ï¼Œå®‰è£…æ–¹å¼åº”è¯¥ç›¸åŒ è¿›å…¥åï¼Œ8.0ç‰ˆæœ¬çš„é¡¹ç›®è¶…çº§å¤šï¼ŒCtrl+Fæœç´¢winx64.zipå°±èƒ½å¿«é€Ÿå®šä½ å¦‚æœæœç´¢winx64.msiä¸‹è½½çš„å°±æ˜¯exeå®‰è£…åŒ… ä¸‹è½½çš„æ–‡ä»¶è§£å‹åæœ‰5ä¸ªæ–‡ä»¶å¤¹å’Œï¼’ä¸ªæ–‡ä»¶ ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:1:2","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"é…ç½®MySQL åœ¨é…ç½®ä¹‹å‰ï¼Œé¦–å…ˆè¦å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°è¦å­˜æ”¾è¿™ä¸ªç¨‹åºçš„ä½ç½®ï¼Œè¿™ä¸€æ­¥å¾ˆé‡è¦ï¼ ç„¶åå¯ä»¥ç»™è¿™ä¸ªæ–‡ä»¶å¤¹é‡å‘½åä¸€ä¸‹ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå«mysqlï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸é‡å‘½åï¼ å°†binç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:2:0","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"åˆ›å»ºé…ç½®æ–‡ä»¶ åœ¨è§£å‹åçš„ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶my.ini ç„¶åå°†ä¸€ä¸‹ä¿¡æ¯å†™å…¥é…ç½®æ–‡ä»¶ä¸­ [mysql] # è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›† default-character-set=utf8 [mysqld] #è®¾ç½®3306ç«¯å£ port = 3306 # è®¾ç½®mysqlçš„å®‰è£…ç›®å½• basedir=Z:/soft/mysql # è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½• datadir=Z:/soft/mysql/data # å…è®¸æœ€å¤§è¿æ¥æ•° max_connections=200 # æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸ºUTF8 character-set-server=utf8 # åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“ default-storage-engine=INNODB # å…è®¸è¿æ¥å¤±è´¥çš„æ¬¡æ•° max_connect_errors=10 # é»˜è®¤ä½¿ç”¨â€œmysql_native_passwordâ€æ’ä»¶è®¤è¯ default_authentication_plugin=mysql_native_password ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:2:1","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"å®‰è£…MySQLæœåŠ¡ ä»¥ç®¡ç†å‘˜çš„èº«ä»½è¿è¡Œcmdï¼Œè¿›å…¥åˆ°MySQLç¨‹åºæ–‡ä»¶å¤¹ä¸­çš„binæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ mysqld install å¦‚æœè¿™æ—¶å€™å¼¹å‡º é‚£ä¹ˆéœ€è¦åˆ°å¾®è½¯å®˜ç½‘ä¸‹è½½ Microsoft Visual C++ Redistributable for Visual Studio 2015, 2017 and 2019ï¼Œé“¾æ¥ï¼šhttps://support.microsoft.com/en-gb/help/2977003/the-latest-supported-visual-c-downloads ç”µè„‘æ˜¯32ä½å°±é€‰x86ï¼Œæ˜¯64ä½å°±é€‰x64ï¼Œç„¶åç‚¹å‡»Nextå¼€å§‹ä¸‹è½½ï¼Œä¸‹è½½å®ŒæˆååŒå‡»å®‰è£…å³å¯ã€‚ å› ä¸ºä¸åŒçš„ç‰ˆæœ¬çš„ä¾èµ–ç¨‹åºçš„ç‰ˆæœ¬å¯èƒ½ä¸åŒï¼Œæ‰€ä»¥æ¨èç›´æ¥ä¸‹è½½è¿™ä¸ªç‰ˆæœ¬ï¼Œå¦‚æœè¿˜æ˜¯æ— æ³•è§£å†³ï¼Œå¯ä»¥å°è¯•å®‰è£…2013ç‰ˆæœ¬ã€‚ å®‰è£…æˆåŠŸåä¼šæç¤ºService successfully installed æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ mysqld --initialize --console æ‰§è¡Œè¿™ä¸ªå‘½ä»¤æ˜¯ä½¿MySQLç¨‹åºæŒ‰ç…§é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œå‘½ä»¤æ‰§è¡Œå®Œæˆä¹‹åä¼šåœ¨ç¨‹åºæ–‡ä»¶å¤¹ä¸­ç”Ÿæˆä¸€ä¸ªdataæ–‡ä»¶å¤¹ï¼Œdataæ–‡ä»¶å¤¹çš„ä½ç½®å°±åœ¨é…ç½®æ–‡ä»¶ä¸­çš„datadiråé¢çš„è·¯å¾„ä¸‹ã€‚å¹¶ä¸”ä¼šéšæœºç”Ÿæˆç™»å½•å¯†ç ï¼ï¼Œè¿™ä¸ªå¯†ç åœ¨æœ€åä¸€è¡Œå†’å·åé¢ï¼Œä¸åŒ…å«ç©ºæ ¼ è¿™é‡Œçš„éšæœºå¯†ç å°±æ˜¯aFV4%y2.3B+5 å¦‚æœçª—å£ä¸å°å¿ƒè¢«å…³é—­ï¼Œå¯†ç ä¸¢å¤±äº†ï¼Œå¯ä»¥å°†dataæ–‡ä»¶å¤¹åˆ é™¤ï¼Œç„¶åé‡æ–°ä½¿ç”¨mysqld --initialize --consoleå‘½ä»¤æ¥ç”Ÿæˆã€‚ è¿™äº›éƒ½åšå¥½åï¼Œå°±å¯ä»¥å¯åŠ¨MySQLæœåŠ¡äº† net start MySQL ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:2:2","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"ä¿®æ”¹å¯†ç  MySQLæœåŠ¡å¯åŠ¨åï¼Œå°±å¯ä»¥ä½¿ç”¨MySQLæœåŠ¡äº† ä½¿ç”¨å‘½ä»¤ç™»å½•MySQLç³»ç»Ÿ mysql -u root -p ç„¶åä¼šæç¤ºEnter passwordè¾“å…¥å¯†ç ï¼Œå°†åˆšæ‰ä¸´æ—¶ç”Ÿæˆçš„å¯†ç è¾“å…¥è¿›å» ç„¶åè¾“å…¥SQLå‘½ä»¤ ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'ä½ çš„å¯†ç '; ç»“å°¾ä¸€å®šè¦æ˜¯åˆ†å·ï¼Œå¦‚æœæ²¡æœ‰è¾“å…¥åˆ†å·å°±å›è½¦ä¹Ÿæ²¡å…³ç³»ï¼Œä¸‹ä¸€è¡Œè¾“å…¥ä¸€ä¸ªåˆ†å·å°±å¥½äº† æˆ‘è¿™é‡Œå°±æ˜¯å°†å¯†ç è®¾ç½®ä¸ºç©ºï¼Œå°±æ˜¯ä¸è®¾ç½®å¯†ç ï¼Œç›´æ¥ç™»å½•ï¼Œç™»å½•æ—¶å°±ä¸ç”¨è¾“å…¥-pï¼Œæœ‰å¯†ç å°±éœ€è¦è¾“å…¥-p ç„¶åè¾“å…¥exitå‘½ä»¤å°±å¯ä»¥é€€å‡ºMySQLç³»ç»Ÿã€‚ ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:3:0","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"å¯è§†åŒ–å·¥å…· ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:4:0","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"Navicat Premium Navicat Premium åŠŸèƒ½ååˆ†å¼ºå¤§ï¼Œæ”¯æŒçš„æ•°æ®åº“ç±»å‹éå¸¸å¤šï¼Œä¸è¿‡æ˜¯ä¸€æ¬¾æ”¶è´¹è½¯ä»¶ï¼Œå¯ä»¥è¯•ç”¨14å¤©ï¼Œæ—¢ç„¶å¯ä»¥è¯•ç”¨ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ— é™è¯•ç”¨ã€‚ ä¸‹è½½é“¾æ¥ï¼šhttps://www.navicat.com.cn/products#navicat ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:4:1","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"HeidiSQL HeidiSQLæ˜¯ä¸€æ¬¾æ¯”è¾ƒå¥½ç”¨çš„æ•°æ®åº“å¯è§†åŒ–è½¯ä»¶ï¼Œæ˜“ç”¨ï¼Œè€Œä¸”å…è´¹ï¼Œå¯ä»¥åœ¨å¾®è½¯åº”ç”¨å•†åº—ä¸‹è½½ï¼Œä¸‹è½½é€Ÿåº¦å¾ˆå¿«ï¼Œå¯¹ï¼å°±æ˜¯Windowsç³»ç»Ÿè‡ªå¸¦çš„åº”ç”¨å•†åº—ï¼ä¹Ÿå¯ä»¥åˆ°å®˜ç½‘ä¸‹è½½ã€‚ ä¸‹è½½åœ°å€ï¼šhttps://www.heidisql.com/download.php ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:4:2","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"Jet Brainså…¨å®¶æ¡¶ åªè¦æ˜¯Jet Brainsçš„IDEé‚£ä¹ˆå°±å¯ä»¥è¿æ¥MySQLï¼Œè€Œä¸”ä¸»æµçš„æ•°æ®åº“åŸºæœ¬éƒ½æ”¯æŒï¼Œä½¿ç”¨èµ·æ¥ç¡®å®å¾ˆæ–¹ä¾¿ï¼Œåœ¨å†™ç¨‹åºçš„æ—¶å€™å°±ä¸ç”¨ä¸ºäº†æŸ¥çœ‹æ•°æ®åº“å•ç‹¬å¼€ä¸€ä¸ªå¯è§†åŒ–è½¯ä»¶äº†ã€‚ é¦–æ¬¡è¿æ¥éœ€è¦ä¸‹è½½é©±åŠ¨ï¼Œåœ¨è¿æ¥é…ç½®é¡µé¢çš„å·¦ä¸‹è§’Download missing driver files å¦‚æœè¿æ¥å¤±è´¥å¹¶æç¤ºï¼šServer returns invalid timezone. Go to 'Advanced' tab and set 'serverTimezone' property manually. è¿™æ˜¯æ—¶åŒºé”™è¯¯ï¼ŒMySQLé»˜è®¤çš„æ—¶åŒºæ˜¯UTCæ—¶åŒºï¼Œæ¯”åŒ—äº¬æ—¶é—´æ™š8ä¸ªå°æ—¶ã€‚ æ‰€ä»¥è¦ä¿®æ”¹mysqlçš„æ—¶é•¿ åœ¨mysqlçš„å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œè¾“å…¥ï¼š set global time_zone='+8:00'; å†æ¬¡è¿æ¥åº”è¯¥å°±æˆåŠŸäº†ã€‚ ","date":"2020-03-14","objectID":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/:4:3","tags":["MySQL","install","navicat"],"title":"MySQL-8.0.19å®‰è£…é…ç½®","uri":"/posts/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"é‡‡ç”¨è§£å‹å‹ç¼©æ–‡ä»¶çš„æ–¹å¼å®‰è£…Windowsç‰ˆæœ¬çš„MongoDBï¼ åœ¨MongoDBçš„å®˜ç½‘æœ‰ä¸¤ç§å®‰è£…MongoDBçš„å®‰è£…åŒ…å¯ä¾›ä¸‹è½½ï¼Œä¸€ç§æ˜¯MSIæ–‡ä»¶ï¼Œä¸€ç§æ˜¯ZIPï¼ŒMISæ–‡ä»¶ç®€å•è¯´å°±æ˜¯Windowsçš„å®‰è£…åŒ…æ–‡ä»¶ã€‚å¦‚æœä½¿ç”¨MISæ–‡ä»¶å®‰è£…ï¼Œå°±æŒ‰æ­¥éª¤åœ¨å›¾å½¢ç•Œé¢ä¸­å¾€ä¸‹é…ç½®å³å¯ï¼Œå®‰è£…æ—¶é—´æ¯”è¾ƒé•¿ï¼Œè€Œä¸”ä¹Ÿéœ€è¦è¿›è¡Œä¸€äº›æ–‡ä»¶çš„é…ç½®ï¼Œæ˜¾å¾—ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼›å¦‚æœä½¿ç”¨ZIPæ ¼å¼æ–‡ä»¶å®‰è£…ï¼Œé‚£ä¹ˆåªéœ€è¦å°†å®‰è£…åŒ…ä¸‹è½½åè§£å‹è‡³æŒ‡å®šçš„ç›®å½•ï¼Œç„¶åè¿›è¡Œæ–‡ä»¶é…ç½®å³å¯ï¼Œè¿™å°±çœæ‰äº†MSIæ–‡ä»¶å®‰è£…çš„é‡Šæ”¾æ–‡ä»¶çš„æ—¶é—´ï¼Œè€Œä¸”ç›¸å¯¹è€Œè¨€æ›´åŠ çµæ´»ä¸€äº›ã€‚ ","date":"2020-03-14","objectID":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/:0:0","tags":["MongoDB","Robo 3T","install"],"title":"MongoDBçš„å®‰è£…ä»¥åŠé…ç½®","uri":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"ä¸‹è½½å®‰è£…åŒ… è¿›å…¥MongoDBå®˜ç½‘ ç¤¾åŒºç‰ˆä¸‹è½½åœ°å€é“¾æ¥ï¼šhttps://www.mongodb.com/download-center/community ","date":"2020-03-14","objectID":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/:1:0","tags":["MongoDB","Robo 3T","install"],"title":"MongoDBçš„å®‰è£…ä»¥åŠé…ç½®","uri":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"ç‰ˆæœ¬é€‰æ‹© Version(ç‰ˆæœ¬)ï¼šcurrent release(å½“å‰ç‰ˆæœ¬)ï¼Œdevelopment release(å¼€å‘ç‰ˆæœ¬)ï¼Œprevious release(å…ˆå‰ç‰ˆæœ¬) ç‰ˆæœ¬é€‰æ‹©å½“å‰ç‰ˆæœ¬ï¼Œæœ‰ç‰¹æ®Šéœ€è¦å¯ä»¥é€‰æ‹©å…ˆå‰ç‰ˆæœ¬ï¼Œä¸å»ºè®®é€‰å¼€å‘ç‰ˆæœ¬ ","date":"2020-03-14","objectID":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/:1:1","tags":["MongoDB","Robo 3T","install"],"title":"MongoDBçš„å®‰è£…ä»¥åŠé…ç½®","uri":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"ç³»ç»Ÿé€‰æ‹© ç³»ç»Ÿæœ‰å¾ˆå¤šç§ï¼Œä½†åªæœ‰ä¸‰ç±»ï¼ŒWindowsã€Mac OSã€Linuxï¼Œè¿™é‡Œé€‰æ‹©Windows ","date":"2020-03-14","objectID":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/:1:2","tags":["MongoDB","Robo 3T","install"],"title":"MongoDBçš„å®‰è£…ä»¥åŠé…ç½®","uri":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"å®‰è£…åŒ…é€‰æ‹© Packageï¼šMSIã€ZIP å®‰è£…åŒ…é€‰æ‹©ZIP ä¸Šé¢ä¸‰ä¸ªé€‰é¡¹é€‰æ‹©å¥½ä¹‹åï¼Œç‚¹å‡»Downloadå°±å¯ä»¥ä¸‹è½½äº†ï¼Œè‡³äºè·³è½¬å‡ºæ¥çš„ç½‘é¡µå¯ä»¥ä¸å¿…ç†ä¼šã€‚ä¸‹è½½é€Ÿåº¦è¿˜æ˜¯æ¯”è¾ƒå¿«çš„ã€‚ ","date":"2020-03-14","objectID":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/:1:3","tags":["MongoDB","Robo 3T","install"],"title":"MongoDBçš„å®‰è£…ä»¥åŠé…ç½®","uri":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"å®‰è£…é…ç½® ","date":"2020-03-14","objectID":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/:2:0","tags":["MongoDB","Robo 3T","install"],"title":"MongoDBçš„å®‰è£…ä»¥åŠé…ç½®","uri":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"è§£å‹æ–‡ä»¶ å°†ä¸‹è½½åçš„æ–‡ä»¶è§£å‡ºæ¥ï¼Œæ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œä¸€å…±æœ‰6ä¸ªæ–‡ä»¶ è¿™ä¸ªæ–‡ä»¶å¤¹åç§°æœ€å¥½ä¿®æ”¹ä¸ºmongondbï¼Œç„¶åæ”¾åˆ°æƒ³å­˜æ”¾çš„ä½ç½®ï¼Œå½“ç„¶ä»–ä»¬æ˜¯è¦æ”¾åœ¨ä¸€èµ·çš„ã€‚ ","date":"2020-03-14","objectID":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/:2:1","tags":["MongoDB","Robo 3T","install"],"title":"MongoDBçš„å®‰è£…ä»¥åŠé…ç½®","uri":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"é…ç½® åˆ›å»ºä¸€ä¸ªdataæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨dataæ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºä¸€ä¸ªdbæ–‡ä»¶å¤¹ï¼Œè¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªlogæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨logæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªmongo.logçš„æ–‡ä»¶ã€‚dataæ–‡ä»¶å¤¹æ˜¯æ•°æ®åº“å­˜æ”¾æ•°æ®çš„æ–‡ä»¶å¤¹ï¼Œlogæ–‡ä»¶å¤¹æ˜¯æ•°æ®åº“å­˜æ”¾æ—¥å¿—çš„æ–‡ä»¶å¤¹ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹æ”¾å“ªçœ‹ä¸ªäººä¹ æƒ¯ï¼Œä»–ä»¬çš„ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„ å°†binæ–‡ä»¶å¤¹æ‰€åœ¨è·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ åœ¨ç»ˆç«¯ä¸­è¾“å…¥ mongod --dbpath C:\\mongodb\\data\\db ç„¶ååœ¨å‘½ä»¤æç¤ºç¬¦çª—å£ä¼šå‡ºç°å¾ˆå¤šæ—¥å¿—ä¿¡æ¯ æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥æœ¬åœ°ç«¯å£ localhost:27017 ç„¶åæµè§ˆå™¨è·³è½¬é¡µé¢ï¼Œå°±ä¼šå‡ºç°ä¸‹é¢çš„æç¤º It looks like you trying to access MongoDB over HTTP on the native driver port ","date":"2020-03-14","objectID":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/:2:2","tags":["MongoDB","Robo 3T","install"],"title":"MongoDBçš„å®‰è£…ä»¥åŠé…ç½®","uri":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"æ³¨å†ŒæœåŠ¡ å› ä¸ºæ¯æ¬¡å¯åŠ¨éƒ½æŒ‡å®šdbçš„è·¯å¾„æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å°†é…ç½®å†™åœ¨æ–‡ä»¶ä¸­ åœ¨binæ–‡ä»¶å¤¹çš„åŒçº§ç›®å½•ä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶mongo.configï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹ä¿¡æ¯ ä¸éœ€è¦æ›´è¯¦ç»†çš„é…ç½®åªå†™å…¥è¿™ä¸¤é¡¹å³å¯ï¼Œå¦‚æœæƒ³è¦æ›´è¯¦ç»†çš„é…ç½®MongoDBå¯ä»¥å‚ç…§å®˜æ–¹æ–‡æ¡£ systemLog: destination: file path: \"C:\\mongodb\\log\\mongo.log\" logAppend: true storage: journal: enabled: true dbPath: \"C:\\mongodb\\data\\db\" processManagement: fork: true net: bindIp: 127.0.0.1 port: 27017 setParameter: enableLocalhostAuthBypass: false å¦‚æœè¦è®©åˆ«äººåœ¨å±€åŸŸç½‘å†…èƒ½è®¿é—®åˆ°æ•°æ®åº“éœ€è¦å°†bindIpè®¾ä¸º0.0.0.0æˆ–è€…æ˜¯å…è®¸çš„ip é…ç½®æ–‡ä»¶ä¿®æ”¹å®Œæˆåï¼Œä»¥ç®¡ç†å‘˜çš„èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦ åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­è¾“å…¥æ³¨å†ŒæœåŠ¡çš„å‘½ä»¤ mongod --config C:\\mongodb\\mongo.config --install --serviceName \"MongoDB\" ç„¶åè¾“å…¥å¯åŠ¨æœåŠ¡çš„å‘½ä»¤ net start MongoDB è¿™æ ·MongoDBæœ¬åœ°æœåŠ¡å°±å¯åŠ¨äº† åœ¨æµè§ˆå™¨è¾“å…¥localhost:27017ä¸Šä¸€ä¸ªæ­¥éª¤ä¸­çš„æç¤ºé¡µé¢å°±è¯´æ˜æ²¡æœ‰é—®é¢˜äº†ã€‚ ","date":"2020-03-14","objectID":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/:3:0","tags":["MongoDB","Robo 3T","install"],"title":"MongoDBçš„å®‰è£…ä»¥åŠé…ç½®","uri":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"ç§»é™¤æœåŠ¡ å¦‚æœæ³¨å†ŒæœåŠ¡ä¹‹åå¯åŠ¨ä¸äº†MongoDBï¼Œä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå…ˆå°†MongoDBçš„æœåŠ¡ç§»é™¤ï¼Œç„¶åå†é‡æ–°æ³¨å†ŒæœåŠ¡ï¼Œç§»é™¤æœåŠ¡éœ€è¦è¾“å…¥ä»¥ä¸‹å‘½ä»¤ mongod --dbpath C:\\mongodb\\data\\db --logpath c:\\mongodb\\log\\mongo.log --logappend --serviceNameDisplayName \"MongoDB\" --remove ç§»é™¤ä¹‹åå†ä½¿ç”¨ä¸Šé¢çš„æ³¨å†Œå‘½ä»¤æ³¨å†Œå°±åŸºæœ¬æ²¡é—®é¢˜äº†ã€‚ ","date":"2020-03-14","objectID":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/:3:1","tags":["MongoDB","Robo 3T","install"],"title":"MongoDBçš„å®‰è£…ä»¥åŠé…ç½®","uri":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"æ•°æ®åº“å¯è§†åŒ–è½¯ä»¶ å¯ä»¥ä½¿ç”¨çš„æ•°æ®åº“å¯è§†åŒ–è½¯ä»¶æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä»‹ç»Robo 3Tï¼Œç”¨å°±å®Œäº‹äº†ã€‚ Robo 3Tå®˜æ–¹ç½‘ç«™ï¼šhttps://robomongo.org/ é€‰æ‹©Download Studio 3T Onlyï¼Œç„¶ååœ¨è·³è½¬å‡ºæ¥çš„ä¸‹è½½é¡µé¢ç‚¹å‡»Download Robo 3T å®‰è£…åŒ…è¿˜æ˜¯é€‰æ‹©zipï¼Œè§£å‹å‡ºæ¥å°±èƒ½ç”¨ï¼ ä¸‹è½½å®Œæˆåï¼Œè§£å‹æ–‡ä»¶ï¼Œæ”¾åˆ°æƒ³å­˜æ”¾çš„ä½ç½®ï¼Œç„¶ååŒå‡»æ–‡ä»¶å¤¹ä¸­çš„robo3t.exeæ–‡ä»¶ï¼Œç¨‹åºå°±å¯åŠ¨äº†ï¼Œå¦‚æœè§‰å¾—æ¯æ¬¡éƒ½è¦æ‰“å¼€æ–‡ä»¶å¤¹æ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥ç»™å®ƒåˆ›å»ºä¸€ä¸ªæ¡Œé¢å¿«æ·æ–¹å¼ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªè¦MongoDBæœåŠ¡å¯åŠ¨äº†ï¼Œé‚£ä¹ˆæ‰“å¼€Robo 3Tå°±æ˜¯è¿æ¥ç•Œé¢ã€‚å¦‚æœæ²¡æœ‰æœ¬åœ°ç«¯å£ï¼Œå°±ç‚¹å‡»Createè¿›è¡Œåˆ›å»º å¡«å¥½è¿æ¥çš„åç§°ï¼ˆæ²¡æœ‰å›ºå®šè¦æ±‚ï¼‰ï¼Œä»¥åŠåœ°å€å°±å¥½äº†ã€‚ ","date":"2020-03-14","objectID":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/:4:0","tags":["MongoDB","Robo 3T","install"],"title":"MongoDBçš„å®‰è£…ä»¥åŠé…ç½®","uri":"/posts/mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"Scrapyçš„ä¸­æ–‡æ–‡æ¡£ä¼¼ä¹ä¹Ÿå’Œè®¸å¤šæ–‡æ¡£ä¸€æ ·ï¼Œåœ¨ä¸­æ–‡ç¿»è¯‘ä¸Šã€å†…å®¹ä¸Šä»¥åŠç‰ˆæœ¬ä¸Šå­˜åœ¨å¾ˆå¤šçš„é—®é¢˜ ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:0:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"å‘½ä»¤ ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:1:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"åˆ›å»ºé¡¹ç›® è¿›å…¥åˆ°é¡¹ç›®å­˜æ”¾çš„ç›®å½•ä½¿ç”¨å‘½ä»¤æç¤ºç¬¦åˆ›å»º scrapy startproject é¡¹ç›®åç§° ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:1:1","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"ä½¿ç”¨å‘½ä»¤åˆ›å»ºä¸€ä¸ªçˆ¬è™« è¿›å…¥åˆ°è¿™ä¸ªé¡¹ç›®çš„ç›®å½•ä¸­ï¼Œä½¿ç”¨å‘½ä»¤æç¤ºç¬¦åˆ›å»ºçˆ¬è™« scapy genspider çˆ¬è™«åå­— åŸŸå çˆ¬è™«çš„åå­—ä¸èƒ½å’Œé¡¹ç›®çš„åå­—ç›¸åŒ ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:1:2","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"æŸ¥çœ‹æ¨¡æ¿ å¦‚æœä¸æŒ‡å®šæ¨¡æ¿å°±ä¼šæ ¹æ®basicæ¨¡æ¿æ¥ç”Ÿæˆçˆ¬è™« scrapy genspider --list ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:1:3","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"æŒ‡å®šæ¨¡æ¿ scrapy genspider -t crawl çˆ¬è™«åå­— åŸŸå ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:1:4","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"ä¸‹è½½å›¾ç‰‡ scrapyä¸­æä¾›äº†è‡ªåŠ¨ä¸‹è½½å›¾ç‰‡çš„æœºåˆ¶ï¼Œåªéœ€è¦åœ¨settingsä¸­é…ç½®å¥½å°±å¯ä»¥äº†ï¼Œåœ¨é¡¹ç›®æ–‡ä»¶çš„settingä¸‹çš„ITEM_PIPELINESä¸­æ·»åŠ ä¸€ä¸ªé”® ITEM_PIPELINES = { 'BingPicture.pipelines.BingpicturePipeline': 300, 'scrapy.pipelines.images.ImagesPipeline': 1, } IMAGES_URLS_FIELD = \"å›¾ç‰‡urlå­—æ®µ\" IMAGES_STORE = \"å›¾ç‰‡å­˜å‚¨è·¯å¾„\" æ³¨æ„ï¼š éœ€è¦å®‰è£…pillowè¿™ä¸ªåº“ ä¸‹è½½å›¾ç‰‡ä¼ é€’çš„urléœ€è¦æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ˆitem[\"img_url\"] = [url]ï¼‰ï¼Œè¿™ä¸ªåˆ—è¡¨ä¸­å¯ä»¥å­˜æ”¾å¾ˆå¤šä¸ªurls ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:2:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"é™å®šä¸‹è½½å›¾ç‰‡å¤§å° å¦‚æœæƒ³è¿‡æ»¤æ‰å°å›¾ç‰‡éœ€è¦åœ¨settingsä¸­é…ç½® IMAGES_MIN_HEIGHT = é«˜åº¦ IMAGES_MIN_WIDTH = å®½åº¦ ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:2:1","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"è·å–å›¾ç‰‡è·¯å¾„ æƒ³è¦çŸ¥é“å›¾ç‰‡çš„è·¯å¾„å’Œåç§°éœ€è¦åœ¨Pipelinesä¸­é‡å†™ImagesPipelineä¸­çš„item_completedæ–¹æ³• è‡ªå®šä¹‰çš„è¿™ä¸ªPipelineç±»éœ€è¦åœ¨settingsä¸­æ·»åŠ ï¼Œè¿™æ—¶å€™å°±ä¸éœ€è¦å†™åŸç”Ÿçš„ImagesPipelineäº†ï¼Œå› ä¸ºè¿™ä¸ªPipelineåªé‡å†™äº†item_completedæ–¹æ³•ï¼Œå…¶ä»–çš„æ–¹æ³•ä¼šå»ä¸‹è½½å›¾ç‰‡ã€‚ class SpiderPipeline(ImagesPipeline): # é‡è½½item_completedæ–¹æ³• def item_completed(self, results, item, info): return item results:æ˜¯ä¸€ä¸ªlistæ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªtupleï¼Œtupleä¸­ç¬¬ä¸€ä¸ªå€¼æ˜¯trueï¼Œè¡¨ç¤ºæˆåŠŸï¼›ç¬¬äºŒä¸ªå€¼æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸ä¸­çš„pathæ˜¯æ–‡ä»¶ä¿å­˜è·¯å¾„ï¼Œå­—å…¸ä¸­çš„urlæ˜¯ä¸‹è½½çš„urlã€‚ è¿™æ—¶å€™å°±å¯ä»¥ç›´æ¥ä½¿ç”¨itemå°†å›¾ç‰‡çš„åœ°å€ä¿å­˜ä¸‹æ¥ï¼Œç„¶åéœ€è¦å°†itemè¿”å› ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:2:2","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"æ‹¼æ¥URL responseå¯¹è±¡æœ‰urljoinæ–¹æ³•ï¼Œå¯ä»¥å°†åŸŸåä¸è¶…é“¾æ¥è¿›è¡Œæ‹¼æ¥ url = response.urljoin(other_url) ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:3:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"ç¼–å†™çˆ¬è™«çš„æ³¨æ„äº‹é¡¹ å¯ä»¥åœ¨è¿™ä¸ªé¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªå¼€å§‹æ‰§è¡Œçš„ç¨‹åº from scrapy import cmdline cmdline.execute('scrapy crawl çˆ¬è™«åç§°'.split()) ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:4:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"æ–‡ä»¶å­˜å‚¨ æ–‡ä»¶å­˜å‚¨éœ€è¦åœ¨Pipelinesä¸­è¿›è¡Œï¼Œå¯ä»¥ç›´æ¥æ“ä½œæ¨¡æ¿ç”Ÿæˆçš„Pipelineï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰Piplineï¼Œå¦‚æœè‡ªå®šä¹‰éœ€è¦å°†è‡ªå®šä¹‰Pipelineçš„ä¼˜å…ˆçº§è®¾ç½®å¾—æ¯”æ¨¡æ¿é«˜ï¼Œä¹Ÿå°±settingsä¸­Pipelineå¯¹åº”çš„é”®å€¼æ›´å° scrapyçš„exportersä¸­æä¾›äº†å¾ˆå¤šç§æ–‡ä»¶å­˜å‚¨æœºåˆ¶ __all__ = ['BaseItemExporter', 'PprintItemExporter', 'PickleItemExporter', 'CsvItemExporter', 'XmlItemExporter', 'JsonLinesItemExporter', 'JsonItemExporter', 'MarshalItemExporter'] å¯ä»¥ç›´æ¥è°ƒç”¨è¿™äº›ç±»ç„¶åæ–¹ä¾¿çš„å†™å…¥æ–‡ä»¶ï¼Œä¸‹é¢ä»¥JsonLinesItemExporterä¸ºä¾‹ class JsonExporterPipeline(object): def __init__(self): self.file = open(\"images_message.json\", \"wb\") # å°†ensure_asciiè®¾ç½®ä¸ºfalseï¼Œå¦åˆ™ä¼šå­˜å‚¨ä¸ºUnicodeç¼–ç  self.exporter = JsonLinesItemExporter(self.file, encoding=\"utf8\", ensure_ascii=False) def process_item(self, item, spider): self.exporter.export_item(item) return item def close_spider(self, spider): self.file.close() Piplineç±»ä¸­æœ‰ä¸¤ä¸ªä¿¡å·é‡æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯open_spideræ–¹æ³•ï¼Œopen_spideræ–¹æ³•çˆ¬è™«å¼€å§‹ä¼šæ‰§è¡Œï¼›å¦ä¸€ä¸ªæ—¶close_spideræ–¹æ³•ï¼Œclose_spideræ–¹æ³•çˆ¬è™«ç»“æŸæ—¶ä¼šæ‰§è¡Œï¼Œä»–ä»¬éƒ½éœ€è¦ä¼ é€’ä¸€ä¸ªspiderå‚æ•°ï¼Œä»–ä»¬çš„æ‰§è¡Œæ˜¯é€šè¿‡scrapyä¸­çš„ä¿¡å·é‡æ¥æ§åˆ¶çš„ ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:5:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"åœ¨Pipelineä¸­ä½¿ç”¨settingsä¸­çš„é…ç½® åœ¨Pipelineä¸­ä½¿ç”¨settingsä¸­çš„é…ç½®å¯ä»¥ä¸éœ€è¦å¯¼å…¥settingsä¸­çš„é…ç½®ï¼Œå®šä¹‰ä¸€ä¸ªfrom_settings(cls, settings)ç±»æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå°†settingsä¸­çš„æ‰€æœ‰é…ç½®ä»¥å­—å…¸çš„å½¢å¼ä¼ é€’è¿‡æ¥ï¼Œåªéœ€è¦æŒ‰ç…§settingsä¸­çš„é…ç½®å–é”® @classmethod def from_settings(cls, settings): host = settings[\"MONGO_HOST\"] ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:5:1","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"scrapyå¼‚æ­¥å†™å…¥MySQL åœ¨scrapyä¸­å¼‚æ­¥å†™å…¥MySQL from twisted.enterprise import adbapi class MySQLtwistedPipeline(object): def __init__(self, dbpool): self.dbpool = dbpool @classmethod def from_settings(cls, settings): dbparms = dict( host = settings[\"MYSQL_HOST\"], port = settings[\"MYSQL_PORT\"], user = settings[\"MYSQL_USER\"], password = settings[\"MYSQL_PASSWORD\"], database = settings[\"MYSQL_DATABASE\"], charset = \"utf8\", cursorclass = pymysql.cursors.DictCursor, use_unicode = True ) dbpool = adbapi.ConnectionPool(\"pymysql\", **dbparms) # ä½¿ç”¨è¿™ä¸ªç±»æ¥å®ä¾‹åŒ–è¿æ¥æ±  return cls(dbpool) def process_item(self, item, spider): # å»ºç«‹è¿æ¥æ± ï¼Œå°†æ’å…¥å˜æˆå¼‚æ­¥çš„ qurey = self.dbpool.runInteraction(self.insert, item) qurey.addErrback(self.handler_error, item, spider) def handler_error(self, failure, item, spider): # å¤„ç†å¼‚æ­¥æ’å…¥çš„å¼‚å¸¸ print(failure) def insert(self, cursor, item): # è¿æ¥æ± ä¼šè‡ªåŠ¨å¸®åŠ©æäº¤ insert_sql = \"\"\"insert into bing_picture(img_url, img_id, img_file_path) values (%s, %s, %s)\"\"\" cursor.execute(insert_sql, (item[\"img_url\"][0], item[\"img_id\"], item[\"img_file_path\"])) from_settingsæ–¹æ³•ä¸­å®šä¹‰çš„æ˜¯é“¾æ¥ä¿¡æ¯ï¼Œåœ¨process_itemæ–¹æ³•ä¸­å®šä¹‰çš„æ˜¯å½“itemä¼ é€’è¿‡æ¥åè¿è¡Œè¿™ä¸ªè¿æ¥æ± ï¼Œç„¶åè¿™ä¸ªè¿æ¥æ± è°ƒç”¨insertæ–¹æ³•æ¥æ’å…¥æ•°æ®ã€‚ å› ä¸ºæ•´ä¸ªæ’å…¥è¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥éš¾å…ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œè¿è¡Œè¿æ¥æ± æ‰§è¡Œæ–¹æ³•åä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨ä¸€ä¸ªå˜é‡æ¥ä¿å­˜è¿™ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªé”™è¯¯å›è°ƒæ–¹æ³•addErrbackï¼Œè¿™ä¸ªæ–¹æ³•ä¸­çš„itemå‚æ•°å’Œspiderå‚æ•°å¯ä»¥ä¸ç”¨ä¼ é€’ï¼ˆä¸ä¼ é€’é‚£ä¹ˆå›è°ƒæ–¹æ³•ä¸­çš„itemå’Œspiderå°±ä¸ç”¨å†™ï¼‰ï¼Œæ•´ä¸ªé”™è¯¯å¤„ç†é€»è¾‘æ”¾åˆ°å›è°ƒæ–¹æ³•ä¸­æ¥å¤„ç† æ³¨æ„ï¼š éœ€è¦å•ç‹¬å¯¼å…¥cursorså¯¹è±¡ï¼Œå³import pymysql.cursors ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:6:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"item loaders scrapyä¸­çš„itemä½¿ç”¨èµ·æ¥å’Œç®€å•ï¼Œä»–å°±æ˜¯ä¸€ä¸ªæ•°æ®å®¹å™¨ï¼Œå¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œæä¾›äº†ç±»ä¼¼å­—å…¸çš„APIï¼Œæ“ä½œèµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯åœ¨parseræ–¹æ³•ä¸­è§£æçš„æ•°æ®æƒ³è¦å­˜å‚¨åˆ°itemä¸­è¿˜éœ€è¦èµ‹å€¼ï¼Œè¿™æ—¶å€™ä»£ç å†™èµ·æ¥å°±æ¯”è¾ƒæ··ä¹± Item Loadersä½¿ç”¨èµ·æ¥å°±å¾ˆæ–¹ä¾¿ï¼Œé›†è§£æèµ‹å€¼äºä¸€èº« from scrapy.loader import ItemLoader from myproject.items import ProductItem def parse(self, response): item_loader = ItemLoader(item=ProductItem(), response=response) item_loader.add_xpath('name', '//div[@class=\"product_name\"]') item_loader.add_xpath('title', '//div[@class=\"product_title\"]') item_loader.add_xpath('price', '//p[@id=\"price\"]') item_loader.add_css('stock', 'p#stock') item_loader.add_value('last_updated', 'today') return item_loader.load_item() add_valueè¿™ä¸ªæ–¹æ³•éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯å­—æ®µåï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯å­—æ®µçš„å€¼ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•èƒ½ç›´æ¥è®¾å®šå­—æ®µå€¼ã€‚add_csså’Œadd_xpathå°±æ˜¯æŒ‰ç…§è§„åˆ™è§£æresponseã€‚ æœ€åéœ€è¦è°ƒç”¨load_item()æ–¹æ³•æ‰ä¼šå»æ‰§è¡Œä¸Šé¢çš„è§£æè§„åˆ™ã€‚ è¿™æ ·å¾—åˆ°çš„æ¯ä¸ªå­—æ®µå€¼éƒ½æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œè€Œä¸”æœ‰ä¸€äº›å­—æ®µæˆ‘ä»¬å¯èƒ½å¹¶æ²¡æœ‰è§£æå®Œï¼Œè¿˜æƒ³åœ¨ä¸Šé¢åŠ ä¸€äº›å¤„ç†é€»è¾‘ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦åˆ°itemsä¸­å»è®¾ç½®Field()çš„input_processorå‚æ•°ï¼Œä½¿ç”¨MapComposeæ¥ä¼ é€’æ–¹æ³•ï¼Œå½“æ•°æ®ä¼ é€’åˆ°è¿™é‡Œçš„æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ–¹æ³•å¯¹valueè¿›è¡Œå¤„ç†ï¼Œå¯ä»¥ä¼ é€’ä»»æ„å¤šçš„æ–¹æ³•ï¼Œinput_processorå‚æ•°æ˜¯å¯¹valueè¿›è¡Œæ“ä½œï¼Œä½†æ˜¯ç°åœ¨è¿™valueè¿˜æ˜¯ä¸€ä¸ªlistï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¼å…¥TakeFirstï¼Œç„¶åä¼ é€’ç»™ç¬¬äºŒä¸ªå‚æ•°output_processorï¼Œè¿™æ—¶å€™å°±ä¼šå–ç¬¬ä¸€ä¸ªå€¼ã€‚ from scrapy.loader.processors import MapCompose, TakeFirst def add_name(value): return value + \"-product\" class ProductItem(scrapy.Item): name = scrapy.Field( input_processor = MapCompose(add_name, lambad x: x+\"-hello\"), output_processor = TakeFirst() ) title = scrapy.Field() price = scrapy.Field() stock = scrapy.Field() last_updated = scrapy.Field() valueå‚æ•°ä¸éœ€è¦æˆ‘ä»¬å»ä¼ é€’ï¼ŒMapComposeç”šè‡³å¯ä»¥ä¼ é€’lambdaè¡¨è¾¾å¼ï¼Œæ–¹æ³•ä¼ é€’å¤šä¸ªç¨‹åºä¼šæŒ‰ç…§é¡ºåºè‡ªåŠ¨å»æ‰§è¡Œè¿™äº›æ–¹æ³•ã€‚ ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:7:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"è‡ªå®šä¹‰itemloader å¦‚æœæˆ‘ä»¬çˆ¬å–çš„å­—æ®µå¾ˆå¤šï¼Œæœ‰ä¸Šç™¾ä¸ªï¼Œé‚£ä¹ˆåœ¨åŸæ¥çš„itemä¸­æˆ‘ä»¬å°±éœ€è¦ç»™æ¯ä¸ªå­—æ®µéƒ½ä¼ é€’output_processorå‚æ•°ï¼Œè¿™æ ·ç¨‹åºå°±ä¼šæ˜¾å¾—å¾ˆä¹±ã€‚ æˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªitemloaderç±»ï¼Œè®©è‡ªå®šä¹‰çš„itemloaderç»§æ‰¿è‡ªscrapyä¸­çš„ItemLoaderï¼ŒItemLoaderä¸­æœ‰ä¸€ä¸ªç±»å±æ€§default_output_processorï¼Œé‡å†™è¿™ä¸ªç±»å±æ€§ from scrapy.loader import ItemLoader from scrapy.loader.processors import MapCompose, TakeFirst def add_name(value): return value + \"-product\" class ProductItem(scrapy.Item): name = scrapy.Field( input_processor = MapCompose(add_name, lambad x: x+\"-hello\"), ) title = scrapy.Field() price = scrapy.Field() stock = scrapy.Field() last_updated = scrapy.Field() class ProductItemLoader(ItemLoader): default_output_processor = TakeFirst() ç„¶ååœ¨è§£ææ–¹æ³•ä¸­å®ä¾‹åŒ–item_loaderçš„æ—¶å€™å°±éœ€è¦ä½¿ç”¨è¿™é‡Œé‡å†™çš„è¿™ä¸ªProductItemLoaderã€‚ å®é™…ä¸Šåœ¨ItemLoaderæœ‰å››ä¸ªç±»å±æ€§ï¼Œåˆ†åˆ«æ˜¯ï¼š default_item_class = Item default_input_processor = Identity() default_output_processor = Identity() default_selector_class = Selector å› æ­¤æˆ‘ä»¬å¯ä»¥æ›´æ”¹å…¶ä¸­çš„å‚æ•°å¯ä»¥ä½¿è§£æå˜å¾—æ›´åŠ é«˜æ•ˆã€‚ å¦‚æœå‡ºç°åˆ—è¡¨ä¸­çš„å¤šä¸ªå†…å®¹éƒ½æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œè€Œä¸”æˆ‘ä»¬æƒ³å°†å®ƒä»¬è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªé€»è¾‘å…¶å®ä¸éœ€è¦é€šè¿‡å®šä¹‰æ–¹æ³•æ¥å¤„ç†valueï¼Œåªéœ€è¦åœ¨åœ°æ®µçš„å®šä¹‰ä¸­é‡æ–°ä¼ é€’output_processorå‚æ•°å°±å¯ä»¥äº† from scrapy.loader import ItemLoader from scrapy.loader.processors import MapCompose, TakeFirst, Join class ProductItem(scrapy.Item): title = scrapy.Field() tags = scrapy.Field( output_processor = Join(\",\") ) last_updated = scrapy.Field() class ProductItemLoader(ItemLoader): default_output_processor = TakeFirst() å¦‚æœæˆ‘ä»¬å·²ç»é‡å†™äº†ItemLoaderï¼Œä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„å­—æ®µä»»ç„¶æ˜¯åˆ—è¡¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦åœ¨å­—æ®µä¸­è¦†ç›–output_processor def return_value(value): return value class ProductItem(scrapy.Item): tags = scrapy.Field( output_processor = MapCompose(return_value) ) ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:7:1","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"å›è°ƒ åœ¨scrapyçš„çˆ¬è™«ä¸­ï¼Œå¦‚æœä¸å†™å›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆé€šè¿‡è¯·æ±‚è¿”å›çš„é¡µé¢é»˜è®¤æ˜¯è°ƒç”¨parseæ–¹æ³• ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:8:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"FormRequest å¦‚æœåœ¨çˆ¬è™«æœ€å¼€å§‹çš„æ—¶é€šè¿‡postç™»å½•åˆ°æŸä¸€ä¸ªé¡µé¢ï¼Œé‚£ä¹ˆå¯ä»¥é‡å†™start_requestsæ–¹æ³•ã€‚å¦‚æœéœ€è¦æäº¤è¡¨å•ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ä½¿ç”¨scrapy.Requestæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨scrapy.FormRequestï¼Œè¿™ä¸ªæ–¹æ³•ï¼Œç„¶åå¯ä»¥è®¾ç½®å›è°ƒå‡½æ•°ä¸ºä¸€ä¸ªéªŒè¯æ˜¯å¦ç™»å½•æˆåŠŸçš„æ–¹æ³•ã€‚ def start_requests(self): return [scrapy.FormRequest(\"http://www.example.com/login\", formdata={'user': 'john', 'pass': 'secret'}, headers=self.headers callback=self.logged_in)] def logged_in(self, response): pass é‚£ä¹ˆç™»å½•æˆåŠŸä¹‹åå‘¢ï¼Ÿå¦‚æœéªŒè¯äº†å·²ç»ç™»å½•æˆåŠŸï¼Œæƒ³è¦æŒ‰ç…§start_urlsä¸­çš„urlè¿›è¡Œçˆ¬å–ï¼Œé‚£ä¹ˆå¯ä»¥å°†åŸæ¥çš„start_requestsä¸­çš„é€»è¾‘æ”¾ç½®åœ¨logged_inä¸­ï¼ŒåŸæ¥çš„start_requestsé€»è¾‘å¦‚ä¸‹ def start_requests(self): for url in self.start_urls: yield self.make_requests_from_url(url) å°†è¿™é‡Œé¢çš„é€»è¾‘æ”¾å…¥åˆ°logged_inï¼Œé‚£ä¹ˆå°±å¯ä»¥å®ç°æ¥ä¸‹æ¥çš„çˆ¬å–ä»»åŠ¡ã€‚ ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:9:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"scrapy shell ä½¿ç”¨scrapy shell å‘½ä»¤å¯ä»¥è¿›å…¥scrapyè¿›å…¥scrapyäº¤äº’ç¯å¢ƒï¼Œå¯ä»¥åœ¨åé¢åŠ ä¸Šurlï¼Œä¹Ÿå¯ä»¥ä¸åŠ  scrapy shell [url] # æ·»åŠ User-agent scrapy shell -s USER_AGENT=\"u-a\" url è¿›å…¥scrapy shellåå¯ä»¥ä½¿ç”¨äº¤äº’å¼å‘½ä»¤ï¼Œå¯ä»¥åœ¨é‡Œé¢è°ƒè¯•çˆ¬è™« ä½¿ç”¨shelp()å‘½ä»¤å¯ä»¥æŸ¥çœ‹scrapyè‡ªå¸¦çš„ä¸€äº›å‘½ä»¤ [s] crawler \u003cscrapy.crawler.Crawler object at 0x000002392B95D588\u003e [s] item {} [s] settings \u003cscrapy.settings.Settings object at 0x000002392C3F4EC8\u003e [s] Useful shortcuts: [s] fetch(url[, redirect=True]) Fetch URL and update local objects (by default, redirects are followed) [s] fetch(req) Fetch a scrapy.Request and update local objects [s] shelp() Shell help (print this help) [s] view(response) View response in a browser æ³¨æ„ï¼šå¦‚æœæ˜¯åœ¨scrapyé¡¹ç›®ä¸­ä½¿ç”¨scrapy shellï¼Œé‚£ä¹ˆé¡¹ç›®é…ç½®å°†ä¼šæ˜¯å½“å‰scrapy sehllçš„é…ç½® å‡½æ•° åŠŸèƒ½ fetch() ä¼ å…¥ä¸€ä¸ªurlæˆ–è€…scrapy.Requestå¯¹è±¡ï¼Œé‚£ä¹ˆå°±èƒ½è¯·æ±‚è¯¥urlï¼Œè¯·æ±‚æˆåŠŸåä¼šå¯¹å½“å‰ä½œç”¨åŸŸå†…çš„requestå’Œresponseå¯¹è±¡é‡æ–°èµ‹å€¼ view ç”¨æµè§ˆå™¨æ‰“å¼€responseå¯¹è±¡å†…çš„ç½‘é¡µ settings ä¿å­˜æ‰€æœ‰è®¾ç½®ä¿¡æ¯çš„Settingså¯¹è±¡ åœ¨scrapy shellä¸­å¯ä»¥ç›´æ¥å¯¹Responseå¯¹è±¡ä½¿ç”¨xpathæˆ–è€…cssé€‰æ‹©å™¨ ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:10:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"CrawlSpider CrawlSpiderç»§æ‰¿è‡ªSpider è¦ä½¿ç”¨CrawlSpiderå°±éœ€è¦åœ¨ç”Ÿæˆçˆ¬è™«çš„æ—¶å€™æŒ‡å®šæ¨¡æ¿ã€‚ import scrapy from scrapy.spiders import CrawlSpider, Rule from scrapy.linkextractors import LinkExtractor class MySpider(CrawlSpider): name = 'example.com' allowed_domains = ['example.com'] start_urls = ['http://www.example.com'] rules = ( Rule(LinkExtractor(allow=('category\\.php', ), deny=('subsection\\.php', ))), Rule(LinkExtractor(allow=('item\\.php', )), callback='parse_item'), ) def parse_item(self, response): item = scrapy.Item() item['id'] = response.xpath('//td[@id=\"item_id\"]/text()').re(r'ID: (\\d+)') item['name'] = response.xpath('//td[@id=\"item_name\"]/text()').get() item['description'] = response.xpath('//td[@id=\"item_description\"]/text()').get() item['link_text'] = response.meta['link_text'] return item CrawlSpiderä¹Ÿä¼šå…ˆçˆ¬å–start_urlsä¸­çš„é“¾æ¥ï¼Œç„¶åè§£æè¯·æ±‚åˆ°çš„é¡µé¢ä¸­çš„urlï¼Œè¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬å»æŒ‡å®šè§„åˆ™ï¼Œåªè¦æ»¡è¶³è§„åˆ™çš„urlï¼Œå°±ä¼šè¿›è¡Œè¯·æ±‚ï¼Œç„¶åæ‰§è¡Œå›è°ƒæ–¹æ³•ã€‚ rulesä¸­çš„callbackçš„æ–¹æ³•å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯ä¸€ä¸ªå®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼ŒRuleè‡ªèº«æ˜¯æ²¡æœ‰æ–¹æ³•çš„ï¼Œä½¿ç”¨å‡½æ•°çš„æ–¹å¼æ˜¯ä¸èƒ½å®Œæˆä¼ é€’çš„ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡å­—ç¬¦ä¸²ä¼ é€’è¿™ä¸ªæ–¹æ³•çš„åç§° ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:11:0","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"parseæ–¹æ³• Crawlç”Ÿæˆçš„æ¨¡æ¿ä¸­æˆ‘ä»¬ä¸èƒ½å»é‡è½½parseæ–¹æ³•ï¼Œå› ä¸ºparseæ–¹æ³•æ˜¯ç»§æ‰¿è‡ªSpiderä¸­çš„ï¼Œåœ¨CrawlSpiderä¸­å·²ç»é‡è½½äº†parseæ–¹æ³•ï¼Œå¦‚æœæ”¹äº†parseæ–¹æ³•æ•´ä¸ªç¨‹åºå°±ä¼šæŠ¥é”™ã€‚ CrawlSpiderä¸­çš„parseæ–¹æ³•å›è°ƒå‡½æ•°æ˜¯parse_start_urlï¼Œparse_start_urlçš„å€¼è¿”å›ä¹‹åä¼šä¼ é€’ç»™process_resultsï¼ŒCrawlSpiderä¸­è¿™ä¸¤ä¸ªæ–¹æ³•é»˜è®¤éƒ½æ˜¯è¿”å›ç©ºåˆ—è¡¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸¤ä¸ªæ–¹æ³•è¿›è¡Œé‡è½½ã€‚ ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:11:1","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"Rule class Rule(): def __init__(link_extractor=None, callback=None, cb_kwargs=None, follow=None, process_links=None, process_request=None, errback=None): link_extractor å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„Link Extractorå¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•ä»çˆ¬å–åˆ°çš„é¡µé¢ä¸­æå–url callbackï¼Œå¦‚æœæœ‰è§„åˆ™æ»¡è¶³è¿™ä¸ªurlå°±ä¼šæ‰§è¡Œå›è°ƒå‡½æ•° cb_kwargsä¸ºä¼ é€’ç»™link_extractorçš„å‚æ•° followçš„å€¼ä¸ºTrueæˆ–Falseï¼Œè¡¨ç¤ºæ˜¯å¦å¯¹æ»¡è¶³æ¡ä»¶çš„urlè¿›è¡Œè·Ÿè¿›ï¼Œä¹Ÿå°±æ˜¯å‘ä¸‹çˆ¬å– process_links ï¼Œ ä»link_extractorä¸­è·å–åˆ°é“¾æ¥åˆ—è¡¨æ—¶å°†ä¼šè°ƒç”¨è¯¥å‡½æ•°ã€‚è¯¥æ–¹æ³•ä¸»è¦ç”¨æ¥è¿‡æ»¤url process_requestï¼Œè¯¥è§„åˆ™æå–åˆ°æ¯ä¸ªrequestæ—¶éƒ½ä¼šè°ƒç”¨è¯¥å‡½æ•°ã€‚è¯¥å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªrequestæˆ–è€…Noneã€‚ ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:11:2","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"LinkExtractor LinkExtractorå®é™…ä¸Šæ˜¯LxmlLinkExtractor from .lxmlhtml import LxmlLinkExtractor as LinkExtractor class LxmlLinkExtractor(FilteringLinkExtractor): def __init__(allow=(), deny=(), allow_domains=(), deny_domains=(), deny_extensions=None, restrict_xpaths=(), restrict_css=(), tags=('a', 'area'), attrs=('href', ), canonicalize=False, unique=True, process_value=None, strip=True): allowä¸­æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œåªè¦urlæ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼çš„æ ¼å¼å°±è¿›è¡Œæå– denyä¸­ä¹Ÿæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½†æ˜¯æ»¡è¶³æ¡ä»¶çš„urlå°±ä¼šè¢«ä¸¢å¼ƒæ‰ allow_domainsï¼Œæ»¡è¶³æ¡ä»¶çš„åŸŸåå°±ä¸åšå¤„ç† restrict_xpathsè¿›ä¸€æ­¥å»é™å®šurlï¼Œåªä¼šä»xpathä¸­æå–åˆ°çš„å†…å®¹å»æå–url ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:11:3","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"Item scrapyä¸­çš„Itemæ˜¯æˆ‘ä»¬ç”¨æ¥ä¿å­˜å­—æ®µçš„ç±»ï¼Œéœ€è¦ä¿å­˜çš„å­—æ®µæˆ‘ä»¬éœ€è¦æå‰å®šä¹‰ï¼Œscrapy.Itemç»§æ‰¿è‡ªscrapyä¸­çš„DictItemï¼ŒDictItemç»§æ‰¿äºMutableMapping, BaseItemï¼Œscrapyä¸­çš„Fieldç»§æ‰¿è‡ªdictï¼Œscrapyä¸­å…³äºFieldçš„æè¿°æ˜¯Container of field metadata ","date":"2020-03-14","objectID":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/:11:4","tags":["Scrapy","Python","ç½‘ç»œçˆ¬è™«"],"title":"Scrapyä½¿ç”¨ç¬”è®°","uri":"/posts/scrapy%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"è‹¥ç½‘ç»œä¸å¥½æ— æ³•è‡ªè¡Œä¸‹è½½æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æ–‡æœ«çš„ç™¾åº¦ç½‘ç›˜é“¾æ¥ä¸‹è½½ ","date":"2020-03-13","objectID":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/:0:0","tags":["æ•™ç¨‹","Cè¯­è¨€","VScode"],"title":"ä½¿ç”¨VScode+MinGWé…ç½®Cè¯­è¨€çš„å¼€å‘ç¯å¢ƒ","uri":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"ä¸‹è½½GCC GCCéœ€è¦åˆ°SOURCEFORGEä¸‹è½½ï¼Œå¯ä»¥ç›´æ¥åœ¨SOURCEFORGEå®˜ç½‘çš„æœç´¢æ¡†ä¸­æœç´¢MinGW MinGW - Minimalist GNU for Windowsä¸‹è½½çš„æ˜¯mingw-get-setup.exeï¼Œè¿™ä¸ªè½¯ä»¶æ˜¯ä¸€ä¸ªå®‰è£…å™¨ï¼Œå¯åŠ¨ä¹‹åè¿˜éœ€è¦ä»ç½‘ä¸Šæ‹‰å–GCCçš„ç¨‹åºæ–‡ä»¶ï¼Œå¦‚æœç½‘ç»œä¸å¥½å¾ˆå®¹æ˜“å¤±è´¥ã€‚ è¿™é‡Œä»‹ç»çš„æ˜¯ä»MinGW-w64 - for 32 and 64 bit Windowsä¸‹è½½MinGW-w64çš„å…å®‰è£…ç‰ˆï¼ˆçº¯å‡€å‹ç¼©æ–‡ä»¶ï¼‰ï¼Œè¿›å…¥é¡¹ç›®ç•Œé¢åé€‰æ‹©Files ç„¶åå¾€ä¸‹æ‹‰å°±ä¼šçœ‹åˆ°å„ä¸ªç‰ˆæœ¬çš„GCC å¯ä»¥é€‰æ‹©é€‚åˆçš„ç‰ˆæœ¬ä¸­çš„x86_64-win32-sehä¸‹è½½ ä¸‹è½½ä¹‹åç›´æ¥è§£å‹ï¼ˆå‹ç¼©æ ¼å¼æ˜¯7zï¼Œå¯ä»¥ä¸‹è½½7zipæ¥è§£å‹ï¼Œæ–‡æœ«æ”¾ä¸Šzipæ ¼å¼ï¼‰ç›®å½•ç»“æ„å¦‚ä¸‹ +--- mingw64 | +--- bin | +--- etc | +--- incloud | +--- lib | +--- libexec | +--- licenses | +--- opt | +--- share | +--- x86_64-w64-mingw32 | +--- build-info.txt å°†æ•´ä¸ªmingw64æ–‡ä»¶å¤¹æ”¾åˆ°åˆé€‚çš„ä½ç½®ï¼ˆæ­£å¸¸å®‰è£…è½¯ä»¶æ—¶è½¯ä»¶ç›¸å…³æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ï¼‰ï¼Œå°†binç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ ç„¶ååœ¨ç»ˆç«¯ä¸­è¾“å…¥ gcc -v è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼ˆå› ä¸ºç‰ˆæœ¬ä»¥åŠæ–‡ä»¶å­˜å‚¨ä½ç½®å¯èƒ½ä¼šå­˜åœ¨å·®åˆ«ï¼‰è¯´æ˜å®‰è£…æˆåŠŸ Using built-in specs. COLLECT_GCC=gcc COLLECT_LTO_WRAPPER=Z:/soft/mingw64/bin/../libexec/gcc/x86_64-w64-mingw32/8.1.0/lto-wrapper.exe Target: x86_64-w64-mingw32 Configured with: ../../../src/gcc-8.1.0/configure --host=x86_64-w64-mingw32 --build=x86_64-w64-mingw32 --target=x86_64-w64-mingw32 --prefix=/mingw64 --with-sysroot=/c/mingw810/x86_64-810-win32-seh-rt_v6-rev0/mingw64 --enable-shared --enable-static --disable-multilib --enable-languages=c,c++,fortran,lto --enable-libstdcxx-time=yes --enable-threads=win32 --enable-libgomp --enable-libatomic --enable-lto --enable-graphite --enable-checking=release --enable-fully-dynamic-string --enable-version-specific-runtime-libs --disable-libstdcxx-pch --disable-libstdcxx-debug --enable-bootstrap --disable-rpath --disable-win32-registry --disable-nls --disable-werror --disable-symvers --with-gnu-as --with-gnu-ld --with-arch=nocona --with-tune=core2 --with-libiconv --with-system-zlib --with-gmp=/c/mingw810/prerequisites/x86_64-w64-mingw32-static --with-mpfr=/c/mingw810/prerequisites/x86_64-w64-mingw32-static --with-mpc=/c/mingw810/prerequisites/x86_64-w64-mingw32-static --with-isl=/c/mingw810/prerequisites/x86_64-w64-mingw32-static --with-pkgversion='x86_64-win32-seh-rev0, Built by MinGW-W64 project' --with-bugurl=https://sourceforge.net/projects/mingw-w64 CFLAGS='-O2 -pipe -fno-ident -I/c/mingw810/x86_64-810-win32-seh-rt_v6-rev0/mingw64/opt/include -I/c/mingw810/prerequisites/x86_64-zlib-static/include -I/c/mingw810/prerequisites/x86_64-w64-mingw32-static/include' CXXFLAGS='-O2 -pipe -fno-ident -I/c/mingw810/x86_64-810-win32-seh-rt_v6-rev0/mingw64/opt/include -I/c/mingw810/prerequisites/x86_64-zlib-static/include -I/c/mingw810/prerequisites/x86_64-w64-mingw32-static/include' CPPFLAGS=' -I/c/mingw810/x86_64-810-win32-seh-rt_v6-rev0/mingw64/opt/include -I/c/mingw810/prerequisites/x86_64-zlib-static/include -I/c/mingw810/prerequisites/x86_64-w64-mingw32-static/include' LDFLAGS='-pipe -fno-ident -L/c/mingw810/x86_64-810-win32-seh-rt_v6-rev0/mingw64/opt/lib -L/c/mingw810/prerequisites/x86_64-zlib-static/lib -L/c/mingw810/prerequisites/x86_64-w64-mingw32-static/lib ' Thread model: win32 gcc version 8.1.0 (x86_64-win32-seh-rev0, Built by MinGW-W64 project) ","date":"2020-03-13","objectID":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/:1:0","tags":["æ•™ç¨‹","Cè¯­è¨€","VScode"],"title":"ä½¿ç”¨VScode+MinGWé…ç½®Cè¯­è¨€çš„å¼€å‘ç¯å¢ƒ","uri":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"é…ç½®VS code VS codeå®˜ç½‘ï¼šhttps://code.visualstudio.com/ ä¸‹è½½å¥½VS codeåç›´æ¥å®‰è£… åœ¨VS codeä¸­éœ€è¦å®‰è£…ä¸¤ä¸ªæ’ä»¶ï¼ˆå¦‚æœä¸çŸ¥é“æ’ä»¶åœ¨å“ªä¸‹è½½å®‰è£…å¯ä»¥æŒ‰å¿«æ·é”®Ctrl+Shift+Xï¼‰ ","date":"2020-03-13","objectID":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/:2:0","tags":["æ•™ç¨‹","Cè¯­è¨€","VScode"],"title":"ä½¿ç”¨VScode+MinGWé…ç½®Cè¯­è¨€çš„å¼€å‘ç¯å¢ƒ","uri":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"C/C++ ","date":"2020-03-13","objectID":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/:2:1","tags":["æ•™ç¨‹","Cè¯­è¨€","VScode"],"title":"ä½¿ç”¨VScode+MinGWé…ç½®Cè¯­è¨€çš„å¼€å‘ç¯å¢ƒ","uri":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"Code Runner å®‰è£…å¥½Code Runnerä¹‹åéœ€è¦åˆ°è®¾ç½®ä¸­å°†Run In Terminalè¿™ä¸€é¡¹å‹¾é€‰ä¸Šï¼ˆCtrl + ,å¯ä»¥ç›´æ¥è·³è½¬åˆ°è®¾ç½®ç•Œé¢ï¼Œå¦‚æœæ‰¾ä¸åˆ°çš„Run In Terminalå¯ä»¥åœ¨æœç´¢æ¡†ä¸­æœç´¢ï¼‰ ç„¶åå°±å¯ä»¥åœ¨VS codeä¸­è¿è¡Œç¼–å†™çš„Cè¯­è¨€æˆ–è€…C++ç¨‹åºäº†ï¼Œåªéœ€è¦å»ºç«‹å¯¹åº”åç¼€åçš„æ–‡ä»¶å°±å¯ä»¥äº† ","date":"2020-03-13","objectID":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/:2:2","tags":["æ•™ç¨‹","Cè¯­è¨€","VScode"],"title":"ä½¿ç”¨VScode+MinGWé…ç½®Cè¯­è¨€çš„å¼€å‘ç¯å¢ƒ","uri":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"},{"categories":["ç¯å¢ƒé…ç½®"],"content":"MinGW64ç™¾åº¦ç½‘ç›˜ä¸‹è½½åœ°å€ é“¾æ¥ï¼šhttps://pan.baidu.com/s/1tijtgm8BBz2dw1vwRGH8og æå–ç ï¼šj3g9 ","date":"2020-03-13","objectID":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/:3:0","tags":["æ•™ç¨‹","Cè¯­è¨€","VScode"],"title":"ä½¿ç”¨VScode+MinGWé…ç½®Cè¯­è¨€çš„å¼€å‘ç¯å¢ƒ","uri":"/posts/%E4%BD%BF%E7%94%A8vscode-mingw%E9%85%8D%E7%BD%AEc%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"Requests http for humans ä½¿ç”¨urllibåº“çš„æ—¶å€™å¯èƒ½ä¼šè¢«å„ç§ç¼–ç ã€Handlerã€Openerå¼„å¾—å¤´å¤§ï¼Œæœ‰æ—¶å€™è¦æ„é€ ä¸€ä¸ªè¯·æ±‚éœ€è¦çš„ç¹ççš„æ­¥éª¤ä¹Ÿæ˜¯è®©äººæ„Ÿè§‰ååˆ†ç¹ç requestsæ˜¯Pythonå®ç°çš„æœ€ç®€å•æ˜“ç”¨çš„ç¬¬ä¸‰æ–¹HTTPè¯·æ±‚åº“ï¼Œå……åˆ†ä½“ç°äº†Pythonçš„ç®€æ´ä¸ä¼˜é›… requestså®˜æ–¹æ–‡æ¡£ï¼šhttps://requests.readthedocs.io/en/latest/ ","date":"2020-03-02","objectID":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/:0:0","tags":["Python","requests","ç½‘ç»œçˆ¬è™«"],"title":"requestså¿«é€Ÿä¸Šæ‰‹","uri":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"å®‰è£… pip install requests ","date":"2020-03-02","objectID":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/:0:1","tags":["Python","requests","ç½‘ç»œçˆ¬è™«"],"title":"requestså¿«é€Ÿä¸Šæ‰‹","uri":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"GETè¯·æ±‚ ä½¿ç”¨requestså‘èµ·getè¯·æ±‚å¯ä»¥ç›´æ¥è°ƒç”¨requestsåº“ä¸­çš„getæ–¹æ³• import requests def spider(url): response = requests.get(url) html = response.content.decode(\"utf-8\") with open(\"baidu.html\", \"w\", encoding=\"utf-8\") as file: file.write(html) if __name__ == \"__main__\": url = \"http://www.baidu.com/\" spider(url) ","date":"2020-03-02","objectID":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/:1:0","tags":["Python","requests","ç½‘ç»œçˆ¬è™«"],"title":"requestså¿«é€Ÿä¸Šæ‰‹","uri":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"POSTè¯·æ±‚ postè¯·æ±‚éœ€è¦æäº¤æ•°æ®ï¼Œä½†æ˜¯å¹¶ä¸éœ€è¦è½¬ç  import requests def spider(url): data = { \"è¡¨å•\": \"æ•°æ®\", \"é”®\": \"å€¼\" } response = requests.post(url, data=data) print(response.text) if __name__ == \"__main__\": url = \"http://httpbin.org/post\" spider(url) ","date":"2020-03-02","objectID":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/:2:0","tags":["Python","requests","ç½‘ç»œçˆ¬è™«"],"title":"requestså¿«é€Ÿä¸Šæ‰‹","uri":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"timeout import requests response = requests.get(\"http://www.baidu.com\", timeout=0.01) print(response) ","date":"2020-03-02","objectID":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/:3:0","tags":["Python","requests","ç½‘ç»œçˆ¬è™«"],"title":"requestså¿«é€Ÿä¸Šæ‰‹","uri":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"çŠ¶æ€ç  import requests response = requests.get(\"http://www.baidu.com\") print(response.status_code) ","date":"2020-03-02","objectID":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/:4:0","tags":["Python","requests","ç½‘ç»œçˆ¬è™«"],"title":"requestså¿«é€Ÿä¸Šæ‰‹","uri":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"ä¼ é€’URLå‚æ•° ä¼ é€’urlå‚æ•°ï¼ˆæ‹¼æ¥urlï¼‰åŒæ ·ä¸éœ€è¦è½¬ç  import requests def spider(url): params = { \"k1\": \"v1\", \"k2\": \"v2\" } response = requests.get(url, params=params) print(response.url) if __name__ == \"__main__\": url = \"http://httpbin.org/get\" spider(url) ","date":"2020-03-02","objectID":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/:5:0","tags":["Python","requests","ç½‘ç»œçˆ¬è™«"],"title":"requestså¿«é€Ÿä¸Šæ‰‹","uri":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"æ·»åŠ è¯·æ±‚å¤´ è¯·æ±‚å¤´ä¹Ÿæ˜¯ç›´æ¥ä¼ é€’ï¼Œä¸éœ€è¦æ„é€ è¯·æ±‚å¯¹è±¡ import requests def spider(url): headers = { \"User-agent\": \"Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50\" } response = requests.get(url, headers=headers) print(response.text) if __name__ == \"__main__\": url = \"https://maoyan.com/\" spider(url) ","date":"2020-03-02","objectID":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/:6:0","tags":["Python","requests","ç½‘ç»œçˆ¬è™«"],"title":"requestså¿«é€Ÿä¸Šæ‰‹","uri":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"æ·»åŠ Cookies import requests def spider(url): headers = { \"User-agent\": \"Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50\", \"Cookie\": \"k1=v1;k2=v2\" } response = requests.get(url, headers=headers) print(response.text) if __name__ == \"__main__\": url = \"http://www.httpbin.org/headers\" spider(url) ","date":"2020-03-02","objectID":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/:7:0","tags":["Python","requests","ç½‘ç»œçˆ¬è™«"],"title":"requestså¿«é€Ÿä¸Šæ‰‹","uri":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"ä»£ç† import requests proxies = { \"http\": \"http://10.10.1.10:3128\", \"https\": \"http://10.10.1.10:1080\", } headers = { \"User-agent\": \"Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50\" } response = requests.get(\"http://python.org\", headers=headers, proxies=proxies) ","date":"2020-03-02","objectID":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/:8:0","tags":["Python","requests","ç½‘ç»œçˆ¬è™«"],"title":"requestså¿«é€Ÿä¸Šæ‰‹","uri":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"Sessionä¼šè¯ç»´æŒ ä¼šè¯å¯¹è±¡è®©ä½ èƒ½å¤Ÿè·¨è¯·æ±‚ä¿æŒæŸäº›å‚æ•°ï¼Œå®ƒä¹Ÿä¼šåœ¨åŒä¸€ä¸ª Session å®ä¾‹å‘å‡ºçš„æ‰€æœ‰è¯·æ±‚ä¹‹é—´ä¿æŒ cookie ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¹‹å‰é€šè¿‡Sessionå¯¹è±¡æˆåŠŸè®¿é—®äº†æŸä¸ªç½‘ç«™çš„æŸä¸ªç½‘é¡µï¼Œé‚£ä¹ˆå†æ¬¡ä½¿ç”¨è¯¥Sessionå¯¹è±¡è¯·æ±‚è¯¥ç½‘ç«™çš„å…¶ä»–ç½‘é¡µæ—¶ï¼Œå°±ä¼šé»˜è®¤ä½¿ç”¨è¯¥ä¹‹å‰ä½¿ç”¨çš„cookieå‚æ•° import requests session = requests.Session() session.get(\"http://httpbin.org/cookies/set/sessioncookie/123456789\") response = session.get(\"http://httpbin.org/cookies\") print(response.text) è¿™é‡Œè·å¾—çš„cookieå°±æ˜¯æœåŠ¡å™¨ç»™æˆ‘ä»¬çš„cookie ","date":"2020-03-02","objectID":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/:9:0","tags":["Python","requests","ç½‘ç»œçˆ¬è™«"],"title":"requestså¿«é€Ÿä¸Šæ‰‹","uri":"/posts/requests%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"ç½‘ç»œçˆ¬è™«åˆ†ä¸ºé€šç”¨çˆ¬è™«å’Œèšç„¦çˆ¬è™« ","date":"2020-03-01","objectID":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/:0:0","tags":["ç½‘ç»œçˆ¬è™«"],"title":"å…³äºç½‘ç»œçˆ¬è™«","uri":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"ä»€ä¹ˆæ˜¯çˆ¬è™« çˆ¬è™«æ˜¯ä¸€ç§æŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼Œè‡ªåŠ¨æŠ“å–ä¸‡ç»´ç½‘ä¿¡æ¯çš„ç¨‹åºæˆ–è„šæœ¬ ","date":"2020-03-01","objectID":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/:0:1","tags":["ç½‘ç»œçˆ¬è™«"],"title":"å…³äºç½‘ç»œçˆ¬è™«","uri":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"é€šç”¨çˆ¬è™« é€šç”¨çˆ¬è™«å°±æ˜¯æˆ‘ä»¬å¸¸è§çš„æœç´¢å¼•æ“ï¼Œæœç´¢å¼•æ“èƒŒåçš„æŠ€æœ¯æ”¯æ’‘å°±æ˜¯çˆ¬è™«æŠ€æœ¯ ","date":"2020-03-01","objectID":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/:0:2","tags":["ç½‘ç»œçˆ¬è™«"],"title":"å…³äºç½‘ç»œçˆ¬è™«","uri":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"èšç„¦çˆ¬è™« èšç„¦çˆ¬è™«æ˜¯ä¸“é—¨é’ˆå¯¹æŸä¸€ç½‘ç«™ï¼Œæˆ–è€…æŸä¸€ç½‘é¡µçš„çˆ¬è™«ï¼Œè¿™ç§ä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„ç½‘ç»œçˆ¬è™« ","date":"2020-03-01","objectID":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/:0:3","tags":["ç½‘ç»œçˆ¬è™«"],"title":"å…³äºç½‘ç»œçˆ¬è™«","uri":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"çˆ¬è™«çš„åŸºæœ¬ç»„æˆ URLç®¡ç†æ¨¡å— HTMLä¸‹è½½æ¨¡å— HTMLè§£ææ¨¡å— æ•°æ®å­˜å‚¨æ¨¡å— çˆ¬è™«è°ƒåº¦æ¨¡å— ","date":"2020-03-01","objectID":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/:1:0","tags":["ç½‘ç»œçˆ¬è™«"],"title":"å…³äºç½‘ç»œçˆ¬è™«","uri":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"å¸¸ç”¨çš„Pythonçˆ¬è™«æ¨¡å— requests scrapy pysipder çˆ¬è™«æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œpythonåªæ˜¯å†™çˆ¬è™«æœ€åˆé€‚çš„è¯­è¨€ï¼Œä½†æ˜¯ä¸æ˜¯è¯´åˆ«çš„è¯­è¨€ä¸èƒ½å†™çˆ¬è™« ","date":"2020-03-01","objectID":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/:2:0","tags":["ç½‘ç»œçˆ¬è™«"],"title":"å…³äºç½‘ç»œçˆ¬è™«","uri":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"ç½‘ç»œè¯·æ±‚æ–¹æ³• ç½‘ç»œè¯·æ±‚çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œä½†æ˜¯æœ€å¸¸è§çš„æ˜¯GETè¯·æ±‚å’ŒPOSTè¯·æ±‚ GETï¼šå‚æ•°ã€å…³é”®ä¿¡æ¯åœ¨URLä¸­ POSTï¼šéœ€è¦æäº¤ä¿¡æ¯ ","date":"2020-03-01","objectID":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/:3:0","tags":["ç½‘ç»œçˆ¬è™«"],"title":"å…³äºç½‘ç»œçˆ¬è™«","uri":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"å¸¸è§çš„HTMLè§£ææ–¹æ³• æ­£åˆ™è¡¨è¾¾å¼ xpathè¯­æ³• cssé€‰æ‹©å™¨ ","date":"2020-03-01","objectID":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/:4:0","tags":["ç½‘ç»œçˆ¬è™«"],"title":"å…³äºç½‘ç»œçˆ¬è™«","uri":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"æ•°æ®å­˜å‚¨ æ–‡æœ¬å­˜å‚¨csvç­‰ Mongo Redis MySQL ","date":"2020-03-01","objectID":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/:5:0","tags":["ç½‘ç»œçˆ¬è™«"],"title":"å…³äºç½‘ç»œçˆ¬è™«","uri":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"},{"categories":["ç½‘ç»œçˆ¬è™«"],"content":"çˆ¬è™«çŠ¯æ³•å— æŠ€æœ¯æ˜¯æ— ç½ªçš„ï¼Œå…³é”®è¦çœ‹ä½¿ç”¨è€…æ˜¯æ€ä¹ˆä½¿ç”¨çš„ã€‚ ä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬åœ¨æ­£å¸¸æµè§ˆå™¨ä¸Šèƒ½å¤Ÿç›´æ¥çœ‹åˆ°çš„æ•°æ®éƒ½æ˜¯èƒ½å¤Ÿé‡‡é›†çš„ï¼Œä½†æ˜¯è¦æ³¨æ„è®¿é—®é€Ÿåº¦ï¼Œå¦‚æœé€Ÿåº¦è¿‡é«˜ï¼Œå¾ˆå¯èƒ½å°±ä¼šè®©æœåŠ¡å™¨çš„å‹åŠ›è¿‡å¤§ç”šè‡³æ˜¯ç˜«ç—ª å½“ç„¶é€šè¿‡æ­£å¸¸æ‰‹æ®µç ´è§£äº†ä¸€ä¸ªç½‘ç«™ï¼Œæˆ–è€…ä¸€ä¸ªAPPï¼ŒæŠ“å–äº†ä¸€äº›æˆ‘ä»¬èƒ½å¤Ÿç›´æ¥çœ‹åˆ°çš„æ•°æ®ï¼Œä¸€èˆ¬æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯åƒä¸‡ä¸è¦å°†ç ´è§£æ–¹æ³•åœ¨ç½‘ä¸Šä¼ æ’­ï¼Œä¸ç„¶å¯èƒ½å°±ä¼šæ”¶åˆ°å¾‹å¸ˆå‡½ï¼Œè¿™äº›ä¸œè¥¿åœ¨ç½‘ç«™çš„ä½¿ç”¨åè®®å’ŒAPPçš„ä½¿ç”¨åè®®ä¸€èˆ¬éƒ½ä¼šæœ‰æ˜ç¡®è¯´æ˜çš„ å¦‚æœçˆ¬å–äº†åˆ«äººç½‘ç«™çš„ä¸€äº›æ•°æ®ï¼Œæ‹¿æ¥åšåšæ•°æ®åˆ†ææå–ä¸€äº›ç‰¹å¾ä»€ä¹ˆçš„ï¼Œè¿™äº›éƒ½æ˜¯ä¸é€æ˜çš„ï¼Œä½†æ˜¯å¦‚æœç›´æ¥æ”¾åˆ°è‡ªå·±çš„ç½‘ç«™ä¸Šï¼Œåˆ«äººæ²¡æœ‰æˆæƒç»™ä½ ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯ä¼šæ”¶åˆ°å¾‹å¸ˆå‡½çš„ å¦‚æœä½¿ç”¨çˆ¬è™«å»è¿›è¡Œæ•°æ®é€ å‡ï¼Œæ¯”å¦‚åœ¨ç›´æ’­çš„æ—¶å€™åˆ·å¼¹å¹•ï¼Œåˆ·è¯„è®ºä¹‹ç±»çš„ï¼Œè¿™å°±æ˜¯æ•°æ®é€ å‡ï¼Œå¦‚æœå› æ­¤ä¸¥é‡è¯¯å¯¼äº†å¤§ä¼—çš„è¯ï¼Œç‰¢æˆ¿æ˜¯å®‰æ’ä¸Šäº† è‡³äºç”¨æˆ·ä¿¡æ¯å’Œéšç§æ•°æ®æ›´ä¸è¦è¯´äº†ï¼ŒåŠ¨äº†ä¸è¯¥åŠ¨çš„æ•°æ®ï¼Œç‰¢æˆ¿è‚¯å®šæ˜¯èƒ½åˆ†é…çš„ è‡³äºæ›´å¤šçš„å¯ä»¥äº†è§£ä¸€ä¸‹**ã€Šä¸­åäººæ°‘å…±å’Œå›½ç½‘ç»œå®‰å…¨æ³•ã€‹** ","date":"2020-03-01","objectID":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/:6:0","tags":["ç½‘ç»œçˆ¬è™«"],"title":"å…³äºç½‘ç»œçˆ¬è™«","uri":"/posts/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"},{"categories":["tool"],"content":"æ­å»ºä¸€ä¸ªåšå®¢ç”¨æ¥è®°å½•å­¦ä¹ è¿‡ç¨‹æ˜¯éå¸¸ä¸é”™çš„é€‰æ‹©ï¼ ","date":"2020-03-01","objectID":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/:0:0","tags":["Hexo","blog"],"title":"ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºåšå®¢æµç¨‹","uri":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/"},{"categories":["tool"],"content":"å‡†å¤‡å·¥ä½œ ","date":"2020-03-01","objectID":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/:1:0","tags":["Hexo","blog"],"title":"ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºåšå®¢æµç¨‹","uri":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/"},{"categories":["tool"],"content":"å®‰è£…Nodejs è®¿é—®Nodejsçš„å®˜ç½‘å°±å¯ä»¥ä¸‹è½½ï¼šnodejs.org å·¦è¾¹çš„æ˜¯ç¨³å®šç‰ˆï¼Œå³è¾¹çš„æ˜¯æœ€æ–°ç‰ˆï¼Œå»ºè®®ä¸‹è½½ç¨³å®šç‰ˆ å¦‚æœä»å®˜ç½‘ä¸‹è½½çš„é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…çš„é•œåƒï¼Œå¦‚æ¸…åå¤§å­¦å¼€æºé•œåƒç«™Nodejsçš„ç‰ˆæœ¬åœ°å€ï¼šhttps://mirrors.tuna.tsinghua.edu.cn/nodejs-release/ ä¸‹è½½å®‰è£…åå¯ä»¥ä½¿ç”¨ç»ˆç«¯æŸ¥çœ‹Nodejså’Œnpmçš„ç‰ˆæœ¬ node -v npm -v åœ¨å®‰è£…å®ŒNodejsä¹‹åè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºNodejsçš„åŒ…ç®¡ç†å·¥å…·npmé»˜è®¤ä½¿ç”¨çš„æ˜¯å›½å¤–çš„é•œåƒæºï¼Œé€Ÿåº¦æ˜¯æ¯”è¾ƒæ…¢çš„ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨æ·˜å®çš„é•œåƒæºï¼Œå…ˆä½¿ç”¨npmå®‰è£…cnpmï¼ˆæ·˜å®çš„é•œåƒæºï¼‰ï¼Œä½¿ç”¨å…¨å±€å®‰è£…çš„æ–¹å¼å®‰è£…ï¼ˆ-gï¼‰ npm install cnpm -g --registry=https://registry.npm.taobao.org å¯ä»¥é€šè¿‡æŸ¥çœ‹cnpmçš„ç‰ˆæœ¬æ¥éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ cnpm -v ","date":"2020-03-01","objectID":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/:1:1","tags":["Hexo","blog"],"title":"ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºåšå®¢æµç¨‹","uri":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/"},{"categories":["tool"],"content":"å®‰è£…Git å…¶ä»–Gitå®¢æˆ·ç«¯ä¹Ÿæ˜¯å¯ä»¥çš„ è®¿é—®gitçš„å®˜ç½‘å°±å¯ä»¥ä¸‹è½½ï¼šhttps://git-scm.com/download ä¸‹è½½çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šç»å¸¸å‡ºç°ä¸‹è½½å¤±è´¥çš„æƒ…å†µï¼ŒMacå¯ä»¥ä½¿ç”¨homebrewå®‰è£…ï¼Œå‘½ä»¤å¦‚ä¸‹ brew install git Windowså»ºè®®ä½¿ç”¨æ·˜å®çš„é•œåƒè¿›è¡Œä¸‹è½½ï¼šhttps://npm.taobao.org/mirrors/git-for-windows/ Gitå®‰è£…å¥½ä¹‹åè¿˜è¦é…ç½®Gitçš„ç”¨æˆ·ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š git config --global user.email \"é‚®ç®±åœ°å€\" git config --global user.name \"ç”¨æˆ·å\" ","date":"2020-03-01","objectID":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/:1:2","tags":["Hexo","blog"],"title":"ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºåšå®¢æµç¨‹","uri":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/"},{"categories":["tool"],"content":"å®‰è£…Hexoæ¡†æ¶ å®‰è£…Hexoçš„å‘½ä»¤å¦‚ä¸‹ï¼š cnpm install -g hexo-cli å¯ä»¥é€šè¿‡æŸ¥çœ‹Hexoçš„ç‰ˆæœ¬æ¥éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ hexo -v ","date":"2020-03-01","objectID":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/:1:3","tags":["Hexo","blog"],"title":"ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºåšå®¢æµç¨‹","uri":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/"},{"categories":["tool"],"content":"åˆå§‹åŒ–é¡¹ç›® åˆå§‹åŒ–é¡¹ç›®éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼Œè¿™ä¸ªé¡¹ç›®æ˜¯ä½¿ç”¨Hexoçš„å‘½ä»¤è¡Œå·¥å…·ç”Ÿæˆçš„ï¼Œæ‰€ä»¥é¡¹ç›®æ˜¯åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆçš„ï¼Œæƒ³è¦å°†é¡¹ç›®æ”¾åœ¨åœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼Œåˆ™éœ€è¦åœ¨ç»ˆç«¯å·¥å…·é‡Œå°†ç›®å½•åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šåˆ°å­˜åœ¨çš„ç›®å½•é‡Œç”Ÿæˆï¼Œä½†æ˜¯Windowsä¸‹æ˜¯ä¸èƒ½è·¨ç£ç›˜çš„ã€‚ï¼ˆé¡¹ç›®åç§°ä¹Ÿå°±æ˜¯é¡¹ç›®è·¯å¾„ï¼Œå¯ä»¥åŠ ä¹Ÿå¯ä»¥ä¸åŠ çš„ï¼ŒåŠ ä¸Šçš„è¯ä¼šè‡ªåŠ¨ç”Ÿæˆè·¯å¾„çš„æœ€åä¸€ä¸ªæ–‡ä»¶ï¼‰ hexo init {é¡¹ç›®åç§°} æ¯”å¦‚æˆ‘çš„ç»ˆç«¯å·¥å…·æ˜¯å°†ç›®å½•åˆ‡æ¢åˆ°äº†Dç›˜ä¸‹çš„blogæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œç„¶åæˆ‘åˆ›å»ºé¡¹ç›®å°±æ˜¯è¿™æ · hexo init demo ç„¶åå°±ä¼šåœ¨blogæ–‡ä»¶å¤¹ä¸‹é¢ç”Ÿæˆä¸€ä¸ªdemoæ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªdemoæ–‡ä»¶å¤¹é‡Œé¢å°±æ˜¯é¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚ é¡¹ç›®ç”Ÿæˆåï¼ŒHexoæ¡†æ¶è¿˜ä¼šè‡ªåŠ¨cloneä¸€ä¸ªlandscapeä¸»é¢˜ï¼Œæ‰€ä»¥æ—¶é—´å¯èƒ½ä¼šæ¯”è¾ƒé•¿ã€‚ åˆ›å»ºæˆåŠŸä¹‹åçœ‹ä¸€ä¸‹æ–‡ä»¶å¤¹ï¼Œå‘ç°å¤šå‡ºäº†å¾ˆå¤šæ–‡ä»¶ æ•´ä¸ªåˆ›å»ºé¡¹ç›®çš„è¿‡ç¨‹æ˜¯ååˆ†ç®€å•çš„ï¼Œå¦‚æœé¡¹ç›®åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­å‡ºæ¥ä»€ä¹ˆé—®é¢˜ä¹Ÿä¸è¦æ‹…å¿ƒï¼Œå¤§ä¸äº†æŠŠæ–‡ä»¶å…¨éƒ¨åˆ é™¤åé‡æ–°æ¥ã€‚ é¡¹ç›®ç”Ÿæˆååœ¨ç»ˆç«¯å·¥å…·ä¸­å°†ç›®å½•åˆ‡æ¢åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ä¸­å»ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯D:\\blog\\demoï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨serverï¼ˆæˆ–è€…sï¼‰å‘½ä»¤è®©é¡¹ç›®åœ¨æœ¬åœ°è¿è¡Œ hexo s ç„¶åå°±ä¼šæç¤ºåšå®¢å·²ç»åœ¨æœ¬åœ°è¿è¡Œäº†ï¼Œç«¯å£æ˜¯ï¼š http://localhost:4000 ï¼Œä½¿ç”¨Ctrl+Cå°±èƒ½åœæ­¢é¡¹ç›®è¿è¡Œã€‚ åœ¨æµè§ˆå™¨è¾“å…¥åœ°å€åå°±èƒ½è¿›å…¥åŸå§‹çŠ¶æ€çš„åšå®¢ï¼Œåœ¨è¿™ä¸ªåšå®¢é¡µé¢ä¸Šå¯ä»¥çœ‹åˆ°Hexoçš„å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤éƒ½å¯ä»¥ä½¿ç”¨ç®€å†™ï¼Œä¹Ÿå°±æ˜¯å¤´å­—æ¯ã€‚ ","date":"2020-03-01","objectID":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/:2:0","tags":["Hexo","blog"],"title":"ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºåšå®¢æµç¨‹","uri":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/"},{"categories":["tool"],"content":"éƒ¨ç½²åˆ°Github è¦éƒ¨ç½²åšå®¢ï¼Œè¦å°†æœ¬åœ°æœåŠ¡æ–­æ‰ã€‚ é¦–å…ˆè¦åœ¨è‡ªå·±çš„Githubä¸Šåˆ›å»ºä¸€ä¸ªæ–°ä»“åº“Create a new repositoryï¼Œç„¶åè¿™ä¸ªä»“åº“çš„åç§°å¿…é¡»æ˜¯{username}.github.io åˆ›å»ºæˆåŠŸåä¼šç”Ÿæˆä¸€ä¸ªä»“åº“çš„httpsåœ°å€ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡è¿™ä¸ªhttpsåœ°å€éƒ¨ç½²é¡¹ç›®äº†ã€‚ è¦éƒ¨ç½²è¿™ä¸ªé¡¹ç›®ï¼Œé¦–å…ˆè¦ä¿®æ”¹ä»¥ä¸‹è¿™ä¸ªé¡¹ç›®ä¸­çš„_config.ymlè¿™ä¸ªæ–‡ä»¶ï¼Œæ‰“å¼€_config.ymlåï¼Œç›´æ¥è·³è½¬åˆ°æœ€åº•éƒ¨ï¼Œç„¶ååœ¨# Deploymentè¿™ä¸€é¡¹é‡Œé¢åšå¦‚ä¸‹ä¿®æ”¹ï¼Œå°†æ²¡æœ‰çš„æ·»åŠ ä¸Šï¼Œè®°å¾—è¦åœ¨å†’å·åæ‰“ä¸€ä¸ªç©ºæ ¼ deploy: type: git repository: {Githubä»“åº“åœ°å€} branch: master ç„¶åè¿˜è¦åœ¨é¡¹ç›®æ‰€åœ¨ç›®å½•ä¸‹å®‰è£…ä¸€ä¸ªæ”¯æŒGitçš„éƒ¨ç½²æ’ä»¶ï¼Œåå­—å«åšhexo-deployer-gitï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ’ä»¶ï¼Œæ‰§è¡Œéƒ¨ç½²å‘½ä»¤çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œä½¿ç”¨cnpmæ¥å®‰è£…è¿™ä¸ªæ’ä»¶ cnpm install --save hexo-deployer-git å®‰è£…æˆåŠŸä¹‹åå°±å¯ä»¥æ‰§è¡Œéƒ¨ç½²å‘½ä»¤äº† hexo d éƒ¨ç½²æˆåŠŸä¹‹åå°±å¯ä»¥ä½¿ç”¨Github Repositoryçš„åŒåé“¾æ¥æ¥è®¿é—®åšå®¢äº†ï¼Œä¹Ÿå°±æ˜¯{username}.github.ioï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ°å’Œæœ¬åœ°å¯åŠ¨ä¸€æ‘¸ä¸€æ ·çš„å†…å®¹ã€‚ ","date":"2020-03-01","objectID":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/:3:0","tags":["Hexo","blog"],"title":"ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºåšå®¢æµç¨‹","uri":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/"},{"categories":["tool"],"content":"å†™åšå®¢æ–‡ç«  åœ¨ç»ˆç«¯å·¥å…·ä¸­ä½¿ç”¨hexoçš„å‘½ä»¤å°±å¯ä»¥åˆ›å»ºmdæ ¼å¼çš„æ–‡ç« ï¼ˆè·¯å¾„è¦åœ¨åšå®¢é¡¹ç›®ä¸­ï¼‰ hexo n \"{æ–‡ç« åå­—}\" ä¾‹å¦‚æˆ‘è¾“å…¥çš„æ˜¯ hexo n \"æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢\" ç„¶åå°±ä¼šæç¤ºï¼šINFO Created: D:\\blog\\demo\\source\\_posts\\æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢.mdï¼Œè¯´æ˜ç¨‹åºå·²ç»åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢ç”Ÿæˆäº†ä¸€ç¯‡å«åšâ€œæˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢â€çš„Markdownæ–‡ä»¶ã€‚ åˆ›å»ºçš„mdæ–‡ä»¶æ˜¯ç©ºçš„ï¼Œè¿›å…¥åˆ°åšå®¢é¡¹ç›®çš„\\source\\_postsæ–‡ä»¶å¤¹ä¸‹é¢å°±èƒ½çœ‹åˆ°åˆšæ‰ä½¿ç”¨å‘½ä»¤åˆ›å»ºçš„mdæ–‡ä»¶ï¼Œæ‰“å¼€åˆ›å»ºçš„mdæ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ æ–‡ä»¶ä¿å­˜åï¼Œéœ€è¦åœ¨é¡¹ç›®è·¯å¾„ä¸‹ä½¿ç”¨å‘½ä»¤æ¸…ç†ä¸€ä¸‹ hexo clean å†ç”Ÿæˆè¿™ä¸ªé¡¹ç›® hexo g åœ¨æœ¬åœ°å¯åŠ¨çœ‹ä¸€ä¸‹æ•ˆæœ hexo s å¯ä»¥çœ‹åˆ°åˆšæ‰å†™çš„é‚£ç¯‡åšå®¢å·²ç»åœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºäº†ï¼Œæ¥ä¸‹æ¥å†å°†è¿™ä¸ªé¡¹ç›®éƒ¨ç½²åˆ°Githubä¸Š hexo d ","date":"2020-03-01","objectID":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/:4:0","tags":["Hexo","blog"],"title":"ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºåšå®¢æµç¨‹","uri":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/"},{"categories":["tool"],"content":"æ›´æ¢ä¸»é¢˜ æ–‡ç« èƒ½å†™äº†ï¼Œä¹Ÿèƒ½éƒ¨ç½²åˆ°Githubä¸Šäº†ï¼Œä½†æ˜¯è¿™ä¸ªåšå®¢çœ‹èµ·æ¥ä¸æ˜¯å¤ªç¾è§‚ï¼Œç»™å®ƒæ¢ä¸€ä¸ªä¸»é¢˜ã€‚ æ¨èNexTä¸»é¢˜ï¼Œå®˜æ–¹æ–‡æ¡£å¾ˆæ¸…æ¥šï¼Œä½¿ç”¨äººæ•°å¾ˆå¹¿ï¼Œç½‘ä¸Šè§£å†³é—®é¢˜çš„æ–¹æ¡ˆä¹Ÿå¾ˆæˆç†Ÿ NexTçš„è¯´æ˜æ–‡æ¡£åœ°å€ï¼šhttp://theme-next.iissnan.com/ è¿™é‡Œä½¿ç”¨çš„æ˜¯icarusè¿™ä¸ªä¸»é¢˜ã€‚ è¿™æ˜¯icarusä¸»é¢˜é¡¹ç›®åœ°å€ï¼šhttps://github.com/ppoffice/hexo-theme-icarus ç‚¹å‡»Clone or downloadï¼Œç„¶åå¤åˆ¶Cloneåœ°å€ã€‚ ä½¿ç”¨ç»ˆç«¯å·¥å…·è¿›å…¥åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼Œç„¶åä½¿ç”¨gitçš„å…‹éš†å‘½ä»¤ï¼Œå¹¶ä¸”æŒ‡å®šåˆ°themesæ–‡ä»¶å¤¹ä¸‹çš„icarusæ–‡ä»¶å¤¹ä¸‹ã€‚ git clone https://github.com/ppoffice/hexo-theme-icarus.git themes/icarus å¦‚æœä¸‹è½½æˆåŠŸï¼Œé‚£ä¹ˆåœ¨D:\\blog\\demo\\themesä¸‹é¢å°±ä¼šå¤šå‡ºä¸€ä¸ªå«icarusçš„æ–‡ä»¶å¤¹ï¼Œlandscapeæ˜¯åˆ›å»ºåšå®¢é¡¹ç›®çš„æ—¶å€™é»˜è®¤ä¸‹è½½çš„ã€‚ ç„¶åä¿®æ”¹åšå®¢é¡¹ç›®ä¸­çš„_config.ymlæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯D:\\blog\\demoè·¯å¾„ä¸‹çš„_config.ymlæ–‡ä»¶ã€‚ æ‰¾åˆ°themeç„¶åå°†landscapeæ”¹ä¸ºicarus ç„¶åå†ä½¿ç”¨å‘½ä»¤é‡æ–°ç”Ÿæˆä¸€ä¸‹åšå®¢ hexo clean ç„¶åè¿™é‡ŒæŠ¥é”™äº†ï¼ˆå…¶ä»–ä¸»é¢˜å¯èƒ½ä¸ä¼šæŠ¥é”™ï¼‰ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ INFO Checking dependencies ERROR Package cheerio is not installed. ERROR Please install the missing dependencies from the root directory of your Hexo site. åŸå› æ˜¯ç¼ºå°‘cheerioä¾èµ–é¡¹ï¼Œä½¿ç”¨cnpmå°†cheerioå®‰è£…åˆ°å½“å‰é¡¹ç›®ä¸­ï¼Œ cnpm install cheerio -s å†ä½¿ç”¨hexo cleanå‘½ä»¤ï¼Œè¿™æ—¶å€™ä¼šæç¤º INFO Checking dependencies INFO Validating the configuration file WARN themes\\icarus\\_config.yml is not found. We are creating one for you... INFO themes\\icarus\\_config.yml is created. Please restart Hexo to apply changes. æ„æ€æ˜¯è¯´icarusä¸»é¢˜ä¸­ç¼ºå°‘_config.ymlæ–‡ä»¶ï¼Œå·²ç»è‡ªåŠ¨ç”Ÿæˆäº†ï¼Œæ¥ç€å†ä½¿ç”¨hexo cleanå‘½ä»¤ï¼Œå·²ç»æ­£å¸¸äº†ï¼Œç„¶åå†ç”Ÿæˆä¸€ä¸‹åšå®¢ï¼Œå¹¶ä¸”å¯åŠ¨å®ƒ hexo g hexo s ç°åœ¨åšå®¢çš„æ ·å¼å°±å¾ˆå¥½çœ‹äº† ç„¶åå°†é¡¹ç›®éƒ¨ç½²åˆ°Githubä¸Šå°±å¯ä»¥é€šè¿‡urlè®¿é—®äº†ã€‚ ","date":"2020-03-01","objectID":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/:5:0","tags":["Hexo","blog"],"title":"ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºåšå®¢æµç¨‹","uri":"/posts/%E4%BD%BF%E7%94%A8hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B/"},{"categories":["ç½‘ç»œçˆ¬è™«","Python"],"content":"åœ¨Pythonä¸­ï¼Œè¦å‘èµ·ä¸€ä¸ªè¯·æ±‚è·å–æœåŠ¡å™¨çš„å“åº”ï¼Œæˆ‘ä»¬ä¸éœ€è¦å»å…³å¿ƒè®¡ç®—æœºæ€ä¹ˆå»å‘èµ·çš„è¿™ä¸ªè¯·æ±‚ï¼Œæ›´ä¸éœ€è¦çŸ¥é“è®¡ç®—æœºåº•å±‚æ˜¯æ€æ ·å®ç°çš„è¿™ä¸ªé€šä¿¡ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨æˆ‘ä»¬çš„è¿™ä¸ªè¯·æ±‚çš„URLã€å‚æ•°ã€ç­‰ç­‰çš„ä¿¡æ¯ï¼Œè€Œè¿™ä¸€åˆ‡Pythonæ ‡å‡†åº“ä¸­çš„urllibåº“å·²ç»ä¸ºæˆ‘ä»¬å‡†å¤‡å¥½äº† urllibæ˜¯Pythonå†…ç½®çš„ä¸€ä¸ªHTTPè¯·æ±‚åº“ Python3 urllibåº“å®˜æ–¹æ–‡æ¡£åœ°å€ï¼šhttps://docs.python.org/3/library/urllib.html urllibåº“åŒ…å«å››ä¸ªåŸºæœ¬çš„URLæ¨¡å— æ¨¡å—åç§° ç”¨é€” urllib.request æ‰“å¼€å’Œè¯»å–URL urllib.error åŒ…å«äº†urllib.requestæŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ urllib.parse ç”¨äºè§£æURL urllib.robotparser ç”¨äºè§£ærobots.txtæ–‡ä»¶ ","date":"2020-03-01","objectID":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:0:0","tags":["Python","ç½‘ç»œçˆ¬è™«"],"title":"urllibåº“åŸºæœ¬ä½¿ç”¨","uri":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["ç½‘ç»œçˆ¬è™«","Python"],"content":"urllib.request æ¨¡æ‹Ÿæµè§ˆå™¨åƒæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œéœ€è¦ä½¿ç”¨çš„æ˜¯urllib.requestæ¨¡å—ï¼Œå…¶ä¸­æœ€åŸºç¡€çš„è¯·æ±‚æ–¹æ³•å°±æ˜¯urlopen()æ–¹æ³• urllib.request.urlopen(url, data=None, [timeout, ]*, cafile=None, capath=None, cadefault=False, context=None) urlå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±æ„é€ çš„Requestå¯¹è±¡ dataæ˜¯éœ€è¦å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ç”¨å¡«å†™ï¼Œé»˜è®¤ä¸ºNone timeoutè¶…æ—¶è®¾ç½®ï¼Œæ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œä¼ å…¥è¶…æ—¶æ—¶é—´åï¼Œå¦‚æœåœ¨æŒ‡å®šçš„æ—¶é—´å†…æœåŠ¡å™¨æ²¡æœ‰å“åº”åˆ™æŠ›å‡ºtime outå¼‚å¸¸ cafileå’Œcapathä»£è¡¨ CA è¯ä¹¦å’Œ CA è¯ä¹¦çš„è·¯å¾„ã€‚å¦‚æœä½¿ç”¨HTTPSåˆ™å¯èƒ½éœ€è¦ç”¨åˆ° contextå‚æ•°å¿…é¡»æ˜¯ssl.SSLContextç±»å‹ï¼Œç”¨æ¥æŒ‡å®šSSLè®¾ç½® è¯·æ±‚ç½‘é¡µ import urllib.request response = urllib.request.urlopen(\"http://www.baidu.com\") html = response.read() print(html.decode(\"utf-8\")) ä½¿ç”¨urlopenæ–¹æ³•è·å–åˆ°çš„æ˜¯ä¸€ä¸ªhttp.client.HTTPResponseå¯¹è±¡ ä½¿ç”¨read()æ–¹æ³•å°†responseä¸­çš„ç½‘é¡µæºä»£ç è¯»å‡ºæ¥ ä½¿ç”¨decode()æ–¹æ³•å°†è¯»å–å‡ºæ¥çš„ç½‘é¡µæºä»£ç ç¼–ç è½¬æ¢æˆutf-8ç¼–ç  å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•æŸ¥çœ‹http.client.HTTPResponseå¯¹è±¡çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼š response.getcode()ï¼Œè·å–çŠ¶æ€ç  response.readline()ï¼Œä»¥å­—èŠ‚æµ è¿”å›æ‰€æœ‰å¾—æ•°æ® ä»¥åˆ—è¡¨æ ¼å¼ä¿å­˜ response.getheaders()ï¼Œè·å–å“åº”å¤´ response.geturl()ï¼Œè·å–url è¯·æ±‚è¶…æ—¶è®¾ç½® åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œå¦‚æœæœåŠ¡å™¨è¯†åˆ«åˆ°æˆ‘ä»¬çš„çˆ¬è™«ä¸æ˜¯ä¸€ä¸ªæ­£å¸¸çš„å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½å°±ä¼šå»¶é•¿è¿”å›ç»“æœï¼Œç”šè‡³è¿”å›çš„ç»“æœæ˜¯è¿·æƒ‘æˆ‘ä»¬çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆå³è€—æ—¶ä¹Ÿæ²¡æ‹¿åˆ°æƒ³è¦çš„æ•°æ®ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯æœåŠ¡å™¨çš„è´Ÿè½½è¿‡é«˜ï¼Œé‚£ä¹ˆè¿”å›å“åº”çš„æ—¶é—´å°±ä¼šå»¶é•¿ã€‚ import urllib.request response = urllib.request.urlopen(\"http://tieba.baidu.com\", timeout=0.1) print(response.read().decode('utf-8')) ä»ä¸Šé¢çš„ä»£ç çœ‹ï¼Œä»…ä»…åªéœ€è¦ä¸¤è¡Œä»£ç å°±èƒ½ä»æœåŠ¡å™¨ä¸Šè·å–åˆ°ä¸€ä¸ªå“åº”ä½“ ä½†æ˜¯äº‹å®ä¸Šå¾ˆå¤šç½‘ç«™å¹¶æ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œå¤§å¤šæ•°æƒ…å†µæœåŠ¡å™¨ä¼šè¯»å–è¯·æ±‚ä¼ è¾“è¿‡å»çš„è¯·æ±‚ä½“ï¼Œç„¶åå»åˆ¤æ–­åˆ°åº•æ˜¯ä¸æ˜¯ä¸€ä¸ªæ­£å¸¸çš„å®¢æˆ·ç«¯ï¼Œå¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆå¾—åˆ°çš„å“åº”ä½“å°±æ˜¯ä¸æ­£å¸¸çš„æ•°æ®ã€‚ ","date":"2020-03-01","objectID":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:0:1","tags":["Python","ç½‘ç»œçˆ¬è™«"],"title":"urllibåº“åŸºæœ¬ä½¿ç”¨","uri":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["ç½‘ç»œçˆ¬è™«","Python"],"content":"urllib.parse å¤§å¤šæ•°æˆ‘ä»¬è¯·æ±‚çš„urlå¯èƒ½æ˜¯ä¸å›ºå®šçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½å°±é¢ä¸´ç€éœ€è¦å»æ„é€ urlï¼Œå› ä¸ºPythonæ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œè§£é‡Šå™¨åªæ”¯æŒASCIIç ï¼Œæ‰€ä»¥éœ€è¦å¯¹urlè¿›è¡Œç¼–ç  import urllib.request import urllib.parse import string def crawler(): basis_url = \"https://www.baidu.com/s?wd=\" key_word = \"ip\" url = basis_url + key_word encode_url = urllib.parse.quote(key_word, safe=string.printable) response = urllib.request.urlopen(encode_url) html = response.read().decode(\"utf-8\") print(html) if __name__ == \"__main__\": crawler() å½“å…³é”®å‚æ•°è¾ƒå¤šçš„æ—¶å€™å¯ä»¥æ„é€ ä¸ºdictï¼Œç„¶åä½¿ç”¨urlencode()æ¥è¿›è¡Œç¼–ç  import urllib.request import urllib.parse def crawler(): basis_url = \"http://www.baidu.com/s?\" params = { \"wd\": \"ç”·\", \"value\": \"20\" } encode_url = urllib.parse.urlencode(params) print(encode_url) url = basis_url + encode_url print(url) if __name__ == \"__main__\": crawler() æ³¨æ„ï¼šç»è¿‡urlencodeç¼–ç åçš„urlå·²ç»æ˜¯ASCIIç äº†ï¼Œä½†æ˜¯å¦‚æœè¿˜æ˜¯é—®é¢˜ï¼Œé‚£ä¹ˆå°±å†ä½¿ç”¨quoteç¼–ç ä¸€æ¬¡ ","date":"2020-03-01","objectID":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:0:2","tags":["Python","ç½‘ç»œçˆ¬è™«"],"title":"urllibåº“åŸºæœ¬ä½¿ç”¨","uri":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["ç½‘ç»œçˆ¬è™«","Python"],"content":"dataå‚æ•° åœ¨è¯·æ±‚æŸäº›ç½‘é¡µæ—¶éœ€è¦æºå¸¦ä¸€äº›æ•°æ®ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ° data params éœ€è¦è¢«è½¬ç æˆå­—èŠ‚æµï¼Œè€Œ params æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ urllib.parse.urlencode() å°†å­—å…¸è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå†ä½¿ç”¨ bytes() è½¬ä¸ºå­—èŠ‚æµï¼Œæœ€åä½¿ç”¨ urlopen() å‘èµ·è¯·æ±‚ï¼Œè¯·æ±‚æ˜¯æ¨¡æ‹Ÿç”¨ POST æ–¹å¼æäº¤è¡¨å•æ•°æ® import urllib.request import urllib.parse def crawler(): form_data = { \"æµ‹è¯•\": \"postè¯·æ±‚\", \"ç¼–ç¨‹è¯­è¨€\": \"æ´¾æ£®\" } data = bytes(urllib.parse.urlencode(form_data), encoding=\"utf-8\") response = urllib.request.urlopen(\"http://httpbin.org/post\", data=data) print(response.read()) if __name__ == \"__main__\": crawler() è¿”å›çš„æ•°æ®ä¸­å°±å¯ä»¥çœ‹åˆ°ä¸Šé¢æäº¤çš„æ•°æ®ï¼Œåªæ˜¯æ•°æ®æ˜¯ç»è¿‡ç¼–ç çš„ è¿™ä¸ªhttp://httpbin.orgæ˜¯ä¸€ä¸ªç”¨æ¥åšHTTPè¯·æ±‚æµ‹è¯•çš„ç½‘ç«™ å®æˆ˜1ï¼šåˆ©ç”¨å¿…åº”ç¿»è¯‘APIï¼Œå¼€å‘ä¸€ä¸ªç¿»è¯‘ç¨‹åº å¿…åº”ç¿»è¯‘urlï¼šhttps://cn.bing.com/translator/ è¿›å…¥ç½‘ç«™ï¼Œæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œå®šä½åˆ°Network ç„¶ååœ¨å¿…åº”ç¿»è¯‘çš„æ–‡æœ¬æ¡†è¾“å…¥ç¿»è¯‘çš„å†…å®¹ï¼Œæ¯”å¦‚è¯´çˆ¬è™«ï¼Œç„¶åæ³¨æ„Networdä¸­çš„å˜åŒ–ï¼Œä¼šå‡ºç°å¾ˆå¤šé€šä¿¡çš„è¯·æ±‚APIï¼Œç„¶åæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ç¿»è¯‘çš„APIï¼Œè·å–åˆ°çœŸå®çš„URLåœ°å€ï¼Œä»¥åŠä¼ è¾“çš„ä¿¡æ¯ æ‰“å¼€ttranslatev3?isâ€¦â€¦è¿™ä¸ªå“åº”ä¿¡æ¯ï¼Œå¾€ä¸‹æ‹‰å°±å¯ä»¥å‘ç°Form Dataä¸­çš„textçš„å€¼å°±æ˜¯æˆ‘ä»¬éœ€è¦ç¿»è¯‘çš„æ–‡å­— æ‰“å¼€Previewè¿™ä¸€é¡¹ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œé¢çš„textçš„å€¼å°±æ˜¯ç¿»è¯‘çš„ç»“æœ ä¸Šé¢çš„æŠ“åŒ…è¿‡ç¨‹å¯ä»¥å¤šå°è¯•å‡ æ¬¡ ç„¶åå›åˆ°Headersä¸­ï¼Œåœ¨Generalä¸­å¯ä»¥çœ‹åˆ°è¿™æ¬¡è¯·æ±‚çš„åŸºæœ¬ä¿¡æ¯ï¼Œå…¶ä¸­Request URLå°±æ˜¯çœŸå®çš„urlï¼ŒRequest Methodå°±æ˜¯è¯·æ±‚æ–¹å¼ï¼ŒStatus Codeæ˜¯è¿™æ¬¡è¯·æ±‚çš„çŠ¶æ€ç ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨çœŸå®çš„urlå»å‘èµ·è¯·æ±‚ å®ä¾‹ç¨‹åºå¦‚ä¸‹ï¼š import urllib.parse import urllib.request def crawler(): url = \"https://cn.bing.com/ttranslatev3?isVertical=1\u0026\u0026IG=2B73CBCDC8F54EAFABF49389E29DC19A\u0026IID=translator.5028.2\" form_data = { \"fromLang\": \"auto-detect\", \"text\": \"çˆ¬è™«\", \"to\": \"en\" } data = bytes(urllib.parse.urlencode(form_data), encoding='utf8') response = urllib.request.urlopen(url, data=data) print(response.read().decode('utf-8')) if __name__ == \"__main__\": crawler() import urllib.request import urllib.parse class BingSpider(object): def __init__(self): self.url = \"https://cn.bing.com/ttranslatev3?isVertical=1\u0026\u0026IG=4FEF33F31181435589194F495E9386B0\u0026IID=translator.5028.2\" self.from_data = { \"fromLang\": \"auto-detect\", \"text\": \"çˆ¬è™«\", \"to\": \"en\" } def crawl(self): \"\"\" çˆ¬è™«ä¸‹è½½æ¨¡å— \"\"\" data = bytes(urllib.parse.urlencode(self.from_data), encoding=\"utf-8\") response = urllib.request.urlopen(url=self.url, data=data) r = response.read().decode(\"utf-8\") print(r) def run(self): \"\"\" çˆ¬è™«è°ƒåº¦æ¨¡å— \"\"\" self.crawl() if __name__ == \"__main__\": spider = BingSpider() spider.run() ","date":"2020-03-01","objectID":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:0:3","tags":["Python","ç½‘ç»œçˆ¬è™«"],"title":"urllibåº“åŸºæœ¬ä½¿ç”¨","uri":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["ç½‘ç»œçˆ¬è™«","Python"],"content":"æ„é€ Requestå¯¹è±¡ urlopen()å¯ä»¥æ”¯æ’‘æˆ‘ä»¬çš„ä¸€äº›ç®€å•çš„è¯·æ±‚ï¼Œä½†æ˜¯è¯·è®°ä½ï¼Œä¸€ä¸ªæ²¡æœ‰è¯·æ±‚å¤´çš„çˆ¬è™«æ˜¯æ²¡æœ‰çµé­‚çš„ã€‚è™½ç„¶ä¸ä½¿ç”¨è¯·æ±‚å¤´ä¹Ÿå¯ä»¥è®¿é—®ä¸€äº›ç½‘é¡µï¼Œä½†æ˜¯è¿™æ ·çš„è¡Œä¸ºæ˜¯ç›´æ¥å‘Šè¯‰æœåŠ¡å™¨â€œæˆ‘æ˜¯ä¸€ä¸ªçˆ¬è™«â€ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å¯èƒ½å°±ä¼šæ‹’ç»ç¨‹åºçš„è¯·æ±‚ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¿›è¡Œä¼ªè£…ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å»æ„é€ æˆ‘ä»¬çš„HTTPè¯·æ±‚ä½“ï¼Œä¸€ä¸ªRequestå¯¹è±¡ã€‚ import urllib.request def crawler(): url = \"https://maoyan.com/\" request = urllib.request.Request(url=url) response = urllib.request.urlopen(request) print(response.read().decode('utf-8')) if __name__ == '__main__': crawler() æ‰§è¡Œä¸Šé¢çš„ç¨‹åºï¼Œç¨‹åºå°†æŠ›å‡ºå¼‚å¸¸urllib.error.HTTPError: HTTP Error 403: Forbiddenï¼Œè¿™æ˜¯æœåŠ¡å™¨ç¦æ­¢è®¿é—®æ—¶ç¨‹åºäº§ç”Ÿçš„é”™è¯¯ã€‚ å…ˆçœ‹ä¸€ä¸‹æˆ‘ä»¬ä¸ä¼ªè£…çˆ¬è™«æ—¶çš„è¯·æ±‚å¤´æ˜¯ä»€ä¹ˆæ ·çš„ import urllib.request def crawler(): url = \"http://www.httpbin.org/headers\" headers = { \"User-agent\": \"Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50\" } response = urllib.request.urlopen(url) print(response.read().decode('utf-8')) if __name__ == '__main__': crawler() ä»è¿”å›çš„ä¿¡æ¯ä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªçˆ¬è™«çš„è¯·æ±‚å¤´ï¼ˆUser-agentï¼‰æ˜¯\"User-Agent\": \"Python-urllib/3.7\"ï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼ŒæœåŠ¡å™¨å¾ˆå®¹æ˜“å°±å¯çœ‹ç©¿æˆ‘ä»¬çš„çˆ¬è™« è¿™æ—¶å€™å°±éœ€è¦åŠ ä¸Šè¯·æ±‚å¤´æ¥ä¼ªè£…æˆ‘ä»¬çš„çˆ¬è™« urllib.request.Request(url, data=None, headers={}, origin_req_host=None, unverifiable=False, method=None) å…¶ä¸­headerså°±æ˜¯æˆ‘ä»¬è¦ä¼ é€’çš„å‚æ•° import urllib.request def crawler(): url = \"https://maoyan.com/\" headers = { \"User-agent\": \"Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50\" } request = urllib.request.Request(url=url, headers=headers) response = urllib.request.urlopen(request) print(response.read().decode('utf-8')) if __name__ == '__main__': crawler() ","date":"2020-03-01","objectID":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:0:4","tags":["Python","ç½‘ç»œçˆ¬è™«"],"title":"urllibåº“åŸºæœ¬ä½¿ç”¨","uri":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["ç½‘ç»œçˆ¬è™«","Python"],"content":"Handlerå’ŒOpenerDirector åŸå§‹çš„urlopen()æ–¹æ³•å·²ç»å¤Ÿå¼ºå¤§äº†ï¼Œä½†æ˜¯è¿™å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬æ„å»ºä¸€ä¸ªæ›´åŠ åƒæµè§ˆå™¨çš„çˆ¬è™«ï¼Œæ‰€ä»¥è¿™æ—¶å€™éœ€è¦æˆ‘ä»¬è‡ªå·±å»æ„é€ æˆ‘ä»¬çš„å¤„ç†å™¨ï¼ˆhandlerï¼‰ï¼Œç„¶åé€šè¿‡OpenerDirectorï¼ˆopenerï¼‰å»ä½¿ç”¨å¤„ç†å™¨ï¼Œå…¶å®urlopenå°±æ˜¯ä¸€ä¸ªPythonä¸ºæˆ‘ä»¬æ„é€ å¥½çš„openerã€‚ Handler èƒ½å¤„ç†è¯·æ±‚ï¼ˆHTTPã€HTTPSã€FTPç­‰ï¼‰ä¸­çš„å„ç§äº‹æƒ…ï¼Œå®ƒæ˜¯é€šè¿‡ urllib.request.BaseHandlerè¿™ä¸ªç±»æ¥å®ç°çš„ã€‚urllib.request.BaseHandleræ˜¯æ‰€æœ‰çš„ Handler çš„åŸºç±»ï¼Œå…¶æä¾›äº†æœ€åŸºæœ¬çš„Handlerçš„æ–¹æ³• å¸¸è§çš„Handlerç±»ï¼š ProxyHandlerï¼šä¸ºè¯·æ±‚è®¾ç½®ä»£ç† HTTPCookieProcessorï¼šå¤„ç† HTTP è¯·æ±‚ä¸­çš„ Cookies HTTPPasswordMgrï¼šç”¨äºç®¡ç†å¯†ç ï¼Œå®ƒç»´æŠ¤äº†ç”¨æˆ·åå¯†ç çš„è¡¨ã€‚ HTTPBasicAuthHandlerï¼šç”¨äºç™»å½•è®¤è¯ï¼Œä¸€èˆ¬å’Œ HTTPPasswordMgr ç»“åˆä½¿ç”¨ã€‚ cookie ä¸€ä¸ª Web ç«™ç‚¹å¯èƒ½ä¼šä¸ºæ¯ä¸€ä¸ªè®¿é—®è€…äº§ç”Ÿä¸€ä¸ªå”¯ä¸€çš„ID, ç„¶åä»¥ Cookie æ–‡ä»¶çš„å½¢å¼ä¿å­˜åœ¨æ¯ä¸ªç”¨æˆ·çš„æœºå™¨ä¸Šã€‚å¦‚æœä½¿ç”¨æµè§ˆå™¨è®¿é—® Web, ä¼šçœ‹åˆ°æ‰€æœ‰ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šçš„ Cookieã€‚åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œæ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç”±â€œé”®/å€¼â€å¯¹ç»„æˆçš„æ–‡æœ¬æ–‡ä»¶,å¦å¤–è¿˜æœ‰ä¸€ä¸ªæ–‡ä»¶ä¿å­˜æœ‰æ‰€æœ‰å¯¹åº”çš„ Web ç«™ç‚¹çš„ä¿¡æ¯ å½“å®¢æˆ·ç«¯å†æ¬¡è®¿é—®è¿™ä¸ª Web ç«™ç‚¹æ—¶è¿™äº›ä¿¡æ¯å¯ä¾›è¯¥ç«™ç‚¹ä½¿ç”¨ã€‚ç”±äºâ€œCookieâ€å…·æœ‰å¯ä»¥ä¿å­˜åœ¨æœ¬åœ°å®¢æˆ·ç«¯ä¸Šçš„ç¥å¥‡ç‰¹æ€§, å› æ­¤å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°è®°å½•ç”¨æˆ·ä¸ªäººä¿¡æ¯çš„åŠŸèƒ½ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨cookieé¿å…ä¸€äº›ä¸è¦ç™»å½•è®¤è¯æˆ–è€…æ¥å®Œå–„çš„ä¼ªè£…æˆ‘ä»¬çš„çˆ¬è™« import http.cookiejar import urllib.request def crawler(): url = \"http://tieba.baidu.com/\" headers = { \"User-agent\": \"Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50\", \"Cookie\": \"cookies\" } request = urllib.request.Request(url,headers=headers) cookie = http.cookiejar.CookieJar() handler = urllib.request.HTTPCookieProcessor(cookie) opener = urllib.request.build_opener(handler) response = opener.open(requests) if __name__ == \"__main__\": crawler() å¦‚æœåœ¨æ„é€ å®Œopeneråä½¿ç”¨urllib.request.install_opener(opener)ï¼Œé‚£ä¹ˆæ„é€ çš„è¿™ä¸ªopenerå°†æ˜¯ä¸€ä¸ªå…¨å±€çš„openerï¼Œå¦‚æœä¹‹åå‡¡æ˜¯è°ƒç”¨urlopenæ–¹æ³•å°†ä¼šä½¿ç”¨è¿™ä¸ªå…¨å±€çš„openeræ–¹æ³• å®æˆ˜äºŒï¼šBç«™è¯„è®º æ‰¾ä¸€ä¸ªæˆ‘ä»¬éƒ½å–œæ¬¢çš„åœŸå‘³è§†é¢‘ï¼Œæ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·è°ƒåˆ°Networkï¼Œç„¶åå°†é¡µé¢æ‹‰åˆ°ä¸‹é¢çš„è¯„è®ºæ¡†ï¼Œå‘é€ä¸€æ¡è¯„è®º ç„¶åæˆ‘å¯ä»¥å¾ˆè½»æ¾çš„çœ‹åˆ°æœåŠ¡å™¨ç»™æˆ‘ä»¬çš„æµè§ˆå™¨è¿”å›äº†ä¸€ä¸ªåå­—å«åšaddçš„åŒ… ç‚¹è¿›å»ä¹‹åå¯ä»¥çœ‹åˆ°åˆšæ‰å‘é€çš„è¯„è®ºï¼Œä»¥åŠè¿™ä¸ªè§†é¢‘çš„oidï¼Œå¯ä»¥å¤šå‘é€å‡ æ¡æŸ¥çœ‹ä¸€ä¸‹Request Headerså’ŒForm Dataå“ªäº›å‚æ•°ä¼šå˜åŒ–ï¼Œä¼šå‘ç”Ÿå˜åŒ–çš„å‚æ•°åˆ†åˆ«æ˜¯Content-Lengthè¿™ä¸ªæ˜¯è¯„è®ºçš„é•¿åº¦ã€oidæ˜¯è§†é¢‘çš„idï¼Œä»¥åŠmessage import urllib.request import http.cookiejar import urllib.parse import gzip def crawler(): url = \"https://api.bilibili.com/x/v2/reply/add\" form_data = { \"oid\": \"type\": 1, \"message\": \"plat\": 1, \"jsonp\": \"jsonp\", \"csrf\": \"ebfe0e90c2867d672bfcbe62fb1b257c\" } headers = { \"User-agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36\", \"Host\": \"api.bilibili.com\", \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\", \"Accept\": \"application/json, text/javascript, */*; q=0.01\", \"Accept-Encoding\": \"gzip, deflate, br\", \"Accept-Language\": \"zh-CN,zh;q=0.9\", \"Connection\": \"keep-alive\", \"Origin\": \"https://www.bilibili.com\", \"Referer\": \"https://www.bilibili.com/video/av88366823\", \"Cookie\": } data = bytes(urllib.parse.urlencode(form_data), encoding=\"utf-8\") request = urllib.request.Request(url,headers=headers, data=data) cookie = http.cookiejar.CookieJar() handler = urllib.request.HTTPCookieProcessor(cookie) opener = urllib.request.build_opener(handler) response = opener.open(request) response = gzip.GzipFile(fileobj=response) print(response.read().decode(\"utf-8\")) if __name__ == '__main__': crawler() ","date":"2020-03-01","objectID":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:0:5","tags":["Python","ç½‘ç»œçˆ¬è™«"],"title":"urllibåº“åŸºæœ¬ä½¿ç”¨","uri":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["ç½‘ç»œçˆ¬è™«","Python"],"content":"ä»£ç† å†™çˆ¬è™«ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯è¦ä½¿ç”¨ä»£ç†çš„ï¼Œå¦‚æœæˆ‘ä»¬è¯·æ±‚è¯¥ç½‘ç«™é¢‘ç‡è¿‡é«˜ï¼Œè¯¥ç½‘ç«™ä¼šè¢«å° IPï¼Œç¦æ­¢æˆ‘ä»¬çš„è®¿é—® é€æ˜ä»£ç† ä»£ç†æœåŠ¡å™¨å°†å®¢æˆ·ç«¯çš„ä¿¡æ¯è½¬å‘è‡³ç›®æ ‡è®¿é—®å¯¹è±¡ï¼Œå¹¶æ²¡æœ‰å®Œå…¨éšè—å®¢æˆ·ç«¯çœŸå®çš„èº«ä»½ã€‚å³æœåŠ¡å™¨çŸ¥é“å®¢æˆ·ç«¯ä½¿ç”¨äº†ä»£ç†IPï¼Œå¹¶ä¸”çŸ¥é“å®¢æˆ·ç«¯çš„çœŸå®IPåœ°å€ã€‚ æ™®é€šåŒ¿åä»£ç† ä»£ç†æœåŠ¡å™¨ç”¨è‡ªå·±çš„IPä»£æ›¿äº†å®¢æˆ·ç«¯çš„çœŸå®IPï¼Œä½†æ˜¯å‘Šè¯‰äº†ç›®æ ‡è®¿é—®å¯¹è±¡è¿™æ˜¯ä»£ç†è®¿é—®ã€‚ é«˜åŒ¿ä»£ç† ä»£ç†æœåŠ¡å™¨è‰¯å¥½åœ°ä¼ªè£…äº†å®¢æˆ·ç«¯ï¼Œä¸ä½†ç”¨ä¸€ä¸ªéšæœºçš„IPä»£æ›¿äº†å®¢æˆ·ç«¯çš„IPï¼Œä¹Ÿéšè—äº†ä»£ç†ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ä¸ä¼šå¯Ÿè§‰åˆ°å®¢æˆ·ç«¯æ˜¯é€šè¿‡ä»£ç†å®ç°è®¿é—®çš„ï¼Œå³ç”¨æˆ·ä»¿ä½›å°±æ˜¯ç›´æ¥ä½¿ç”¨ä»£ç†æœåŠ¡å™¨ä½œä¸ºè‡ªå·±çš„å®¢æˆ·ç«¯ã€‚ import urllib.request def spider(): url = \"http://www.httpbin.org/ip\" proxy = { \"http\": \"110.243.2.58:9999\", \"http\": \"117.69.150.100:9999\" } proxy_handler = urllib.request.ProxyHandler(proxy) opener = urllib.request.build_opener(proxy_handler) urllib.request.install_opener(opener) request = urllib.request.Request(url) response = urllib.request.urlopen(request) print(response.read().decode(\"utf-8\")) if __name__ == \"__main__\": spider() ","date":"2020-03-01","objectID":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:0:6","tags":["Python","ç½‘ç»œçˆ¬è™«"],"title":"urllibåº“åŸºæœ¬ä½¿ç”¨","uri":"/posts/urllib%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["Python"],"content":"Pythonä¸­çš„listå¯¹è±¡æ˜¯Pythonä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼Œè€Œliståˆ‡ç‰‡æ˜¯è®©listå¯¹è±¡å˜å¾—çµæ´»ä¸”æ–¹ä¾¿æ“ä½œçš„å¯¹è±¡ï¼Œå¯¹ï¼åˆ‡ç‰‡ä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼ åˆ‡ç‰‡æ˜¯æˆ‘ä»¬ä¸­æ–‡çš„ç§°å‘¼ï¼Œå®˜æ–¹çš„å«æ³•æ˜¯sliceï¼ sliceçš„è¿ç”¨ è¦æƒ³æ˜ç™½sliceçš„å®ç°åŸç†ï¼Œè‚¯å®šè¦å…ˆæ˜ç™½sliceçš„è¿ç”¨ã€‚ åˆ‡ç‰‡æ¨¡å¼ï¼š[start:end:step] startè¡¨ç¤ºåˆ‡ç‰‡å¼€å§‹çš„ä½ç½®ï¼Œé»˜è®¤ä¸º0 endè¡¨ç¤ºåˆ‡ç‰‡æˆªè‡³ï¼ˆä½†ä¸åŒ…å«ï¼‰ä½ç½®ï¼ˆé»˜è®¤ä¸ºåˆ—è¡¨é•¿åº¦ï¼‰ stepè¡¨ç¤ºåˆ‡å–æ•°æ®çš„æ­¥é•¿ï¼ˆé»˜è®¤ä¸º1ï¼‰ å½“startä¸º0æ—¶å¯ä»¥çœç•¥ï¼Œå½“endä¸ºåˆ—è¡¨é•¿åº¦æ—¶å¯ä»¥çœç•¥ å½“stepä¸º1æ—¶å¯ä»¥çœç•¥ï¼Œå¹¶ä¸”çœç•¥æ­¥é•¿æ—¶å¯ä»¥åŒæ—¶çœæ‰ä¸€ä¸ªå†’å· å½“stepä¸ºè´Ÿæ•´æ•°æ—¶ï¼Œè¡¨ç¤ºåå‘åˆ‡ç‰‡ï¼Œè¿™æ—¶startåº”è¯¥è¦æ¯”endçš„å€¼å¤§æ‰è¡Œ è¿”å›åŒ…å«åŸåˆ—è¡¨æ‰€æœ‰å…ƒç´ çš„æ–°åˆ—è¡¨ \u003e\u003e\u003e int_list = [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] \u003e\u003e\u003e my_list = int_list[:] ä¸Šé¢çš„è¿”å›ç»“æœè™½ç„¶å’ŒåŸæ¥æ˜¯ç›¸åŒçš„ï¼Œä¸è¿‡æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥çœ‹æˆæ˜¯æ·±æ‹·è´ï¼Œç”±äºendã€stepçš„é•¿åº¦éƒ½æ˜¯é»˜è®¤çš„ï¼Œæ‰€ä»¥ä»–å¯ä»¥ä¸å†™ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥åªå†™ä¸€ä¸ªå†’å·ï¼ˆ:ï¼‰ã€‚å¯¹äºIntListå’ŒMyListåˆ°åº•æ˜¯ä¸æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡åœ°å€æ¥ç¡®å®š \u003e\u003e\u003e id(int_list) \u003e\u003e\u003e id(my_list) è¾“å‡ºçš„ä¸¤ä¸ªåœ°å€è‚¯å®šæ˜¯ä¸åŒçš„ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆåœ°å€ä¸åŒå°±æ˜¯ä¸¤ä¸ªå¯¹è±¡ \u003e\u003e\u003e a = [1, 2, 3] \u003e\u003e\u003e b = a \u003e\u003e\u003e id(a) 1897328218248 \u003e\u003e\u003e id(b) 1897328218248 \u003e\u003e\u003e b[2] = 30 \u003e\u003e\u003e a [1, 2, 30] å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§é€šè¿‡æµ…æ‹·è´è€Œæ¥çš„å¯¹è±¡ï¼Œæœ¬è´¨ä¸Šæ˜¯å°†è¿™ä¸ªåˆ—è¡¨çš„å¼•ç”¨èµ‹å€¼ç»™äº†å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯åœ¨å†…å­˜ä¸­æ–°å¼€è¾Ÿå†…å­˜ç©ºé—´ç”¨æ¥å­˜æ”¾ä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ è¿”å›åŒ…å«åŸåˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„é€†åºåˆ—è¡¨ \u003e\u003e\u003e int_list = [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] \u003e\u003e\u003e int_list[::-1] [17, 15, 13, 11, 9, 8, 7, 6, 5, 4, 3] éš”ä¸€ä¸ªå–ä¸€ä¸ªï¼Œè·å–å¶æ•°ä½ç½®çš„å…ƒç´  \u003e\u003e\u003e int_list = [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] \u003e\u003e\u003e int_list[::2] [3, 5, 7, 9, 13, 17] éš”ä¸€ä¸ªå–ä¸€ä¸ªï¼Œè·å–å¥‡æ•°ä½ç½®çš„å…ƒç´  \u003e\u003e\u003e int_list = [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] \u003e\u003e\u003e int_list[1::2] [4, 6, 8, 11, 15] æŒ‡å®šåˆ‡ç‰‡å¼€å§‹å’Œç»“æŸçš„ä½ç½® \u003e\u003e\u003e int_list = [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] \u003e\u003e\u003e int_list[3:6] [6, 7, 8] åˆ‡ç‰‡çš„é•¿åº¦å¤§äºåˆ—è¡¨çš„é•¿åº¦æ—¶ä»åˆ—è¡¨å°¾éƒ¨å¼€å§‹æˆªæ–­ \u003e\u003e\u003e int_list = [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] \u003e\u003e\u003e int_list[3:100] [6, 7, 8, 9, 11, 13, 15, 17] åˆ‡ç‰‡çš„å¼€å§‹ä½ç½®å¤§äºåˆ—è¡¨é•¿åº¦æ—¶ï¼Œè¿”å›ç©ºåˆ—è¡¨ \u003e\u003e\u003e int_list = [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] \u003e\u003e\u003e int_list[100:] [] åœ¨åˆ—è¡¨å°¾éƒ¨æ’å…¥å…ƒç´  \u003e\u003e\u003e int_list = [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] \u003e\u003e\u003e int_list[len(int_list):] = [0, 0] \u003e\u003e\u003e int_list [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17, 0, 0] å¯ä»¥çœ‹åˆ°è¿™ä¸€ç§åˆ‡ç‰‡æ“ä½œå·²ç»æ”¹å˜äº†åŸæ¥çš„IntListå¯¹è±¡ï¼Œç›¸å½“äºIntList += [0, 0]ï¼Œè€Œä¸”å¢åŠ çš„åˆ—è¡¨é•¿åº¦ä¸æ˜¯å›ºå®šçš„ã€‚ åœ¨åˆ—è¡¨å¤´éƒ¨æ’å…¥å…ƒç´  \u003e\u003e\u003e int_list = [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] \u003e\u003e\u003e int_list[:0] = [1, 2] \u003e\u003e\u003e int_list [1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] è¿™ç§æ–¹æ³•ç›¸å½“äº[1, 2] += IntList åœ¨åˆ—è¡¨ä¸­é—´ä½ç½®æ’å…¥å…ƒç´  \u003e\u003e\u003e int_list = [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] \u003e\u003e\u003e int_list[3:3] = [0] \u003e\u003e\u003e int_list [3, 4, 5, 0, 6, 7, 8, 9, 11, 13, 15, 17] è¿™ç§æ’å…¥æ–¹å¼ä¹Ÿå¯ä»¥å°†å…ƒç´ æ›´æ”¹ \u003e\u003e\u003e int_list = [3, 4, 5, 6, 7, 8, 9, 11, 13, 15, 17] \u003e\u003e\u003e int_list[1:2] = ['a', 'b'] \u003e\u003e\u003e int_list [3, 'a', 'b', 5, 6, 7, 8, 9, 11, 13, 15, 17] å…¶å®ä¸Šé¢çš„ä¸‰ç§æ’å…¥å…ƒç´ çš„æ–¹å¼å«åšè®¾ç½®æ›´åˆé€‚ï¼Œæ€»ç»“ä¸ºä»¥ä¸‹ä¸¤ç‚¹ï¼š å½“å†’å·å‰åä½ç½®ç›¸åŒæ—¶ï¼Œåœ¨åŸåˆ—è¡¨æŒ‡å®šä½ç½®å‰æ’å…¥æŒ‡å®šå…ƒç´  å½“ä½ç½®ä¸åŒæ—¶ï¼Œå°†æŒ‡å®šå…ƒç´ è®¾ç½®åˆ°åŸåˆ—è¡¨æŒ‡å®šä½ç½® å°†ä¸€ä¸ªåˆ—è¡¨ä¸­çš„å…ƒç´ ä»¥åˆ—è¡¨ä¸ºå•ä½å¤åˆ¶å¤šä»½ \u003e\u003e\u003e int_list = [1, 2, 3] \u003e\u003e\u003e int_list * 3 [1, 2, 3, 1, 2, 3, 1, 2, 3] æ¯ä¸€ä»½éƒ½æ˜¯æ¥ç€ä¸Šä¸€ä»½çš„ç»“å°¾çš„ éš”ä¸€ä¸ªä¿®æ”¹ä¸€ä¸ª \u003e\u003e\u003e int_list = [1, 2, 3, 4, 5, 6] \u003e\u003e\u003e int_list[::2] = [0] * 3 \u003e\u003e\u003e int_list [0, 2, 0, 4, 0, 6] ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå·¦åˆ‡ç‰‡ä¸è¿ç»­çš„æ—¶å€™ï¼Œç­‰å·ä¸¤è¾¹çš„åˆ‡ç‰‡é•¿åº¦å¿…é¡»ç›¸ç­‰ï¼Œåƒä¸Šé¢çš„ä»£ç ä¸­ï¼Œå·¦è¾¹åˆ‡ç‰‡IntList[::2]çš„é•¿åº¦æ˜¯3ï¼Œ[0] * 3çš„é•¿åº¦ä¹Ÿæ˜¯3ï¼Œé•¿åº¦ä¸ç›¸åŒçš„è¯æ˜¯ä¼šæŠ¥é”™çš„ï¼Œä¾‹å¦‚ä¸‹é¢çš„ç¨‹åº \u003e\u003e\u003e a = [1, 2, 3, 4, 5, 6, 7, 8, 9] \u003e\u003e\u003e a[::2] = [0] * 3 Traceback (most recent call last): File \"\u003cstdin\u003e\", line 1, in \u003cmodule\u003e ValueError: attempt to assign sequence of size 3 to extended slice of size 5 è¿™é‡Œå°±æŠ¥é”™äº†ï¼ŒåŸå› æ˜¯å·¦è¾¹çš„åˆ‡ç‰‡é•¿åº¦æ˜¯5ï¼Œè€Œå³è¾¹çš„åˆ‡ç‰‡é•¿åº¦æ˜¯3ã€‚ åˆ é™¤åˆ—è¡¨ä¸­çš„å…ƒç´  \u003e\u003e\u003e int_list = [1,2,3,4,5,6,7,8,9] \u003e\u003e\u003e int_list[:3] = [] \u003e\u003e\u003e int_list [4, 5, 6, 7, 8, 9] ä¸Šé¢çš„ç¨‹åºç›¸å½“äºdel int_list[:3] æ”¯æŒåˆ‡ç‰‡çš„å¯¹è±¡ ä¸€ä¸ªå¯¹è±¡è¦æƒ³æ”¯æŒåˆ‡ç‰‡æ“ä½œï¼Œé‚£ä¹ˆç”¨æ¥å®ä¾‹åŒ–å®ƒçš„ç±»å°±è¦å®ç°__getitem__è¿™ä¸ªé­”æ³•å‡½æ•° class College: def __init__(self, college_name, class_name, students): self.college_name = college_name self.class_name = class_name self.students = students # å®ç°åˆ‡ç‰‡æ“ä½œçš„å…³é”®å‡½æ•° __getitem__ def __getitem__(self, item): pass students = ['æå', \"å¼ ä¸‰\", \"ç‹äº”\", \"ç‹å¤§é”¤\"] college = College(college_name=\"ä¿¡å·¥\", class_name=\"Python\", students=students) print(college[:2]) ä¸Šé¢çš„ç¨‹åºè™½ç„¶æ²¡æœ‰è¾“å‡ºä»»ä½•çš„ä¸œè¥¿ï¼Œä½†æ˜¯æ²¡æœ‰æŠ¥é”™ï¼Œè¯´æ˜æ˜¯å¯ä»¥è¿›è¡Œåˆ‡ç‰‡æ“ä½œçš„ï¼Œä½†æ˜¯å°†__getitem__æ³¨é‡Šæ‰ä»¥åå°±ä¼šæŠ¥é”™ã€‚ å¯¹è±¡çš„åˆ‡ç‰‡æ“ä½œä¼šè‡ªåŠ¨è°ƒç”¨__getitem__å‡½æ•°ï¼Œå¯ä»¥ä¸ç”¨ç®¡å…¶ä»–çš„ä¸œè¥¿ï¼Œç„¶åå°†ä¸€åˆ‡éƒ½äº¤ç»™listå¤„ç†å°±å¥½äº† class College: def __init__(self, college_name, class_name, students): self.college_name = college_name self.class_name = class_name self.students = students # å®ç°åˆ‡ç‰‡æ“ä½œçš„å…³é”®å‡½æ•° __getitem__ def __getitem__(self, item): return self.students[item] students = ['æå', \"å¼ ä¸‰\", \"ç‹äº”\", \"ç‹å¤§é”¤\"] college = College(college_name=\"ä¿¡å·¥\", class_name=\"Python\", students=students) print(college[:2]) print(type(college)) sub_list = college[:2] print(type(sub_list)) ä¸Šé¢çš„ç¨‹åºè¿è¡Œåçš„ç»“æœå¦‚ä¸‹ ['æå', 'å¼ ä¸‰'] \u003cclass '__main__.College'\u003e \u003cclass 'list'\u003e å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶collegeå¯¹è±¡çš„ç±»å‹æ˜¯Collegeï¼Œä½†æ˜¯collegeç»è¿‡åˆ‡ç‰‡åè¿”å›å€¼å¯¹è±¡æ˜¯listç±»å‹ï¼Œå¸Œæœ›åˆ‡ç‰‡æ“ä½œåè¿”å›çš„å€¼çš„ç±»å‹è¿˜æ˜¯ä¸€ä¸ªCollegeç±»ï¼Œè€Œä¸”å½“ä½¿ç”¨ç´¢å¼•çš„æ—¶å€™èƒ½","date":"2020-01-24","objectID":"/posts/python-list%E5%88%87%E7%89%87/:0:0","tags":["Pyhton","é­”æ³•å‡½æ•°","list"],"title":"Liståˆ‡ç‰‡","uri":"/posts/python-list%E5%88%87%E7%89%87/"},{"categories":["å…¶ä»–"],"content":"ä½¿ç”¨å­¦ç”Ÿçš„èº«ä»½æ¥è–…JetBrainsçš„ç¾Šæ¯›ï¼ç”¨ä¸Šæ­£ç‰ˆçš„IDE ä½¿ç”¨å­¦ç”Ÿç‰¹æƒè·å–jet brainsäº§å“çš„å…è´¹ç‰¹æƒ ","date":"2020-01-15","objectID":"/posts/jetbrains%E5%AD%A6%E7%94%9F%E4%BC%98%E6%83%A0/:0:0","tags":["JetBrains"],"title":"ç”¨å­¦ç”Ÿèº«ä»½å…è´¹ä½¿ç”¨IDE","uri":"/posts/jetbrains%E5%AD%A6%E7%94%9F%E4%BC%98%E6%83%A0/"},{"categories":["å…¶ä»–"],"content":"æ³¨å†Œå­¦ç”Ÿé‚®ç®± æƒ³è¦ä½¿ç”¨æ•™è‚²ä¼˜æƒ ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ä¸ªå¤§å­¦ç”µå­é‚®ä»¶åœ°å€ï¼Œä¹Ÿå°±æ˜¯å­¦æ ¡çš„å­¦ç”Ÿé‚®ç®±ã€‚å› ä¸ºå­¦æ ¡å¯èƒ½ä¸åŒï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è‡ªå·±å»å­¦æ ¡çš„å®˜ç½‘æˆ–è€…æ˜¯å­¦æ ¡çš„ä¿¡æ¯ç½‘ç»œä¸­å¿ƒç½‘ç«™å»ç”³è¯·ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å…¨å‡­æœ¬äº‹ï¼ï¼ˆåç¬‘ï¼‰ ç”³è¯·çš„ç»“æœæ˜¯ä¸€ä¸ªç»“å°¾æ˜¯.edu.cnçš„é‚®ç®±ï¼Œä¸ç®¡å‰é¢æœ‰å¤šå°‘ä¸ªç‚¹ï¼Œä½†æ˜¯é‚®ç®±åœ°å€è‚¯å®šæ˜¯ä»¥.edu.cnç»“å°¾çš„ã€‚ ","date":"2020-01-15","objectID":"/posts/jetbrains%E5%AD%A6%E7%94%9F%E4%BC%98%E6%83%A0/:1:0","tags":["JetBrains"],"title":"ç”¨å­¦ç”Ÿèº«ä»½å…è´¹ä½¿ç”¨IDE","uri":"/posts/jetbrains%E5%AD%A6%E7%94%9F%E4%BC%98%E6%83%A0/"},{"categories":["å…¶ä»–"],"content":"ç”³è¯·JetBrainsçš„å…è´¹äº§å“ å¦‚æœè§‰å¾—ä¸‹é¢çš„ä¸œè¥¿æœ‰äº›è¿‡äºåºŸè¯ï¼ç›´æ¥æˆ³è¿™! æ³¨å†Œå®Œé‚®ç®±ä»¥åï¼Œå°±éœ€è¦è¿›å…¥JetBrainså®˜æ–¹ç½‘ç«™ï¼Œåœ¨ç½‘ç«™é¦–é¡µçš„åº•éƒ¨æœ‰ä¸€ä¸ªGet Student Packçš„é“¾æ¥ï¼Œç”­ç®¡è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Œæœ‰Studentè¿˜éœ€è¦å¤šæƒ³å—ï¼ç‚¹å®ƒï¼ è·³è½¬å‡ºæ¥çš„æ–‡ç« æ ‡é¢˜çš„Freeä¹Ÿæ˜¯ååˆ†çš„é†’ç›®ï¼Œå»ºè®®ç¿»è¯‘æˆä¸­æ–‡é˜…è¯»ä¸€ä¸‹ï¼Œç„¶åç‚¹å‡»APPLY NOW ç„¶åå°±è¿›å…¥äº†æ­£å¼ç”³è¯·çš„ç•Œé¢ï¼Œå»ºè®®é˜…è¯»ä¸€ä¸‹JetBrains Account Agreementï¼ˆJetBrainså¸æˆ·åè®®ï¼‰ã€‚ç”³è¯·é¡µé¢è¦æ³¨æ„Nameé‚£ä¸€æ ï¼Œå¦‚æœå¡«çš„æ˜¯ä¸­æ–‡ï¼Œé‚£ä¹ˆåœ¨æ‰“å¼€IDEçš„æ—¶å€™Licensed toåé¢çš„åå­—å°±ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚ ä¿¡æ¯å¡«å†™å®Œä¹‹åï¼Œç‚¹å‡»APPLY FOR FREE PRODUCTSï¼Œç„¶åè¿›å…¥é‚®ç®±éªŒè¯ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨é‚®ç®±åœ¨IDEçš„è®¸å¯è¯æ¿€æ´»ä¸­æ¿€æ´»äº† ","date":"2020-01-15","objectID":"/posts/jetbrains%E5%AD%A6%E7%94%9F%E4%BC%98%E6%83%A0/:2:0","tags":["JetBrains"],"title":"ç”¨å­¦ç”Ÿèº«ä»½å…è´¹ä½¿ç”¨IDE","uri":"/posts/jetbrains%E5%AD%A6%E7%94%9F%E4%BC%98%E6%83%A0/"},{"categories":["å…¶ä»–"],"content":"è¿‡æœŸåæ€ä¹ˆåŠï¼Ÿ åªè¦è¿˜æ˜¯åœ¨æ ¡å­¦ç”Ÿï¼Œè¿‡æœŸåéƒ½å¯ä»¥ç»­æœŸï¼Œä¼šå‘æ¥ä¸€å°ç”µå­é‚®ä»¶ï¼ŒæŒ‰ç…§æç¤ºæ¥å°±å¥½äº†ã€‚å½“ç„¶ä¹Ÿå¯ä»¥åœ¨è¿‡æœŸåä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«çš„åŒå­¦çš„ä¿¡æ¯é‡æ–°ç”³è¯·ï¼Œæ¯•ç«Ÿä¸€ä¸ªå­¦æ ¡çš„åˆä¸æ˜¯éƒ½æ˜¯æç¼–ç¨‹çš„ï¼›å°±ç®—éƒ½æ˜¯æç¼–ç¨‹çš„ä½†æ˜¯åˆä¸æ˜¯éƒ½ç”¨JetBrainsçš„IDEã€‚ ","date":"2020-01-15","objectID":"/posts/jetbrains%E5%AD%A6%E7%94%9F%E4%BC%98%E6%83%A0/:3:0","tags":["JetBrains"],"title":"ç”¨å­¦ç”Ÿèº«ä»½å…è´¹ä½¿ç”¨IDE","uri":"/posts/jetbrains%E5%AD%A6%E7%94%9F%E4%BC%98%E6%83%A0/"},{"categories":["Python"],"content":"å­¦ä¹ Pythonçš„æ—¶å€™æˆ‘ä»¬ç»å¸¸éœ€è¦å®‰è£…å„ç§å„æ ·çš„æ¡†æ¶ï¼Œç¬¬ä¸‰æ–¹çš„åŒ…æˆ–è€…åº“ã€‚æœ‰çš„æ—¶å€™ä¸åŒçš„é¡¹ç›®ä¾èµ–åº“çš„ç‰ˆæœ¬å¯èƒ½ä¸ç”¨ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒæ¥å®‰è£…éœ€è¦çš„åŒ…ï¼Œå°†å„ä¸ªé¡¹ç›®çš„å¼€å‘ç¯å¢ƒç‹¬ç«‹å‡ºæ¥ã€‚ ","date":"2020-01-09","objectID":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/:0:0","tags":["Python","è™šæ‹Ÿç¯å¢ƒ"],"title":"Pythonè™šæ‹Ÿç¯å¢ƒ","uri":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"},{"categories":["Python"],"content":"Pythonå¤šç‰ˆæœ¬å…±å­˜ åœ¨Windowsä¸‹è¦è§£å†³Pythonå¤šç‰ˆæœ¬å…±å­˜çš„é—®é¢˜å¾ˆç®€å•ï¼Œå°†Pythonå®‰è£…æ–‡ä»¶å¤¹è·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œç„¶åå¤åˆ¶python.exeï¼Œåˆ°å½“å‰ç›®å½•ä¸‹ï¼Œé‡å‘½åå°±è¡Œ åœ¨ç»ˆç«¯è°ƒç”¨Pythonçš„æ—¶å€™å°±ä½¿ç”¨é‡å‘½ååçš„Pythonåç§° åœ¨Linuxä¸‹åªéœ€è¦åœ¨åˆ›å»ºè½¯é“¾æ¥æ—¶æ ‡æ˜è½¯é“¾æ¥åç§°å°±è¡Œ ln -s /usr/local/python38/bin/python3.8 /usr/bin/python38 ","date":"2020-01-09","objectID":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/:1:0","tags":["Python","è™šæ‹Ÿç¯å¢ƒ"],"title":"Pythonè™šæ‹Ÿç¯å¢ƒ","uri":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"},{"categories":["Python"],"content":"ä»€ä¹ˆæ˜¯è™šæ‹Ÿç¯å¢ƒ åœ¨ä½¿ç”¨Pythonè¯­è¨€çš„æ—¶å€™æˆ‘ä»¬ä½¿ç”¨pipæ¥å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ï¼Œä½†æ˜¯ç”±äºpipçš„ç‰¹æ€§ï¼Œç³»ç»Ÿä¸­åªèƒ½å®‰è£…æ¯ä¸ªåŒ…çš„ä¸€ä¸ªç‰ˆæœ¬ã€‚ä½†æ˜¯åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œä¸åŒé¡¹ç›®å¯èƒ½éœ€è¦ç¬¬ä¸‰æ–¹åŒ…çš„ä¸åŒç‰ˆæœ¬ï¼Œæ¯”å¦‚Jupyterè¿™ä¸ªWebUIçš„åå°æœåŠ¡æ˜¯tornadoæ¡†æ¶æ”¯æŒçš„ï¼ŒpyspiderWebUIçš„åå°æœåŠ¡ä¹Ÿæ˜¯é tornadoæ”¯æŒçš„ï¼Œä½†æ˜¯ä»–ä»¬éœ€è¦çš„tornadoç‰ˆæœ¬æ˜¯ä¸åŒçš„ï¼Œå°±ä¼šäº§ç”Ÿå†²çªï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦ä¸ºè¿™ä¸¤ä¸ªæ¡†æ¶å»å®‰è£…ä¸åŒç‰ˆæœ¬çš„Pythonã€‚ Pythonçš„è§£å†³æ–¹æ¡ˆå°±æ˜¯è™šæ‹Ÿç¯å¢ƒã€‚è™šæ‹Ÿç¯å¢ƒå°±æ˜¯è™šæ‹Ÿå‡ºæ¥çš„ä¸€ä¸ªéš”ç¦»çš„Pythonç¯å¢ƒï¼Œæ¯ä¸ªé¡¹ç›®éƒ½å¯ä»¥æœ‰è‡ªå·±çš„è™šæ‹Ÿç¯å¢ƒï¼Œç”¨pipå®‰è£…å„è‡ªçš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¸åŒé¡¹ç›®ä¹‹é—´ä¹Ÿä¸ä¼šå­˜åœ¨å†²çªï¼Œè™šæ‹Ÿç¯å¢ƒå’Œå®ä½“ç¯å¢ƒå…±äº«ä¸€å¥—æ ‡å‡†åº“ã€‚ ","date":"2020-01-09","objectID":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/:2:0","tags":["Python","è™šæ‹Ÿç¯å¢ƒ"],"title":"Pythonè™šæ‹Ÿç¯å¢ƒ","uri":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"},{"categories":["Python"],"content":"venv Python3.3ä»¥ä¸Šçš„ç‰ˆæœ¬é€šè¿‡venvæ¨¡å—åŸç”Ÿæ”¯æŒè™šæ‹Ÿç¯å¢ƒï¼Œè¿™ä¸ªæ¨¡å—åœ¨Python3.4ä»¥åéƒ½è‡ªå¸¦äº†ï¼Œå¹¶ä¸éœ€è¦å»å®‰è£…ï¼Œç›´æ¥ä½¿ç”¨å°±è¡Œã€‚ venvæ¨¡å—æä¾›äº†åˆ›å»ºè½»é‡çº§â€œè™šæ‹Ÿç¯å¢ƒâ€ï¼Œæä¾›ä¸ç³»ç»ŸPythonçš„éš”ç¦»æ”¯æŒã€‚ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ python -m venv venv_name åˆ›å»ºæˆåŠŸä¹‹åå°±ä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹å¤šå‡ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹çš„åç§°å°±æ˜¯è™šæ‹Ÿç¯å¢ƒçš„åç§°ï¼Œé‡Œé¢é€šå¸¸ä¼šæœ‰å‡ ä¸ªæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ è™šæ‹Ÿç¯å¢ƒæ–‡ä»¶å¤¹ æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ åœ¨Windowsä¸‹æ¿€æ´»è™šæ‹Ÿç¯å¢ƒéœ€è¦åˆ°åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒçš„æ–‡ä»¶å¤¹ä¸‹é¢çš„Scriptsæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ç»ˆç«¯å·¥å…·ä¸­ä½¿ç”¨å‘½ä»¤æ¿€æ´» activate.bat åœ¨Linuxä¹Ÿæ˜¯ä½¿ç”¨å‘½ä»¤æ¿€æ´»ï¼Œä½†æ˜¯æœ‰äº›ä¸ä¸€æ ·çš„åœ°æ–¹ source venv_name/bin/activate è™šæ‹Ÿç¯å¢ƒæ¿€æ´»ä»¥åå°±å¯ä»¥åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…éœ€è¦çš„åŒ…äº†ã€‚ ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒåˆ›å»ºçš„é¡¹ç›®ï¼Œåªèƒ½è¿›å…¥åˆ°è™šæ‹Ÿç¯å¢ƒä»¥åæ‰èƒ½ä½¿ç”¨å‘½ä»¤å¯¹é¡¹ç›®è¿›è¡Œæ§åˆ¶ã€‚æ¯”å¦‚ï¼Œåœ¨è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒä¸‹ä½¿ç”¨Djangoæ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ªé¡¹ç›®ï¼Œå¦‚æœæƒ³ä½¿ç”¨Djangoçš„å‘½ä»¤å¼€å¯è¿™ä¸ªé¡¹ç›®çš„æœåŠ¡çš„è¯åªèƒ½è¿›å…¥åˆ°è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒå¼€å¯ é€€å‡ºè™šæ‹Ÿç¯å¢ƒ deactivate ","date":"2020-01-09","objectID":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/:3:0","tags":["Python","è™šæ‹Ÿç¯å¢ƒ"],"title":"Pythonè™šæ‹Ÿç¯å¢ƒ","uri":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"},{"categories":["Python"],"content":"virtualenv virtualenvæ˜¯ä¸€ä¸ªç®¡ç†è™šæ‹Ÿç¯å¢ƒçš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œç›¸å¯¹äºPythonè‡ªå¸¦çš„venvå®ƒçš„åŠŸèƒ½ä¼šæ›´ä¸°å¯Œä¸€äº› virtualenvå¯ä»¥åˆ›å»ºrequirements.txtæ–‡ä»¶æ¥å­˜å‚¨ä¾èµ–åŒ…çš„ä»¥åŠpythonç‰ˆæœ¬ä¿¡æ¯ åŸºæœ¬å‘½ä»¤ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ virtualenv venv_name æŒ‡å®šPythonç‰ˆæœ¬åˆ›å»º virtualenv -p [Pythonè·¯å¾„] venv_name æ˜¯å¦ç»§æ‰¿ç¬¬ä¸‰æ–¹åº“ virtualenv --system-site-packages venv_name æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ activate.bat é€€å‡ºè™šæ‹Ÿç¯å¢ƒ deactivate ","date":"2020-01-09","objectID":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/:4:0","tags":["Python","è™šæ‹Ÿç¯å¢ƒ"],"title":"Pythonè™šæ‹Ÿç¯å¢ƒ","uri":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"},{"categories":["Python"],"content":"pipenv ä¸Šé¢çš„ä¸¤ç§è™šæ‹Ÿç¯å¢ƒçš„åˆ›å»ºæ–¹æ³•å…¶å®éƒ½ä¸å¤ªæ¨èï¼Œå› ä¸ºï¼Œä»–ä»¬åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒéƒ½ä¸åœ¨ä¸€ä¸ªä½ç½®ï¼Œä¸æ–¹ä¾¿ç®¡ç†ã€‚pipenvå°±æ¯”è¾ƒå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨pipenvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšæœºçš„è™šæ‹Ÿç¯å¢ƒç›®å½•åï¼Œç”Ÿæˆçš„è™šæ‹Ÿç¯å¢ƒåœ¨C:\\Users\\user-name\\.virtualenvsæ–‡ä»¶å¤¹ä¸‹ã€‚pipenvåœ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„æ—¶å€™ä¼šè‡ªåŠ¨è¯»å–å½“å‰ç›®å½•ä¸‹æ˜¯å¦æœ‰requirements.txtï¼Œå¦‚æœæœ‰åˆ™å°†ä¾èµ–åŒ…çš„ä¿¡æ¯å†™å…¥Pipfile å®‰è£… pip install pipenv åŸºæœ¬å‘½ä»¤ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶æŒ‡å®špythonç‰ˆæœ¬ pipenv --python 3.6 æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒçš„å­˜æ”¾ä½ç½® pipenv --venv å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ï¼ˆä¸éœ€è¦è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼‰ pipenv install package-name æ›´æ–°åŒ…ï¼ˆä¸åŠ åŒ…çš„åç§°åˆ™å…¨éƒ¨æ›´æ–°ï¼‰ pipenv update package-name æŸ¥çœ‹ä¾èµ–åŒ… pipenv graph è¿›å…¥è™šæ‹Ÿç¯å¢ƒ pipenv shell é€€å‡ºè™šæ‹Ÿç¯å¢ƒ exit è¯»å–Pipfileæ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œæ²¡æœ‰Pipfileåˆ™åˆ›å»ºPipfileå’ŒPipfile.lock pipenv install åˆ é™¤è™šæ‹Ÿç¯å¢ƒ pipenv --rm ","date":"2020-01-09","objectID":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/:5:0","tags":["Python","è™šæ‹Ÿç¯å¢ƒ"],"title":"Pythonè™šæ‹Ÿç¯å¢ƒ","uri":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"},{"categories":["Python"],"content":"poetry poetryçš„ä½¿ç”¨å’Œä¸Šé¢çš„åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„å·¥å…·æœ‰äº›ä¸åŒã€‚ poetryåˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒä¸éœ€è¦è¿›å…¥ï¼Œåªéœ€è¦åœ¨è¿è¡Œé¡¹ç›®çš„æ—¶å€™ä½¿ç”¨å‘½ä»¤å³å¯ poetryåˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒéƒ½åœ¨ä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ–¹ä¾¿ç®¡ç† é¡¹ç›®ä½¿ç”¨çš„pythonç‰ˆæœ¬ä»¥åŠé¡¹ç›®çš„ä¾èµ–åŒ…éƒ½ä¼šå†™å…¥é…ç½®æ–‡ä»¶ä¸­ ä½¿ç”¨poetryåˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ—¶æŒ‡å®šçš„pythonç‰ˆæœ¬ä¸€å®šè¦æ˜¯ç”µè„‘ä¸­å­˜åœ¨çš„ poetryé€‚åˆç”¨æ¥åˆ›å»ºéœ€è¦å‘å¸ƒçš„é¡¹ç›®æˆ–è€…é€‚åˆåœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œpoetryå¹¶ä¸é€‚åˆåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ Windowså®‰è£… åœ¨power shellä¸­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤å°±ä¼šè‡ªåŠ¨å®‰è£…ï¼Œå®‰è£…çš„ä½ç½®å°±æ˜¯power shellå½“å‰æ‰€å¤„ç›®å½•ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨å°†binç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚ (Invoke-WebRequest -Uri https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py -UseBasicParsing).Content | python åŸºæœ¬å‘½ä»¤ åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›® poetry new project_name å·²æœ‰é¡¹ç›®ï¼Œä½†æ˜¯æƒ³åœ¨é¡¹ç›®ä¸­ä½¿ç”¨poetryï¼Œéœ€è¦è¿›å…¥é¡¹ç›®ä¸­ poerty init åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆéœ€è¦æ ¹æ®tomlé…ç½®æ–‡ä»¶æ¥åˆ›å»ºï¼‰ poetry install å®‰è£…é¡¹ç›®çš„ä¾èµ–åŒ… poetry add package-name ç§»é™¤ä¸éœ€è¦çš„åŒ… poetry remove package-name ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒè¿è¡Œç¨‹åº poetry run project_name æŸ¥çœ‹é¡¹ç›®çš„ä¾èµ–åŒ…ï¼ˆå¾…è§£å†³ï¼‰ poetry show project_name Pycharmä»¥åŠå…¶ä»–IDEå¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨poetryåˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒï¼Œæ‰€ä»¥åœ¨è¿›è¡Œç”Ÿäº§å¼€å‘çš„æ—¶å€™è¿˜æ˜¯æ˜¾å¾—æ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºè¿™æ ·åœ¨è¿™æ ·çš„ç¯å¢ƒä¸­ï¼Œå¯¹ç¨‹åºçš„è°ƒè¯•å°±ä¸èƒ½ç›´æ¥åœ¨IDEä¸­è¿›è¡Œè°ƒè¯•ã€‚ ","date":"2020-01-09","objectID":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/:6:0","tags":["Python","è™šæ‹Ÿç¯å¢ƒ"],"title":"Pythonè™šæ‹Ÿç¯å¢ƒ","uri":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"},{"categories":["Python"],"content":"virtualenvwrapper ä½¿ç”¨å’Œvirtualenvç±»ä¼¼ï¼Œä½†æ˜¯åŠŸèƒ½æ›´åŠ å¼ºå¤§ ä½¿ç”¨Workonå‘½ä»¤å°±å¯ä»¥æŸ¥çœ‹ç”µè„‘ä¸­çš„è™šæ‹Ÿç¯å¢ƒï¼ŒWorkonåé¢åŠ ä¸Šè™šæ‹Ÿç¯å¢ƒåç§°å°±ä¼šè¿›å…¥è™šæ‹Ÿä¸­ å¦‚æœæ˜¯åœ¨Windowsä¸Šå®‰è£… pip install virtualenvwrapper-win åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ mkvirtualenv envname åˆ é™¤ rmvirtualenv envname åœ¨ç¯å¢ƒå˜é‡ä¸­åˆ›å»ºå˜é‡WORKON_HOMEï¼ˆä¸æ˜¯åœ¨pathä¸­æ·»åŠ ï¼‰ï¼Œå˜é‡å€¼ä¸ºæ–‡ä»¶è·¯å¾„ï¼Œç„¶ååˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒå°±ä¼šæ”¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚ æŒ‡å®špythonç‰ˆæœ¬ mkvirtualenv -p python36 venv_name ç”Ÿæˆrequirements.txté—®ä»¶ pip3 freeze \u003e requirements.txt ","date":"2020-01-09","objectID":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/:7:0","tags":["Python","è™šæ‹Ÿç¯å¢ƒ"],"title":"Pythonè™šæ‹Ÿç¯å¢ƒ","uri":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"},{"categories":["Python"],"content":"ç»“è¯­ æ²¡æœ‰ä»‹ç»ä½¿ç”¨Anacondaå’ŒPycharmåˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„åŸå› å¾ˆç®€å•ã€‚Anacondaåˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯condaç›®å‰è¿˜ä¸æ”¯æŒå®‰è£…scrapyè¿™æ ·çš„æ¡†æ¶ï¼Œä¸ç¬¦åˆæˆ‘çš„éœ€æ±‚ï¼Œè€Œä¸”æ²¡æœ‰å¿…è¦ä¸ºäº†è™šæ‹Ÿç¯å¢ƒè€Œå®‰è£…ä¸€ä¸ªAnacondaï¼ˆé™¤éæ˜¯éœ€è¦ç§‘å­¦è®¡ç®—çš„ç¯å¢ƒï¼‰ï¼Œå¹¶ä¸”Anacondaä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œä½¿ç”¨æ›´ç®€å•æ›´æ–¹ä¾¿ç®¡ç†çš„å·¥å…·å²‚ä¸æ˜¯æ›´å¥½ã€‚ä¸é€‚ä½¿Pycharmçš„åŸå› ä¹Ÿæ˜¯å› ä¸ºåˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒä¸æ–¹ä¾¿ç®¡ç†ã€‚ ç›®å‰çœ‹æ¥ä½¿ç”¨virtualenvwrapperä¼šæ›´æ–¹ä¾¿æ›´å¿«æ·æ›´ç®€å•ä¸€äº›ï¼Œä¸éœ€è¦ä»˜å‡ºå¤šå­¦ä¹ å‘½ä»¤çš„æˆæœ¬ï¼Œè€Œä¸”ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ ","date":"2020-01-09","objectID":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/:8:0","tags":["Python","è™šæ‹Ÿç¯å¢ƒ"],"title":"Pythonè™šæ‹Ÿç¯å¢ƒ","uri":"/posts/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"},{"categories":["tool"],"content":"å°†åšå®¢çš„ä¸»é¢˜è®¾ç½®ä¸ºicarusåè¿˜éœ€è¦è®¾ç½®ä¸€äº›ä¸œè¥¿ï¼Œæ›´æ”¹ä¸€ä¸‹è¿™ä¸ªä¸»é¢˜çš„é…ç½®æ–‡ä»¶ï¼ ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:0:0","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"ä¿®æ”¹è¯­è¨€ icarusä¸»é¢˜çš„é»˜è®¤è¯­è¨€æ˜¯è‹±æ–‡ï¼Œå°†è¯­è¨€ä¿®æ”¹ä¸ºä¸­æ–‡ï¼Œè¿›å…¥åˆ°ä¸»é¢˜æ–‡ä»¶å¤¹çš„languagesæ–‡ä»¶å¤¹ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯æœ‰ä¸€ä¸ªå«zh-CN.ymlçš„æ–‡ä»¶çš„ è¿™ä¸ªå°±æ˜¯icarusä¸»é¢˜çš„ä¸­æ–‡è¯­è¨€åŒ…ï¼Œç„¶åé€€åˆ°åšå®¢é¡¹ç›®çš„ç›®å½•ä¸‹ï¼Œå°†config.ymlä¸­çš„languageæ”¹ä¸ºzh-CNåŒæ—¶ä¹Ÿå¯ä»¥ç»™titleï¼Œauthorï¼ŒdescriptionåŠ ä¸Šè‡ªå·±çš„ä¸ªæ€§ä¿¡æ¯ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸åŒä¸»é¢˜çš„è¯­è¨€åŒ…åå­—å¯èƒ½ä¸åŒï¼Œä½†æ˜¯åªè¦è¿›å…¥ä¸»é¢˜çš„languageæ–‡ä»¶å¤¹ä¸‹é¢æŸ¥çœ‹å°±å¯ä»¥äº†ã€‚ ä¿®æ”¹ä¹‹åï¼Œå¦‚æœè§‰å¾—åƒé“¾æ¥ã€æ ‡ç­¾è¿™æ ·çš„åå­—ä¸å–œæ¬¢ï¼Œå¯ä»¥åˆ°zh-CN.ymlè¿™ä¸ªè¯­è¨€åŒ…é‡Œé¢å»ä¿®æ”¹ç›¸å…³è¯­è¨€é…ç½®ï¼Œåªéœ€è¦å°†å¼•å·é‡Œçš„ä¸­æ–‡æ”¹ä¸ºè‡ªå·±å–œæ¬¢çš„å°±å¯ä»¥äº†ã€‚ common: archive: one: 'å½’æ¡£' other: 'å½’æ¡£' category: one: 'åˆ†ç±»' other: 'åˆ†ç±»' tag: one: 'æ ‡ç­¾' other: 'æ ‡ç­¾' post: one: 'æ–‡ç« ' other: 'æ–‡ç« ' prev: 'ä¸Šä¸€é¡µ' next: 'ä¸‹ä¸€é¡µ' widget: follow: 'å…³æ³¨æˆ‘' recents: 'æœ€æ–°æ–‡ç« ' links: 'å‹æƒ…é“¾æ¥' tag_cloud: 'æ ‡ç­¾äº‘' catalogue: 'ç›®å½•' article: more: 'é˜…è¯»æ›´å¤š' comments: 'è¯„è®º' read: 'è¯»å®Œ' about: 'å¤§çº¦' words: 'ä¸ªå­—' donate: title: 'å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥è¯·ä½œè€…å–æ¯èŒ¶ï¼' alipay: 'æ”¯ä»˜å®' wechat: 'å¾®ä¿¡' plugin: backtotop: 'å›åˆ°é¡¶ç«¯' visit: '%sæ¬¡è®¿é—®' visitor: 'å…±%sä¸ªè®¿å®¢' search: search: 'æœç´¢' hint: 'æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...' insight: hint: 'æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...' posts: 'æ–‡ç« ' pages: 'é¡µé¢' categories: 'åˆ†ç±»' tags: 'æ ‡ç­¾' untitled: '(æ— æ ‡é¢˜)' ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:1:0","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ é…ç½®æ–‡ä»¶å…¨æ˜¯è‹±æ–‡ï¼Œé˜…è¯»èµ·æ¥éš¾åº¦çš„ç¡®ä¸å°ï¼Œä½†æ˜¯éœ€è¦ä¿®æ”¹çš„åœ°æ–¹è¿˜æ˜¯å¤§å¤šèƒ½çœ‹æ‡‚çŸ¥é“æ˜¯åœ¨å“ªçš„ã€‚ ä¸æƒ³è¦çš„ä¸œè¥¿ç›´æ¥æ³¨é‡Šæ‰æ‰ï¼Œæˆ–è€…å°†é“¾æ¥åˆ é™¤æ‰å°±è¡Œäº†ï¼Œä½†æ˜¯å¦‚æœå‰é¢æœ‰-è¦æŠŠ-ä¹Ÿæ³¨é‡Šæ‰ã€‚ ä¸‹é¢è¦ä¿®æ”¹çš„é…ç½®æ–‡ä»¶ä¸­å¾ˆå¤šéƒ½ä¼šæ¶‰åŠåˆ°å›¾ç‰‡çš„åœ°å€ï¼Œå¦‚æœæœ‰äº‘åºŠå¯ä»¥ä½¿ç”¨äº‘åºŠã€‚å¦‚æœæ²¡æœ‰äº‘çª—ï¼Œå¯ä»¥å°†å›¾ç‰‡å°±æ”¾åˆ°æœ¬åœ°æ–‡ä»¶å¤¹å½“ä¸­ï¼Œç„¶åä½¿ç”¨æ–‡ä»¶è·¯å¾„å³å¯ã€‚ å›¾ç‰‡æ”¾åˆ°äº‘åºŠå°±æ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„äº†ï¼Œå¦‚æœæ”¾åˆ°æœ¬åœ°ï¼Œå»ºè®®åœ¨ä¸»é¢˜æ–‡ä»¶å¤¹çš„sourceæ–‡ä»¶å¤¹ä¸‹é¢æ–°å»ºä¸€ä¸ªassetsæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨assetsä¸­å»ºä¸€ä¸ªimgæ–‡ä»¶å¤¹ï¼ˆæ³¨æ„ï¼šæ˜¯åœ¨ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹é¢çš„sourceæ–‡ä»¶å¤¹ï¼Œè·¯å¾„ä¸º\\icarus\\sourceï¼‰ï¼Œç„¶åå°†éœ€è¦çš„å›¾ç‰‡æ”¾åˆ°é‡Œé¢ï¼Œç„¶å ç›´æ¥å¼•ç”¨åœ°å€å³å¯ã€‚å¦‚æˆ‘çš„æ ‡ç­¾é¡µå›¾æ ‡åœ°å€å°±æ˜¯D:\\blog\\themes\\icarus\\source\\assets\\img\\favicon.pngï¼Œä½†æ˜¯åœ¨å¡«å†™åœ°å€çš„æ—¶å€™åªèƒ½å¡«å†™ç›¸å¯¹è·¯å¾„ï¼Œä¸ç„¶éƒ¨ç½²åçš„åšå®¢æ˜¯æ— æ³•æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡çš„ã€‚ ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:0","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"æ ‡ç­¾é¡µå›¾æ ‡ æ³¨æ„æ˜¯/ favicon: /assets/img/favicon.png ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:1","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"logoå›¾æ ‡ è¿™ä¸ªlogoæ˜¯icarusä¸»é¢˜å·¦ä¸Šè§’çš„å›¾æ ‡ logo: /assets/img/logo.png ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:2","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"å¯¼èˆªæ  å¯¼èˆªæ çš„èœå•å¯ä»¥ç›´æ¥æ”¹ä¸ºä¸­æ–‡ï¼Œé“¾æ¥æ˜¯ä¸»é¢˜å³ä¸Šè§’çš„Githubå›¾æ ‡çš„é“¾æ¥ï¼Œå¦‚æœå¯ä»¥æ”¹ä¸ºè‡ªå·±çš„Githubé“¾æ¥ï¼Œå¦‚æœä¸å–œæ¬¢ä¹Ÿå¯ä»¥æ³¨é‡Šæ‰ navbar: # Navigation bar menu links menu: ä¸»é¡µ: / å½’æ¡£: /archives åˆ†ç±»: /categories æ ‡ç­¾: /tags å…³äº: /about # Navigation bar links to be shown on the right links: Download on GitHub: icon: fab fa-github url: 'https://github.com/ppoffice/hexo-theme-icarus' ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:3","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"é¡µè„šé“¾æ¥ è¿™éƒ¨åˆ†æ˜¯å·¦è¾¹é¡µè„šçš„é“¾æ¥ï¼Œå¯ä»¥æ¢æˆè‡ªå·±çš„ï¼Œä¹Ÿå¯ä»¥æ³¨é‡Šæ‰ footer: # Links to be shown on the right of the footer section links: Creative Commons: icon: fab fa-creative-commons url: 'https://creativecommons.org/' Attribution 4.0 International: icon: fab fa-creative-commons-by url: 'https://creativecommons.org/licenses/by/4.0/' Download on GitHub: icon: fab fa-github url: 'https://github.com/ppoffice/hexo-theme-icarus' ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:4","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"æ–‡ç« è®¾ç½® article: # ä»£ç é«˜äº®æ˜¾ç¤ºè®¾ç½® highlight: # ä»£ç é«˜äº®ä¸»é¢˜ # https://github.com/highlightjs/highlight.js/tree/master/src/stylesè¿™ä¸ªé¡¹ç›®æœ‰å¾ˆå¤šä»£ç  # é«˜äº®ä¸»é¢˜ï¼Œä¸‹è½½ä¸‹æ¥æ”¾åˆ°åšå®¢é¡¹ç›®çš„ node_modules\\_highlight.js@9.17.1@highlight.js\\styles # è¿™ä¸ªç›®å½•ä¸‹ç„¶åå°†è¿™é‡Œçš„ atom-one-light ä¿®æ”¹æ—¢å¯ theme: atom-one-light # æ˜¾ç¤ºä»£ç å¤åˆ¶æŒ‰é’® clipboard: true # ä»£ç å—çš„é»˜è®¤æŠ˜å çŠ¶æ€ã€‚\"folded\"æ˜¯æŠ˜å , \"unfolded\"æ˜¯å±•å¼€ fold: unfolded # æ˜¯å¦æ˜¾ç¤ºæ–‡ç« ç¼©ç•¥å›¾ thumbnail: true # æ˜¯å¦æ˜¾ç¤ºé¢„ä¼°æ–‡ç« é˜…è¯»æ—¶é—´ readtime: true ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:5","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"æœç´¢ æœç´¢å°±æ˜¯ä¸»é¢˜å³ä¸Šè§’çš„æœç´¢ï¼Œè®¾ä¸ºé»˜è®¤å³å¯ï¼Œå¦‚æœæœ‰éœ€è¦ä¹Ÿå¯ä»¥æ”¹ä¸ºç™¾åº¦æˆ–è€…Googleçš„æœç´¢å¼•æ“ search: # Name of the search plugin type: insight ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:6","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"è¯„è®º å…³äºè¯„è®ºï¼Œä¼šç”¨ä¸€ç¯‡ä¸“é—¨çš„æ–‡ç« è®²è§£ comment: # Name of the comment plugin type: ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:7","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"æ‰“èµåŠŸèƒ½ donate: - type: alipay qrcode: å›¾ç‰‡åœ°å€ - type: wechat qrcode: åœ°å€åœ°å€ ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:8","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"åˆ†äº«åŠŸèƒ½ æƒ³è¦ä½¿ç”¨åˆ†äº«åŠŸèƒ½éœ€è¦ä½¿ç”¨æ’ä»¶ share: # Share plugin name type: ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:9","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"ä¾§è¾¹æ ç²˜æ» è¿™ä¸ªåŠŸèƒ½å°±æ˜¯è®©ä¾§è¾¹æ ä¸éšé¡µé¢çš„æ»šåŠ¨è€Œä¸Šç§»ï¼Œä½†æ˜¯è¦ä¾§è¾¹æ çš„éƒ¨ä»¶è‡³å°‘æœ‰ä¸€ä¸ªçš„æ—¶å€™æ‰èƒ½å¼€å¯ sidebar: # å·¦è¾¹çš„ä¾§è¾¹æ è®¾ç½® left: # https://ppoffice.github.io/hexo-theme-icarus/Configuration/Theme/make-a-sidebar-sticky-when-page-scrolls/ sticky: true # right sidebar settings right: # https://ppoffice.github.io/hexo-theme-icarus/Configuration/Theme/make-a-sidebar-sticky-when-page-scrolls/ sticky: false ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:10","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"ä¿®æ”¹å°éƒ¨ä»¶ å°éƒ¨ä»¶å°±æ˜¯åœ¨åšå®¢é¡µé¢ä¸­å·¦å³ä¸¤ä¾§ä¸€å—ä¸€å—åŠŸèƒ½åˆ†ç±»çš„ä¸œè¥¿ï¼ŒåŒæ ·ï¼Œä¸éœ€è¦çš„å¯ä»¥æ³¨é‡Šæ‰ã€‚ widgets: - # æ”¾å¤´åƒçš„é‚£ä¸€å—éƒ¨ä»¶ type: profile # æ”¾ç½®çš„ä½ç½®ï¼Œå·¦è¾¹è¿˜æ˜¯å³è¾¹ position: left # ä½œè€…çš„åå­— author: é»‘ç™½ # åœ¨ä¸ªäººèµ„æ–™å°éƒ¨ä»¶ä¸­æ˜¾ç¤ºçš„ä½œè€…æ ‡é¢˜ author_title: æ™®é€šçš„æˆ‘ Â· è¯»ç€æ™®é€šçš„ä¹¦ # ä½œè€…çš„ä½ç½® location: æ”€æèŠ± # å¤´åƒåœ°å€ avatar: /assets/img/head.png # è¿™ä¸€é¡¹ç›®å‰ä¸çŸ¥é“æ˜¯å¹²å˜›çš„ gravatar: # å°†å¤´åƒæ˜¾ç¤ºä¸ºåœ†å½¢è¿˜æ˜¯æ­£æ–¹å½¢ falseæ˜¯æ­£æ–¹å½¢ avatar_rounded: false # å…³æ³¨æˆ‘è¿™ä¸ªæŒ‰é’®çš„URL follow_link: 'https://github.com' # è¿™ä¸ªéƒ¨ä»¶åº•éƒ¨çš„å›¾æ ‡ä»¥åŠURL social_links: Github: icon: fab fa-github url: 'https://github.com' Facebook: icon: fab fa-facebook url: 'https://facebook.com' Twitter: icon: fab fa-twitter url: 'https://twitter.com' Dribbble: icon: fab fa-dribbble url: 'https://dribbble.com' RSS: icon: fas fa-rss url: / - # ç›®å½• type: toc # æ˜¾ç¤ºåœ¨å·¦è¾¹è¿˜æ˜¯å³è¾¹ position: left - # é“¾æ¥ type: links # æ˜¾ç¤ºåœ¨å·¦è¾¹è¿˜æ˜¯å³è¾¹ position: right # é“¾æ¥åœ°å€ links: å»–é›ªå³°åšå®¢: 'https://www.liaoxuefeng.com/' å¤œå¹•åšå®¢: 'https://blog.nightteam.cn/' éª†æ˜ŠPython-100-Days: 'https://github.com/jackfrued/Python-100-Days' - # å½’æ¡£ type: category # Where should the widget be placed, left or right position: left - # æ ‡ç­¾äº‘ type: tagcloud # Where should the widget be placed, left or right position: right - # æœ€è¿‘æ–‡ç«  type: recent_posts # Where should the widget be placed, left or right position: right - # åˆ†ç±» type: archive # Where should the widget be placed, left or right position: right #- # æ ‡ç­¾ type: tag Where should the widget be placed, left or right position: right ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:2:11","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"æ·»åŠ é›ªèŠ±æ•ˆæœ ç™½è‰²èƒŒæ™¯çš„åšå®¢è™½ç„¶çœ‹ä¸Šå»çš„æ„Ÿè§‰æŒºæ¸…æ–°çš„ï¼Œä½†æ˜¯æ•´ä½“æ•ˆæœå´å·®äº†ä¸€ç‚¹ï¼ŒåŠ ä¸ªé›ªèŠ±æ•ˆæœ ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:3:0","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"æ·»åŠ snow.jsæ–‡ä»¶ åœ¨ä¸»é¢˜æ–‡ä»¶å¤¹çš„\\icarus\\source\\jsè·¯å¾„ä¸‹æ–°å»ºä¸€ä¸ªsrcæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨scræ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªsnow.js æ–‡ä»¶ï¼Œå°†ä¸‹é¢çš„ä»£ç å†™å…¥snow.jsä¸­ function snowFall(snow) { snow = snow || {}; this.maxFlake = snow.maxFlake || 100; this.flakeSize = snow.flakeSize || 10; this.fallSpeed = snow.fallSpeed || 1; } requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function(callback) { setTimeout(callback, 1000 / 60); }; cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame || window.oCancelAnimationFrame; snowFall.prototype.start = function(){ snowCanvas.apply(this); createFlakes.apply(this); drawSnow.apply(this) } function snowCanvas() { var snowcanvas = document.createElement(\"canvas\"); snowcanvas.id = \"snowfall\"; snowcanvas.width = window.innerWidth; snowcanvas.height = document.body.clientHeight; snowcanvas.setAttribute(\"style\", \"position:absolute; top: 0; left: 0; z-index: 1; pointer-events: none;\"); document.getElementsByTagName(\"body\")[0].appendChild(snowcanvas); this.canvas = snowcanvas; this.ctx = snowcanvas.getContext(\"2d\"); window.onresize = function() { snowcanvas.width = window.innerWidth; /* snowcanvas.height = window.innerHeight */ } } function flakeMove(canvasWidth, canvasHeight, flakeSize, fallSpeed) { this.x = Math.floor(Math.random() * canvasWidth); this.y = Math.floor(Math.random() * canvasHeight); this.size = Math.random() * flakeSize + 2; this.maxSize = flakeSize; this.speed = Math.random() * 1 + fallSpeed; this.fallSpeed = fallSpeed; this.velY = this.speed; this.velX = 0; this.stepSize = Math.random() / 30; this.step = 0 } flakeMove.prototype.update = function() { var x = this.x, y = this.y; /* æ‘†åŠ¨æ›²çº¿ï¼Œè¿™é‡Œæ˜¯ä½™å¼¦*/ this.velX *= 0.98; if (this.velY \u003c= this.speed) { this.velY = this.speed } this.velX += Math.cos(this.step += .05) * this.stepSize; this.y += this.velY; this.x += this.velX; if (this.x \u003e= canvas.width || this.x \u003c= 0 || this.y \u003e= canvas.height || this.y \u003c= 0) { this.reset(canvas.width, canvas.height) } }; flakeMove.prototype.reset = function(width, height) { this.x = Math.floor(Math.random() * width); this.y = 0; this.size = Math.random() * this.maxSize + 2; this.speed = Math.random() * 1 + this.fallSpeed; this.velY = this.speed; this.velX = 0; }; // æ¸²æŸ“é›ªèŠ±-éšæœºå½¢çŠ¶ï¼ˆæ­¤å¤„å¯ä¿®æ”¹é›ªèŠ±é¢œè‰²ï¼ï¼ï¼ï¼‰ flakeMove.prototype.render = function(ctx) { var snowFlake = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size); snowFlake.addColorStop(0, \"rgba(255,255,255, 0.9)\"); /* æ­¤å¤„æ˜¯é›ªèŠ±RGBé¢œè‰²ï¼Œé»˜è®¤æ˜¯ç™½è‰² */ snowFlake.addColorStop(.5, \"rgba(255,255,255, 0.5)\"); /* è‹¥è¦æ”¹ä¸ºå…¶ä»–é¢œè‰²ï¼Œè¯·è‡ªè¡ŒæŸ¥ */ snowFlake.addColorStop(1, \"rgba(255,255,255, 0)\"); /* æ‰¾16è¿›åˆ¶çš„RGB é¢œè‰²ä»£ç ã€‚ */ ctx.save(); ctx.fillStyle = snowFlake; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); ctx.restore(); }; function createFlakes() { var maxFlake = this.maxFlake, flakes = this.flakes = [], canvas = this.canvas; for (var i = 0; i \u003c maxFlake; i++) { flakes.push(new flakeMove(canvas.width, canvas.height, this.flakeSize, this.fallSpeed)) } } function drawSnow() { var maxFlake = this.maxFlake, flakes = this.flakes; ctx = this.ctx, canvas = this.canvas, that = this; ctx.clearRect(0, 0, canvas.width, canvas.height); for (var e = 0; e \u003c maxFlake; e++) { flakes[e].update(); flakes[e].render(ctx); } this.loop = requestAnimationFrame(function() { drawSnow.apply(that); }); } /* ä¿®æ”¹maxFlakeèƒ½ä¿®æ”¹é›ªèŠ±çš„æœ€å¤§æ•°é‡ */ var snow = new snowFall({maxFlake:50}); snow.start(); ä¿®æ”¹ä¸Šé¢ä»£ç ä¸­çš„RGBå€¼å’ŒmaxFlakeå°±å¯ä»¥æ›´æ”¹é›ªèŠ±çš„é¢œè‰²å’Œæœ€å¤§æ•°é‡ ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:3:1","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"å¼•ç”¨snow.jsæ–‡ä»¶ åœ¨/icarus/layout/layout.ejsçš„bodybodybodyæ ‡ç­¾ä¸­æ·»åŠ ä»£ç ï¼š \u003cscript type=\"text/javascript\"\u003e var windowWidth = $(window).width(); if (windowWidth \u003e 480) { document.write('\u003cscript type=\"text/javascript\" src=\"/js/src/snow.js\"\u003e\u003c\\/script\u003e'); } \u003c/script\u003e æ·»åŠ ä»£ç åçš„æ–‡ä»¶ \u003c!DOCTYPE html\u003e \u003chtml \u003c%- has_config('language') ? ' lang=\"' + get_config('language').substring(0, 2) + '\"' : '' %\u003e\u003e \u003chead\u003e \u003c%- _partial('common/head') %\u003e \u003c/head\u003e \u003cbody class=\"is-\u003c%= column_count() %\u003e-column\"\u003e \u003c%- _partial('common/navbar') %\u003e \u003c% function main_column_class() { switch (column_count()) { case 1: return 'is-12'; case 2: return 'is-8-tablet is-8-desktop is-8-widescreen'; case 3: return 'is-8-tablet is-8-desktop is-6-widescreen' } return ''; } %\u003e \u003csection class=\"section\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"columns\"\u003e \u003cdiv class=\"column \u003c%= main_column_class() %\u003e has-order-2 column-main\"\u003e\u003c%- body %\u003e\u003c/div\u003e \u003c%- _partial('common/widget', { position: 'left' }) %\u003e \u003c%- _partial('common/widget', { position: 'right' }) %\u003e \u003c/div\u003e \u003c/div\u003e \u003c/section\u003e \u003c%- _partial('common/footer') %\u003e \u003c%- _partial('common/scripts') %\u003e \u003c% if (has_config('search.type')) { %\u003e \u003c%- _partial('search/' + get_config('search.type')) %\u003e \u003c% } %\u003e \u003cscript type=\"text/javascript\"\u003e var windowWidth = $(window).width(); if (windowWidth \u003e 480) { document.write('\u003cscript type=\"text/javascript\" src=\"/js/src/snow.js\"\u003e\u003c\\/script\u003e'); } \u003c/script\u003e \u003c/body\u003e \u003c/html\u003e ä¿å­˜ååˆ·æ–°åšå®¢å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ã€‚ ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:3:2","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"æ–‡ç« å‘è¡¨æ—¥æœŸ icarusä¸»é¢˜çš„æ–‡ç« å·¦ä¸Šè§’æ–‡ç« å‘è¡¨æ—¥æœŸé»˜è®¤æ˜¯å‡ å¤©å‰è¿™æ ·çš„ä¿¡æ¯ï¼Œçœ‹èµ·æ¥å…¶å®æ˜¯ä¸å¤ªæ–¹ä¾¿çš„ éœ€è¦ä¿®æ”¹\\themes\\icarus\\source\\jsä¸‹çš„main.jsæ–‡ä»¶ï¼Œ ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:3:3","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":["tool"],"content":"å¢åŠ æ–‡ç« ç‰ˆæƒ ä¿®æ”¹themes/icarus/layout/common/article.ejs åœ¨ä¸‹é¢çš„ä»£ç ä¸­å¢åŠ  \u003cdiv class=\"content\"\u003e \u003c%- index \u0026\u0026 post.excerpt ? post.excerpt : post.content %\u003e \u003c/div\u003e \u003c!- åœ¨è¿™ä¸­é—´æ·»åŠ  -\u003e \u003c% if (!index \u0026\u0026 post.tags \u0026\u0026 post.tags.length) { %\u003e åœ¨ä¸­é—´æ·»åŠ å¦‚ä¸‹ç¨‹åº \u003c% if (!index \u0026\u0026 post.layout === 'post' \u0026\u0026 post.copyright !== false) { %\u003e \u003cul class=\"post-copyright\"\u003e \u003cli\u003e\u003cstrong\u003eæœ¬æ–‡æ ‡é¢˜ï¼š\u003c/strong\u003e\u003ca href=\"\u003c%= post.permalink %\u003e\"\u003e\u003c%= page.title %\u003e\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003cstrong\u003eæœ¬æ–‡ä½œè€…ï¼š\u003c/strong\u003e\u003ca href=\"\u003c%= theme.url %\u003e\"\u003e\u003c%= theme.author %\u003e\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003cstrong\u003eæœ¬æ–‡é“¾æ¥ï¼š\u003c/strong\u003e\u003ca href=\"\u003c%= post.permalink %\u003e\"\u003e\u003c%= post.permalink %\u003e\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003cstrong\u003eå‘å¸ƒæ—¶é—´ï¼š\u003c/strong\u003e\u003c%= post.date.format(\"YYYY-MM-DD\") %\u003e\u003c/li\u003e \u003cli\u003e\u003cstrong\u003eç‰ˆæƒå£°æ˜ï¼š\u003c/strong\u003eæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ \u003ca href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh\" rel=\"external nofollow\" target=\"_blank\"\u003eCC BY-NC-SA 4.0\u003c/a\u003e è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼ \u003c/li\u003e \u003c/ul\u003e \u003c% } %\u003e ","date":"2020-01-06","objectID":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/:3:4","tags":["icarus","Hexo","blog"],"title":"é…ç½®icarusä¸»é¢˜","uri":"/posts/%E9%85%8D%E7%BD%AEicarus%E4%B8%BB%E9%A2%98/"},{"categories":null,"content":"ä½¿ç”¨Pythonä»£ç æ¥æµ‹è¯•ä¸€ä¸‹Hexoæ¡†æ¶å¯¹Markdownæ ¼å¼ä¸­ä»£ç å—é¢œè‰²ä»¥åŠè¯­æ³•é«˜äº®çš„æƒ…å†µï¼ from collections import namedtuple Card = namedtuple('Card', ['rank', 'suit']) class FrenchDeck: ranks = [str(n) for n in range(2, 11)] + list('JQKA') suits = 'spades diamonds clubs hearts'.split() #åˆå§‹åŒ–ç»“æœæ˜¯ä¸€ä¸ªåˆ—è¡¨ def __init__(self): self._cards = [Card(rank, suit) for suit in self.suits for rank in self.ranks] def __len__(self): return len(self._cards) def __getitem__(self, item): return self._cards[item] # å®šä¹‰spades diamonds clubs heartsçš„å¤§å°è§„åˆ™ suit_values = dict(spades=3, hearts=2, diamonds=1, clubs=0) def spades_high(card): rank_value = FrenchDeck.ranks.index(card.rank) return rank_value * len(suit_values) + suit_values[card.suit] deck = FrenchDeck() print(len(deck)) print(type(deck)) card_list = sorted(deck, key=spades_high) print(card_list) ","date":"2020-01-02","objectID":"/posts/%E4%BB%A3%E7%A0%81%E6%B5%8B%E8%AF%95/:0:0","tags":null,"title":"æµ‹è¯•ä»£ç å—é¢œè‰²","uri":"/posts/%E4%BB%A3%E7%A0%81%E6%B5%8B%E8%AF%95/"},{"categories":["Python"],"content":"Pythonä¸­çš„é­”æ³•å‡½æ•°æ˜¯ä¸€ä¸ªå¾ˆç¥å¥‡çš„ä¸œè¥¿ ä»€ä¹ˆæ˜¯é­”æ³•å‡½æ•° åœ¨pythonä¸­ï¼Œæœ‰ä¸€äº›å†…ç½®å¥½çš„ç‰¹å®šçš„å‡½æ•°ï¼Œè¿™äº›æ–¹æ³•åœ¨è¿›è¡Œç‰¹å®šçš„æ“ä½œæ—¶ä¼šè‡ªåŠ¨è¢«è°ƒç”¨ï¼Œç§°ä¹‹ä¸ºé­”æ³•å‡½æ•°ã€‚ Pythonä¸­çš„é­”æ³•å‡½æ•°å°±æ˜¯ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´å’Œç»“å°¾çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥è®©æˆ‘ä»¬è‡ªå·±éšæ„çš„åˆ¶å®šè‡ªå®šä¹‰ç±»çš„ç‰¹æ€§ã€‚ é­”æ³•å‡½æ•°å¯ä»¥åœ¨ä»»æ„ä¸€ä¸ªè‡ªå®šä¹‰ç±»ä¸­é‡å†™ï¼Œå› æ­¤å®ƒå…¶å®ä¸æ˜¯objectç±»çš„ä¸€ä¸ªæ–¹æ³•ã€‚ é­”æ³•å‡½æ•°å¹¶ä¸å’Œç±»æŒ‚é’©ï¼Œå®ƒæ˜¯ä¸ºäº†å¢åŠ ç±»çš„ç‰¹æ€§ åœ¨ä½¿ç”¨çš„æ—¶å€™å¹¶ä¸éœ€è¦è°ƒç”¨ï¼Œåªéœ€è¦ä½¿ç”¨ç›¸å…³çš„å‡½æ•°å°±ä¼šè‡ªåŠ¨è°ƒç”¨ ","date":"2019-11-22","objectID":"/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AD%94%E6%B3%95%E5%87%BD%E6%95%B0/:0:0","tags":["Python","é­”æ³•å‡½æ•°"],"title":"ä»€ä¹ˆæ˜¯é­”æ³•å‡½æ•°","uri":"/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AD%94%E6%B3%95%E5%87%BD%E6%95%B0/"},{"categories":["Python"],"content":"å…ƒç±»ç›¸å…³ __init__: åˆå§‹åŒ–å‡½æ•°ï¼Œåœ¨åˆ›å»ºå®ä¾‹å¯¹è±¡ä¸ºå…¶èµ‹å€¼çš„æ—¶å€™ä½¿ç”¨ï¼Œåœ¨__new__ä¹‹åï¼Œ__init__å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªå‚æ•°selfï¼Œå°±æ˜¯è¿™ä¸ª__new__è¿”å›çš„å®ä¾‹ï¼Œ__init__æ˜¯åœ¨__new__çš„åŸºç¡€ä¸Šå¯ä»¥å®Œæˆä¸€äº›å…¶ä»–åˆå§‹åŒ–çš„åŠ¨ä½œï¼Œ__init__ä¸éœ€è¦è¿”å›å€¼ã€‚__init__å‡½æ•°ä¼šåœ¨å¯¹è±¡åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨ class MySelf(object): def __init__(self, name, age): self.name = name self.age = age def do(self, doing): return \"%så·²ç»%så²äº†ï¼Œæ­£åœ¨å­¦ä¹ %s\" % (self.name, self.age, doing) def main(): myself = MySelf(\"pujic\", 18) print(myself.do(\"é­”æ³•å‡½æ•°\")) if __name__ == '__main__': main() pujicå·²ç»18å²äº†ï¼Œæ­£åœ¨å­¦ä¹ é­”æ³•å‡½æ•° class Company(object): def __init__(self, employee_list): self.employee = employee_list company = Company([\"tom\", \"bob\", \"jane\"]) employee = company.employee for em in employee: print(em) tom bob jane ","date":"2019-11-22","objectID":"/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AD%94%E6%B3%95%E5%87%BD%E6%95%B0/:1:0","tags":["Python","é­”æ³•å‡½æ•°"],"title":"ä»€ä¹ˆæ˜¯é­”æ³•å‡½æ•°","uri":"/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AD%94%E6%B3%95%E5%87%BD%E6%95%B0/"},{"categories":["Python"],"content":"é›†åˆåºåˆ—ç›¸å…³__getitem__ ä½¿ç”¨getitemè¿™ä¸ªé­”æ³•å‡½æ•°çš„æ—¶å€™å°±ç»™è¿™ä¸ªå®ä¾‹åŒ–çš„å¯¹è±¡æ·»åŠ äº†ä¸€ä¸ªå¯è¿­ä»£çš„å±æ€§ï¼Œä½¿ç”¨forå¾ªç¯çš„æ—¶å€™ï¼Œè§£é‡Šå™¨ä¼šå°è¯•ç€å»å¯»æ‰¾å¯¹è±¡çš„è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿­ä»£å™¨å°±ä¼šå°è¯•æ‰¾å¯¹è±¡ä¸­æœ‰æ²¡æœ‰getitemè¿™ä¸ªæ–¹æ³•ï¼Œæœ‰çš„è¯å°±å›å»è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œç›´åˆ°æŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åç»“æŸforå¾ªç¯ class Company(object): def __init__(self, employee_list): self.employee = employee_list def __getitem__(self, item): return self.employee[item] company = Company([\"tom\", \"bob\", \"jane\"]) company1 = company[:2] for em in company: print(em) print(len(company1)) tom bob jane 2 ","date":"2019-11-22","objectID":"/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AD%94%E6%B3%95%E5%87%BD%E6%95%B0/:2:0","tags":["Python","é­”æ³•å‡½æ•°"],"title":"ä»€ä¹ˆæ˜¯é­”æ³•å‡½æ•°","uri":"/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AD%94%E6%B3%95%E5%87%BD%E6%95%B0/"},{"categories":["Python"],"content":"é›†åˆåºåˆ—ç›¸å…³__len__ class Company(object): def __init__(self, employee_list): self.employee = employee_list def __getitem__(self, item): return self.employee[item] company = Company([\"tom\", \"bob\", \"jane\"]) for em in company: print(em) print(len(company)) tom bob jane --------------------------------------------------------------------------- TypeError Traceback (most recent call last) \u003cipython-input-4-0016aa621a9e\u003e in \u003cmodule\u003e 12 print(em) 13 ---\u003e 14 print(len(company)) TypeError: object of type 'Company' has no len() ä¸€ä¸ªå¯¹è±¡è™½ç„¶å¯è¿­ä»£ï¼Œä½†æ˜¯æ²¡æœ‰é•¿åº¦å±æ€§ï¼Œä¹Ÿæ˜¯ä¸èƒ½ä½¿ç”¨len()å‡½æ•°å»è®¡ç®—é•¿åº¦çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨lenè¿™ä¸ªé­”æ³•æ–¹æ³•ï¼Œç»™å¯¹è±¡æ·»åŠ è®¡ç®—é•¿åº¦çš„å±æ€§ class Company(object): def __init__(self, employee_list): self.employee = employee_list def __getitem__(self, item): return self.employee[item] def __len__(self): return len(self.employee) company = Company([\"tom\", \"bob\", \"jane\"]) print(len(company)) 3 ","date":"2019-11-22","objectID":"/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AD%94%E6%B3%95%E5%87%BD%E6%95%B0/:3:0","tags":["Python","é­”æ³•å‡½æ•°"],"title":"ä»€ä¹ˆæ˜¯é­”æ³•å‡½æ•°","uri":"/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AD%94%E6%B3%95%E5%87%BD%E6%95%B0/"},{"categories":["Python"],"content":"å­—ç¬¦ä¸²è¡¨ç¤º__str__ æˆ‘ä»¬ç›´æ¥è¾“å‡ºä¸€ä¸ªç±»å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå¾—åˆ°çš„å°†ä¼šæ˜¯è¿™ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€ class Company(object): def __init__(self, employee_list): self.employee = employee_list company = Company([\"tom\", \"bob\", \"jane\"]) print(company) \u003c__main__.Company object at 0x05EDEF50\u003e æƒ³æ‰“å°ä¸€ä¸ªå¯¹è±¡çš„å†…å®¹ï¼Œå°±éœ€è¦æ·»åŠ ä¸€ä¸ª__str__é­”æ³•æ–¹æ³• class Company(object): def __init__(self, employee_list): self.employee = employee_list def __str__(self): return \",\".join(self.employee) company = Company([\"tom\", \"bob\", \"jane\"]) print(company) tom,bob,jane è™½ç„¶ä¸€ä¸ªå¯¹è±¡æ˜¯æœ‰é­”æ³•å‡½æ•°strçš„ä½†æ˜¯éœ€è¦é…åˆprintå‡½æ•°æ‰èƒ½æ‰“å°ï¼Œåœ¨äº¤äº’æ¨¡å¼ä¸‹ç›´æ¥è¾“å…¥æ­¤å¯¹è±¡æ˜¯ä¼šæç¤ºè¯¥å¯¹è±¡çš„åœ°å€é—®é¢˜ï¼Œåœ¨IDEé‡Œé¢å°±ä¸ä¼šæœ‰ä»»ä½•è¾“å‡ºï¼Œæƒ³åœ¨äº¤äº’æ¨¡å¼ä¸‹ç›´æ¥è¾“å…¥æ­¤å¯¹è±¡å¹¶æ‰“å°å‡ºæ¥å°±éœ€è¦ä½¿ç”¨reprè¿™ä¸ªé­”æ³•å‡½æ•° \u003e\u003e\u003e class Company(object): ... def __init__(self, employee_list): ... self.employee = employee_list ... ... def __str__(self): ... return \",\".join(self.employee) ... ... def __repr__(self): ... return \",\".join(self.employee) ... \u003e\u003e\u003e company = Company([\"tom\", \"bob\", \"jane\"]) \u003e\u003e\u003e company #éšå«çš„å»è°ƒç”¨repré­”æ³•å‡½æ•° tom,bob,jane ","date":"2019-11-22","objectID":"/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AD%94%E6%B3%95%E5%87%BD%E6%95%B0/:4:0","tags":["Python","é­”æ³•å‡½æ•°"],"title":"ä»€ä¹ˆæ˜¯é­”æ³•å‡½æ•°","uri":"/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AD%94%E6%B3%95%E5%87%BD%E6%95%B0/"},{"categories":["Python"],"content":"Pythonä¸­çš„æ•°æ®ç±»å‹ æ›´è¯¦ç»†çš„å¸¸è§å†…ç½®ç±»å‹å¯å‚ç…§å®˜æ–¹æ–‡æ¡£https://docs.python.org/zh-cn/3.7/library/stdtypes.html None ç¨‹åºå…¨å±€ä¸­åªæœ‰ä¸€ä¸ªï¼ˆPythoåœ¨è§£é‡Šå™¨å¯åŠ¨çš„æ—¶å€™Pythonä¼šç”¨Noneç±»å‹ç”Ÿæˆä¸€ä¸ªNoneå¯¹è±¡ï¼‰ None æ˜¯ Python ç‰¹æ®Šçš„æ•°æ®ç±»å‹NoneTypeï¼Œå®ƒæ˜¯ä¸€ä¸ªç©ºå€¼ï¼Œå¯å°† None èµ‹å€¼ç»™ä»»ä½•æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ä¸èƒ½åˆ›å»ºå…¶ä»–NoneTypeå¯¹è±¡ï¼ŒNoneä¸ç­‰äº0ï¼Œä¹Ÿä¸ç­‰äºTrueæˆ–Falseï¼Œå› æ­¤åœ¨å¸ƒå°”è¡¨è¾¾å¼ä¸Šä¸èƒ½ç”¨Noneæ¥å•ç‹¬è¡¨ç¤º \u003e\u003e\u003e type(None) \u003cclass 'NoneType'\u003e \u003e\u003e\u003e None == 0 False \u003e\u003e\u003e None == True False \u003e\u003e\u003e None == False False æ•°å€¼ç±»å‹ ","date":"2019-11-22","objectID":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/:0:0","tags":["Python"],"title":"Pythonå†…ç½®ç±»å‹","uri":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"æ•´æ•° æ•´æ•°å…·æœ‰æ— é™çš„ç²¾åº¦ï¼Œæ•´æ•°æ°¸è¿œæ˜¯ç²¾ç¡®çš„ï¼Œç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œä½†æ˜¯ç»“æœä¸ä¸€å®šæ˜¯intå‹ \u003e\u003e\u003e 1/2 0.5 \u003e\u003e\u003e a = -1 \u003e\u003e\u003e type(a) \u003cclass 'int'\u003e \u003e\u003e\u003e 1//2 0 \u003e\u003e\u003e type(1//2) \u003cclass 'int'\u003e \u003e\u003e\u003e type(4.0) \u003cclass 'float'\u003e \u003e\u003e\u003e pow(0, 0) 1 4.0æ˜¯æ•´æ•°ï¼Œä½†æ˜¯4.0å¹¶ä¸æ˜¯intç±»å‹ ","date":"2019-11-22","objectID":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/:1:0","tags":["Python"],"title":"Pythonå†…ç½®ç±»å‹","uri":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"æµ®ç‚¹æ•° æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°ä¼šè¢«èˆæ‰å°æ•°ï¼Œè€Œä¸æ˜¯å››èˆäº”å…¥ \u003e\u003e\u003e int(4.6) 4 \u003e\u003e\u003e int(4.1) 4 \u003e\u003e\u003e int(4.9) 4 ","date":"2019-11-22","objectID":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/:2:0","tags":["Python"],"title":"Pythonå†…ç½®ç±»å‹","uri":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"è™šæ•° è™šéƒ¨ä¸å¡«æ—¶é»˜è®¤ä¸º0ï¼Œåœ¨Pythonä¸­è™šæ•°çš„è™šéƒ¨ä¸æ˜¯ç”¨iï¼Œè€Œæ˜¯j \u003e\u003e\u003e int(4.1) 4 \u003e\u003e\u003e int(4.9) 4 \u003e\u003e\u003e complex(4, 8) (4+8j) \u003e\u003e\u003e complex(4) (4+0j) ","date":"2019-11-22","objectID":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/:3:0","tags":["Python"],"title":"Pythonå†…ç½®ç±»å‹","uri":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"å¸ƒå°”å‹ å¸ƒå°”å€¼å±äºæ•´æ•°çš„å­ç±»å‹ notçš„ä¼˜å…ˆçº§æ¯”éå¸ƒå°”è¿ç®—ç¬¦ä½ï¼Œå› æ­¤ not a == b ä¼šè¢«è§£è¯»ä¸º not (a == b) ï¼Œè€Œ a == not b ä¼šå¼•å‘è¯­æ³•é”™è¯¯ \u003e\u003e\u003e a = 3 \u003e\u003e\u003e b = 0 \u003e\u003e\u003e a == b False \u003e\u003e\u003e not a == b True \u003e\u003e\u003e not b == a True \u003e\u003e\u003e (not b) == a False \u003e\u003e\u003e not b True \u003e\u003e\u003e b == not a File \"\u003cstdin\u003e\", line 1 b == not a ^ SyntaxError: invalid syntax \u003e\u003e\u003e 4.0 == 4 True è¿­ä»£ç±»å‹ Python æ”¯æŒåœ¨å®¹å™¨ä¸­è¿›è¡Œè¿­ä»£ å®¹å™¨å¯¹è±¡è¦æä¾›è¿­ä»£æ”¯æŒï¼Œå¿…é¡»å®šä¹‰ä¸€ä¸ªæ–¹æ³• å¯ä»¥é€šè¿‡for â€¦â€¦ in â€¦â€¦çš„è¯­æ³•æ¥å®ç°å¾ªç¯éå†ï¼Œè¿™ä¸ªå¾ªç¯æˆ‘ä»¬å°±å«åšè¿­ä»£ é€šè¿‡collectionsä¸­çš„Iterableç±»å‹åˆ¤æ–­è¯¥å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«è¿­ä»£ \u003e\u003e\u003e from collections.abc import Iterable \u003e\u003e\u003e isinstance([1, 2, 3], Iterable) True \u003e\u003e\u003e isinstance(123, Iterable) False \u003e\u003e\u003e isinstance(\"abc\", Iterable) True \u003e\u003e\u003e dic = {\"name\": \"pujic\", \"age\": \"4\"} \u003e\u003e\u003e isinstance(dic, Iterable) True \u003e\u003e\u003e for key, value in dic.items(): ... print(key, value) ... name pujic age 4 \u003e\u003e\u003e tup = 1, \"a\", \"2\" \u003e\u003e\u003e isinstance(tup, Iterable) True \u003e\u003e\u003e s = set([1, 2, 3]) \u003e\u003e\u003e isinstance(s, Iterable) True \u003e\u003e\u003e for i in s: ... print(i) ... 1 2 3 \u003e\u003e\u003e a = \"abc\" \u003e\u003e\u003e isinstance(a, Iterable) é›†åˆè™½ç„¶æ— åºï¼Œä½†æ˜¯é›†åˆå´æ˜¯å¯è¿­ä»£ç±»å‹ åºåˆ—ç±»å‹ ","date":"2019-11-22","objectID":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/:4:0","tags":["Python"],"title":"Pythonå†…ç½®ç±»å‹","uri":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"list åˆ—è¡¨æ˜¯Pythonä¸­æœ€å¸¸ç”¨åˆ°çš„å†…ç½®ç±»å‹ \u003e\u003e\u003e #åˆ—è¡¨æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œå½“Aåˆ—è¡¨èµ‹å€¼ç»™Båˆ—è¡¨åï¼ŒAåˆ—è¡¨çš„å€¼å‘ç”Ÿäº†å˜åŒ–ï¼ŒBåˆ—è¡¨çš„å€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ– \u003e\u003e\u003e list1 = [1, 2, 3, 4, 5, 6, 7, 8, 9] \u003e\u003e\u003e list2 = list1 \u003e\u003e\u003e del list1[2] \u003e\u003e\u003e list2 [1, 2, 4, 5, 6, 7, 8, 9] \u003e\u003e\u003e #ä½¿ç”¨indexå¯ä»¥è¿”å›åˆ—è¡¨çš„ç´¢å¼• \u003e\u003e\u003e list2.index(4) 2 \u003e\u003e\u003e #ç›´æ¥ä½¿ç”¨åˆ—è¡¨ç´¢å¼•å¯ä»¥æ”¹å˜åˆ—è¡¨å…ƒç´ çš„å€¼ \u003e\u003e\u003e list1[0] = \"a\" \u003e\u003e\u003e list1 ['a', 2, 4, 5, 6, 7, 8, 9] \u003e\u003e\u003e #ä½¿ç”¨appendåœ¨åˆ—è¡¨çš„æœ«å°¾æ·»åŠ å…ƒç´  \u003e\u003e\u003e list1.append(\"b\") \u003e\u003e\u003e list1 ['a', 2, 4, 5, 6, 7, 8, 9, 'b'] \u003e\u003e\u003e #ä½¿ç”¨insertåœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´  \u003e\u003e\u003e list1.insert(2, \"c\") \u003e\u003e\u003e list1 ['a', 2, 'c', 4, 5, 6, 7, 8, 9, 'b'] \u003e\u003e\u003e # åˆ é™¤å…ƒç´ ï¼Œpopæ–¹æ³•ä¼šå°†åˆ é™¤çš„å…ƒç´ ä½œä¸ºè¿”å›å€¼è¿”å› \u003e\u003e\u003e del list1[0] \u003e\u003e\u003e list1 [2, 'c', 4, 5, 6, 7, 8, 9, 'b'] \u003e\u003e\u003e list1.pop() 'b' \u003e\u003e\u003e list1 [2, 'c', 4, 5, 6, 7, 8, 9] \u003e\u003e\u003e list1.pop(1) 'c' \u003e\u003e\u003e list1 [2, 4, 5, 6, 7, 8, 9] \u003e\u003e\u003e #ä½¿ç”¨removeåˆ é™¤æŒ‡å®šå…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨ä¸­æœ‰å¤šä¸ªæŒ‡å®šå€¼ï¼Œremoveåªä¼šåˆ é™¤æŒ‡å®šå€¼çš„ç¬¬ä¸€ä¸ª \u003e\u003e\u003e s = ['a', 'b', 'c', 'd'] \u003e\u003e\u003e s.remove('a') \u003e\u003e\u003e s ['b', 'c', 'd'] \u003e\u003e\u003e #ä½¿ç”¨åˆ‡ç‰‡å–å€¼ \u003e\u003e\u003e list1 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] \u003e\u003e\u003e list1[0:10:2] [0, 2, 4, 6, 8] \u003e\u003e\u003e max(list1) 9 \u003e\u003e\u003e min(list1) 0 \u003e\u003e\u003e list2 = [\"wdhqu\", \"dqhh\", \"djweiy\", \"as\", \"zzz\"] \u003e\u003e\u003e max(list2) 'zzz' \u003e\u003e\u003e list1 = [989089, -483748928, 7432] \u003e\u003e\u003e max(list1, key=abs) -483748928 \u003e\u003e\u003e list1.extend(list2) \u003e\u003e\u003e list1 [989089, -483748928, 7432, 'wdhqu', 'dqhh', 'djweiy', 'as', 'zzz'] pythonä¸­maxå‡½æ•°é»˜è®¤æ•°å€¼å‹å‚æ•°ï¼Œå–å€¼å¤§è€…ï¼›å­—ç¬¦å‹å‚æ•°ï¼Œå–å­—æ¯è¡¨æ’åºé åè€…ï¼›åºåˆ—å‹å‚æ•°ï¼Œåˆ™ä¾æ¬¡æŒ‰ç´¢å¼•ä½ç½®çš„å€¼è¿›è¡Œæ¯”è¾ƒå–æœ€å¤§è€…ã€‚è¿˜å¯ä»¥é€šè¿‡ä¼ å…¥å‘½åå‚æ•°keyï¼ŒæŒ‡å®šå–æœ€å¤§å€¼æ–¹æ³•ã€‚ \u003e\u003e\u003e list1 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] \u003e\u003e\u003e max(list1) 9 \u003e\u003e\u003e min(list1) 0 \u003e\u003e\u003e list2 = [\"wdhqu\", \"dqhh\", \"djweiy\", \"as\", \"zzz\"] \u003e\u003e\u003e max(list2) 'zzz' \u003e\u003e\u003e list1 = [989089, -483748928, 7432] \u003e\u003e\u003e max(list1, key=abs) -483748928 extendæ–¹æ³•ï¼Œåªè¦æ˜¯å¯è¿­ä»£å¯¹è±¡å°±å¯ä»¥ç›´æ¥ä¼ é€’ï¼Œextendä¼šè°ƒç”¨å¯¹è±¡ä¸­çš„è¿­ä»£å™¨ \u003e\u003e\u003e a = [\"student1\", \"student2\"] \u003e\u003e\u003e b = [\"student3\", \"student4\"] \u003e\u003e\u003e a.extend(b) \u003e\u003e\u003e a ['student1', 'student2', 'student3', 'student4'] ","date":"2019-11-22","objectID":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/:5:0","tags":["Python"],"title":"Pythonå†…ç½®ç±»å‹","uri":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"tuple å…ƒç»„è¿™ç§æ•°æ®ç»“æ„åŒåˆ—è¡¨ç±»ä¼¼ï¼Œéƒ½å¯ä»¥æè¿°ä¸€ç»„æ•°æ®çš„é›†åˆï¼Œå®ƒä»¬éƒ½æ˜¯å®¹å™¨ï¼Œæ˜¯ä¸€ç³»åˆ—ç»„åˆçš„å¯¹è±¡ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œå…ƒç»„é‡Œçš„å…ƒç´ æ˜¯ä¸èƒ½æ›´æ”¹çš„ å…ƒç»„ä¸­åªåŒ…å«ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œéœ€è¦åœ¨å…ƒç´ åé¢æ·»åŠ é€—å·ï¼Œå¦åˆ™æ‹¬å·ä¼šè¢«å½“ä½œè¿ç®—ç¬¦ä½¿ç”¨ å…ƒç»„å¯ä»¥è¿›è¡Œè¿æ¥ç»„åˆ å…ƒç»„è®¿é—®å…ƒç´ çš„æ–¹æ³•å’Œåˆ—è¡¨ç›¸åŒ \u003e\u003e\u003e tup1 = (1, 3, \"p\") \u003e\u003e\u003e tup2 = (88, 32, 5, \"name\", \"age\") \u003e\u003e\u003e tup3 = tup1 + tup2 \u003e\u003e\u003e tup3 (1, 3, 'p', 88, 32, 5, 'name', 'age') \u003e\u003e\u003e #å…ƒç»„å…ƒç´ ä¸å¯æ”¹å˜ï¼Œä¹Ÿä¸å¯å¢å‡ \u003e\u003e\u003e del tup1[0] Traceback (most recent call last): File \"\u003cstdin\u003e\", line 1, in \u003cmodule\u003e TypeError: 'tuple' object doesn't support item deletion \u003e\u003e\u003e tup1[2] 'p' \u003e\u003e\u003e a, b, c = tup1 \u003e\u003e\u003e a 1 \u003e\u003e\u003e type(a) \u003cclass 'int'\u003e \u003e\u003e\u003e # åˆ›å»ºå…ƒç»„æ—¶å¦‚æœåªæœ‰ä¸€ä¸ªå…ƒç´ è¦åœ¨å…ƒç´ åæ·»åŠ ä¸€ä¸ªé€—å· \u003e\u003e\u003e a = (1) \u003e\u003e\u003e a 1 \u003e\u003e\u003e type(a) \u003cclass 'int'\u003e \u003e\u003e\u003e tup1 = 1, 2, 3, 4 \u003e\u003e\u003e tup1 (1, 2, 3, 4) \u003e\u003e\u003e type(tup1) \u003cclass 'tuple'\u003e å…ƒç»„æ‹†åŒ… å…ƒç»„æ‹†åŒ…å¯ä»¥ä½¿ç”¨*æ¥å¤„ç†å‰©ä¸‹çš„å…ƒç´ ï¼Œè¿™ä¸ªåº”ç”¨æœ€å…ˆå‡ºç°åœ¨å‡½æ•°ç”¨*argsæ¥è·å–ä¸ç¡®å®šæ•°é‡çš„å‚æ•° \u003e\u003e\u003e tup = (1, 2, \"a\") \u003e\u003e\u003e a, b, c = tup \u003e\u003e\u003e print(a, b, c) 1 2 a \u003e\u003e\u003e a, *_ = tup \u003e\u003e\u003e a 1 \u003e\u003e\u003e _ [2, 'a'] \u003e\u003e\u003e ","date":"2019-11-22","objectID":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/:6:0","tags":["Python"],"title":"Pythonå†…ç½®ç±»å‹","uri":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"range range() è¿”å›çš„æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¯ä»¥ç”¨æ¥ç”Ÿæˆåˆ—è¡¨ï¼Œå¯ä»¥ä»¥ç”¨æ¥è¿­ä»£ \u003e\u003e\u003e l = list(range(10)) \u003e\u003e\u003e l [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] \u003e\u003e\u003e for i in range(0, 11, 3): ... print(i) ... 0 3 6 9 \u003e\u003e\u003e sum(range(101)) 5050 ","date":"2019-11-22","objectID":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/:7:0","tags":["Python"],"title":"Pythonå†…ç½®ç±»å‹","uri":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"str å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜ç±»å‹ï¼Œä¸èƒ½é€šè¿‡ç´¢å¼•æ¥ä¿®æ”¹å­—ç¬¦ä¸² \u003e\u003e\u003e a = \"asdfghjkl\" \u003e\u003e\u003e a[3] 'f' \u003e\u003e\u003e a[1:4] 'sdf' \u003e\u003e\u003e a[-1:-6:-2] 'ljg' \u003e\u003e\u003e for i in a: ... print(i) ... a s d f g h j k l \u003e\u003e\u003e a[0] = \"1\" Traceback (most recent call last): File \"\u003cstdin\u003e\", line 1, in \u003cmodule\u003e TypeError: 'str' object does not support item assignment æ˜ å°„ç±»å‹ dictå…¨ç§°dictionaryï¼Œä½¿ç”¨é”®-å€¼ï¼ˆkey-valueï¼‰å­˜å‚¨ï¼Œå…·æœ‰æå¿«çš„æŸ¥æ‰¾é€Ÿåº¦ã€‚ å­—å…¸æ˜¯å¦ä¸€ç§å¯å˜å®¹å™¨æ¨¡å‹ï¼Œä¸”å¯å­˜å‚¨ä»»æ„ç±»å‹å¯¹è±¡ã€‚ å­—å…¸æ˜¯Pythonä¸­å”¯ä¸€å†…å»ºçš„æ˜ å°„ç±»å‹ï¼Œå­—å…¸æŒ‡å®šå€¼å¹¶æ²¡æœ‰ç‰¹æ®Šé¡ºåºï¼Œéƒ½å­˜å‚¨åœ¨ä¸€ä¸ªç‰¹æ®Šçš„é”®(key)é‡Œï¼Œé”®å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²æˆ–å…ƒç»„ã€‚æ˜ å°„æ˜¯ä¸€ç§é€šè¿‡åå­—å¼•ç”¨å€¼å¾—æ•°æ®ç»“æ„ã€‚ å­—å…¸å€¼å¯ä»¥æ²¡æœ‰é™åˆ¶åœ°å–ä»»ä½•Pythonå¯¹è±¡ï¼Œæ—¢å¯ä»¥æ˜¯æ ‡å‡†å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ï¼Œä½†é”®ä¸å¯ä»¥ï¼Œå­—å…¸çš„é”®å¿…é¡»æ˜¯å¯å“ˆå¸Œçš„ \u003e\u003e\u003e dic = {\"name\": \"p\", \"age\": \"100\"} \u003e\u003e\u003e dic[\"name\"] 'p' \u003e\u003e\u003e len(dic) 2 \u003e\u003e\u003e stu = [('name','pu'),('number','1001')] \u003e\u003e\u003e stu = [('name','p'),('number','1001')] \u003e\u003e\u003e dic_id = dict(stu) \u003e\u003e\u003e dic_id {'name': 'p', 'number': '1001'} \u003e\u003e\u003e dic_id[\"number\"] '1001' \u003e\u003e\u003e dic_id.clear() \u003e\u003e\u003e dic_id {} \u003e\u003e\u003e # æ‹¼æ¥å­—å…¸ï¼Œå¦‚æœæœ‰ç›¸åŒçš„é”®ï¼Œé‚£ä¹ˆåé¢çš„å€¼ä¼šè¦†ç›–å‰é¢çš„ \u003e\u003e\u003e x = {\"name\": \"p\", \"age\": 18} \u003e\u003e\u003e y = {\"name\": \"j\", \"age\": 12} \u003e\u003e\u003e z = {**x, **y} \u003e\u003e\u003e z {'name': 'j', 'age': 12} å­—å…¸çš„æ–¹æ³•è¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œä½†æ˜¯ç”¨çš„æ¯”è¾ƒå°‘ æ–¹æ³•å’Œæ–¹æ³• æè¿° len() len(dict)å‡½æ•°ç”¨äºè®¡ç®—å­—å…¸å…ƒç´ çš„ä¸ªæ•°ï¼Œå³é”®çš„æ€»æ•°ã€‚PSï¼šä»1å¼€å§‹è®¡ç®—ï¼Œå¹¶ä¸æ˜¯ä»0å¼€å§‹è®¡ç®— type() type(variable)å‡½æ•°è¿”å›è¾“å…¥çš„å˜é‡ç±»å‹ clear() clear()æ–¹æ³•ç”¨äºåˆ é™¤å­—å…¸å†…çš„æ‰€æœ‰é¡¹ï¼Œè¯¥æ–¹æ³•ä¸éœ€è¦å‚æ•°ï¼Œè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªåŸåœ°æ“ä½œå‡½æ•°ï¼Œæ²¡æœ‰ä»»ä½•è¿”å›å€¼ã€‚å­—å…¸è°ƒç”¨clearæ–¹æ³•åæ•´ä¸ªå­—å…¸å†…æ‰€æœ‰é¡¹éƒ½è¢«åˆ é™¤ copy() copy()æ–¹æ³•è¿”å›ä¸€ä¸ªå…·æœ‰ç›¸åŒé”®/å€¼å¯¹çš„æ–°å­—å…¸ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯æµ…å¤åˆ¶ï¼Œå› ä¸ºå€¼æœ¬èº«æ˜¯ç›¸åŒçš„ï¼Œè€Œä¸æ˜¯å‰¯æœ¬.è¯¥æ–¹æ³•ä¸éœ€è¦å‚æ•°ï¼Œè¿”å›ç»“æœä¸ºä¸€ä¸ªå­—å…¸çš„æµ…å¤åˆ¶ã€‚æ›¿æ¢å‰¯æœ¬çš„å€¼æ—¶åŸå§‹å­—å…¸ä¸å—å½±å“ã€‚å¦‚æœä¿®æ”¹äº†æŸä¸ªå€¼ï¼ˆåŸåœ°ä¿®æ”¹ï¼Œä¸æ˜¯æ›¿æ¢ï¼‰ï¼ŒåŸå§‹å­—å…¸å°±ä¼šæ”¹å˜ï¼Œå› ä¸ºåŒæ ·çš„å€¼ä¹Ÿåœ¨åŸå­—å…¸ä¸­ï¼Œä»¥è¿™ç§æ–¹å¼è¿›è¡Œå¤åˆ¶å°±æ˜¯æµ…å¤åˆ¶ï¼Œè€Œä½¿ç”¨æ·±å¤åˆ¶å¯ä»¥é¿å…è¯¥é—®é¢˜ fromkeys() fromkeys()æ–¹å¼ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°å­—å…¸ï¼›ä»¥åºåˆ—seqä¸­çš„å…ƒç´ åšå­—å…¸çš„é”®ï¼Œvalueä¸ºå­—å…¸æ‰€æœ‰é”®å¯¹åº”çš„åˆå§‹å€¼ã€‚ get() get()æ–¹æ³•è¿”å›æŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœå€¼ä¸åœ¨å­—å…¸ä¸­ï¼Œå°±è¿”å›é»˜è®¤å€¼ã€‚æ­¤è¯­æ³•ä¸­dictä»£è¡¨æŒ‡å®šå­—å…¸ï¼Œkeyä»£è¡¨å­—å…¸ä¸­è¦æŸ¥æ‰¾çš„é”®ï¼Œdefaultä»£è¡¨æŒ‡å®šé”®çš„å€¼ä¸å­˜åœ¨æ—¶è¿”å›é»˜è®¤å€¼ã€‚è¯¥æ–¹æ³•è¿”å›ç»“æœä¸ºæŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœå€¼ä¸åœ¨å­—å…¸ä¸­ï¼Œå°±è¿”å›é»˜è®¤å€¼Noneã€‚ç”±ç»“æœçœ‹åˆ°ï¼Œå…¶ä»–æ–¹æ³•è¯•å›¾è®¿é—®å­—å…¸ä¸­ä¸å­˜åœ¨çš„é¡¹æ—¶ä¼šæŠ¥é”™ï¼Œè€Œä½¿ç”¨getæ–¹æ³•å°±ä¸ä¼šã€‚ä½¿ç”¨getæ–¹æ³•è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„é”®æ—¶ï¼Œè¿”å›Noneï¼Œè¿™é‡Œè¿˜å¯ä»¥è‡ªå®šä¹‰é»˜è®¤å€¼ï¼Œç”¨äºæ›¿æ¢None key in dict() Pythonå­—å…¸inæ“ä½œç¬¦ç”¨äºåˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨ä¸å­—å…¸ä¸­ï¼Œå¦‚æœé”®åœ¨å­—å…¸dictä¸­å°±è¿”å›Trueï¼Œå¦åˆ™è¿”å›Flase items() items()æ–¹æ³•ä»¥åˆ—è¡¨è¿”å›å¯éå†çš„ï¼ˆé”®,å€¼ï¼‰å…ƒç»„æ•°ç»„ï¼Œè¿”å›ç»“æœä¸ºä¸€ä¸ªå…ƒç»„æ•°ç»„ã€‚æ­¤è¯­æ³•ä¸­dictä»£è¡¨æŒ‡å®šå­—å…¸ï¼Œè¯¥æ–¹æ³•ä¸éœ€è¦å‚æ•°ï¼Œè¿”å›ç»“æœä¸ºå¯éå†çš„ï¼ˆé”®/å€¼ï¼‰å…ƒç»„æ•°ç»„ keys() keys()è¿”å›ä»¥åˆ—è¡¨è¿”å›ä¸€ä¸ªå­—å…¸æ‰€æœ‰é”®ã€‚æ­¤è¯­æ³•ä¸­dictä»£è¡¨æŒ‡å®šå­—å…¸ï¼Œè¯¥æ–¹æ³•ä¸éœ€è¦å‚æ•°ï¼Œè¿”å›ç»“æœä¸ºä¸€ä¸ªå­—å…¸æ‰€æœ‰é”® setdefault() setdefault()æ–¹æ³•å’Œget()æ–¹æ³•ç±»ä¼¼ï¼Œç”¨äºè·å¾—ä¸ç»™å®šé”®ç›¸å…³è”çš„å€¼ï¼Œå¦‚æœé”®ä¸å­˜åœ¨ä¸å­—å…¸ä¸­ï¼Œå°±ä¼šæ·»åŠ é”®å¹¶å°†å€¼è®¾ä¸ºé»˜è®¤å€¼ã€‚ç”±è¾“å‡ºç»“æœçœ‹åˆ°ï¼Œå½“é”®ä¸å­˜åœ¨æ—¶ï¼Œsetdefaultæ–¹æ³•è¿”å›é»˜è®¤å€¼å¹¶æ›´æ–°å­—å…¸ï¼›å¦‚æœé”®å­˜åœ¨ï¼Œå°±è¿”å›ä¸å…¶å¯¹åº”çš„å€¼ï¼Œä¸æ”¹å˜å­—å…¸ã€‚å’Œgetä¸€æ ·ï¼Œé»˜è®¤å€¼å¯ä»¥é€‰æ‹©ï¼Œå¦‚æœä¸è®¾å®šå°±ä½¿ç”¨Noneï¼Œå¦‚æœè®¾å®šå°±ä½¿ç”¨è®¾å®šçš„å€¼ update() update()æ–¹æ³•ç”¨äºæŠŠå­—å…¸dict2çš„é”®/å€¼å¯¹æ›´æ–°åˆ°dicté‡Œã€‚æ­¤è¯­æ³•ä¸­dictä»£è¡¨æŒ‡å®šå­—å…¸ï¼Œdict2ä»£è¡¨æ·»åŠ åˆ°æŒ‡å®šå­—å…¸dicté‡Œçš„å­—å…¸ã€‚è¯¥æ–¹æ³•æ²¡æœ‰ä»»ä½•è¿”å›å€¼ã€‚æä¾›çš„å­—å…¸ä¸­çš„é¡¹è¢«æ·»åŠ åˆ°æ—§å­—å…¸ä¸­ï¼Œå¦‚æœæœ‰ç›¸åŒçš„é”®å°±ä¼šè¦†ç›– values() values()æ–¹æ³•ä»¥åˆ—è¡¨å½¢å¼è¿”å›å­—å…¸ä¸­æ‰€æœ‰å€¼ï¼Œä¸è¿”å›é”®çš„åˆ—è¡¨ä¸åŒï¼Œè¿”å›çš„åˆ—è¡¨ä¸­å¯ä»¥åŒ…å«é‡å¤çš„å…ƒç´ ã€‚è¯¥æ–¹æ³•ä¸éœ€è¦å‚æ•°ï¼Œè¿”å›ç»“æœä¸ºå­—å…¸ä¸­çš„æ‰€æœ‰å€¼ pop(key[,default]) åˆ é™¤å­—å…¸ç»™å®šé”® key æ‰€å¯¹åº”çš„å€¼ï¼Œå¯¹åº”çš„valueä¹Ÿä¼šä»dictä¸­åˆ é™¤ï¼Œè¿”å›å€¼ä¸ºè¢«åˆ é™¤çš„å€¼ã€‚keyå€¼å¿…é¡»ç»™å‡ºï¼Œå¦åˆ™è¿”å›defaultå€¼ã€‚dictå†…éƒ¨å­˜æ”¾çš„é¡ºåºå’Œkeyæ”¾å…¥çš„é¡ºåºæ˜¯æ²¡æœ‰å…³ç³»çš„ popitem() éšæœºè¿”å›å¹¶åˆ é™¤å­—å…¸ä¸­çš„ä¸€å¯¹é”®å’Œå€¼(ä¸€èˆ¬åˆ é™¤æœ«å°¾å¯¹) \u003e\u003e\u003e dic = {} \u003e\u003e\u003e dic['name']='pu' \u003e\u003e\u003e dic['age', 'height']=100, '3ç±³' \u003e\u003e\u003e dic {'name': 'pu', ('age', 'height'): (100, '3ç±³')} \u003e\u003e\u003e dic = dict.fromkeys([\"A\", \"B\"], 0) \u003e\u003e\u003e dic {'A': 0, 'B': 0} \u003e\u003e\u003e a = \"123\" \u003e\u003e\u003e dic = dict.fromkeys(a, \"str\") \u003e\u003e\u003e dic {'1': 'str', '2': 'str', '3': 'str'} \u003e\u003e\u003e for k, v in dic.items(): ... print(f\"{k}:{v}\") ... 1:str 2:str 3:str é›†åˆ ","date":"2019-11-22","objectID":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/:8:0","tags":["Python"],"title":"Pythonå†…ç½®ç±»å‹","uri":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"set é›†åˆæ˜¯ä¸€ä¸ªæ— åºä¸é‡å¤å…ƒç´ çš„é›†ã€‚åŸºæœ¬åŠŸèƒ½åŒ…æ‹¬å…³ç³»æµ‹è¯•å’Œæ¶ˆé™¤é‡å¤å…ƒç´ ã€‚é›†åˆå¯¹è±¡è¿˜æ”¯æŒ unionï¼ˆè”åˆï¼‰ï¼Œintersectionï¼ˆäº¤ï¼‰ï¼Œdifferenceï¼ˆå·®ï¼‰å’Œ sysmmetric differenceï¼ˆå¯¹ç§°å·®é›†ï¼‰ç­‰æ•°å­¦è¿ç®—,åˆ›å»ºç©ºé›†åˆåªèƒ½ç”¨()ä¸èƒ½ç”¨{},{}æ˜¯ç”¨æ¥åˆ›å»ºç©ºåˆ—è¡¨çš„ \u003e\u003e\u003e s1 = set() \u003e\u003e\u003e s1 set() \u003e\u003e\u003e s1 = set([1, 2, 3, 4]) \u003e\u003e\u003e s1 {1, 2, 3, 4} \u003e\u003e\u003e #é›†åˆé€šè¿‡addæ–¹æ³•æ·»åŠ å…ƒç´  \u003e\u003e\u003e s1.add(\"a\") \u003e\u003e\u003e s1 {1, 2, 3, 4, 'a'} \u003e\u003e\u003e # updateæ–¹æ³•æ˜¯å°†ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡æ‹†åˆ†å»é‡åæ·»åŠ åˆ°é›†åˆä¸­ \u003e\u003e\u003e s1.update(\"abc\") \u003e\u003e\u003e s1 {1, 2, 3, 4, 'a', 'b', 'c'} \u003e\u003e\u003e #discardæ–¹æ³•ä¼šåˆ é™¤æ‰¾åˆ°çš„å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™ä»€ä¹ˆä¹Ÿä¸åš \u003e\u003e\u003e s1.discard(\"b\") \u003e\u003e\u003e s1 {1, 2, 3, 4, 'a', 'c'} è¿˜æœ‰pop(), clear()ç­‰æ–¹æ³•ï¼Œä½¿ç”¨\u0026å¯ä»¥æ±‚ä¸¤ä¸ªé›†åˆä¸­çš„äº¤é›†ï¼Œä½¿ç”¨|å¯ä»¥æ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†ï¼Œä½¿ç”¨-å¯ä»¥æ±‚å·®é›†.é›†åˆå¯ä»¥ä½¿ç”¨å¤§äºï¼ˆ\u003eï¼‰ã€å°äºï¼ˆ\u003cï¼‰ã€å¤§äºç­‰äºï¼ˆ\u003e=ï¼‰ã€å°äºç­‰äºï¼ˆ\u003c=ï¼‰ã€ç­‰äºï¼ˆ==ï¼‰ã€ä¸ç­‰äºï¼ˆï¼=ï¼‰æ¥åˆ¤æ–­æŸä¸ªé›†åˆæ˜¯å¦å®Œå…¨åŒ…å«äºå¦ä¸€ä¸ªé›†åˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­çˆ¶é›†åˆ¤æ–­å‡½æ•°ã€‚ ","date":"2019-11-22","objectID":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/:9:0","tags":["Python"],"title":"Pythonå†…ç½®ç±»å‹","uri":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"ä¸å¯å˜é›†åˆfrozenset Pythonä¸­è¿˜æœ‰ä¸€ç§ä¸å¯æ”¹å˜çš„é›†åˆï¼Œé‚£å°±æ˜¯frozensetï¼Œä¸åƒseté›†åˆï¼Œå¯ä»¥å¢åŠ åˆ é™¤é›†åˆä¸­çš„å…ƒç´ ï¼Œè¯¥é›†åˆä¸­çš„å†…å®¹æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œç±»ä¼¼äºå­—ç¬¦ä¸²ã€å…ƒç»„ã€‚ \u003e\u003e\u003e f1 = frozenset() \u003e\u003e\u003e f1 frozenset() \u003e\u003e\u003e f2 = frozenset({\"a\": \"A\", \"b\": \"B\"}) \u003e\u003e\u003e f2 frozenset({'b', 'a'}) ","date":"2019-11-22","objectID":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/:10:0","tags":["Python"],"title":"Pythonå†…ç½®ç±»å‹","uri":"/posts/python%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Python"],"content":"Pythonå®Œå…¨é¢å‘å¯¹è±¡ ","date":"2019-11-22","objectID":"/posts/python%E4%B8%87%E7%89%A9%E7%9A%86%E5%AF%B9%E8%B1%A1/:0:0","tags":["Python"],"title":"Pythonä¸‡ç‰©çš†å¯¹è±¡","uri":"/posts/python%E4%B8%87%E7%89%A9%E7%9A%86%E5%AF%B9%E8%B1%A1/"},{"categories":["Python"],"content":"Pythonä¸­ä¸€åˆ‡çš†å¯¹è±¡ ç±»ä¹Ÿæ˜¯å¯¹è±¡ï¼Œåœ¨Pythonä¸­ç±»ç›¸å½“äºä¸€ç§æ¨¡æ¿å¯¹è±¡ï¼Œå®ä¾‹åŒ–çš„è¿‡ç¨‹å°±æ˜¯é€šè¿‡æ¨¡æ¿å¯¹è±¡æ¥åˆ›å»ºå¯¹è±¡ def ask(name=\"pujic\"): print(name) ask() æ‰§è¡Œä¹‹åè¾“å‡ºç»“æœè‚¯å®šä¸ºpujic å°†å‡½æ•°èµ‹å€¼ç»™äº†å˜é‡ï¼Œå¯¹å˜é‡è¿›è¡Œæ“ä½œå…¶å®å°±æ˜¯å†å¯¹å‡½æ•°è¿›è¡Œæ“ä½œ def ask(name=\"pujic\"): print(name) my_func = ask my_func(\"tom\") ç±»ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ˜¯ä¸€ç§æ¨¡æ¿å¯¹è±¡ï¼ŒPythonä¸­çš„ç±»ä¸åƒé™æ€è¯­è¨€ä¸­çš„ç±»ï¼Œé™æ€è¯­è¨€ä¸­çš„ç±»å°±æ˜¯ç±»ï¼Œç±»å®ä¾‹åŒ–çš„å¯¹è±¡æ‰æ˜¯å¯¹è±¡ï¼ŒPythonä¸­çš„ç±»æ˜¯ä¸€ç§æ¨¡æ¿å¯¹åƒ class Person: def __init__(self): print(\"jack\") my_class = Person my_class() ä¸Šé¢çš„ç¨‹åºä¸­å¹¶æ²¡æœ‰å®ä¾‹åŒ–Personè¿™ä¸ªç±»ï¼Œå› ä¸ºmy_class = Personè¿™å¥å¹¶æ²¡æœ‰åŠ æ‹¬å·ï¼Œè¿™ä¸ªè¿‡ç¨‹ç›¸å½“äºå¯¹è±¡èµ‹å€¼ï¼Œä¸‹é¢æ‰æ˜¯æ‰§è¡Œè¿™ç±» å‡½æ•°å’Œç±»å¯ä»¥æ·»åŠ åˆ°é›†åˆä¸­ï¼Œè°ƒç”¨å‡½æ•°çš„æ—¶å€™æ²¡æœ‰returnæ‰€ä»¥ä¼šè¿”å›ä¸€ä¸ªNone obj_list = [] obj_list.append(ask) obj_list.append(Person) for item in obj_list: print(item()) werther None jack \u003c__main__.Person object at 0x05B56E10\u003e å‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ def ret_fanc(): print(\"è¿”å›å‡½æ•°\") return ask my_ask = ret_fanc() my_ask() def ret_fanc(): print(\"è¿”å›å‡½æ•°\") return ask my_ask = ret_fanc() my_ask(\"tom\") my_askæ˜¯ret_fancå‡½æ•°æ‰§è¡Œè¿”å›çš„askå‡½æ•°å¯¹è±¡ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥åƒæ“ä½œaskå‡½æ•°ä¸€æ ·æ“ä½œå®ƒ ","date":"2019-11-22","objectID":"/posts/python%E4%B8%87%E7%89%A9%E7%9A%86%E5%AF%B9%E8%B1%A1/:1:0","tags":["Python"],"title":"Pythonä¸‡ç‰©çš†å¯¹è±¡","uri":"/posts/python%E4%B8%87%E7%89%A9%E7%9A%86%E5%AF%B9%E8%B1%A1/"},{"categories":["Python"],"content":"type_class_objectçš„å…³ç³» typeæœ‰ä¸¤ç§ç”¨æ³•ï¼Œä¸€ç§æ˜¯ç”Ÿæˆä¸€ä¸ªç±»ï¼Œç¬¬äºŒç§å°±æ˜¯è¿”å›å¯¹è±¡çš„ç±»å‹ \u003e\u003e\u003e a = 1 \u003e\u003e\u003e type(a) \u003cclass 'int'\u003e \u003e\u003e\u003e type(int) \u003cclass 'type'\u003e strä¹Ÿä¸€æ · \u003e\u003e\u003e b = \"abc\" \u003e\u003e\u003e type(b) \u003cclass 'str'\u003e \u003e\u003e\u003e type(str) \u003cclass 'type'\u003e è‡ªå·±å®šä¹‰çš„ç±»ä¹Ÿæ˜¯å¦‚æ­¤ \u003e\u003e\u003e class Student: ... pass ... \u003e\u003e\u003e stu = Student() \u003e\u003e\u003e type(stu) \u003cclass '__main__.Student'\u003e \u003e\u003e\u003e type(Student) \u003cclass 'type'\u003e ä»ä¸Šé¢çš„è¾“å‡ºç»“æœå¯ä»¥çŸ¥é“type -\u003e class -\u003e objï¼Œtypeç”Ÿæˆäº†ç±»ï¼Œç„¶åç±»å®ä¾‹åŒ–æˆäº†å¯¹è±¡ objectæ˜¯æœ€é¡¶å±‚çš„åŸºç±»ï¼Œå¦‚æœä¸€ä¸ªç±»æ²¡æœ‰ç»§æ‰¿ç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»çš„åŸºç±»å°±æ˜¯object \u003e\u003e\u003e Student.__bases__ (\u003cclass 'object'\u003e,) \u003e\u003e\u003e class MyStudent(Student): ... pass ... \u003e\u003e\u003e MyStudent.__bases__ (\u003cclass '__main__.Student'\u003e,) Pythonä¸­ä¸‡ç‰©çš†å¯¹è±¡ï¼Œé‚£ä¹ˆtypeä¹Ÿæ˜¯ä¸€ä¸ªç±»ï¼Œtypeä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ \u003e\u003e\u003e type.__bases__ (\u003cclass 'object'\u003e,) \u003e\u003e\u003e type(object) \u003cclass 'type'\u003e \u003e\u003e\u003e object.__bases__ () å¯ä»¥çœ‹åˆ°objectæ²¡æœ‰åŸºç±»ï¼Œä½†æ˜¯objectæ˜¯é€šè¿‡typeå®ä¾‹åŒ–çš„ï¼Œæ‰€ä»¥è¿™é‡Œå°±å½¢æˆäº†ä¸€ä¸ªç¯è·¯ ","date":"2019-11-22","objectID":"/posts/python%E4%B8%87%E7%89%A9%E7%9A%86%E5%AF%B9%E8%B1%A1/:2:0","tags":["Python"],"title":"Pythonä¸‡ç‰©çš†å¯¹è±¡","uri":"/posts/python%E4%B8%87%E7%89%A9%E7%9A%86%E5%AF%B9%E8%B1%A1/"}]